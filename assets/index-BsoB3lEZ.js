(function(){const nt=document.createElement("link").relList;if(nt&&nt.supports&&nt.supports("modulepreload"))return;for(const gt of document.querySelectorAll('link[rel="modulepreload"]'))ft(gt);new MutationObserver(gt=>{for(const mt of gt)if(mt.type==="childList")for(const yt of mt.addedNodes)yt.tagName==="LINK"&&yt.rel==="modulepreload"&&ft(yt)}).observe(document,{childList:!0,subtree:!0});function ot(gt){const mt={};return gt.integrity&&(mt.integrity=gt.integrity),gt.referrerPolicy&&(mt.referrerPolicy=gt.referrerPolicy),gt.crossOrigin==="use-credentials"?mt.credentials="include":gt.crossOrigin==="anonymous"?mt.credentials="omit":mt.credentials="same-origin",mt}function ft(gt){if(gt.ep)return;gt.ep=!0;const mt=ot(gt);fetch(gt.href,mt)}})();function getDefaultExportFromCjs(tt){return tt&&tt.__esModule&&Object.prototype.hasOwnProperty.call(tt,"default")?tt.default:tt}function getAugmentedNamespace(tt){if(Object.prototype.hasOwnProperty.call(tt,"__esModule"))return tt;var nt=tt.default;if(typeof nt=="function"){var ot=function ft(){var gt=!1;try{gt=this instanceof ft}catch{}return gt?Reflect.construct(nt,arguments,this.constructor):nt.apply(this,arguments)};ot.prototype=nt.prototype}else ot={};return Object.defineProperty(ot,"__esModule",{value:!0}),Object.keys(tt).forEach(function(ft){var gt=Object.getOwnPropertyDescriptor(tt,ft);Object.defineProperty(ot,ft,gt.get?gt:{enumerable:!0,get:function(){return tt[ft]}})}),ot}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var tt=Symbol.for("react.transitional.element"),nt=Symbol.for("react.fragment");function ot(ft,gt,mt){var yt=null;if(mt!==void 0&&(yt=""+mt),gt.key!==void 0&&(yt=""+gt.key),"key"in gt){mt={};for(var _t in gt)_t!=="key"&&(mt[_t]=gt[_t])}else mt=gt;return gt=mt.ref,{$$typeof:tt,type:ft,key:yt,ref:gt!==void 0?gt:null,props:mt}}return reactJsxRuntime_production.Fragment=nt,reactJsxRuntime_production.jsx=ot,reactJsxRuntime_production.jsxs=ot,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var tt=Symbol.for("react.transitional.element"),nt=Symbol.for("react.portal"),ot=Symbol.for("react.fragment"),ft=Symbol.for("react.strict_mode"),gt=Symbol.for("react.profiler"),mt=Symbol.for("react.consumer"),yt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),St=Symbol.for("react.memo"),At=Symbol.for("react.lazy"),Ct=Symbol.iterator;function Ot(Ht){return Ht===null||typeof Ht!="object"?null:(Ht=Ct&&Ht[Ct]||Ht["@@iterator"],typeof Ht=="function"?Ht:null)}var Dt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ut=Object.assign,Xt={};function Pt(Ht,sn,nn){this.props=Ht,this.context=sn,this.refs=Xt,this.updater=nn||Dt}Pt.prototype.isReactComponent={},Pt.prototype.setState=function(Ht,sn){if(typeof Ht!="object"&&typeof Ht!="function"&&Ht!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ht,sn,"setState")},Pt.prototype.forceUpdate=function(Ht){this.updater.enqueueForceUpdate(this,Ht,"forceUpdate")};function Jt(){}Jt.prototype=Pt.prototype;function Kt(Ht,sn,nn){this.props=Ht,this.context=sn,this.refs=Xt,this.updater=nn||Dt}var Nt=Kt.prototype=new Jt;Nt.constructor=Kt,Ut(Nt,Pt.prototype),Nt.isPureReactComponent=!0;var jt=Array.isArray,kt={H:null,A:null,T:null,S:null,V:null},Zt=Object.prototype.hasOwnProperty;function Ft(Ht,sn,nn,pn,gn,Be){return nn=Be.ref,{$$typeof:tt,type:Ht,key:sn,ref:nn!==void 0?nn:null,props:Be}}function It(Ht,sn){return Ft(Ht.type,sn,void 0,void 0,void 0,Ht.props)}function Wt(Ht){return typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===tt}function Qt(Ht){var sn={"=":"=0",":":"=2"};return"$"+Ht.replace(/[=:]/g,function(nn){return sn[nn]})}var me=/\/+/g;function rn(Ht,sn){return typeof Ht=="object"&&Ht!==null&&Ht.key!=null?Qt(""+Ht.key):sn.toString(36)}function Dn(){}function Mn(Ht){switch(Ht.status){case"fulfilled":return Ht.value;case"rejected":throw Ht.reason;default:switch(typeof Ht.status=="string"?Ht.then(Dn,Dn):(Ht.status="pending",Ht.then(function(sn){Ht.status==="pending"&&(Ht.status="fulfilled",Ht.value=sn)},function(sn){Ht.status==="pending"&&(Ht.status="rejected",Ht.reason=sn)})),Ht.status){case"fulfilled":return Ht.value;case"rejected":throw Ht.reason}}throw Ht}function $n(Ht,sn,nn,pn,gn){var Be=typeof Ht;(Be==="undefined"||Be==="boolean")&&(Ht=null);var xn=!1;if(Ht===null)xn=!0;else switch(Be){case"bigint":case"string":case"number":xn=!0;break;case"object":switch(Ht.$$typeof){case tt:case nt:xn=!0;break;case At:return xn=Ht._init,$n(xn(Ht._payload),sn,nn,pn,gn)}}if(xn)return gn=gn(Ht),xn=pn===""?"."+rn(Ht,0):pn,jt(gn)?(nn="",xn!=null&&(nn=xn.replace(me,"$&/")+"/"),$n(gn,sn,nn,"",function(Yn){return Yn})):gn!=null&&(Wt(gn)&&(gn=It(gn,nn+(gn.key==null||Ht&&Ht.key===gn.key?"":(""+gn.key).replace(me,"$&/")+"/")+xn)),sn.push(gn)),1;xn=0;var qn=pn===""?".":pn+":";if(jt(Ht))for(var Bn=0;Bn<Ht.length;Bn++)pn=Ht[Bn],Be=qn+rn(pn,Bn),xn+=$n(pn,sn,nn,Be,gn);else if(Bn=Ot(Ht),typeof Bn=="function")for(Ht=Bn.call(Ht),Bn=0;!(pn=Ht.next()).done;)pn=pn.value,Be=qn+rn(pn,Bn++),xn+=$n(pn,sn,nn,Be,gn);else if(Be==="object"){if(typeof Ht.then=="function")return $n(Mn(Ht),sn,nn,pn,gn);throw sn=String(Ht),Error("Objects are not valid as a React child (found: "+(sn==="[object Object]"?"object with keys {"+Object.keys(Ht).join(", ")+"}":sn)+"). If you meant to render a collection of children, use an array instead.")}return xn}function on(Ht,sn,nn){if(Ht==null)return Ht;var pn=[],gn=0;return $n(Ht,pn,"","",function(Be){return sn.call(nn,Be,gn++)}),pn}function yn(Ht){if(Ht._status===-1){var sn=Ht._result;sn=sn(),sn.then(function(nn){(Ht._status===0||Ht._status===-1)&&(Ht._status=1,Ht._result=nn)},function(nn){(Ht._status===0||Ht._status===-1)&&(Ht._status=2,Ht._result=nn)}),Ht._status===-1&&(Ht._status=0,Ht._result=sn)}if(Ht._status===1)return Ht._result.default;throw Ht._result}var bn=typeof reportError=="function"?reportError:function(Ht){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var sn=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ht=="object"&&Ht!==null&&typeof Ht.message=="string"?String(Ht.message):String(Ht),error:Ht});if(!window.dispatchEvent(sn))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ht);return}console.error(Ht)};function On(){}return react_production.Children={map:on,forEach:function(Ht,sn,nn){on(Ht,function(){sn.apply(this,arguments)},nn)},count:function(Ht){var sn=0;return on(Ht,function(){sn++}),sn},toArray:function(Ht){return on(Ht,function(sn){return sn})||[]},only:function(Ht){if(!Wt(Ht))throw Error("React.Children.only expected to receive a single React element child.");return Ht}},react_production.Component=Pt,react_production.Fragment=ot,react_production.Profiler=gt,react_production.PureComponent=Kt,react_production.StrictMode=ft,react_production.Suspense=Tt,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=kt,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(Ht){return kt.H.useMemoCache(Ht)}},react_production.cache=function(Ht){return function(){return Ht.apply(null,arguments)}},react_production.cloneElement=function(Ht,sn,nn){if(Ht==null)throw Error("The argument must be a React element, but you passed "+Ht+".");var pn=Ut({},Ht.props),gn=Ht.key,Be=void 0;if(sn!=null)for(xn in sn.ref!==void 0&&(Be=void 0),sn.key!==void 0&&(gn=""+sn.key),sn)!Zt.call(sn,xn)||xn==="key"||xn==="__self"||xn==="__source"||xn==="ref"&&sn.ref===void 0||(pn[xn]=sn[xn]);var xn=arguments.length-2;if(xn===1)pn.children=nn;else if(1<xn){for(var qn=Array(xn),Bn=0;Bn<xn;Bn++)qn[Bn]=arguments[Bn+2];pn.children=qn}return Ft(Ht.type,gn,void 0,void 0,Be,pn)},react_production.createContext=function(Ht){return Ht={$$typeof:yt,_currentValue:Ht,_currentValue2:Ht,_threadCount:0,Provider:null,Consumer:null},Ht.Provider=Ht,Ht.Consumer={$$typeof:mt,_context:Ht},Ht},react_production.createElement=function(Ht,sn,nn){var pn,gn={},Be=null;if(sn!=null)for(pn in sn.key!==void 0&&(Be=""+sn.key),sn)Zt.call(sn,pn)&&pn!=="key"&&pn!=="__self"&&pn!=="__source"&&(gn[pn]=sn[pn]);var xn=arguments.length-2;if(xn===1)gn.children=nn;else if(1<xn){for(var qn=Array(xn),Bn=0;Bn<xn;Bn++)qn[Bn]=arguments[Bn+2];gn.children=qn}if(Ht&&Ht.defaultProps)for(pn in xn=Ht.defaultProps,xn)gn[pn]===void 0&&(gn[pn]=xn[pn]);return Ft(Ht,Be,void 0,void 0,null,gn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(Ht){return{$$typeof:_t,render:Ht}},react_production.isValidElement=Wt,react_production.lazy=function(Ht){return{$$typeof:At,_payload:{_status:-1,_result:Ht},_init:yn}},react_production.memo=function(Ht,sn){return{$$typeof:St,type:Ht,compare:sn===void 0?null:sn}},react_production.startTransition=function(Ht){var sn=kt.T,nn={};kt.T=nn;try{var pn=Ht(),gn=kt.S;gn!==null&&gn(nn,pn),typeof pn=="object"&&pn!==null&&typeof pn.then=="function"&&pn.then(On,bn)}catch(Be){bn(Be)}finally{kt.T=sn}},react_production.unstable_useCacheRefresh=function(){return kt.H.useCacheRefresh()},react_production.use=function(Ht){return kt.H.use(Ht)},react_production.useActionState=function(Ht,sn,nn){return kt.H.useActionState(Ht,sn,nn)},react_production.useCallback=function(Ht,sn){return kt.H.useCallback(Ht,sn)},react_production.useContext=function(Ht){return kt.H.useContext(Ht)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(Ht,sn){return kt.H.useDeferredValue(Ht,sn)},react_production.useEffect=function(Ht,sn,nn){var pn=kt.H;if(typeof nn=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return pn.useEffect(Ht,sn)},react_production.useId=function(){return kt.H.useId()},react_production.useImperativeHandle=function(Ht,sn,nn){return kt.H.useImperativeHandle(Ht,sn,nn)},react_production.useInsertionEffect=function(Ht,sn){return kt.H.useInsertionEffect(Ht,sn)},react_production.useLayoutEffect=function(Ht,sn){return kt.H.useLayoutEffect(Ht,sn)},react_production.useMemo=function(Ht,sn){return kt.H.useMemo(Ht,sn)},react_production.useOptimistic=function(Ht,sn){return kt.H.useOptimistic(Ht,sn)},react_production.useReducer=function(Ht,sn,nn){return kt.H.useReducer(Ht,sn,nn)},react_production.useRef=function(Ht){return kt.H.useRef(Ht)},react_production.useState=function(Ht){return kt.H.useState(Ht)},react_production.useSyncExternalStore=function(Ht,sn,nn){return kt.H.useSyncExternalStore(Ht,sn,nn)},react_production.useTransition=function(){return kt.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const u$3=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(tt){function nt(on,yn){var bn=on.length;on.push(yn);t:for(;0<bn;){var On=bn-1>>>1,Ht=on[On];if(0<gt(Ht,yn))on[On]=yn,on[bn]=Ht,bn=On;else break t}}function ot(on){return on.length===0?null:on[0]}function ft(on){if(on.length===0)return null;var yn=on[0],bn=on.pop();if(bn!==yn){on[0]=bn;t:for(var On=0,Ht=on.length,sn=Ht>>>1;On<sn;){var nn=2*(On+1)-1,pn=on[nn],gn=nn+1,Be=on[gn];if(0>gt(pn,bn))gn<Ht&&0>gt(Be,pn)?(on[On]=Be,on[gn]=bn,On=gn):(on[On]=pn,on[nn]=bn,On=nn);else if(gn<Ht&&0>gt(Be,bn))on[On]=Be,on[gn]=bn,On=gn;else break t}}return yn}function gt(on,yn){var bn=on.sortIndex-yn.sortIndex;return bn!==0?bn:on.id-yn.id}if(tt.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var mt=performance;tt.unstable_now=function(){return mt.now()}}else{var yt=Date,_t=yt.now();tt.unstable_now=function(){return yt.now()-_t}}var Tt=[],St=[],At=1,Ct=null,Ot=3,Dt=!1,Ut=!1,Xt=!1,Pt=!1,Jt=typeof setTimeout=="function"?setTimeout:null,Kt=typeof clearTimeout=="function"?clearTimeout:null,Nt=typeof setImmediate<"u"?setImmediate:null;function jt(on){for(var yn=ot(St);yn!==null;){if(yn.callback===null)ft(St);else if(yn.startTime<=on)ft(St),yn.sortIndex=yn.expirationTime,nt(Tt,yn);else break;yn=ot(St)}}function kt(on){if(Xt=!1,jt(on),!Ut)if(ot(Tt)!==null)Ut=!0,Zt||(Zt=!0,rn());else{var yn=ot(St);yn!==null&&$n(kt,yn.startTime-on)}}var Zt=!1,Ft=-1,It=5,Wt=-1;function Qt(){return Pt?!0:!(tt.unstable_now()-Wt<It)}function me(){if(Pt=!1,Zt){var on=tt.unstable_now();Wt=on;var yn=!0;try{t:{Ut=!1,Xt&&(Xt=!1,Kt(Ft),Ft=-1),Dt=!0;var bn=Ot;try{e:{for(jt(on),Ct=ot(Tt);Ct!==null&&!(Ct.expirationTime>on&&Qt());){var On=Ct.callback;if(typeof On=="function"){Ct.callback=null,Ot=Ct.priorityLevel;var Ht=On(Ct.expirationTime<=on);if(on=tt.unstable_now(),typeof Ht=="function"){Ct.callback=Ht,jt(on),yn=!0;break e}Ct===ot(Tt)&&ft(Tt),jt(on)}else ft(Tt);Ct=ot(Tt)}if(Ct!==null)yn=!0;else{var sn=ot(St);sn!==null&&$n(kt,sn.startTime-on),yn=!1}}break t}finally{Ct=null,Ot=bn,Dt=!1}yn=void 0}}finally{yn?rn():Zt=!1}}}var rn;if(typeof Nt=="function")rn=function(){Nt(me)};else if(typeof MessageChannel<"u"){var Dn=new MessageChannel,Mn=Dn.port2;Dn.port1.onmessage=me,rn=function(){Mn.postMessage(null)}}else rn=function(){Jt(me,0)};function $n(on,yn){Ft=Jt(function(){on(tt.unstable_now())},yn)}tt.unstable_IdlePriority=5,tt.unstable_ImmediatePriority=1,tt.unstable_LowPriority=4,tt.unstable_NormalPriority=3,tt.unstable_Profiling=null,tt.unstable_UserBlockingPriority=2,tt.unstable_cancelCallback=function(on){on.callback=null},tt.unstable_forceFrameRate=function(on){0>on||125<on?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):It=0<on?Math.floor(1e3/on):5},tt.unstable_getCurrentPriorityLevel=function(){return Ot},tt.unstable_next=function(on){switch(Ot){case 1:case 2:case 3:var yn=3;break;default:yn=Ot}var bn=Ot;Ot=yn;try{return on()}finally{Ot=bn}},tt.unstable_requestPaint=function(){Pt=!0},tt.unstable_runWithPriority=function(on,yn){switch(on){case 1:case 2:case 3:case 4:case 5:break;default:on=3}var bn=Ot;Ot=on;try{return yn()}finally{Ot=bn}},tt.unstable_scheduleCallback=function(on,yn,bn){var On=tt.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?On+bn:On):bn=On,on){case 1:var Ht=-1;break;case 2:Ht=250;break;case 5:Ht=1073741823;break;case 4:Ht=1e4;break;default:Ht=5e3}return Ht=bn+Ht,on={id:At++,callback:yn,priorityLevel:on,startTime:bn,expirationTime:Ht,sortIndex:-1},bn>On?(on.sortIndex=bn,nt(St,on),ot(Tt)===null&&on===ot(St)&&(Xt?(Kt(Ft),Ft=-1):Xt=!0,$n(kt,bn-On))):(on.sortIndex=Ht,nt(Tt,on),Ut||Dt||(Ut=!0,Zt||(Zt=!0,rn()))),on},tt.unstable_shouldYield=Qt,tt.unstable_wrapCallback=function(on){var yn=Ot;return function(){var bn=Ot;Ot=yn;try{return on.apply(this,arguments)}finally{Ot=bn}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var tt=requireReact();function nt(Tt){var St="https://react.dev/errors/"+Tt;if(1<arguments.length){St+="?args[]="+encodeURIComponent(arguments[1]);for(var At=2;At<arguments.length;At++)St+="&args[]="+encodeURIComponent(arguments[At])}return"Minified React error #"+Tt+"; visit "+St+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ot(){}var ft={d:{f:ot,r:function(){throw Error(nt(522))},D:ot,C:ot,L:ot,m:ot,X:ot,S:ot,M:ot},p:0,findDOMNode:null},gt=Symbol.for("react.portal");function mt(Tt,St,At){var Ct=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gt,key:Ct==null?null:""+Ct,children:Tt,containerInfo:St,implementation:At}}var yt=tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _t(Tt,St){if(Tt==="font")return"";if(typeof St=="string")return St==="use-credentials"?St:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft,reactDom_production.createPortal=function(Tt,St){var At=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!St||St.nodeType!==1&&St.nodeType!==9&&St.nodeType!==11)throw Error(nt(299));return mt(Tt,St,null,At)},reactDom_production.flushSync=function(Tt){var St=yt.T,At=ft.p;try{if(yt.T=null,ft.p=2,Tt)return Tt()}finally{yt.T=St,ft.p=At,ft.d.f()}},reactDom_production.preconnect=function(Tt,St){typeof Tt=="string"&&(St?(St=St.crossOrigin,St=typeof St=="string"?St==="use-credentials"?St:"":void 0):St=null,ft.d.C(Tt,St))},reactDom_production.prefetchDNS=function(Tt){typeof Tt=="string"&&ft.d.D(Tt)},reactDom_production.preinit=function(Tt,St){if(typeof Tt=="string"&&St&&typeof St.as=="string"){var At=St.as,Ct=_t(At,St.crossOrigin),Ot=typeof St.integrity=="string"?St.integrity:void 0,Dt=typeof St.fetchPriority=="string"?St.fetchPriority:void 0;At==="style"?ft.d.S(Tt,typeof St.precedence=="string"?St.precedence:void 0,{crossOrigin:Ct,integrity:Ot,fetchPriority:Dt}):At==="script"&&ft.d.X(Tt,{crossOrigin:Ct,integrity:Ot,fetchPriority:Dt,nonce:typeof St.nonce=="string"?St.nonce:void 0})}},reactDom_production.preinitModule=function(Tt,St){if(typeof Tt=="string")if(typeof St=="object"&&St!==null){if(St.as==null||St.as==="script"){var At=_t(St.as,St.crossOrigin);ft.d.M(Tt,{crossOrigin:At,integrity:typeof St.integrity=="string"?St.integrity:void 0,nonce:typeof St.nonce=="string"?St.nonce:void 0})}}else St==null&&ft.d.M(Tt)},reactDom_production.preload=function(Tt,St){if(typeof Tt=="string"&&typeof St=="object"&&St!==null&&typeof St.as=="string"){var At=St.as,Ct=_t(At,St.crossOrigin);ft.d.L(Tt,At,{crossOrigin:Ct,integrity:typeof St.integrity=="string"?St.integrity:void 0,nonce:typeof St.nonce=="string"?St.nonce:void 0,type:typeof St.type=="string"?St.type:void 0,fetchPriority:typeof St.fetchPriority=="string"?St.fetchPriority:void 0,referrerPolicy:typeof St.referrerPolicy=="string"?St.referrerPolicy:void 0,imageSrcSet:typeof St.imageSrcSet=="string"?St.imageSrcSet:void 0,imageSizes:typeof St.imageSizes=="string"?St.imageSizes:void 0,media:typeof St.media=="string"?St.media:void 0})}},reactDom_production.preloadModule=function(Tt,St){if(typeof Tt=="string")if(St){var At=_t(St.as,St.crossOrigin);ft.d.m(Tt,{as:typeof St.as=="string"&&St.as!=="script"?St.as:void 0,crossOrigin:At,integrity:typeof St.integrity=="string"?St.integrity:void 0})}else ft.d.m(Tt)},reactDom_production.requestFormReset=function(Tt){ft.d.r(Tt)},reactDom_production.unstable_batchedUpdates=function(Tt,St){return Tt(St)},reactDom_production.useFormState=function(Tt,St,At){return yt.H.useFormState(Tt,St,At)},reactDom_production.useFormStatus=function(){return yt.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function tt(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tt)}catch(nt){console.error(nt)}}return tt(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var tt=requireScheduler(),nt=requireReact(),ot=requireReactDom();function ft(P){var st="https://react.dev/errors/"+P;if(1<arguments.length){st+="?args[]="+encodeURIComponent(arguments[1]);for(var ht=2;ht<arguments.length;ht++)st+="&args[]="+encodeURIComponent(arguments[ht])}return"Minified React error #"+P+"; visit "+st+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function gt(P){return!(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)}function mt(P){var st=P,ht=P;if(P.alternate)for(;st.return;)st=st.return;else{P=st;do st=P,(st.flags&4098)!==0&&(ht=st.return),P=st.return;while(P)}return st.tag===3?ht:null}function yt(P){if(P.tag===13){var st=P.memoizedState;if(st===null&&(P=P.alternate,P!==null&&(st=P.memoizedState)),st!==null)return st.dehydrated}return null}function _t(P){if(mt(P)!==P)throw Error(ft(188))}function Tt(P){var st=P.alternate;if(!st){if(st=mt(P),st===null)throw Error(ft(188));return st!==P?null:P}for(var ht=P,xt=st;;){var vt=ht.return;if(vt===null)break;var Mt=vt.alternate;if(Mt===null){if(xt=vt.return,xt!==null){ht=xt;continue}break}if(vt.child===Mt.child){for(Mt=vt.child;Mt;){if(Mt===ht)return _t(vt),P;if(Mt===xt)return _t(vt),st;Mt=Mt.sibling}throw Error(ft(188))}if(ht.return!==xt.return)ht=vt,xt=Mt;else{for(var Bt=!1,Lt=vt.child;Lt;){if(Lt===ht){Bt=!0,ht=vt,xt=Mt;break}if(Lt===xt){Bt=!0,xt=vt,ht=Mt;break}Lt=Lt.sibling}if(!Bt){for(Lt=Mt.child;Lt;){if(Lt===ht){Bt=!0,ht=Mt,xt=vt;break}if(Lt===xt){Bt=!0,xt=Mt,ht=vt;break}Lt=Lt.sibling}if(!Bt)throw Error(ft(189))}}if(ht.alternate!==xt)throw Error(ft(190))}if(ht.tag!==3)throw Error(ft(188));return ht.stateNode.current===ht?P:st}function St(P){var st=P.tag;if(st===5||st===26||st===27||st===6)return P;for(P=P.child;P!==null;){if(st=St(P),st!==null)return st;P=P.sibling}return null}var At=Object.assign,Ct=Symbol.for("react.element"),Ot=Symbol.for("react.transitional.element"),Dt=Symbol.for("react.portal"),Ut=Symbol.for("react.fragment"),Xt=Symbol.for("react.strict_mode"),Pt=Symbol.for("react.profiler"),Jt=Symbol.for("react.provider"),Kt=Symbol.for("react.consumer"),Nt=Symbol.for("react.context"),jt=Symbol.for("react.forward_ref"),kt=Symbol.for("react.suspense"),Zt=Symbol.for("react.suspense_list"),Ft=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Wt=Symbol.for("react.activity"),Qt=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function rn(P){return P===null||typeof P!="object"?null:(P=me&&P[me]||P["@@iterator"],typeof P=="function"?P:null)}var Dn=Symbol.for("react.client.reference");function Mn(P){if(P==null)return null;if(typeof P=="function")return P.$$typeof===Dn?null:P.displayName||P.name||null;if(typeof P=="string")return P;switch(P){case Ut:return"Fragment";case Pt:return"Profiler";case Xt:return"StrictMode";case kt:return"Suspense";case Zt:return"SuspenseList";case Wt:return"Activity"}if(typeof P=="object")switch(P.$$typeof){case Dt:return"Portal";case Nt:return(P.displayName||"Context")+".Provider";case Kt:return(P._context.displayName||"Context")+".Consumer";case jt:var st=P.render;return P=P.displayName,P||(P=st.displayName||st.name||"",P=P!==""?"ForwardRef("+P+")":"ForwardRef"),P;case Ft:return st=P.displayName||null,st!==null?st:Mn(P.type)||"Memo";case It:st=P._payload,P=P._init;try{return Mn(P(st))}catch{}}return null}var $n=Array.isArray,on=nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yn=ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bn={pending:!1,data:null,method:null,action:null},On=[],Ht=-1;function sn(P){return{current:P}}function nn(P){0>Ht||(P.current=On[Ht],On[Ht]=null,Ht--)}function pn(P,st){Ht++,On[Ht]=P.current,P.current=st}var gn=sn(null),Be=sn(null),xn=sn(null),qn=sn(null);function Bn(P,st){switch(pn(xn,st),pn(Be,P),pn(gn,null),st.nodeType){case 9:case 11:P=(P=st.documentElement)&&(P=P.namespaceURI)?N0(P):0;break;default:if(P=st.tagName,st=st.namespaceURI)st=N0(st),P=j0(st,P);else switch(P){case"svg":P=1;break;case"math":P=2;break;default:P=0}}nn(gn),pn(gn,P)}function Yn(){nn(gn),nn(Be),nn(xn)}function Kn(P){P.memoizedState!==null&&pn(qn,P);var st=gn.current,ht=j0(st,P.type);st!==ht&&(pn(Be,P),pn(gn,ht))}function Qn(P){Be.current===P&&(nn(gn),nn(Be)),qn.current===P&&(nn(qn),xl._currentValue=bn)}var Jn=Object.prototype.hasOwnProperty,ei=tt.unstable_scheduleCallback,Ln=tt.unstable_cancelCallback,An=tt.unstable_shouldYield,gi=tt.unstable_requestPaint,Xn=tt.unstable_now,ri=tt.unstable_getCurrentPriorityLevel,cn=tt.unstable_ImmediatePriority,Pn=tt.unstable_UserBlockingPriority,Vn=tt.unstable_NormalPriority,Gn=tt.unstable_LowPriority,ai=tt.unstable_IdlePriority,oi=tt.log,fi=tt.unstable_setDisableYieldValue,zn=null,kn=null;function Hn(P){if(typeof oi=="function"&&fi(P),kn&&typeof kn.setStrictMode=="function")try{kn.setStrictMode(zn,P)}catch{}}var Nn=Math.clz32?Math.clz32:si,hi=Math.log,wi=Math.LN2;function si(P){return P>>>=0,P===0?32:31-(hi(P)/wi|0)|0}var xi=256,mi=4194304;function yi(P){var st=P&42;if(st!==0)return st;switch(P&-P){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return P&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return P&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return P}}function Yi(P,st,ht){var xt=P.pendingLanes;if(xt===0)return 0;var vt=0,Mt=P.suspendedLanes,Bt=P.pingedLanes;P=P.warmLanes;var Lt=xt&134217727;return Lt!==0?(xt=Lt&~Mt,xt!==0?vt=yi(xt):(Bt&=Lt,Bt!==0?vt=yi(Bt):ht||(ht=Lt&~P,ht!==0&&(vt=yi(ht))))):(Lt=xt&~Mt,Lt!==0?vt=yi(Lt):Bt!==0?vt=yi(Bt):ht||(ht=xt&~P,ht!==0&&(vt=yi(ht)))),vt===0?0:st!==0&&st!==vt&&(st&Mt)===0&&(Mt=vt&-vt,ht=st&-st,Mt>=ht||Mt===32&&(ht&4194048)!==0)?st:vt}function zi(P,st){return(P.pendingLanes&~(P.suspendedLanes&~P.pingedLanes)&st)===0}function cr(P,st){switch(P){case 1:case 2:case 4:case 8:case 64:return st+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return st+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dr(){var P=xi;return xi<<=1,(xi&4194048)===0&&(xi=256),P}function Xr(){var P=mi;return mi<<=1,(mi&62914560)===0&&(mi=4194304),P}function dr(P){for(var st=[],ht=0;31>ht;ht++)st.push(P);return st}function zt(P,st){P.pendingLanes|=st,st!==268435456&&(P.suspendedLanes=0,P.pingedLanes=0,P.warmLanes=0)}function bt(P,st,ht,xt,vt,Mt){var Bt=P.pendingLanes;P.pendingLanes=ht,P.suspendedLanes=0,P.pingedLanes=0,P.warmLanes=0,P.expiredLanes&=ht,P.entangledLanes&=ht,P.errorRecoveryDisabledLanes&=ht,P.shellSuspendCounter=0;var Lt=P.entanglements,pe=P.expirationTimes,un=P.hiddenUpdates;for(ht=Bt&~ht;0<ht;){var vn=31-Nn(ht),Sn=1<<vn;Lt[vn]=0,pe[vn]=-1;var fn=un[vn];if(fn!==null)for(un[vn]=null,vn=0;vn<fn.length;vn++){var dn=fn[vn];dn!==null&&(dn.lane&=-536870913)}ht&=~Sn}xt!==0&&Et(P,xt,0),Mt!==0&&vt===0&&P.tag!==0&&(P.suspendedLanes|=Mt&~(Bt&~st))}function Et(P,st,ht){P.pendingLanes|=st,P.suspendedLanes&=~st;var xt=31-Nn(st);P.entangledLanes|=st,P.entanglements[xt]=P.entanglements[xt]|1073741824|ht&4194090}function wt(P,st){var ht=P.entangledLanes|=st;for(P=P.entanglements;ht;){var xt=31-Nn(ht),vt=1<<xt;vt&st|P[xt]&st&&(P[xt]|=st),ht&=~vt}}function Rt(P){switch(P){case 2:P=1;break;case 8:P=4;break;case 32:P=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:P=128;break;case 268435456:P=134217728;break;default:P=0}return P}function $t(P){return P&=-P,2<P?8<P?(P&134217727)!==0?32:268435456:8:2}function Vt(){var P=yn.p;return P!==0?P:(P=window.event,P===void 0?32:ed(P.type))}function qt(P,st){var ht=yn.p;try{return yn.p=P,st()}finally{yn.p=ht}}var Gt=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Gt,en="__reactProps$"+Gt,de="__reactContainer$"+Gt,mn="__reactEvents$"+Gt,Cn="__reactListeners$"+Gt,hn="__reactHandles$"+Gt,wn="__reactResources$"+Gt,jn="__reactMarker$"+Gt;function Le(P){delete P[Yt],delete P[en],delete P[mn],delete P[Cn],delete P[hn]}function Tn(P){var st=P[Yt];if(st)return st;for(var ht=P.parentNode;ht;){if(st=ht[de]||ht[Yt]){if(ht=st.alternate,st.child!==null||ht!==null&&ht.child!==null)for(P=L0(P);P!==null;){if(ht=P[Yt])return ht;P=L0(P)}return st}P=ht,ht=P.parentNode}return null}function Un(P){if(P=P[Yt]||P[de]){var st=P.tag;if(st===5||st===6||st===13||st===26||st===27||st===3)return P}return null}function Wn(P){var st=P.tag;if(st===5||st===26||st===27||st===6)return P.stateNode;throw Error(ft(33))}function ni(P){var st=P[wn];return st||(st=P[wn]={hoistableStyles:new Map,hoistableScripts:new Map}),st}function pi(P){P[jn]=!0}var Zn=new Set,ti={};function bi(P,st){tn(P,st),tn(P+"Capture",st)}function tn(P,st){for(ti[P]=st,P=0;P<st.length;P++)Zn.add(st[P])}var Rn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),In={},_n={};function Ii(P){return Jn.call(_n,P)?!0:Jn.call(In,P)?!1:Rn.test(P)?_n[P]=!0:(In[P]=!0,!1)}function Mi(P,st,ht){if(Ii(st))if(ht===null)P.removeAttribute(st);else{switch(typeof ht){case"undefined":case"function":case"symbol":P.removeAttribute(st);return;case"boolean":var xt=st.toLowerCase().slice(0,5);if(xt!=="data-"&&xt!=="aria-"){P.removeAttribute(st);return}}P.setAttribute(st,""+ht)}}function Ci(P,st,ht){if(ht===null)P.removeAttribute(st);else{switch(typeof ht){case"undefined":case"function":case"symbol":case"boolean":P.removeAttribute(st);return}P.setAttribute(st,""+ht)}}function Ti(P,st,ht,xt){if(xt===null)P.removeAttribute(ht);else{switch(typeof xt){case"undefined":case"function":case"symbol":case"boolean":P.removeAttribute(ht);return}P.setAttributeNS(st,ht,""+xt)}}var Hi,pr;function Li(P){if(Hi===void 0)try{throw Error()}catch(ht){var st=ht.stack.trim().match(/\n( *(at )?)/);Hi=st&&st[1]||"",pr=-1<ht.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ht.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+P+pr}var mr=!1;function Er(P,st){if(!P||mr)return"";mr=!0;var ht=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var xt={DetermineComponentFrameRoot:function(){try{if(st){var Sn=function(){throw Error()};if(Object.defineProperty(Sn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Sn,[])}catch(dn){var fn=dn}Reflect.construct(P,[],Sn)}else{try{Sn.call()}catch(dn){fn=dn}P.call(Sn.prototype)}}else{try{throw Error()}catch(dn){fn=dn}(Sn=P())&&typeof Sn.catch=="function"&&Sn.catch(function(){})}}catch(dn){if(dn&&fn&&typeof dn.stack=="string")return[dn.stack,fn.stack]}return[null,null]}};xt.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var vt=Object.getOwnPropertyDescriptor(xt.DetermineComponentFrameRoot,"name");vt&&vt.configurable&&Object.defineProperty(xt.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Mt=xt.DetermineComponentFrameRoot(),Bt=Mt[0],Lt=Mt[1];if(Bt&&Lt){var pe=Bt.split(`
`),un=Lt.split(`
`);for(vt=xt=0;xt<pe.length&&!pe[xt].includes("DetermineComponentFrameRoot");)xt++;for(;vt<un.length&&!un[vt].includes("DetermineComponentFrameRoot");)vt++;if(xt===pe.length||vt===un.length)for(xt=pe.length-1,vt=un.length-1;1<=xt&&0<=vt&&pe[xt]!==un[vt];)vt--;for(;1<=xt&&0<=vt;xt--,vt--)if(pe[xt]!==un[vt]){if(xt!==1||vt!==1)do if(xt--,vt--,0>vt||pe[xt]!==un[vt]){var vn=`
`+pe[xt].replace(" at new "," at ");return P.displayName&&vn.includes("<anonymous>")&&(vn=vn.replace("<anonymous>",P.displayName)),vn}while(1<=xt&&0<=vt);break}}}finally{mr=!1,Error.prepareStackTrace=ht}return(ht=P?P.displayName||P.name:"")?Li(ht):""}function Ei(P){switch(P.tag){case 26:case 27:case 5:return Li(P.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 15:return Er(P.type,!1);case 11:return Er(P.type.render,!1);case 1:return Er(P.type,!0);case 31:return Li("Activity");default:return""}}function Ji(P){try{var st="";do st+=Ei(P),P=P.return;while(P);return st}catch(ht){return`
Error generating stack: `+ht.message+`
`+ht.stack}}function Vi(P){switch(typeof P){case"bigint":case"boolean":case"number":case"string":case"undefined":return P;case"object":return P;default:return""}}function fr(P){var st=P.type;return(P=P.nodeName)&&P.toLowerCase()==="input"&&(st==="checkbox"||st==="radio")}function Zi(P){var st=fr(P)?"checked":"value",ht=Object.getOwnPropertyDescriptor(P.constructor.prototype,st),xt=""+P[st];if(!P.hasOwnProperty(st)&&typeof ht<"u"&&typeof ht.get=="function"&&typeof ht.set=="function"){var vt=ht.get,Mt=ht.set;return Object.defineProperty(P,st,{configurable:!0,get:function(){return vt.call(this)},set:function(Bt){xt=""+Bt,Mt.call(this,Bt)}}),Object.defineProperty(P,st,{enumerable:ht.enumerable}),{getValue:function(){return xt},setValue:function(Bt){xt=""+Bt},stopTracking:function(){P._valueTracker=null,delete P[st]}}}}function Xa(P){P._valueTracker||(P._valueTracker=Zi(P))}function El(P){if(!P)return!1;var st=P._valueTracker;if(!st)return!0;var ht=st.getValue(),xt="";return P&&(xt=fr(P)?P.checked?"true":"false":P.value),P=xt,P!==ht?(st.setValue(P),!0):!1}function Ha(P){if(P=P||(typeof document<"u"?document:void 0),typeof P>"u")return null;try{return P.activeElement||P.body}catch{return P.body}}var Ds=/[\n"\\]/g;function xr(P){return P.replace(Ds,function(st){return"\\"+st.charCodeAt(0).toString(16)+" "})}function Ao(P,st,ht,xt,vt,Mt,Bt,Lt){P.name="",Bt!=null&&typeof Bt!="function"&&typeof Bt!="symbol"&&typeof Bt!="boolean"?P.type=Bt:P.removeAttribute("type"),st!=null?Bt==="number"?(st===0&&P.value===""||P.value!=st)&&(P.value=""+Vi(st)):P.value!==""+Vi(st)&&(P.value=""+Vi(st)):Bt!=="submit"&&Bt!=="reset"||P.removeAttribute("value"),st!=null?$o(P,Bt,Vi(st)):ht!=null?$o(P,Bt,Vi(ht)):xt!=null&&P.removeAttribute("value"),vt==null&&Mt!=null&&(P.defaultChecked=!!Mt),vt!=null&&(P.checked=vt&&typeof vt!="function"&&typeof vt!="symbol"),Lt!=null&&typeof Lt!="function"&&typeof Lt!="symbol"&&typeof Lt!="boolean"?P.name=""+Vi(Lt):P.removeAttribute("name")}function Sl(P,st,ht,xt,vt,Mt,Bt,Lt){if(Mt!=null&&typeof Mt!="function"&&typeof Mt!="symbol"&&typeof Mt!="boolean"&&(P.type=Mt),st!=null||ht!=null){if(!(Mt!=="submit"&&Mt!=="reset"||st!=null))return;ht=ht!=null?""+Vi(ht):"",st=st!=null?""+Vi(st):ht,Lt||st===P.value||(P.value=st),P.defaultValue=st}xt=xt??vt,xt=typeof xt!="function"&&typeof xt!="symbol"&&!!xt,P.checked=Lt?P.checked:!!xt,P.defaultChecked=!!xt,Bt!=null&&typeof Bt!="function"&&typeof Bt!="symbol"&&typeof Bt!="boolean"&&(P.name=Bt)}function $o(P,st,ht){st==="number"&&Ha(P.ownerDocument)===P||P.defaultValue===""+ht||(P.defaultValue=""+ht)}function sa(P,st,ht,xt){if(P=P.options,st){st={};for(var vt=0;vt<ht.length;vt++)st["$"+ht[vt]]=!0;for(ht=0;ht<P.length;ht++)vt=st.hasOwnProperty("$"+P[ht].value),P[ht].selected!==vt&&(P[ht].selected=vt),vt&&xt&&(P[ht].defaultSelected=!0)}else{for(ht=""+Vi(ht),st=null,vt=0;vt<P.length;vt++){if(P[vt].value===ht){P[vt].selected=!0,xt&&(P[vt].defaultSelected=!0);return}st!==null||P[vt].disabled||(st=P[vt])}st!==null&&(st.selected=!0)}}function Oc(P,st,ht){if(st!=null&&(st=""+Vi(st),st!==P.value&&(P.value=st),ht==null)){P.defaultValue!==st&&(P.defaultValue=st);return}P.defaultValue=ht!=null?""+Vi(ht):""}function Bc(P,st,ht,xt){if(st==null){if(xt!=null){if(ht!=null)throw Error(ft(92));if($n(xt)){if(1<xt.length)throw Error(ft(93));xt=xt[0]}ht=xt}ht==null&&(ht=""),st=ht}ht=Vi(st),P.defaultValue=ht,xt=P.textContent,xt===ht&&xt!==""&&xt!==null&&(P.value=xt)}function Za(P,st){if(st){var ht=P.firstChild;if(ht&&ht===P.lastChild&&ht.nodeType===3){ht.nodeValue=st;return}}P.textContent=st}var ld=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(P,st,ht){var xt=st.indexOf("--")===0;ht==null||typeof ht=="boolean"||ht===""?xt?P.setProperty(st,""):st==="float"?P.cssFloat="":P[st]="":xt?P.setProperty(st,ht):typeof ht!="number"||ht===0||ld.has(st)?st==="float"?P.cssFloat=ht:P[st]=(""+ht).trim():P[st]=ht+"px"}function Nc(P,st,ht){if(st!=null&&typeof st!="object")throw Error(ft(62));if(P=P.style,ht!=null){for(var xt in ht)!ht.hasOwnProperty(xt)||st!=null&&st.hasOwnProperty(xt)||(xt.indexOf("--")===0?P.setProperty(xt,""):xt==="float"?P.cssFloat="":P[xt]="");for(var vt in st)xt=st[vt],st.hasOwnProperty(vt)&&ht[vt]!==xt&&zc(P,vt,xt)}else for(var Mt in st)st.hasOwnProperty(Mt)&&zc(P,Mt,st[Mt])}function Cs(P){if(P.indexOf("-")===-1)return!1;switch(P){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ud=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(P){return ud.test(""+P)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":P}var Os=null;function Bs(P){return P=P.target||P.srcElement||window,P.correspondingUseElement&&(P=P.correspondingUseElement),P.nodeType===3?P.parentNode:P}var Ka=null,Qa=null;function jc(P){var st=Un(P);if(st&&(P=st.stateNode)){var ht=P[en]||null;t:switch(P=st.stateNode,st.type){case"input":if(Ao(P,ht.value,ht.defaultValue,ht.defaultValue,ht.checked,ht.defaultChecked,ht.type,ht.name),st=ht.name,ht.type==="radio"&&st!=null){for(ht=P;ht.parentNode;)ht=ht.parentNode;for(ht=ht.querySelectorAll('input[name="'+xr(""+st)+'"][type="radio"]'),st=0;st<ht.length;st++){var xt=ht[st];if(xt!==P&&xt.form===P.form){var vt=xt[en]||null;if(!vt)throw Error(ft(90));Ao(xt,vt.value,vt.defaultValue,vt.defaultValue,vt.checked,vt.defaultChecked,vt.type,vt.name)}}for(st=0;st<ht.length;st++)xt=ht[st],xt.form===P.form&&El(xt)}break t;case"textarea":Oc(P,ht.value,ht.defaultValue);break t;case"select":st=ht.value,st!=null&&sa(P,!!ht.multiple,st,!1)}}}var zs=!1;function kc(P,st,ht){if(zs)return P(st,ht);zs=!0;try{var xt=P(st);return xt}finally{if(zs=!1,(Ka!==null||Qa!==null)&&(us(),Ka&&(st=Ka,P=Qa,Qa=Ka=null,jc(st),P)))for(st=0;st<P.length;st++)jc(P[st])}}function Do(P,st){var ht=P.stateNode;if(ht===null)return null;var xt=ht[en]||null;if(xt===null)return null;ht=xt[st];t:switch(st){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(xt=!xt.disabled)||(P=P.type,xt=!(P==="button"||P==="input"||P==="select"||P==="textarea")),P=!xt;break t;default:P=!1}if(P)return null;if(ht&&typeof ht!="function")throw Error(ft(231,st,typeof ht));return ht}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(Hr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Ns=!1}var ua=null,js=null,_l=null;function Uc(){if(_l)return _l;var P,st=js,ht=st.length,xt,vt="value"in ua?ua.value:ua.textContent,Mt=vt.length;for(P=0;P<ht&&st[P]===vt[P];P++);var Bt=ht-P;for(xt=1;xt<=Bt&&st[ht-xt]===vt[Mt-xt];xt++);return _l=vt.slice(P,1<xt?1-xt:void 0)}function Ml(P){var st=P.keyCode;return"charCode"in P?(P=P.charCode,P===0&&st===13&&(P=13)):P=st,P===10&&(P=13),32<=P||P===13?P:0}function Tl(){return!0}function Ic(){return!1}function wr(P){function st(ht,xt,vt,Mt,Bt){this._reactName=ht,this._targetInst=vt,this.type=xt,this.nativeEvent=Mt,this.target=Bt,this.currentTarget=null;for(var Lt in P)P.hasOwnProperty(Lt)&&(ht=P[Lt],this[Lt]=ht?ht(Mt):Mt[Lt]);return this.isDefaultPrevented=(Mt.defaultPrevented!=null?Mt.defaultPrevented:Mt.returnValue===!1)?Tl:Ic,this.isPropagationStopped=Ic,this}return At(st.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ht=this.nativeEvent;ht&&(ht.preventDefault?ht.preventDefault():typeof ht.returnValue!="unknown"&&(ht.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var ht=this.nativeEvent;ht&&(ht.stopPropagation?ht.stopPropagation():typeof ht.cancelBubble!="unknown"&&(ht.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),st}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(P){return P.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Al=wr(Ca),Oo=At({},Ca,{view:0,detail:0}),cd=wr(Oo),ks,Us,Bo,$l=At({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ls,button:0,buttons:0,relatedTarget:function(P){return P.relatedTarget===void 0?P.fromElement===P.srcElement?P.toElement:P.fromElement:P.relatedTarget},movementX:function(P){return"movementX"in P?P.movementX:(P!==Bo&&(Bo&&P.type==="mousemove"?(ks=P.screenX-Bo.screenX,Us=P.screenY-Bo.screenY):Us=ks=0,Bo=P),ks)},movementY:function(P){return"movementY"in P?P.movementY:Us}}),Lc=wr($l),fd=At({},$l,{dataTransfer:0}),hd=wr(fd),dd=At({},Oo,{relatedTarget:0}),Is=wr(dd),gd=At({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),pd=wr(gd),md=At({},Ca,{clipboardData:function(P){return"clipboardData"in P?P.clipboardData:window.clipboardData}}),xd=wr(md),wd=At({},Ca,{data:0}),Vc=wr(wd),yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ed(P){var st=this.nativeEvent;return st.getModifierState?st.getModifierState(P):(P=bd[P])?!!st[P]:!1}function Ls(){return Ed}var Sd=At({},Oo,{key:function(P){if(P.key){var st=yd[P.key]||P.key;if(st!=="Unidentified")return st}return P.type==="keypress"?(P=Ml(P),P===13?"Enter":String.fromCharCode(P)):P.type==="keydown"||P.type==="keyup"?vd[P.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ls,charCode:function(P){return P.type==="keypress"?Ml(P):0},keyCode:function(P){return P.type==="keydown"||P.type==="keyup"?P.keyCode:0},which:function(P){return P.type==="keypress"?Ml(P):P.type==="keydown"||P.type==="keyup"?P.keyCode:0}}),Rd=wr(Sd),_d=At({},$l,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=wr(_d),Md=At({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ls}),Td=wr(Md),Ad=At({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),$d=wr(Ad),Dd=At({},$l,{deltaX:function(P){return"deltaX"in P?P.deltaX:"wheelDeltaX"in P?-P.wheelDeltaX:0},deltaY:function(P){return"deltaY"in P?P.deltaY:"wheelDeltaY"in P?-P.wheelDeltaY:"wheelDelta"in P?-P.wheelDelta:0},deltaZ:0,deltaMode:0}),Cd=wr(Dd),Od=At({},Ca,{newState:0,oldState:0}),Bd=wr(Od),zd=[9,13,27,32],Vs=Hr&&"CompositionEvent"in window,zo=null;Hr&&"documentMode"in document&&(zo=document.documentMode);var Nd=Hr&&"TextEvent"in window&&!zo,Yc=Hr&&(!Vs||zo&&8<zo&&11>=zo),Gc=" ",Pc=!1;function Fc(P,st){switch(P){case"keyup":return zd.indexOf(st.keyCode)!==-1;case"keydown":return st.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xc(P){return P=P.detail,typeof P=="object"&&"data"in P?P.data:null}var Ja=!1;function jd(P,st){switch(P){case"compositionend":return Xc(st);case"keypress":return st.which!==32?null:(Pc=!0,Gc);case"textInput":return P=st.data,P===Gc&&Pc?null:P;default:return null}}function kd(P,st){if(Ja)return P==="compositionend"||!Vs&&Fc(P,st)?(P=Uc(),_l=js=ua=null,Ja=!1,P):null;switch(P){case"paste":return null;case"keypress":if(!(st.ctrlKey||st.altKey||st.metaKey)||st.ctrlKey&&st.altKey){if(st.char&&1<st.char.length)return st.char;if(st.which)return String.fromCharCode(st.which)}return null;case"compositionend":return Yc&&st.locale!=="ko"?null:st.data;default:return null}}var Ud={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(P){var st=P&&P.nodeName&&P.nodeName.toLowerCase();return st==="input"?!!Ud[P.type]:st==="textarea"}function Zc(P,st,ht,xt){Ka?Qa?Qa.push(xt):Qa=[xt]:Ka=xt,st=ps(st,"onChange"),0<st.length&&(ht=new Al("onChange","change",null,ht,xt),P.push({event:ht,listeners:st}))}var No=null,jo=null;function Id(P){D0(P,0)}function Dl(P){var st=Wn(P);if(El(st))return P}function Kc(P,st){if(P==="change")return st}var Qc=!1;if(Hr){var qs;if(Hr){var Ys="oninput"in document;if(!Ys){var Jc=document.createElement("div");Jc.setAttribute("oninput","return;"),Ys=typeof Jc.oninput=="function"}qs=Ys}else qs=!1;Qc=qs&&(!document.documentMode||9<document.documentMode)}function Wc(){No&&(No.detachEvent("onpropertychange",tf),jo=No=null)}function tf(P){if(P.propertyName==="value"&&Dl(jo)){var st=[];Zc(st,jo,P,Bs(P)),kc(Id,st)}}function Ld(P,st,ht){P==="focusin"?(Wc(),No=st,jo=ht,No.attachEvent("onpropertychange",tf)):P==="focusout"&&Wc()}function Vd(P){if(P==="selectionchange"||P==="keyup"||P==="keydown")return Dl(jo)}function qd(P,st){if(P==="click")return Dl(st)}function Yd(P,st){if(P==="input"||P==="change")return Dl(st)}function Gd(P,st){return P===st&&(P!==0||1/P===1/st)||P!==P&&st!==st}var Sr=typeof Object.is=="function"?Object.is:Gd;function ko(P,st){if(Sr(P,st))return!0;if(typeof P!="object"||P===null||typeof st!="object"||st===null)return!1;var ht=Object.keys(P),xt=Object.keys(st);if(ht.length!==xt.length)return!1;for(xt=0;xt<ht.length;xt++){var vt=ht[xt];if(!Jn.call(st,vt)||!Sr(P[vt],st[vt]))return!1}return!0}function ef(P){for(;P&&P.firstChild;)P=P.firstChild;return P}function nf(P,st){var ht=ef(P);P=0;for(var xt;ht;){if(ht.nodeType===3){if(xt=P+ht.textContent.length,P<=st&&xt>=st)return{node:ht,offset:st-P};P=xt}t:{for(;ht;){if(ht.nextSibling){ht=ht.nextSibling;break t}ht=ht.parentNode}ht=void 0}ht=ef(ht)}}function rf(P,st){return P&&st?P===st?!0:P&&P.nodeType===3?!1:st&&st.nodeType===3?rf(P,st.parentNode):"contains"in P?P.contains(st):P.compareDocumentPosition?!!(P.compareDocumentPosition(st)&16):!1:!1}function af(P){P=P!=null&&P.ownerDocument!=null&&P.ownerDocument.defaultView!=null?P.ownerDocument.defaultView:window;for(var st=Ha(P.document);st instanceof P.HTMLIFrameElement;){try{var ht=typeof st.contentWindow.location.href=="string"}catch{ht=!1}if(ht)P=st.contentWindow;else break;st=Ha(P.document)}return st}function Gs(P){var st=P&&P.nodeName&&P.nodeName.toLowerCase();return st&&(st==="input"&&(P.type==="text"||P.type==="search"||P.type==="tel"||P.type==="url"||P.type==="password")||st==="textarea"||P.contentEditable==="true")}var Pd=Hr&&"documentMode"in document&&11>=document.documentMode,Wa=null,Ps=null,Uo=null,Fs=!1;function of(P,st,ht){var xt=ht.window===ht?ht.document:ht.nodeType===9?ht:ht.ownerDocument;Fs||Wa==null||Wa!==Ha(xt)||(xt=Wa,"selectionStart"in xt&&Gs(xt)?xt={start:xt.selectionStart,end:xt.selectionEnd}:(xt=(xt.ownerDocument&&xt.ownerDocument.defaultView||window).getSelection(),xt={anchorNode:xt.anchorNode,anchorOffset:xt.anchorOffset,focusNode:xt.focusNode,focusOffset:xt.focusOffset}),Uo&&ko(Uo,xt)||(Uo=xt,xt=ps(Ps,"onSelect"),0<xt.length&&(st=new Al("onSelect","select",null,st,ht),P.push({event:st,listeners:xt}),st.target=Wa)))}function Oa(P,st){var ht={};return ht[P.toLowerCase()]=st.toLowerCase(),ht["Webkit"+P]="webkit"+st,ht["Moz"+P]="moz"+st,ht}var to={animationend:Oa("Animation","AnimationEnd"),animationiteration:Oa("Animation","AnimationIteration"),animationstart:Oa("Animation","AnimationStart"),transitionrun:Oa("Transition","TransitionRun"),transitionstart:Oa("Transition","TransitionStart"),transitioncancel:Oa("Transition","TransitionCancel"),transitionend:Oa("Transition","TransitionEnd")},Xs={},lf={};Hr&&(lf=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function Ba(P){if(Xs[P])return Xs[P];if(!to[P])return P;var st=to[P],ht;for(ht in st)if(st.hasOwnProperty(ht)&&ht in lf)return Xs[P]=st[ht];return P}var sf=Ba("animationend"),uf=Ba("animationiteration"),cf=Ba("animationstart"),Fd=Ba("transitionrun"),Xd=Ba("transitionstart"),Hd=Ba("transitioncancel"),ff=Ba("transitionend"),hf=new Map,Hs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hs.push("scrollEnd");function Ur(P,st){hf.set(P,st),bi(st,[P])}var df=new WeakMap;function Cr(P,st){if(typeof P=="object"&&P!==null){var ht=df.get(P);return ht!==void 0?ht:(st={value:P,source:st,stack:Ji(st)},df.set(P,st),st)}return{value:P,source:st,stack:Ji(st)}}var Or=[],eo=0,Zs=0;function Cl(){for(var P=eo,st=Zs=eo=0;st<P;){var ht=Or[st];Or[st++]=null;var xt=Or[st];Or[st++]=null;var vt=Or[st];Or[st++]=null;var Mt=Or[st];if(Or[st++]=null,xt!==null&&vt!==null){var Bt=xt.pending;Bt===null?vt.next=vt:(vt.next=Bt.next,Bt.next=vt),xt.pending=vt}Mt!==0&&gf(ht,vt,Mt)}}function Ol(P,st,ht,xt){Or[eo++]=P,Or[eo++]=st,Or[eo++]=ht,Or[eo++]=xt,Zs|=xt,P.lanes|=xt,P=P.alternate,P!==null&&(P.lanes|=xt)}function Ks(P,st,ht,xt){return Ol(P,st,ht,xt),Bl(P)}function no(P,st){return Ol(P,null,null,st),Bl(P)}function gf(P,st,ht){P.lanes|=ht;var xt=P.alternate;xt!==null&&(xt.lanes|=ht);for(var vt=!1,Mt=P.return;Mt!==null;)Mt.childLanes|=ht,xt=Mt.alternate,xt!==null&&(xt.childLanes|=ht),Mt.tag===22&&(P=Mt.stateNode,P===null||P._visibility&1||(vt=!0)),P=Mt,Mt=Mt.return;return P.tag===3?(Mt=P.stateNode,vt&&st!==null&&(vt=31-Nn(ht),P=Mt.hiddenUpdates,xt=P[vt],xt===null?P[vt]=[st]:xt.push(st),st.lane=ht|536870912),Mt):null}function Bl(P){if(50<ul)throw ul=0,nc=null,Error(ft(185));for(var st=P.return;st!==null;)P=st,st=P.return;return P.tag===3?P.stateNode:null}var io={};function Zd(P,st,ht,xt){this.tag=P,this.key=ht,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=st,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=xt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(P,st,ht,xt){return new Zd(P,st,ht,xt)}function Qs(P){return P=P.prototype,!(!P||!P.isReactComponent)}function Zr(P,st){var ht=P.alternate;return ht===null?(ht=Rr(P.tag,st,P.key,P.mode),ht.elementType=P.elementType,ht.type=P.type,ht.stateNode=P.stateNode,ht.alternate=P,P.alternate=ht):(ht.pendingProps=st,ht.type=P.type,ht.flags=0,ht.subtreeFlags=0,ht.deletions=null),ht.flags=P.flags&65011712,ht.childLanes=P.childLanes,ht.lanes=P.lanes,ht.child=P.child,ht.memoizedProps=P.memoizedProps,ht.memoizedState=P.memoizedState,ht.updateQueue=P.updateQueue,st=P.dependencies,ht.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext},ht.sibling=P.sibling,ht.index=P.index,ht.ref=P.ref,ht.refCleanup=P.refCleanup,ht}function pf(P,st){P.flags&=65011714;var ht=P.alternate;return ht===null?(P.childLanes=0,P.lanes=st,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=ht.childLanes,P.lanes=ht.lanes,P.child=ht.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=ht.memoizedProps,P.memoizedState=ht.memoizedState,P.updateQueue=ht.updateQueue,P.type=ht.type,st=ht.dependencies,P.dependencies=st===null?null:{lanes:st.lanes,firstContext:st.firstContext}),P}function zl(P,st,ht,xt,vt,Mt){var Bt=0;if(xt=P,typeof P=="function")Qs(P)&&(Bt=1);else if(typeof P=="string")Bt=Q1(P,ht,gn.current)?26:P==="html"||P==="head"||P==="body"?27:5;else t:switch(P){case Wt:return P=Rr(31,ht,st,vt),P.elementType=Wt,P.lanes=Mt,P;case Ut:return za(ht.children,vt,Mt,st);case Xt:Bt=8,vt|=24;break;case Pt:return P=Rr(12,ht,st,vt|2),P.elementType=Pt,P.lanes=Mt,P;case kt:return P=Rr(13,ht,st,vt),P.elementType=kt,P.lanes=Mt,P;case Zt:return P=Rr(19,ht,st,vt),P.elementType=Zt,P.lanes=Mt,P;default:if(typeof P=="object"&&P!==null)switch(P.$$typeof){case Jt:case Nt:Bt=10;break t;case Kt:Bt=9;break t;case jt:Bt=11;break t;case Ft:Bt=14;break t;case It:Bt=16,xt=null;break t}Bt=29,ht=Error(ft(130,P===null?"null":typeof P,"")),xt=null}return st=Rr(Bt,ht,st,vt),st.elementType=P,st.type=xt,st.lanes=Mt,st}function za(P,st,ht,xt){return P=Rr(7,P,xt,st),P.lanes=ht,P}function Js(P,st,ht){return P=Rr(6,P,null,st),P.lanes=ht,P}function Ws(P,st,ht){return st=Rr(4,P.children!==null?P.children:[],P.key,st),st.lanes=ht,st.stateNode={containerInfo:P.containerInfo,pendingChildren:null,implementation:P.implementation},st}var ro=[],ao=0,Nl=null,jl=0,Br=[],zr=0,Na=null,Kr=1,Qr="";function ja(P,st){ro[ao++]=jl,ro[ao++]=Nl,Nl=P,jl=st}function mf(P,st,ht){Br[zr++]=Kr,Br[zr++]=Qr,Br[zr++]=Na,Na=P;var xt=Kr;P=Qr;var vt=32-Nn(xt)-1;xt&=~(1<<vt),ht+=1;var Mt=32-Nn(st)+vt;if(30<Mt){var Bt=vt-vt%5;Mt=(xt&(1<<Bt)-1).toString(32),xt>>=Bt,vt-=Bt,Kr=1<<32-Nn(st)+vt|ht<<vt|xt,Qr=Mt+P}else Kr=1<<Mt|ht<<vt|xt,Qr=P}function tu(P){P.return!==null&&(ja(P,1),mf(P,1,0))}function eu(P){for(;P===Nl;)Nl=ro[--ao],ro[ao]=null,jl=ro[--ao],ro[ao]=null;for(;P===Na;)Na=Br[--zr],Br[zr]=null,Qr=Br[--zr],Br[zr]=null,Kr=Br[--zr],Br[zr]=null}var gr=null,Fi=null,Di=!1,ka=null,qr=!1,nu=Error(ft(519));function Ua(P){var st=Error(ft(418,""));throw Vo(Cr(st,P)),nu}function xf(P){var st=P.stateNode,ht=P.type,xt=P.memoizedProps;switch(st[Yt]=P,st[en]=xt,ht){case"dialog":_i("cancel",st),_i("close",st);break;case"iframe":case"object":case"embed":_i("load",st);break;case"video":case"audio":for(ht=0;ht<fl.length;ht++)_i(fl[ht],st);break;case"source":_i("error",st);break;case"img":case"image":case"link":_i("error",st),_i("load",st);break;case"details":_i("toggle",st);break;case"input":_i("invalid",st),Sl(st,xt.value,xt.defaultValue,xt.checked,xt.defaultChecked,xt.type,xt.name,!0),Xa(st);break;case"select":_i("invalid",st);break;case"textarea":_i("invalid",st),Bc(st,xt.value,xt.defaultValue,xt.children),Xa(st)}ht=xt.children,typeof ht!="string"&&typeof ht!="number"&&typeof ht!="bigint"||st.textContent===""+ht||xt.suppressHydrationWarning===!0||z0(st.textContent,ht)?(xt.popover!=null&&(_i("beforetoggle",st),_i("toggle",st)),xt.onScroll!=null&&_i("scroll",st),xt.onScrollEnd!=null&&_i("scrollend",st),xt.onClick!=null&&(st.onclick=ms),st=!0):st=!1,st||Ua(P)}function wf(P){for(gr=P.return;gr;)switch(gr.tag){case 5:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:gr=gr.return}}function Io(P){if(P!==gr)return!1;if(!Di)return wf(P),Di=!0,!1;var st=P.tag,ht;if((ht=st!==3&&st!==27)&&((ht=st===5)&&(ht=P.type,ht=!(ht!=="form"&&ht!=="button")||wc(P.type,P.memoizedProps)),ht=!ht),ht&&Fi&&Ua(P),wf(P),st===13){if(P=P.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(ft(317));t:{for(P=P.nextSibling,st=0;P;){if(P.nodeType===8)if(ht=P.data,ht==="/$"){if(st===0){Fi=Lr(P.nextSibling);break t}st--}else ht!=="$"&&ht!=="$!"&&ht!=="$?"||st++;P=P.nextSibling}Fi=null}}else st===27?(st=Fi,_a(P.type)?(P=Ec,Ec=null,Fi=P):Fi=st):Fi=gr?Lr(P.stateNode.nextSibling):null;return!0}function Lo(){Fi=gr=null,Di=!1}function yf(){var P=ka;return P!==null&&(br===null?br=P:br.push.apply(br,P),ka=null),P}function Vo(P){ka===null?ka=[P]:ka.push(P)}var iu=sn(null),Ia=null,Jr=null;function ca(P,st,ht){pn(iu,st._currentValue),st._currentValue=ht}function Wr(P){P._currentValue=iu.current,nn(iu)}function ru(P,st,ht){for(;P!==null;){var xt=P.alternate;if((P.childLanes&st)!==st?(P.childLanes|=st,xt!==null&&(xt.childLanes|=st)):xt!==null&&(xt.childLanes&st)!==st&&(xt.childLanes|=st),P===ht)break;P=P.return}}function au(P,st,ht,xt){var vt=P.child;for(vt!==null&&(vt.return=P);vt!==null;){var Mt=vt.dependencies;if(Mt!==null){var Bt=vt.child;Mt=Mt.firstContext;t:for(;Mt!==null;){var Lt=Mt;Mt=vt;for(var pe=0;pe<st.length;pe++)if(Lt.context===st[pe]){Mt.lanes|=ht,Lt=Mt.alternate,Lt!==null&&(Lt.lanes|=ht),ru(Mt.return,ht,P),xt||(Bt=null);break t}Mt=Lt.next}}else if(vt.tag===18){if(Bt=vt.return,Bt===null)throw Error(ft(341));Bt.lanes|=ht,Mt=Bt.alternate,Mt!==null&&(Mt.lanes|=ht),ru(Bt,ht,P),Bt=null}else Bt=vt.child;if(Bt!==null)Bt.return=vt;else for(Bt=vt;Bt!==null;){if(Bt===P){Bt=null;break}if(vt=Bt.sibling,vt!==null){vt.return=Bt.return,Bt=vt;break}Bt=Bt.return}vt=Bt}}function qo(P,st,ht,xt){P=null;for(var vt=st,Mt=!1;vt!==null;){if(!Mt){if((vt.flags&524288)!==0)Mt=!0;else if((vt.flags&262144)!==0)break}if(vt.tag===10){var Bt=vt.alternate;if(Bt===null)throw Error(ft(387));if(Bt=Bt.memoizedProps,Bt!==null){var Lt=vt.type;Sr(vt.pendingProps.value,Bt.value)||(P!==null?P.push(Lt):P=[Lt])}}else if(vt===qn.current){if(Bt=vt.alternate,Bt===null)throw Error(ft(387));Bt.memoizedState.memoizedState!==vt.memoizedState.memoizedState&&(P!==null?P.push(xl):P=[xl])}vt=vt.return}P!==null&&au(st,P,ht,xt),st.flags|=262144}function kl(P){for(P=P.firstContext;P!==null;){if(!Sr(P.context._currentValue,P.memoizedValue))return!0;P=P.next}return!1}function La(P){Ia=P,Jr=null,P=P.dependencies,P!==null&&(P.firstContext=null)}function hr(P){return vf(Ia,P)}function Ul(P,st){return Ia===null&&La(P),vf(P,st)}function vf(P,st){var ht=st._currentValue;if(st={context:st,memoizedValue:ht,next:null},Jr===null){if(P===null)throw Error(ft(308));Jr=st,P.dependencies={lanes:0,firstContext:st},P.flags|=524288}else Jr=Jr.next=st;return ht}var Kd=typeof AbortController<"u"?AbortController:function(){var P=[],st=this.signal={aborted:!1,addEventListener:function(ht,xt){P.push(xt)}};this.abort=function(){st.aborted=!0,P.forEach(function(ht){return ht()})}},Qd=tt.unstable_scheduleCallback,Jd=tt.unstable_NormalPriority,er={$$typeof:Nt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ou(){return{controller:new Kd,data:new Map,refCount:0}}function Yo(P){P.refCount--,P.refCount===0&&Qd(Jd,function(){P.controller.abort()})}var Go=null,lu=0,oo=0,lo=null;function Wd(P,st){if(Go===null){var ht=Go=[];lu=0,oo=uc(),lo={status:"pending",value:void 0,then:function(xt){ht.push(xt)}}}return lu++,st.then(bf,bf),st}function bf(){if(--lu===0&&Go!==null){lo!==null&&(lo.status="fulfilled");var P=Go;Go=null,oo=0,lo=null;for(var st=0;st<P.length;st++)(0,P[st])()}}function t1(P,st){var ht=[],xt={status:"pending",value:null,reason:null,then:function(vt){ht.push(vt)}};return P.then(function(){xt.status="fulfilled",xt.value=st;for(var vt=0;vt<ht.length;vt++)(0,ht[vt])(st)},function(vt){for(xt.status="rejected",xt.reason=vt,vt=0;vt<ht.length;vt++)(0,ht[vt])(void 0)}),xt}var Ef=on.S;on.S=function(P,st){typeof st=="object"&&st!==null&&typeof st.then=="function"&&Wd(P,st),Ef!==null&&Ef(P,st)};var Va=sn(null);function su(){var P=Va.current;return P!==null?P:qi.pooledCache}function Il(P,st){st===null?pn(Va,Va.current):pn(Va,st.pool)}function Sf(){var P=su();return P===null?null:{parent:er._currentValue,pool:P}}var Po=Error(ft(460)),Rf=Error(ft(474)),Ll=Error(ft(542)),uu={then:function(){}};function _f(P){return P=P.status,P==="fulfilled"||P==="rejected"}function Vl(){}function Mf(P,st,ht){switch(ht=P[ht],ht===void 0?P.push(st):ht!==st&&(st.then(Vl,Vl),st=ht),st.status){case"fulfilled":return st.value;case"rejected":throw P=st.reason,Af(P),P;default:if(typeof st.status=="string")st.then(Vl,Vl);else{if(P=qi,P!==null&&100<P.shellSuspendCounter)throw Error(ft(482));P=st,P.status="pending",P.then(function(xt){if(st.status==="pending"){var vt=st;vt.status="fulfilled",vt.value=xt}},function(xt){if(st.status==="pending"){var vt=st;vt.status="rejected",vt.reason=xt}})}switch(st.status){case"fulfilled":return st.value;case"rejected":throw P=st.reason,Af(P),P}throw Fo=st,Po}}var Fo=null;function Tf(){if(Fo===null)throw Error(ft(459));var P=Fo;return Fo=null,P}function Af(P){if(P===Po||P===Ll)throw Error(ft(483))}var fa=!1;function cu(P){P.updateQueue={baseState:P.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fu(P,st){P=P.updateQueue,st.updateQueue===P&&(st.updateQueue={baseState:P.baseState,firstBaseUpdate:P.firstBaseUpdate,lastBaseUpdate:P.lastBaseUpdate,shared:P.shared,callbacks:null})}function ha(P){return{lane:P,tag:0,payload:null,callback:null,next:null}}function da(P,st,ht){var xt=P.updateQueue;if(xt===null)return null;if(xt=xt.shared,(Oi&2)!==0){var vt=xt.pending;return vt===null?st.next=st:(st.next=vt.next,vt.next=st),xt.pending=st,st=Bl(P),gf(P,null,ht),st}return Ol(P,xt,st,ht),Bl(P)}function Xo(P,st,ht){if(st=st.updateQueue,st!==null&&(st=st.shared,(ht&4194048)!==0)){var xt=st.lanes;xt&=P.pendingLanes,ht|=xt,st.lanes=ht,wt(P,ht)}}function hu(P,st){var ht=P.updateQueue,xt=P.alternate;if(xt!==null&&(xt=xt.updateQueue,ht===xt)){var vt=null,Mt=null;if(ht=ht.firstBaseUpdate,ht!==null){do{var Bt={lane:ht.lane,tag:ht.tag,payload:ht.payload,callback:null,next:null};Mt===null?vt=Mt=Bt:Mt=Mt.next=Bt,ht=ht.next}while(ht!==null);Mt===null?vt=Mt=st:Mt=Mt.next=st}else vt=Mt=st;ht={baseState:xt.baseState,firstBaseUpdate:vt,lastBaseUpdate:Mt,shared:xt.shared,callbacks:xt.callbacks},P.updateQueue=ht;return}P=ht.lastBaseUpdate,P===null?ht.firstBaseUpdate=st:P.next=st,ht.lastBaseUpdate=st}var du=!1;function Ho(){if(du){var P=lo;if(P!==null)throw P}}function Zo(P,st,ht,xt){du=!1;var vt=P.updateQueue;fa=!1;var Mt=vt.firstBaseUpdate,Bt=vt.lastBaseUpdate,Lt=vt.shared.pending;if(Lt!==null){vt.shared.pending=null;var pe=Lt,un=pe.next;pe.next=null,Bt===null?Mt=un:Bt.next=un,Bt=pe;var vn=P.alternate;vn!==null&&(vn=vn.updateQueue,Lt=vn.lastBaseUpdate,Lt!==Bt&&(Lt===null?vn.firstBaseUpdate=un:Lt.next=un,vn.lastBaseUpdate=pe))}if(Mt!==null){var Sn=vt.baseState;Bt=0,vn=un=pe=null,Lt=Mt;do{var fn=Lt.lane&-536870913,dn=fn!==Lt.lane;if(dn?(Ai&fn)===fn:(xt&fn)===fn){fn!==0&&fn===oo&&(du=!0),vn!==null&&(vn=vn.next={lane:0,tag:Lt.tag,payload:Lt.payload,callback:null,next:null});t:{var di=P,ui=Lt;fn=st;var ki=ht;switch(ui.tag){case 1:if(di=ui.payload,typeof di=="function"){Sn=di.call(ki,Sn,fn);break t}Sn=di;break t;case 3:di.flags=di.flags&-65537|128;case 0:if(di=ui.payload,fn=typeof di=="function"?di.call(ki,Sn,fn):di,fn==null)break t;Sn=At({},Sn,fn);break t;case 2:fa=!0}}fn=Lt.callback,fn!==null&&(P.flags|=64,dn&&(P.flags|=8192),dn=vt.callbacks,dn===null?vt.callbacks=[fn]:dn.push(fn))}else dn={lane:fn,tag:Lt.tag,payload:Lt.payload,callback:Lt.callback,next:null},vn===null?(un=vn=dn,pe=Sn):vn=vn.next=dn,Bt|=fn;if(Lt=Lt.next,Lt===null){if(Lt=vt.shared.pending,Lt===null)break;dn=Lt,Lt=dn.next,dn.next=null,vt.lastBaseUpdate=dn,vt.shared.pending=null}}while(!0);vn===null&&(pe=Sn),vt.baseState=pe,vt.firstBaseUpdate=un,vt.lastBaseUpdate=vn,Mt===null&&(vt.shared.lanes=0),ba|=Bt,P.lanes=Bt,P.memoizedState=Sn}}function $f(P,st){if(typeof P!="function")throw Error(ft(191,P));P.call(st)}function Df(P,st){var ht=P.callbacks;if(ht!==null)for(P.callbacks=null,P=0;P<ht.length;P++)$f(ht[P],st)}var so=sn(null),ql=sn(0);function Cf(P,st){P=oa,pn(ql,P),pn(so,st),oa=P|st.baseLanes}function gu(){pn(ql,oa),pn(so,so.current)}function pu(){oa=ql.current,nn(so),nn(ql)}var ga=0,vi=null,Ni=null,Wi=null,Yl=!1,uo=!1,qa=!1,Gl=0,Ko=0,co=null,e1=0;function Ki(){throw Error(ft(321))}function mu(P,st){if(st===null)return!1;for(var ht=0;ht<st.length&&ht<P.length;ht++)if(!Sr(P[ht],st[ht]))return!1;return!0}function xu(P,st,ht,xt,vt,Mt){return ga=Mt,vi=st,st.memoizedState=null,st.updateQueue=null,st.lanes=0,on.H=P===null||P.memoizedState===null?gh:ph,qa=!1,Mt=ht(xt,vt),qa=!1,uo&&(Mt=Bf(st,ht,xt,vt)),Of(P),Mt}function Of(P){on.H=Kl;var st=Ni!==null&&Ni.next!==null;if(ga=0,Wi=Ni=vi=null,Yl=!1,Ko=0,co=null,st)throw Error(ft(300));P===null||ir||(P=P.dependencies,P!==null&&kl(P)&&(ir=!0))}function Bf(P,st,ht,xt){vi=P;var vt=0;do{if(uo&&(co=null),Ko=0,uo=!1,25<=vt)throw Error(ft(301));if(vt+=1,Wi=Ni=null,P.updateQueue!=null){var Mt=P.updateQueue;Mt.lastEffect=null,Mt.events=null,Mt.stores=null,Mt.memoCache!=null&&(Mt.memoCache.index=0)}on.H=s1,Mt=st(ht,xt)}while(uo);return Mt}function n1(){var P=on.H,st=P.useState()[0];return st=typeof st.then=="function"?Qo(st):st,P=P.useState()[0],(Ni!==null?Ni.memoizedState:null)!==P&&(vi.flags|=1024),st}function wu(){var P=Gl!==0;return Gl=0,P}function yu(P,st,ht){st.updateQueue=P.updateQueue,st.flags&=-2053,P.lanes&=~ht}function vu(P){if(Yl){for(P=P.memoizedState;P!==null;){var st=P.queue;st!==null&&(st.pending=null),P=P.next}Yl=!1}ga=0,Wi=Ni=vi=null,uo=!1,Ko=Gl=0,co=null}function yr(){var P={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wi===null?vi.memoizedState=Wi=P:Wi=Wi.next=P,Wi}function tr(){if(Ni===null){var P=vi.alternate;P=P!==null?P.memoizedState:null}else P=Ni.next;var st=Wi===null?vi.memoizedState:Wi.next;if(st!==null)Wi=st,Ni=P;else{if(P===null)throw vi.alternate===null?Error(ft(467)):Error(ft(310));Ni=P,P={memoizedState:Ni.memoizedState,baseState:Ni.baseState,baseQueue:Ni.baseQueue,queue:Ni.queue,next:null},Wi===null?vi.memoizedState=Wi=P:Wi=Wi.next=P}return Wi}function bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(P){var st=Ko;return Ko+=1,co===null&&(co=[]),P=Mf(co,P,st),st=vi,(Wi===null?st.memoizedState:Wi.next)===null&&(st=st.alternate,on.H=st===null||st.memoizedState===null?gh:ph),P}function Pl(P){if(P!==null&&typeof P=="object"){if(typeof P.then=="function")return Qo(P);if(P.$$typeof===Nt)return hr(P)}throw Error(ft(438,String(P)))}function Eu(P){var st=null,ht=vi.updateQueue;if(ht!==null&&(st=ht.memoCache),st==null){var xt=vi.alternate;xt!==null&&(xt=xt.updateQueue,xt!==null&&(xt=xt.memoCache,xt!=null&&(st={data:xt.data.map(function(vt){return vt.slice()}),index:0})))}if(st==null&&(st={data:[],index:0}),ht===null&&(ht=bu(),vi.updateQueue=ht),ht.memoCache=st,ht=st.data[st.index],ht===void 0)for(ht=st.data[st.index]=Array(P),xt=0;xt<P;xt++)ht[xt]=Qt;return st.index++,ht}function ta(P,st){return typeof st=="function"?st(P):st}function Fl(P){var st=tr();return Su(st,Ni,P)}function Su(P,st,ht){var xt=P.queue;if(xt===null)throw Error(ft(311));xt.lastRenderedReducer=ht;var vt=P.baseQueue,Mt=xt.pending;if(Mt!==null){if(vt!==null){var Bt=vt.next;vt.next=Mt.next,Mt.next=Bt}st.baseQueue=vt=Mt,xt.pending=null}if(Mt=P.baseState,vt===null)P.memoizedState=Mt;else{st=vt.next;var Lt=Bt=null,pe=null,un=st,vn=!1;do{var Sn=un.lane&-536870913;if(Sn!==un.lane?(Ai&Sn)===Sn:(ga&Sn)===Sn){var fn=un.revertLane;if(fn===0)pe!==null&&(pe=pe.next={lane:0,revertLane:0,action:un.action,hasEagerState:un.hasEagerState,eagerState:un.eagerState,next:null}),Sn===oo&&(vn=!0);else if((ga&fn)===fn){un=un.next,fn===oo&&(vn=!0);continue}else Sn={lane:0,revertLane:un.revertLane,action:un.action,hasEagerState:un.hasEagerState,eagerState:un.eagerState,next:null},pe===null?(Lt=pe=Sn,Bt=Mt):pe=pe.next=Sn,vi.lanes|=fn,ba|=fn;Sn=un.action,qa&&ht(Mt,Sn),Mt=un.hasEagerState?un.eagerState:ht(Mt,Sn)}else fn={lane:Sn,revertLane:un.revertLane,action:un.action,hasEagerState:un.hasEagerState,eagerState:un.eagerState,next:null},pe===null?(Lt=pe=fn,Bt=Mt):pe=pe.next=fn,vi.lanes|=Sn,ba|=Sn;un=un.next}while(un!==null&&un!==st);if(pe===null?Bt=Mt:pe.next=Lt,!Sr(Mt,P.memoizedState)&&(ir=!0,vn&&(ht=lo,ht!==null)))throw ht;P.memoizedState=Mt,P.baseState=Bt,P.baseQueue=pe,xt.lastRenderedState=Mt}return vt===null&&(xt.lanes=0),[P.memoizedState,xt.dispatch]}function Ru(P){var st=tr(),ht=st.queue;if(ht===null)throw Error(ft(311));ht.lastRenderedReducer=P;var xt=ht.dispatch,vt=ht.pending,Mt=st.memoizedState;if(vt!==null){ht.pending=null;var Bt=vt=vt.next;do Mt=P(Mt,Bt.action),Bt=Bt.next;while(Bt!==vt);Sr(Mt,st.memoizedState)||(ir=!0),st.memoizedState=Mt,st.baseQueue===null&&(st.baseState=Mt),ht.lastRenderedState=Mt}return[Mt,xt]}function zf(P,st,ht){var xt=vi,vt=tr(),Mt=Di;if(Mt){if(ht===void 0)throw Error(ft(407));ht=ht()}else ht=st();var Bt=!Sr((Ni||vt).memoizedState,ht);Bt&&(vt.memoizedState=ht,ir=!0),vt=vt.queue;var Lt=kf.bind(null,xt,vt,P);if(Jo(2048,8,Lt,[P]),vt.getSnapshot!==st||Bt||Wi!==null&&Wi.memoizedState.tag&1){if(xt.flags|=2048,fo(9,Xl(),jf.bind(null,xt,vt,ht,st),null),qi===null)throw Error(ft(349));Mt||(ga&124)!==0||Nf(xt,st,ht)}return ht}function Nf(P,st,ht){P.flags|=16384,P={getSnapshot:st,value:ht},st=vi.updateQueue,st===null?(st=bu(),vi.updateQueue=st,st.stores=[P]):(ht=st.stores,ht===null?st.stores=[P]:ht.push(P))}function jf(P,st,ht,xt){st.value=ht,st.getSnapshot=xt,Uf(st)&&If(P)}function kf(P,st,ht){return ht(function(){Uf(st)&&If(P)})}function Uf(P){var st=P.getSnapshot;P=P.value;try{var ht=st();return!Sr(P,ht)}catch{return!0}}function If(P){var st=no(P,2);st!==null&&$r(st,P,2)}function _u(P){var st=yr();if(typeof P=="function"){var ht=P;if(P=ht(),qa){Hn(!0);try{ht()}finally{Hn(!1)}}}return st.memoizedState=st.baseState=P,st.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:P},st}function Lf(P,st,ht,xt){return P.baseState=ht,Su(P,Ni,typeof xt=="function"?xt:ta)}function i1(P,st,ht,xt,vt){if(Zl(P))throw Error(ft(485));if(P=st.action,P!==null){var Mt={payload:vt,action:P,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Bt){Mt.listeners.push(Bt)}};on.T!==null?ht(!0):Mt.isTransition=!1,xt(Mt),ht=st.pending,ht===null?(Mt.next=st.pending=Mt,Vf(st,Mt)):(Mt.next=ht.next,st.pending=ht.next=Mt)}}function Vf(P,st){var ht=st.action,xt=st.payload,vt=P.state;if(st.isTransition){var Mt=on.T,Bt={};on.T=Bt;try{var Lt=ht(vt,xt),pe=on.S;pe!==null&&pe(Bt,Lt),qf(P,st,Lt)}catch(un){Mu(P,st,un)}finally{on.T=Mt}}else try{Mt=ht(vt,xt),qf(P,st,Mt)}catch(un){Mu(P,st,un)}}function qf(P,st,ht){ht!==null&&typeof ht=="object"&&typeof ht.then=="function"?ht.then(function(xt){Yf(P,st,xt)},function(xt){return Mu(P,st,xt)}):Yf(P,st,ht)}function Yf(P,st,ht){st.status="fulfilled",st.value=ht,Gf(st),P.state=ht,st=P.pending,st!==null&&(ht=st.next,ht===st?P.pending=null:(ht=ht.next,st.next=ht,Vf(P,ht)))}function Mu(P,st,ht){var xt=P.pending;if(P.pending=null,xt!==null){xt=xt.next;do st.status="rejected",st.reason=ht,Gf(st),st=st.next;while(st!==xt)}P.action=null}function Gf(P){P=P.listeners;for(var st=0;st<P.length;st++)(0,P[st])()}function Pf(P,st){return st}function Ff(P,st){if(Di){var ht=qi.formState;if(ht!==null){t:{var xt=vi;if(Di){if(Fi){e:{for(var vt=Fi,Mt=qr;vt.nodeType!==8;){if(!Mt){vt=null;break e}if(vt=Lr(vt.nextSibling),vt===null){vt=null;break e}}Mt=vt.data,vt=Mt==="F!"||Mt==="F"?vt:null}if(vt){Fi=Lr(vt.nextSibling),xt=vt.data==="F!";break t}}Ua(xt)}xt=!1}xt&&(st=ht[0])}}return ht=yr(),ht.memoizedState=ht.baseState=st,xt={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pf,lastRenderedState:st},ht.queue=xt,ht=fh.bind(null,vi,xt),xt.dispatch=ht,xt=_u(!1),Mt=Cu.bind(null,vi,!1,xt.queue),xt=yr(),vt={state:st,dispatch:null,action:P,pending:null},xt.queue=vt,ht=i1.bind(null,vi,vt,Mt,ht),vt.dispatch=ht,xt.memoizedState=P,[st,ht,!1]}function Xf(P){var st=tr();return Hf(st,Ni,P)}function Hf(P,st,ht){if(st=Su(P,st,Pf)[0],P=Fl(ta)[0],typeof st=="object"&&st!==null&&typeof st.then=="function")try{var xt=Qo(st)}catch(Bt){throw Bt===Po?Ll:Bt}else xt=st;st=tr();var vt=st.queue,Mt=vt.dispatch;return ht!==st.memoizedState&&(vi.flags|=2048,fo(9,Xl(),r1.bind(null,vt,ht),null)),[xt,Mt,P]}function r1(P,st){P.action=st}function Zf(P){var st=tr(),ht=Ni;if(ht!==null)return Hf(st,ht,P);tr(),st=st.memoizedState,ht=tr();var xt=ht.queue.dispatch;return ht.memoizedState=P,[st,xt,!1]}function fo(P,st,ht,xt){return P={tag:P,create:ht,deps:xt,inst:st,next:null},st=vi.updateQueue,st===null&&(st=bu(),vi.updateQueue=st),ht=st.lastEffect,ht===null?st.lastEffect=P.next=P:(xt=ht.next,ht.next=P,P.next=xt,st.lastEffect=P),P}function Xl(){return{destroy:void 0,resource:void 0}}function Kf(){return tr().memoizedState}function Hl(P,st,ht,xt){var vt=yr();xt=xt===void 0?null:xt,vi.flags|=P,vt.memoizedState=fo(1|st,Xl(),ht,xt)}function Jo(P,st,ht,xt){var vt=tr();xt=xt===void 0?null:xt;var Mt=vt.memoizedState.inst;Ni!==null&&xt!==null&&mu(xt,Ni.memoizedState.deps)?vt.memoizedState=fo(st,Mt,ht,xt):(vi.flags|=P,vt.memoizedState=fo(1|st,Mt,ht,xt))}function Qf(P,st){Hl(8390656,8,P,st)}function Jf(P,st){Jo(2048,8,P,st)}function Wf(P,st){return Jo(4,2,P,st)}function th(P,st){return Jo(4,4,P,st)}function eh(P,st){if(typeof st=="function"){P=P();var ht=st(P);return function(){typeof ht=="function"?ht():st(null)}}if(st!=null)return P=P(),st.current=P,function(){st.current=null}}function nh(P,st,ht){ht=ht!=null?ht.concat([P]):null,Jo(4,4,eh.bind(null,st,P),ht)}function Tu(){}function ih(P,st){var ht=tr();st=st===void 0?null:st;var xt=ht.memoizedState;return st!==null&&mu(st,xt[1])?xt[0]:(ht.memoizedState=[P,st],P)}function rh(P,st){var ht=tr();st=st===void 0?null:st;var xt=ht.memoizedState;if(st!==null&&mu(st,xt[1]))return xt[0];if(xt=P(),qa){Hn(!0);try{P()}finally{Hn(!1)}}return ht.memoizedState=[xt,st],xt}function Au(P,st,ht){return ht===void 0||(ga&1073741824)!==0?P.memoizedState=st:(P.memoizedState=ht,P=l0(),vi.lanes|=P,ba|=P,ht)}function ah(P,st,ht,xt){return Sr(ht,st)?ht:so.current!==null?(P=Au(P,ht,xt),Sr(P,st)||(ir=!0),P):(ga&42)===0?(ir=!0,P.memoizedState=ht):(P=l0(),vi.lanes|=P,ba|=P,st)}function oh(P,st,ht,xt,vt){var Mt=yn.p;yn.p=Mt!==0&&8>Mt?Mt:8;var Bt=on.T,Lt={};on.T=Lt,Cu(P,!1,st,ht);try{var pe=vt(),un=on.S;if(un!==null&&un(Lt,pe),pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var vn=t1(pe,xt);Wo(P,st,vn,Ar(P))}else Wo(P,st,xt,Ar(P))}catch(Sn){Wo(P,st,{then:function(){},status:"rejected",reason:Sn},Ar())}finally{yn.p=Mt,on.T=Bt}}function a1(){}function $u(P,st,ht,xt){if(P.tag!==5)throw Error(ft(476));var vt=lh(P).queue;oh(P,vt,st,bn,ht===null?a1:function(){return sh(P),ht(xt)})}function lh(P){var st=P.memoizedState;if(st!==null)return st;st={memoizedState:bn,baseState:bn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:bn},next:null};var ht={};return st.next={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:ht},next:null},P.memoizedState=st,P=P.alternate,P!==null&&(P.memoizedState=st),st}function sh(P){var st=lh(P).next.queue;Wo(P,st,{},Ar())}function Du(){return hr(xl)}function uh(){return tr().memoizedState}function ch(){return tr().memoizedState}function o1(P){for(var st=P.return;st!==null;){switch(st.tag){case 24:case 3:var ht=Ar();P=ha(ht);var xt=da(st,P,ht);xt!==null&&($r(xt,st,ht),Xo(xt,st,ht)),st={cache:ou()},P.payload=st;return}st=st.return}}function l1(P,st,ht){var xt=Ar();ht={lane:xt,revertLane:0,action:ht,hasEagerState:!1,eagerState:null,next:null},Zl(P)?hh(st,ht):(ht=Ks(P,st,ht,xt),ht!==null&&($r(ht,P,xt),dh(ht,st,xt)))}function fh(P,st,ht){var xt=Ar();Wo(P,st,ht,xt)}function Wo(P,st,ht,xt){var vt={lane:xt,revertLane:0,action:ht,hasEagerState:!1,eagerState:null,next:null};if(Zl(P))hh(st,vt);else{var Mt=P.alternate;if(P.lanes===0&&(Mt===null||Mt.lanes===0)&&(Mt=st.lastRenderedReducer,Mt!==null))try{var Bt=st.lastRenderedState,Lt=Mt(Bt,ht);if(vt.hasEagerState=!0,vt.eagerState=Lt,Sr(Lt,Bt))return Ol(P,st,vt,0),qi===null&&Cl(),!1}catch{}finally{}if(ht=Ks(P,st,vt,xt),ht!==null)return $r(ht,P,xt),dh(ht,st,xt),!0}return!1}function Cu(P,st,ht,xt){if(xt={lane:2,revertLane:uc(),action:xt,hasEagerState:!1,eagerState:null,next:null},Zl(P)){if(st)throw Error(ft(479))}else st=Ks(P,ht,xt,2),st!==null&&$r(st,P,2)}function Zl(P){var st=P.alternate;return P===vi||st!==null&&st===vi}function hh(P,st){uo=Yl=!0;var ht=P.pending;ht===null?st.next=st:(st.next=ht.next,ht.next=st),P.pending=st}function dh(P,st,ht){if((ht&4194048)!==0){var xt=st.lanes;xt&=P.pendingLanes,ht|=xt,st.lanes=ht,wt(P,ht)}}var Kl={readContext:hr,use:Pl,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useLayoutEffect:Ki,useInsertionEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useSyncExternalStore:Ki,useId:Ki,useHostTransitionStatus:Ki,useFormState:Ki,useActionState:Ki,useOptimistic:Ki,useMemoCache:Ki,useCacheRefresh:Ki},gh={readContext:hr,use:Pl,useCallback:function(P,st){return yr().memoizedState=[P,st===void 0?null:st],P},useContext:hr,useEffect:Qf,useImperativeHandle:function(P,st,ht){ht=ht!=null?ht.concat([P]):null,Hl(4194308,4,eh.bind(null,st,P),ht)},useLayoutEffect:function(P,st){return Hl(4194308,4,P,st)},useInsertionEffect:function(P,st){Hl(4,2,P,st)},useMemo:function(P,st){var ht=yr();st=st===void 0?null:st;var xt=P();if(qa){Hn(!0);try{P()}finally{Hn(!1)}}return ht.memoizedState=[xt,st],xt},useReducer:function(P,st,ht){var xt=yr();if(ht!==void 0){var vt=ht(st);if(qa){Hn(!0);try{ht(st)}finally{Hn(!1)}}}else vt=st;return xt.memoizedState=xt.baseState=vt,P={pending:null,lanes:0,dispatch:null,lastRenderedReducer:P,lastRenderedState:vt},xt.queue=P,P=P.dispatch=l1.bind(null,vi,P),[xt.memoizedState,P]},useRef:function(P){var st=yr();return P={current:P},st.memoizedState=P},useState:function(P){P=_u(P);var st=P.queue,ht=fh.bind(null,vi,st);return st.dispatch=ht,[P.memoizedState,ht]},useDebugValue:Tu,useDeferredValue:function(P,st){var ht=yr();return Au(ht,P,st)},useTransition:function(){var P=_u(!1);return P=oh.bind(null,vi,P.queue,!0,!1),yr().memoizedState=P,[!1,P]},useSyncExternalStore:function(P,st,ht){var xt=vi,vt=yr();if(Di){if(ht===void 0)throw Error(ft(407));ht=ht()}else{if(ht=st(),qi===null)throw Error(ft(349));(Ai&124)!==0||Nf(xt,st,ht)}vt.memoizedState=ht;var Mt={value:ht,getSnapshot:st};return vt.queue=Mt,Qf(kf.bind(null,xt,Mt,P),[P]),xt.flags|=2048,fo(9,Xl(),jf.bind(null,xt,Mt,ht,st),null),ht},useId:function(){var P=yr(),st=qi.identifierPrefix;if(Di){var ht=Qr,xt=Kr;ht=(xt&~(1<<32-Nn(xt)-1)).toString(32)+ht,st="«"+st+"R"+ht,ht=Gl++,0<ht&&(st+="H"+ht.toString(32)),st+="»"}else ht=e1++,st="«"+st+"r"+ht.toString(32)+"»";return P.memoizedState=st},useHostTransitionStatus:Du,useFormState:Ff,useActionState:Ff,useOptimistic:function(P){var st=yr();st.memoizedState=st.baseState=P;var ht={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return st.queue=ht,st=Cu.bind(null,vi,!0,ht),ht.dispatch=st,[P,st]},useMemoCache:Eu,useCacheRefresh:function(){return yr().memoizedState=o1.bind(null,vi)}},ph={readContext:hr,use:Pl,useCallback:ih,useContext:hr,useEffect:Jf,useImperativeHandle:nh,useInsertionEffect:Wf,useLayoutEffect:th,useMemo:rh,useReducer:Fl,useRef:Kf,useState:function(){return Fl(ta)},useDebugValue:Tu,useDeferredValue:function(P,st){var ht=tr();return ah(ht,Ni.memoizedState,P,st)},useTransition:function(){var P=Fl(ta)[0],st=tr().memoizedState;return[typeof P=="boolean"?P:Qo(P),st]},useSyncExternalStore:zf,useId:uh,useHostTransitionStatus:Du,useFormState:Xf,useActionState:Xf,useOptimistic:function(P,st){var ht=tr();return Lf(ht,Ni,P,st)},useMemoCache:Eu,useCacheRefresh:ch},s1={readContext:hr,use:Pl,useCallback:ih,useContext:hr,useEffect:Jf,useImperativeHandle:nh,useInsertionEffect:Wf,useLayoutEffect:th,useMemo:rh,useReducer:Ru,useRef:Kf,useState:function(){return Ru(ta)},useDebugValue:Tu,useDeferredValue:function(P,st){var ht=tr();return Ni===null?Au(ht,P,st):ah(ht,Ni.memoizedState,P,st)},useTransition:function(){var P=Ru(ta)[0],st=tr().memoizedState;return[typeof P=="boolean"?P:Qo(P),st]},useSyncExternalStore:zf,useId:uh,useHostTransitionStatus:Du,useFormState:Zf,useActionState:Zf,useOptimistic:function(P,st){var ht=tr();return Ni!==null?Lf(ht,Ni,P,st):(ht.baseState=P,[P,ht.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:ch},ho=null,tl=0;function Ql(P){var st=tl;return tl+=1,ho===null&&(ho=[]),Mf(ho,P,st)}function el(P,st){st=st.props.ref,P.ref=st!==void 0?st:null}function Jl(P,st){throw st.$$typeof===Ct?Error(ft(525)):(P=Object.prototype.toString.call(st),Error(ft(31,P==="[object Object]"?"object with keys {"+Object.keys(st).join(", ")+"}":P)))}function mh(P){var st=P._init;return st(P._payload)}function xh(P){function st(an,Ye){if(P){var ln=an.deletions;ln===null?(an.deletions=[Ye],an.flags|=16):ln.push(Ye)}}function ht(an,Ye){if(!P)return null;for(;Ye!==null;)st(an,Ye),Ye=Ye.sibling;return null}function xt(an){for(var Ye=new Map;an!==null;)an.key!==null?Ye.set(an.key,an):Ye.set(an.index,an),an=an.sibling;return Ye}function vt(an,Ye){return an=Zr(an,Ye),an.index=0,an.sibling=null,an}function Mt(an,Ye,ln){return an.index=ln,P?(ln=an.alternate,ln!==null?(ln=ln.index,ln<Ye?(an.flags|=67108866,Ye):ln):(an.flags|=67108866,Ye)):(an.flags|=1048576,Ye)}function Bt(an){return P&&an.alternate===null&&(an.flags|=67108866),an}function Lt(an,Ye,ln,En){return Ye===null||Ye.tag!==6?(Ye=Js(ln,an.mode,En),Ye.return=an,Ye):(Ye=vt(Ye,ln),Ye.return=an,Ye)}function pe(an,Ye,ln,En){var Fn=ln.type;return Fn===Ut?vn(an,Ye,ln.props.children,En,ln.key):Ye!==null&&(Ye.elementType===Fn||typeof Fn=="object"&&Fn!==null&&Fn.$$typeof===It&&mh(Fn)===Ye.type)?(Ye=vt(Ye,ln.props),el(Ye,ln),Ye.return=an,Ye):(Ye=zl(ln.type,ln.key,ln.props,null,an.mode,En),el(Ye,ln),Ye.return=an,Ye)}function un(an,Ye,ln,En){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ln.containerInfo||Ye.stateNode.implementation!==ln.implementation?(Ye=Ws(ln,an.mode,En),Ye.return=an,Ye):(Ye=vt(Ye,ln.children||[]),Ye.return=an,Ye)}function vn(an,Ye,ln,En,Fn){return Ye===null||Ye.tag!==7?(Ye=za(ln,an.mode,En,Fn),Ye.return=an,Ye):(Ye=vt(Ye,ln),Ye.return=an,Ye)}function Sn(an,Ye,ln){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=Js(""+Ye,an.mode,ln),Ye.return=an,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case Ot:return ln=zl(Ye.type,Ye.key,Ye.props,null,an.mode,ln),el(ln,Ye),ln.return=an,ln;case Dt:return Ye=Ws(Ye,an.mode,ln),Ye.return=an,Ye;case It:var En=Ye._init;return Ye=En(Ye._payload),Sn(an,Ye,ln)}if($n(Ye)||rn(Ye))return Ye=za(Ye,an.mode,ln,null),Ye.return=an,Ye;if(typeof Ye.then=="function")return Sn(an,Ql(Ye),ln);if(Ye.$$typeof===Nt)return Sn(an,Ul(an,Ye),ln);Jl(an,Ye)}return null}function fn(an,Ye,ln,En){var Fn=Ye!==null?Ye.key:null;if(typeof ln=="string"&&ln!==""||typeof ln=="number"||typeof ln=="bigint")return Fn!==null?null:Lt(an,Ye,""+ln,En);if(typeof ln=="object"&&ln!==null){switch(ln.$$typeof){case Ot:return ln.key===Fn?pe(an,Ye,ln,En):null;case Dt:return ln.key===Fn?un(an,Ye,ln,En):null;case It:return Fn=ln._init,ln=Fn(ln._payload),fn(an,Ye,ln,En)}if($n(ln)||rn(ln))return Fn!==null?null:vn(an,Ye,ln,En,null);if(typeof ln.then=="function")return fn(an,Ye,Ql(ln),En);if(ln.$$typeof===Nt)return fn(an,Ye,Ul(an,ln),En);Jl(an,ln)}return null}function dn(an,Ye,ln,En,Fn){if(typeof En=="string"&&En!==""||typeof En=="number"||typeof En=="bigint")return an=an.get(ln)||null,Lt(Ye,an,""+En,Fn);if(typeof En=="object"&&En!==null){switch(En.$$typeof){case Ot:return an=an.get(En.key===null?ln:En.key)||null,pe(Ye,an,En,Fn);case Dt:return an=an.get(En.key===null?ln:En.key)||null,un(Ye,an,En,Fn);case It:var Si=En._init;return En=Si(En._payload),dn(an,Ye,ln,En,Fn)}if($n(En)||rn(En))return an=an.get(ln)||null,vn(Ye,an,En,Fn,null);if(typeof En.then=="function")return dn(an,Ye,ln,Ql(En),Fn);if(En.$$typeof===Nt)return dn(an,Ye,ln,Ul(Ye,En),Fn);Jl(Ye,En)}return null}function di(an,Ye,ln,En){for(var Fn=null,Si=null,ii=Ye,ci=Ye=0,ar=null;ii!==null&&ci<ln.length;ci++){ii.index>ci?(ar=ii,ii=null):ar=ii.sibling;var $i=fn(an,ii,ln[ci],En);if($i===null){ii===null&&(ii=ar);break}P&&ii&&$i.alternate===null&&st(an,ii),Ye=Mt($i,Ye,ci),Si===null?Fn=$i:Si.sibling=$i,Si=$i,ii=ar}if(ci===ln.length)return ht(an,ii),Di&&ja(an,ci),Fn;if(ii===null){for(;ci<ln.length;ci++)ii=Sn(an,ln[ci],En),ii!==null&&(Ye=Mt(ii,Ye,ci),Si===null?Fn=ii:Si.sibling=ii,Si=ii);return Di&&ja(an,ci),Fn}for(ii=xt(ii);ci<ln.length;ci++)ar=dn(ii,an,ci,ln[ci],En),ar!==null&&(P&&ar.alternate!==null&&ii.delete(ar.key===null?ci:ar.key),Ye=Mt(ar,Ye,ci),Si===null?Fn=ar:Si.sibling=ar,Si=ar);return P&&ii.forEach(function(Da){return st(an,Da)}),Di&&ja(an,ci),Fn}function ui(an,Ye,ln,En){if(ln==null)throw Error(ft(151));for(var Fn=null,Si=null,ii=Ye,ci=Ye=0,ar=null,$i=ln.next();ii!==null&&!$i.done;ci++,$i=ln.next()){ii.index>ci?(ar=ii,ii=null):ar=ii.sibling;var Da=fn(an,ii,$i.value,En);if(Da===null){ii===null&&(ii=ar);break}P&&ii&&Da.alternate===null&&st(an,ii),Ye=Mt(Da,Ye,ci),Si===null?Fn=Da:Si.sibling=Da,Si=Da,ii=ar}if($i.done)return ht(an,ii),Di&&ja(an,ci),Fn;if(ii===null){for(;!$i.done;ci++,$i=ln.next())$i=Sn(an,$i.value,En),$i!==null&&(Ye=Mt($i,Ye,ci),Si===null?Fn=$i:Si.sibling=$i,Si=$i);return Di&&ja(an,ci),Fn}for(ii=xt(ii);!$i.done;ci++,$i=ln.next())$i=dn(ii,an,ci,$i.value,En),$i!==null&&(P&&$i.alternate!==null&&ii.delete($i.key===null?ci:$i.key),Ye=Mt($i,Ye,ci),Si===null?Fn=$i:Si.sibling=$i,Si=$i);return P&&ii.forEach(function(ug){return st(an,ug)}),Di&&ja(an,ci),Fn}function ki(an,Ye,ln,En){if(typeof ln=="object"&&ln!==null&&ln.type===Ut&&ln.key===null&&(ln=ln.props.children),typeof ln=="object"&&ln!==null){switch(ln.$$typeof){case Ot:t:{for(var Fn=ln.key;Ye!==null;){if(Ye.key===Fn){if(Fn=ln.type,Fn===Ut){if(Ye.tag===7){ht(an,Ye.sibling),En=vt(Ye,ln.props.children),En.return=an,an=En;break t}}else if(Ye.elementType===Fn||typeof Fn=="object"&&Fn!==null&&Fn.$$typeof===It&&mh(Fn)===Ye.type){ht(an,Ye.sibling),En=vt(Ye,ln.props),el(En,ln),En.return=an,an=En;break t}ht(an,Ye);break}else st(an,Ye);Ye=Ye.sibling}ln.type===Ut?(En=za(ln.props.children,an.mode,En,ln.key),En.return=an,an=En):(En=zl(ln.type,ln.key,ln.props,null,an.mode,En),el(En,ln),En.return=an,an=En)}return Bt(an);case Dt:t:{for(Fn=ln.key;Ye!==null;){if(Ye.key===Fn)if(Ye.tag===4&&Ye.stateNode.containerInfo===ln.containerInfo&&Ye.stateNode.implementation===ln.implementation){ht(an,Ye.sibling),En=vt(Ye,ln.children||[]),En.return=an,an=En;break t}else{ht(an,Ye);break}else st(an,Ye);Ye=Ye.sibling}En=Ws(ln,an.mode,En),En.return=an,an=En}return Bt(an);case It:return Fn=ln._init,ln=Fn(ln._payload),ki(an,Ye,ln,En)}if($n(ln))return di(an,Ye,ln,En);if(rn(ln)){if(Fn=rn(ln),typeof Fn!="function")throw Error(ft(150));return ln=Fn.call(ln),ui(an,Ye,ln,En)}if(typeof ln.then=="function")return ki(an,Ye,Ql(ln),En);if(ln.$$typeof===Nt)return ki(an,Ye,Ul(an,ln),En);Jl(an,ln)}return typeof ln=="string"&&ln!==""||typeof ln=="number"||typeof ln=="bigint"?(ln=""+ln,Ye!==null&&Ye.tag===6?(ht(an,Ye.sibling),En=vt(Ye,ln),En.return=an,an=En):(ht(an,Ye),En=Js(ln,an.mode,En),En.return=an,an=En),Bt(an)):ht(an,Ye)}return function(an,Ye,ln,En){try{tl=0;var Fn=ki(an,Ye,ln,En);return ho=null,Fn}catch(ii){if(ii===Po||ii===Ll)throw ii;var Si=Rr(29,ii,null,an.mode);return Si.lanes=En,Si.return=an,Si}finally{}}}var go=xh(!0),wh=xh(!1),Nr=sn(null),Yr=null;function pa(P){var st=P.alternate;pn(nr,nr.current&1),pn(Nr,P),Yr===null&&(st===null||so.current!==null||st.memoizedState!==null)&&(Yr=P)}function yh(P){if(P.tag===22){if(pn(nr,nr.current),pn(Nr,P),Yr===null){var st=P.alternate;st!==null&&st.memoizedState!==null&&(Yr=P)}}else ma()}function ma(){pn(nr,nr.current),pn(Nr,Nr.current)}function ea(P){nn(Nr),Yr===P&&(Yr=null),nn(nr)}var nr=sn(0);function Wl(P){for(var st=P;st!==null;){if(st.tag===13){var ht=st.memoizedState;if(ht!==null&&(ht=ht.dehydrated,ht===null||ht.data==="$?"||bc(ht)))return st}else if(st.tag===19&&st.memoizedProps.revealOrder!==void 0){if((st.flags&128)!==0)return st}else if(st.child!==null){st.child.return=st,st=st.child;continue}if(st===P)break;for(;st.sibling===null;){if(st.return===null||st.return===P)return null;st=st.return}st.sibling.return=st.return,st=st.sibling}return null}function Ou(P,st,ht,xt){st=P.memoizedState,ht=ht(xt,st),ht=ht==null?st:At({},st,ht),P.memoizedState=ht,P.lanes===0&&(P.updateQueue.baseState=ht)}var Bu={enqueueSetState:function(P,st,ht){P=P._reactInternals;var xt=Ar(),vt=ha(xt);vt.payload=st,ht!=null&&(vt.callback=ht),st=da(P,vt,xt),st!==null&&($r(st,P,xt),Xo(st,P,xt))},enqueueReplaceState:function(P,st,ht){P=P._reactInternals;var xt=Ar(),vt=ha(xt);vt.tag=1,vt.payload=st,ht!=null&&(vt.callback=ht),st=da(P,vt,xt),st!==null&&($r(st,P,xt),Xo(st,P,xt))},enqueueForceUpdate:function(P,st){P=P._reactInternals;var ht=Ar(),xt=ha(ht);xt.tag=2,st!=null&&(xt.callback=st),st=da(P,xt,ht),st!==null&&($r(st,P,ht),Xo(st,P,ht))}};function vh(P,st,ht,xt,vt,Mt,Bt){return P=P.stateNode,typeof P.shouldComponentUpdate=="function"?P.shouldComponentUpdate(xt,Mt,Bt):st.prototype&&st.prototype.isPureReactComponent?!ko(ht,xt)||!ko(vt,Mt):!0}function bh(P,st,ht,xt){P=st.state,typeof st.componentWillReceiveProps=="function"&&st.componentWillReceiveProps(ht,xt),typeof st.UNSAFE_componentWillReceiveProps=="function"&&st.UNSAFE_componentWillReceiveProps(ht,xt),st.state!==P&&Bu.enqueueReplaceState(st,st.state,null)}function Ya(P,st){var ht=st;if("ref"in st){ht={};for(var xt in st)xt!=="ref"&&(ht[xt]=st[xt])}if(P=P.defaultProps){ht===st&&(ht=At({},ht));for(var vt in P)ht[vt]===void 0&&(ht[vt]=P[vt])}return ht}var ts=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var st=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(st))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Eh(P){ts(P)}function Sh(P){console.error(P)}function Rh(P){ts(P)}function es(P,st){try{var ht=P.onUncaughtError;ht(st.value,{componentStack:st.stack})}catch(xt){setTimeout(function(){throw xt})}}function _h(P,st,ht){try{var xt=P.onCaughtError;xt(ht.value,{componentStack:ht.stack,errorBoundary:st.tag===1?st.stateNode:null})}catch(vt){setTimeout(function(){throw vt})}}function zu(P,st,ht){return ht=ha(ht),ht.tag=3,ht.payload={element:null},ht.callback=function(){es(P,st)},ht}function Mh(P){return P=ha(P),P.tag=3,P}function Th(P,st,ht,xt){var vt=ht.type.getDerivedStateFromError;if(typeof vt=="function"){var Mt=xt.value;P.payload=function(){return vt(Mt)},P.callback=function(){_h(st,ht,xt)}}var Bt=ht.stateNode;Bt!==null&&typeof Bt.componentDidCatch=="function"&&(P.callback=function(){_h(st,ht,xt),typeof vt!="function"&&(Ea===null?Ea=new Set([this]):Ea.add(this));var Lt=xt.stack;this.componentDidCatch(xt.value,{componentStack:Lt!==null?Lt:""})})}function u1(P,st,ht,xt,vt){if(ht.flags|=32768,xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){if(st=ht.alternate,st!==null&&qo(st,ht,vt,!0),ht=Nr.current,ht!==null){switch(ht.tag){case 13:return Yr===null?rc():ht.alternate===null&&Xi===0&&(Xi=3),ht.flags&=-257,ht.flags|=65536,ht.lanes=vt,xt===uu?ht.flags|=16384:(st=ht.updateQueue,st===null?ht.updateQueue=new Set([xt]):st.add(xt),oc(P,xt,vt)),!1;case 22:return ht.flags|=65536,xt===uu?ht.flags|=16384:(st=ht.updateQueue,st===null?(st={transitions:null,markerInstances:null,retryQueue:new Set([xt])},ht.updateQueue=st):(ht=st.retryQueue,ht===null?st.retryQueue=new Set([xt]):ht.add(xt)),oc(P,xt,vt)),!1}throw Error(ft(435,ht.tag))}return oc(P,xt,vt),rc(),!1}if(Di)return st=Nr.current,st!==null?((st.flags&65536)===0&&(st.flags|=256),st.flags|=65536,st.lanes=vt,xt!==nu&&(P=Error(ft(422),{cause:xt}),Vo(Cr(P,ht)))):(xt!==nu&&(st=Error(ft(423),{cause:xt}),Vo(Cr(st,ht))),P=P.current.alternate,P.flags|=65536,vt&=-vt,P.lanes|=vt,xt=Cr(xt,ht),vt=zu(P.stateNode,xt,vt),hu(P,vt),Xi!==4&&(Xi=2)),!1;var Mt=Error(ft(520),{cause:xt});if(Mt=Cr(Mt,ht),sl===null?sl=[Mt]:sl.push(Mt),Xi!==4&&(Xi=2),st===null)return!0;xt=Cr(xt,ht),ht=st;do{switch(ht.tag){case 3:return ht.flags|=65536,P=vt&-vt,ht.lanes|=P,P=zu(ht.stateNode,xt,P),hu(ht,P),!1;case 1:if(st=ht.type,Mt=ht.stateNode,(ht.flags&128)===0&&(typeof st.getDerivedStateFromError=="function"||Mt!==null&&typeof Mt.componentDidCatch=="function"&&(Ea===null||!Ea.has(Mt))))return ht.flags|=65536,vt&=-vt,ht.lanes|=vt,vt=Mh(vt),Th(vt,P,ht,xt),hu(ht,vt),!1}ht=ht.return}while(ht!==null);return!1}var Ah=Error(ft(461)),ir=!1;function lr(P,st,ht,xt){st.child=P===null?wh(st,null,ht,xt):go(st,P.child,ht,xt)}function $h(P,st,ht,xt,vt){ht=ht.render;var Mt=st.ref;if("ref"in xt){var Bt={};for(var Lt in xt)Lt!=="ref"&&(Bt[Lt]=xt[Lt])}else Bt=xt;return La(st),xt=xu(P,st,ht,Bt,Mt,vt),Lt=wu(),P!==null&&!ir?(yu(P,st,vt),na(P,st,vt)):(Di&&Lt&&tu(st),st.flags|=1,lr(P,st,xt,vt),st.child)}function Dh(P,st,ht,xt,vt){if(P===null){var Mt=ht.type;return typeof Mt=="function"&&!Qs(Mt)&&Mt.defaultProps===void 0&&ht.compare===null?(st.tag=15,st.type=Mt,Ch(P,st,Mt,xt,vt)):(P=zl(ht.type,null,xt,st,st.mode,vt),P.ref=st.ref,P.return=st,st.child=P)}if(Mt=P.child,!qu(P,vt)){var Bt=Mt.memoizedProps;if(ht=ht.compare,ht=ht!==null?ht:ko,ht(Bt,xt)&&P.ref===st.ref)return na(P,st,vt)}return st.flags|=1,P=Zr(Mt,xt),P.ref=st.ref,P.return=st,st.child=P}function Ch(P,st,ht,xt,vt){if(P!==null){var Mt=P.memoizedProps;if(ko(Mt,xt)&&P.ref===st.ref)if(ir=!1,st.pendingProps=xt=Mt,qu(P,vt))(P.flags&131072)!==0&&(ir=!0);else return st.lanes=P.lanes,na(P,st,vt)}return Nu(P,st,ht,xt,vt)}function Oh(P,st,ht){var xt=st.pendingProps,vt=xt.children,Mt=P!==null?P.memoizedState:null;if(xt.mode==="hidden"){if((st.flags&128)!==0){if(xt=Mt!==null?Mt.baseLanes|ht:ht,P!==null){for(vt=st.child=P.child,Mt=0;vt!==null;)Mt=Mt|vt.lanes|vt.childLanes,vt=vt.sibling;st.childLanes=Mt&~xt}else st.childLanes=0,st.child=null;return Bh(P,st,xt,ht)}if((ht&536870912)!==0)st.memoizedState={baseLanes:0,cachePool:null},P!==null&&Il(st,Mt!==null?Mt.cachePool:null),Mt!==null?Cf(st,Mt):gu(),yh(st);else return st.lanes=st.childLanes=536870912,Bh(P,st,Mt!==null?Mt.baseLanes|ht:ht,ht)}else Mt!==null?(Il(st,Mt.cachePool),Cf(st,Mt),ma(),st.memoizedState=null):(P!==null&&Il(st,null),gu(),ma());return lr(P,st,vt,ht),st.child}function Bh(P,st,ht,xt){var vt=su();return vt=vt===null?null:{parent:er._currentValue,pool:vt},st.memoizedState={baseLanes:ht,cachePool:vt},P!==null&&Il(st,null),gu(),yh(st),P!==null&&qo(P,st,xt,!0),null}function ns(P,st){var ht=st.ref;if(ht===null)P!==null&&P.ref!==null&&(st.flags|=4194816);else{if(typeof ht!="function"&&typeof ht!="object")throw Error(ft(284));(P===null||P.ref!==ht)&&(st.flags|=4194816)}}function Nu(P,st,ht,xt,vt){return La(st),ht=xu(P,st,ht,xt,void 0,vt),xt=wu(),P!==null&&!ir?(yu(P,st,vt),na(P,st,vt)):(Di&&xt&&tu(st),st.flags|=1,lr(P,st,ht,vt),st.child)}function zh(P,st,ht,xt,vt,Mt){return La(st),st.updateQueue=null,ht=Bf(st,xt,ht,vt),Of(P),xt=wu(),P!==null&&!ir?(yu(P,st,Mt),na(P,st,Mt)):(Di&&xt&&tu(st),st.flags|=1,lr(P,st,ht,Mt),st.child)}function Nh(P,st,ht,xt,vt){if(La(st),st.stateNode===null){var Mt=io,Bt=ht.contextType;typeof Bt=="object"&&Bt!==null&&(Mt=hr(Bt)),Mt=new ht(xt,Mt),st.memoizedState=Mt.state!==null&&Mt.state!==void 0?Mt.state:null,Mt.updater=Bu,st.stateNode=Mt,Mt._reactInternals=st,Mt=st.stateNode,Mt.props=xt,Mt.state=st.memoizedState,Mt.refs={},cu(st),Bt=ht.contextType,Mt.context=typeof Bt=="object"&&Bt!==null?hr(Bt):io,Mt.state=st.memoizedState,Bt=ht.getDerivedStateFromProps,typeof Bt=="function"&&(Ou(st,ht,Bt,xt),Mt.state=st.memoizedState),typeof ht.getDerivedStateFromProps=="function"||typeof Mt.getSnapshotBeforeUpdate=="function"||typeof Mt.UNSAFE_componentWillMount!="function"&&typeof Mt.componentWillMount!="function"||(Bt=Mt.state,typeof Mt.componentWillMount=="function"&&Mt.componentWillMount(),typeof Mt.UNSAFE_componentWillMount=="function"&&Mt.UNSAFE_componentWillMount(),Bt!==Mt.state&&Bu.enqueueReplaceState(Mt,Mt.state,null),Zo(st,xt,Mt,vt),Ho(),Mt.state=st.memoizedState),typeof Mt.componentDidMount=="function"&&(st.flags|=4194308),xt=!0}else if(P===null){Mt=st.stateNode;var Lt=st.memoizedProps,pe=Ya(ht,Lt);Mt.props=pe;var un=Mt.context,vn=ht.contextType;Bt=io,typeof vn=="object"&&vn!==null&&(Bt=hr(vn));var Sn=ht.getDerivedStateFromProps;vn=typeof Sn=="function"||typeof Mt.getSnapshotBeforeUpdate=="function",Lt=st.pendingProps!==Lt,vn||typeof Mt.UNSAFE_componentWillReceiveProps!="function"&&typeof Mt.componentWillReceiveProps!="function"||(Lt||un!==Bt)&&bh(st,Mt,xt,Bt),fa=!1;var fn=st.memoizedState;Mt.state=fn,Zo(st,xt,Mt,vt),Ho(),un=st.memoizedState,Lt||fn!==un||fa?(typeof Sn=="function"&&(Ou(st,ht,Sn,xt),un=st.memoizedState),(pe=fa||vh(st,ht,pe,xt,fn,un,Bt))?(vn||typeof Mt.UNSAFE_componentWillMount!="function"&&typeof Mt.componentWillMount!="function"||(typeof Mt.componentWillMount=="function"&&Mt.componentWillMount(),typeof Mt.UNSAFE_componentWillMount=="function"&&Mt.UNSAFE_componentWillMount()),typeof Mt.componentDidMount=="function"&&(st.flags|=4194308)):(typeof Mt.componentDidMount=="function"&&(st.flags|=4194308),st.memoizedProps=xt,st.memoizedState=un),Mt.props=xt,Mt.state=un,Mt.context=Bt,xt=pe):(typeof Mt.componentDidMount=="function"&&(st.flags|=4194308),xt=!1)}else{Mt=st.stateNode,fu(P,st),Bt=st.memoizedProps,vn=Ya(ht,Bt),Mt.props=vn,Sn=st.pendingProps,fn=Mt.context,un=ht.contextType,pe=io,typeof un=="object"&&un!==null&&(pe=hr(un)),Lt=ht.getDerivedStateFromProps,(un=typeof Lt=="function"||typeof Mt.getSnapshotBeforeUpdate=="function")||typeof Mt.UNSAFE_componentWillReceiveProps!="function"&&typeof Mt.componentWillReceiveProps!="function"||(Bt!==Sn||fn!==pe)&&bh(st,Mt,xt,pe),fa=!1,fn=st.memoizedState,Mt.state=fn,Zo(st,xt,Mt,vt),Ho();var dn=st.memoizedState;Bt!==Sn||fn!==dn||fa||P!==null&&P.dependencies!==null&&kl(P.dependencies)?(typeof Lt=="function"&&(Ou(st,ht,Lt,xt),dn=st.memoizedState),(vn=fa||vh(st,ht,vn,xt,fn,dn,pe)||P!==null&&P.dependencies!==null&&kl(P.dependencies))?(un||typeof Mt.UNSAFE_componentWillUpdate!="function"&&typeof Mt.componentWillUpdate!="function"||(typeof Mt.componentWillUpdate=="function"&&Mt.componentWillUpdate(xt,dn,pe),typeof Mt.UNSAFE_componentWillUpdate=="function"&&Mt.UNSAFE_componentWillUpdate(xt,dn,pe)),typeof Mt.componentDidUpdate=="function"&&(st.flags|=4),typeof Mt.getSnapshotBeforeUpdate=="function"&&(st.flags|=1024)):(typeof Mt.componentDidUpdate!="function"||Bt===P.memoizedProps&&fn===P.memoizedState||(st.flags|=4),typeof Mt.getSnapshotBeforeUpdate!="function"||Bt===P.memoizedProps&&fn===P.memoizedState||(st.flags|=1024),st.memoizedProps=xt,st.memoizedState=dn),Mt.props=xt,Mt.state=dn,Mt.context=pe,xt=vn):(typeof Mt.componentDidUpdate!="function"||Bt===P.memoizedProps&&fn===P.memoizedState||(st.flags|=4),typeof Mt.getSnapshotBeforeUpdate!="function"||Bt===P.memoizedProps&&fn===P.memoizedState||(st.flags|=1024),xt=!1)}return Mt=xt,ns(P,st),xt=(st.flags&128)!==0,Mt||xt?(Mt=st.stateNode,ht=xt&&typeof ht.getDerivedStateFromError!="function"?null:Mt.render(),st.flags|=1,P!==null&&xt?(st.child=go(st,P.child,null,vt),st.child=go(st,null,ht,vt)):lr(P,st,ht,vt),st.memoizedState=Mt.state,P=st.child):P=na(P,st,vt),P}function jh(P,st,ht,xt){return Lo(),st.flags|=256,lr(P,st,ht,xt),st.child}var ju={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ku(P){return{baseLanes:P,cachePool:Sf()}}function Uu(P,st,ht){return P=P!==null?P.childLanes&~ht:0,st&&(P|=jr),P}function kh(P,st,ht){var xt=st.pendingProps,vt=!1,Mt=(st.flags&128)!==0,Bt;if((Bt=Mt)||(Bt=P!==null&&P.memoizedState===null?!1:(nr.current&2)!==0),Bt&&(vt=!0,st.flags&=-129),Bt=(st.flags&32)!==0,st.flags&=-33,P===null){if(Di){if(vt?pa(st):ma(),Di){var Lt=Fi,pe;if(pe=Lt){t:{for(pe=Lt,Lt=qr;pe.nodeType!==8;){if(!Lt){Lt=null;break t}if(pe=Lr(pe.nextSibling),pe===null){Lt=null;break t}}Lt=pe}Lt!==null?(st.memoizedState={dehydrated:Lt,treeContext:Na!==null?{id:Kr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},pe=Rr(18,null,null,0),pe.stateNode=Lt,pe.return=st,st.child=pe,gr=st,Fi=null,pe=!0):pe=!1}pe||Ua(st)}if(Lt=st.memoizedState,Lt!==null&&(Lt=Lt.dehydrated,Lt!==null))return bc(Lt)?st.lanes=32:st.lanes=536870912,null;ea(st)}return Lt=xt.children,xt=xt.fallback,vt?(ma(),vt=st.mode,Lt=is({mode:"hidden",children:Lt},vt),xt=za(xt,vt,ht,null),Lt.return=st,xt.return=st,Lt.sibling=xt,st.child=Lt,vt=st.child,vt.memoizedState=ku(ht),vt.childLanes=Uu(P,Bt,ht),st.memoizedState=ju,xt):(pa(st),Iu(st,Lt))}if(pe=P.memoizedState,pe!==null&&(Lt=pe.dehydrated,Lt!==null)){if(Mt)st.flags&256?(pa(st),st.flags&=-257,st=Lu(P,st,ht)):st.memoizedState!==null?(ma(),st.child=P.child,st.flags|=128,st=null):(ma(),vt=xt.fallback,Lt=st.mode,xt=is({mode:"visible",children:xt.children},Lt),vt=za(vt,Lt,ht,null),vt.flags|=2,xt.return=st,vt.return=st,xt.sibling=vt,st.child=xt,go(st,P.child,null,ht),xt=st.child,xt.memoizedState=ku(ht),xt.childLanes=Uu(P,Bt,ht),st.memoizedState=ju,st=vt);else if(pa(st),bc(Lt)){if(Bt=Lt.nextSibling&&Lt.nextSibling.dataset,Bt)var un=Bt.dgst;Bt=un,xt=Error(ft(419)),xt.stack="",xt.digest=Bt,Vo({value:xt,source:null,stack:null}),st=Lu(P,st,ht)}else if(ir||qo(P,st,ht,!1),Bt=(ht&P.childLanes)!==0,ir||Bt){if(Bt=qi,Bt!==null&&(xt=ht&-ht,xt=(xt&42)!==0?1:Rt(xt),xt=(xt&(Bt.suspendedLanes|ht))!==0?0:xt,xt!==0&&xt!==pe.retryLane))throw pe.retryLane=xt,no(P,xt),$r(Bt,P,xt),Ah;Lt.data==="$?"||rc(),st=Lu(P,st,ht)}else Lt.data==="$?"?(st.flags|=192,st.child=P.child,st=null):(P=pe.treeContext,Fi=Lr(Lt.nextSibling),gr=st,Di=!0,ka=null,qr=!1,P!==null&&(Br[zr++]=Kr,Br[zr++]=Qr,Br[zr++]=Na,Kr=P.id,Qr=P.overflow,Na=st),st=Iu(st,xt.children),st.flags|=4096);return st}return vt?(ma(),vt=xt.fallback,Lt=st.mode,pe=P.child,un=pe.sibling,xt=Zr(pe,{mode:"hidden",children:xt.children}),xt.subtreeFlags=pe.subtreeFlags&65011712,un!==null?vt=Zr(un,vt):(vt=za(vt,Lt,ht,null),vt.flags|=2),vt.return=st,xt.return=st,xt.sibling=vt,st.child=xt,xt=vt,vt=st.child,Lt=P.child.memoizedState,Lt===null?Lt=ku(ht):(pe=Lt.cachePool,pe!==null?(un=er._currentValue,pe=pe.parent!==un?{parent:un,pool:un}:pe):pe=Sf(),Lt={baseLanes:Lt.baseLanes|ht,cachePool:pe}),vt.memoizedState=Lt,vt.childLanes=Uu(P,Bt,ht),st.memoizedState=ju,xt):(pa(st),ht=P.child,P=ht.sibling,ht=Zr(ht,{mode:"visible",children:xt.children}),ht.return=st,ht.sibling=null,P!==null&&(Bt=st.deletions,Bt===null?(st.deletions=[P],st.flags|=16):Bt.push(P)),st.child=ht,st.memoizedState=null,ht)}function Iu(P,st){return st=is({mode:"visible",children:st},P.mode),st.return=P,P.child=st}function is(P,st){return P=Rr(22,P,null,st),P.lanes=0,P.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},P}function Lu(P,st,ht){return go(st,P.child,null,ht),P=Iu(st,st.pendingProps.children),P.flags|=2,st.memoizedState=null,P}function Uh(P,st,ht){P.lanes|=st;var xt=P.alternate;xt!==null&&(xt.lanes|=st),ru(P.return,st,ht)}function Vu(P,st,ht,xt,vt){var Mt=P.memoizedState;Mt===null?P.memoizedState={isBackwards:st,rendering:null,renderingStartTime:0,last:xt,tail:ht,tailMode:vt}:(Mt.isBackwards=st,Mt.rendering=null,Mt.renderingStartTime=0,Mt.last=xt,Mt.tail=ht,Mt.tailMode=vt)}function Ih(P,st,ht){var xt=st.pendingProps,vt=xt.revealOrder,Mt=xt.tail;if(lr(P,st,xt.children,ht),xt=nr.current,(xt&2)!==0)xt=xt&1|2,st.flags|=128;else{if(P!==null&&(P.flags&128)!==0)t:for(P=st.child;P!==null;){if(P.tag===13)P.memoizedState!==null&&Uh(P,ht,st);else if(P.tag===19)Uh(P,ht,st);else if(P.child!==null){P.child.return=P,P=P.child;continue}if(P===st)break t;for(;P.sibling===null;){if(P.return===null||P.return===st)break t;P=P.return}P.sibling.return=P.return,P=P.sibling}xt&=1}switch(pn(nr,xt),vt){case"forwards":for(ht=st.child,vt=null;ht!==null;)P=ht.alternate,P!==null&&Wl(P)===null&&(vt=ht),ht=ht.sibling;ht=vt,ht===null?(vt=st.child,st.child=null):(vt=ht.sibling,ht.sibling=null),Vu(st,!1,vt,ht,Mt);break;case"backwards":for(ht=null,vt=st.child,st.child=null;vt!==null;){if(P=vt.alternate,P!==null&&Wl(P)===null){st.child=vt;break}P=vt.sibling,vt.sibling=ht,ht=vt,vt=P}Vu(st,!0,ht,null,Mt);break;case"together":Vu(st,!1,null,null,void 0);break;default:st.memoizedState=null}return st.child}function na(P,st,ht){if(P!==null&&(st.dependencies=P.dependencies),ba|=st.lanes,(ht&st.childLanes)===0)if(P!==null){if(qo(P,st,ht,!1),(ht&st.childLanes)===0)return null}else return null;if(P!==null&&st.child!==P.child)throw Error(ft(153));if(st.child!==null){for(P=st.child,ht=Zr(P,P.pendingProps),st.child=ht,ht.return=st;P.sibling!==null;)P=P.sibling,ht=ht.sibling=Zr(P,P.pendingProps),ht.return=st;ht.sibling=null}return st.child}function qu(P,st){return(P.lanes&st)!==0?!0:(P=P.dependencies,!!(P!==null&&kl(P)))}function c1(P,st,ht){switch(st.tag){case 3:Bn(st,st.stateNode.containerInfo),ca(st,er,P.memoizedState.cache),Lo();break;case 27:case 5:Kn(st);break;case 4:Bn(st,st.stateNode.containerInfo);break;case 10:ca(st,st.type,st.memoizedProps.value);break;case 13:var xt=st.memoizedState;if(xt!==null)return xt.dehydrated!==null?(pa(st),st.flags|=128,null):(ht&st.child.childLanes)!==0?kh(P,st,ht):(pa(st),P=na(P,st,ht),P!==null?P.sibling:null);pa(st);break;case 19:var vt=(P.flags&128)!==0;if(xt=(ht&st.childLanes)!==0,xt||(qo(P,st,ht,!1),xt=(ht&st.childLanes)!==0),vt){if(xt)return Ih(P,st,ht);st.flags|=128}if(vt=st.memoizedState,vt!==null&&(vt.rendering=null,vt.tail=null,vt.lastEffect=null),pn(nr,nr.current),xt)break;return null;case 22:case 23:return st.lanes=0,Oh(P,st,ht);case 24:ca(st,er,P.memoizedState.cache)}return na(P,st,ht)}function Lh(P,st,ht){if(P!==null)if(P.memoizedProps!==st.pendingProps)ir=!0;else{if(!qu(P,ht)&&(st.flags&128)===0)return ir=!1,c1(P,st,ht);ir=(P.flags&131072)!==0}else ir=!1,Di&&(st.flags&1048576)!==0&&mf(st,jl,st.index);switch(st.lanes=0,st.tag){case 16:t:{P=st.pendingProps;var xt=st.elementType,vt=xt._init;if(xt=vt(xt._payload),st.type=xt,typeof xt=="function")Qs(xt)?(P=Ya(xt,P),st.tag=1,st=Nh(null,st,xt,P,ht)):(st.tag=0,st=Nu(null,st,xt,P,ht));else{if(xt!=null){if(vt=xt.$$typeof,vt===jt){st.tag=11,st=$h(null,st,xt,P,ht);break t}else if(vt===Ft){st.tag=14,st=Dh(null,st,xt,P,ht);break t}}throw st=Mn(xt)||xt,Error(ft(306,st,""))}}return st;case 0:return Nu(P,st,st.type,st.pendingProps,ht);case 1:return xt=st.type,vt=Ya(xt,st.pendingProps),Nh(P,st,xt,vt,ht);case 3:t:{if(Bn(st,st.stateNode.containerInfo),P===null)throw Error(ft(387));xt=st.pendingProps;var Mt=st.memoizedState;vt=Mt.element,fu(P,st),Zo(st,xt,null,ht);var Bt=st.memoizedState;if(xt=Bt.cache,ca(st,er,xt),xt!==Mt.cache&&au(st,[er],ht,!0),Ho(),xt=Bt.element,Mt.isDehydrated)if(Mt={element:xt,isDehydrated:!1,cache:Bt.cache},st.updateQueue.baseState=Mt,st.memoizedState=Mt,st.flags&256){st=jh(P,st,xt,ht);break t}else if(xt!==vt){vt=Cr(Error(ft(424)),st),Vo(vt),st=jh(P,st,xt,ht);break t}else{switch(P=st.stateNode.containerInfo,P.nodeType){case 9:P=P.body;break;default:P=P.nodeName==="HTML"?P.ownerDocument.body:P}for(Fi=Lr(P.firstChild),gr=st,Di=!0,ka=null,qr=!0,ht=wh(st,null,xt,ht),st.child=ht;ht;)ht.flags=ht.flags&-3|4096,ht=ht.sibling}else{if(Lo(),xt===vt){st=na(P,st,ht);break t}lr(P,st,xt,ht)}st=st.child}return st;case 26:return ns(P,st),P===null?(ht=G0(st.type,null,st.pendingProps,null))?st.memoizedState=ht:Di||(ht=st.type,P=st.pendingProps,xt=xs(xn.current).createElement(ht),xt[Yt]=st,xt[en]=P,ur(xt,ht,P),pi(xt),st.stateNode=xt):st.memoizedState=G0(st.type,P.memoizedProps,st.pendingProps,P.memoizedState),null;case 27:return Kn(st),P===null&&Di&&(xt=st.stateNode=V0(st.type,st.pendingProps,xn.current),gr=st,qr=!0,vt=Fi,_a(st.type)?(Ec=vt,Fi=Lr(xt.firstChild)):Fi=vt),lr(P,st,st.pendingProps.children,ht),ns(P,st),P===null&&(st.flags|=4194304),st.child;case 5:return P===null&&Di&&((vt=xt=Fi)&&(xt=U1(xt,st.type,st.pendingProps,qr),xt!==null?(st.stateNode=xt,gr=st,Fi=Lr(xt.firstChild),qr=!1,vt=!0):vt=!1),vt||Ua(st)),Kn(st),vt=st.type,Mt=st.pendingProps,Bt=P!==null?P.memoizedProps:null,xt=Mt.children,wc(vt,Mt)?xt=null:Bt!==null&&wc(vt,Bt)&&(st.flags|=32),st.memoizedState!==null&&(vt=xu(P,st,n1,null,null,ht),xl._currentValue=vt),ns(P,st),lr(P,st,xt,ht),st.child;case 6:return P===null&&Di&&((P=ht=Fi)&&(ht=I1(ht,st.pendingProps,qr),ht!==null?(st.stateNode=ht,gr=st,Fi=null,P=!0):P=!1),P||Ua(st)),null;case 13:return kh(P,st,ht);case 4:return Bn(st,st.stateNode.containerInfo),xt=st.pendingProps,P===null?st.child=go(st,null,xt,ht):lr(P,st,xt,ht),st.child;case 11:return $h(P,st,st.type,st.pendingProps,ht);case 7:return lr(P,st,st.pendingProps,ht),st.child;case 8:return lr(P,st,st.pendingProps.children,ht),st.child;case 12:return lr(P,st,st.pendingProps.children,ht),st.child;case 10:return xt=st.pendingProps,ca(st,st.type,xt.value),lr(P,st,xt.children,ht),st.child;case 9:return vt=st.type._context,xt=st.pendingProps.children,La(st),vt=hr(vt),xt=xt(vt),st.flags|=1,lr(P,st,xt,ht),st.child;case 14:return Dh(P,st,st.type,st.pendingProps,ht);case 15:return Ch(P,st,st.type,st.pendingProps,ht);case 19:return Ih(P,st,ht);case 31:return xt=st.pendingProps,ht=st.mode,xt={mode:xt.mode,children:xt.children},P===null?(ht=is(xt,ht),ht.ref=st.ref,st.child=ht,ht.return=st,st=ht):(ht=Zr(P.child,xt),ht.ref=st.ref,st.child=ht,ht.return=st,st=ht),st;case 22:return Oh(P,st,ht);case 24:return La(st),xt=hr(er),P===null?(vt=su(),vt===null&&(vt=qi,Mt=ou(),vt.pooledCache=Mt,Mt.refCount++,Mt!==null&&(vt.pooledCacheLanes|=ht),vt=Mt),st.memoizedState={parent:xt,cache:vt},cu(st),ca(st,er,vt)):((P.lanes&ht)!==0&&(fu(P,st),Zo(st,null,null,ht),Ho()),vt=P.memoizedState,Mt=st.memoizedState,vt.parent!==xt?(vt={parent:xt,cache:xt},st.memoizedState=vt,st.lanes===0&&(st.memoizedState=st.updateQueue.baseState=vt),ca(st,er,xt)):(xt=Mt.cache,ca(st,er,xt),xt!==vt.cache&&au(st,[er],ht,!0))),lr(P,st,st.pendingProps.children,ht),st.child;case 29:throw st.pendingProps}throw Error(ft(156,st.tag))}function ia(P){P.flags|=4}function Vh(P,st){if(st.type!=="stylesheet"||(st.state.loading&4)!==0)P.flags&=-16777217;else if(P.flags|=16777216,!Z0(st)){if(st=Nr.current,st!==null&&((Ai&4194048)===Ai?Yr!==null:(Ai&62914560)!==Ai&&(Ai&536870912)===0||st!==Yr))throw Fo=uu,Rf;P.flags|=8192}}function rs(P,st){st!==null&&(P.flags|=4),P.flags&16384&&(st=P.tag!==22?Xr():536870912,P.lanes|=st,wo|=st)}function nl(P,st){if(!Di)switch(P.tailMode){case"hidden":st=P.tail;for(var ht=null;st!==null;)st.alternate!==null&&(ht=st),st=st.sibling;ht===null?P.tail=null:ht.sibling=null;break;case"collapsed":ht=P.tail;for(var xt=null;ht!==null;)ht.alternate!==null&&(xt=ht),ht=ht.sibling;xt===null?st||P.tail===null?P.tail=null:P.tail.sibling=null:xt.sibling=null}}function Pi(P){var st=P.alternate!==null&&P.alternate.child===P.child,ht=0,xt=0;if(st)for(var vt=P.child;vt!==null;)ht|=vt.lanes|vt.childLanes,xt|=vt.subtreeFlags&65011712,xt|=vt.flags&65011712,vt.return=P,vt=vt.sibling;else for(vt=P.child;vt!==null;)ht|=vt.lanes|vt.childLanes,xt|=vt.subtreeFlags,xt|=vt.flags,vt.return=P,vt=vt.sibling;return P.subtreeFlags|=xt,P.childLanes=ht,st}function f1(P,st,ht){var xt=st.pendingProps;switch(eu(st),st.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pi(st),null;case 1:return Pi(st),null;case 3:return ht=st.stateNode,xt=null,P!==null&&(xt=P.memoizedState.cache),st.memoizedState.cache!==xt&&(st.flags|=2048),Wr(er),Yn(),ht.pendingContext&&(ht.context=ht.pendingContext,ht.pendingContext=null),(P===null||P.child===null)&&(Io(st)?ia(st):P===null||P.memoizedState.isDehydrated&&(st.flags&256)===0||(st.flags|=1024,yf())),Pi(st),null;case 26:return ht=st.memoizedState,P===null?(ia(st),ht!==null?(Pi(st),Vh(st,ht)):(Pi(st),st.flags&=-16777217)):ht?ht!==P.memoizedState?(ia(st),Pi(st),Vh(st,ht)):(Pi(st),st.flags&=-16777217):(P.memoizedProps!==xt&&ia(st),Pi(st),st.flags&=-16777217),null;case 27:Qn(st),ht=xn.current;var vt=st.type;if(P!==null&&st.stateNode!=null)P.memoizedProps!==xt&&ia(st);else{if(!xt){if(st.stateNode===null)throw Error(ft(166));return Pi(st),null}P=gn.current,Io(st)?xf(st):(P=V0(vt,xt,ht),st.stateNode=P,ia(st))}return Pi(st),null;case 5:if(Qn(st),ht=st.type,P!==null&&st.stateNode!=null)P.memoizedProps!==xt&&ia(st);else{if(!xt){if(st.stateNode===null)throw Error(ft(166));return Pi(st),null}if(P=gn.current,Io(st))xf(st);else{switch(vt=xs(xn.current),P){case 1:P=vt.createElementNS("http://www.w3.org/2000/svg",ht);break;case 2:P=vt.createElementNS("http://www.w3.org/1998/Math/MathML",ht);break;default:switch(ht){case"svg":P=vt.createElementNS("http://www.w3.org/2000/svg",ht);break;case"math":P=vt.createElementNS("http://www.w3.org/1998/Math/MathML",ht);break;case"script":P=vt.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof xt.is=="string"?vt.createElement("select",{is:xt.is}):vt.createElement("select"),xt.multiple?P.multiple=!0:xt.size&&(P.size=xt.size);break;default:P=typeof xt.is=="string"?vt.createElement(ht,{is:xt.is}):vt.createElement(ht)}}P[Yt]=st,P[en]=xt;t:for(vt=st.child;vt!==null;){if(vt.tag===5||vt.tag===6)P.appendChild(vt.stateNode);else if(vt.tag!==4&&vt.tag!==27&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===st)break t;for(;vt.sibling===null;){if(vt.return===null||vt.return===st)break t;vt=vt.return}vt.sibling.return=vt.return,vt=vt.sibling}st.stateNode=P;t:switch(ur(P,ht,xt),ht){case"button":case"input":case"select":case"textarea":P=!!xt.autoFocus;break t;case"img":P=!0;break t;default:P=!1}P&&ia(st)}}return Pi(st),st.flags&=-16777217,null;case 6:if(P&&st.stateNode!=null)P.memoizedProps!==xt&&ia(st);else{if(typeof xt!="string"&&st.stateNode===null)throw Error(ft(166));if(P=xn.current,Io(st)){if(P=st.stateNode,ht=st.memoizedProps,xt=null,vt=gr,vt!==null)switch(vt.tag){case 27:case 5:xt=vt.memoizedProps}P[Yt]=st,P=!!(P.nodeValue===ht||xt!==null&&xt.suppressHydrationWarning===!0||z0(P.nodeValue,ht)),P||Ua(st)}else P=xs(P).createTextNode(xt),P[Yt]=st,st.stateNode=P}return Pi(st),null;case 13:if(xt=st.memoizedState,P===null||P.memoizedState!==null&&P.memoizedState.dehydrated!==null){if(vt=Io(st),xt!==null&&xt.dehydrated!==null){if(P===null){if(!vt)throw Error(ft(318));if(vt=st.memoizedState,vt=vt!==null?vt.dehydrated:null,!vt)throw Error(ft(317));vt[Yt]=st}else Lo(),(st.flags&128)===0&&(st.memoizedState=null),st.flags|=4;Pi(st),vt=!1}else vt=yf(),P!==null&&P.memoizedState!==null&&(P.memoizedState.hydrationErrors=vt),vt=!0;if(!vt)return st.flags&256?(ea(st),st):(ea(st),null)}if(ea(st),(st.flags&128)!==0)return st.lanes=ht,st;if(ht=xt!==null,P=P!==null&&P.memoizedState!==null,ht){xt=st.child,vt=null,xt.alternate!==null&&xt.alternate.memoizedState!==null&&xt.alternate.memoizedState.cachePool!==null&&(vt=xt.alternate.memoizedState.cachePool.pool);var Mt=null;xt.memoizedState!==null&&xt.memoizedState.cachePool!==null&&(Mt=xt.memoizedState.cachePool.pool),Mt!==vt&&(xt.flags|=2048)}return ht!==P&&ht&&(st.child.flags|=8192),rs(st,st.updateQueue),Pi(st),null;case 4:return Yn(),P===null&&dc(st.stateNode.containerInfo),Pi(st),null;case 10:return Wr(st.type),Pi(st),null;case 19:if(nn(nr),vt=st.memoizedState,vt===null)return Pi(st),null;if(xt=(st.flags&128)!==0,Mt=vt.rendering,Mt===null)if(xt)nl(vt,!1);else{if(Xi!==0||P!==null&&(P.flags&128)!==0)for(P=st.child;P!==null;){if(Mt=Wl(P),Mt!==null){for(st.flags|=128,nl(vt,!1),P=Mt.updateQueue,st.updateQueue=P,rs(st,P),st.subtreeFlags=0,P=ht,ht=st.child;ht!==null;)pf(ht,P),ht=ht.sibling;return pn(nr,nr.current&1|2),st.child}P=P.sibling}vt.tail!==null&&Xn()>ls&&(st.flags|=128,xt=!0,nl(vt,!1),st.lanes=4194304)}else{if(!xt)if(P=Wl(Mt),P!==null){if(st.flags|=128,xt=!0,P=P.updateQueue,st.updateQueue=P,rs(st,P),nl(vt,!0),vt.tail===null&&vt.tailMode==="hidden"&&!Mt.alternate&&!Di)return Pi(st),null}else 2*Xn()-vt.renderingStartTime>ls&&ht!==536870912&&(st.flags|=128,xt=!0,nl(vt,!1),st.lanes=4194304);vt.isBackwards?(Mt.sibling=st.child,st.child=Mt):(P=vt.last,P!==null?P.sibling=Mt:st.child=Mt,vt.last=Mt)}return vt.tail!==null?(st=vt.tail,vt.rendering=st,vt.tail=st.sibling,vt.renderingStartTime=Xn(),st.sibling=null,P=nr.current,pn(nr,xt?P&1|2:P&1),st):(Pi(st),null);case 22:case 23:return ea(st),pu(),xt=st.memoizedState!==null,P!==null?P.memoizedState!==null!==xt&&(st.flags|=8192):xt&&(st.flags|=8192),xt?(ht&536870912)!==0&&(st.flags&128)===0&&(Pi(st),st.subtreeFlags&6&&(st.flags|=8192)):Pi(st),ht=st.updateQueue,ht!==null&&rs(st,ht.retryQueue),ht=null,P!==null&&P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(ht=P.memoizedState.cachePool.pool),xt=null,st.memoizedState!==null&&st.memoizedState.cachePool!==null&&(xt=st.memoizedState.cachePool.pool),xt!==ht&&(st.flags|=2048),P!==null&&nn(Va),null;case 24:return ht=null,P!==null&&(ht=P.memoizedState.cache),st.memoizedState.cache!==ht&&(st.flags|=2048),Wr(er),Pi(st),null;case 25:return null;case 30:return null}throw Error(ft(156,st.tag))}function h1(P,st){switch(eu(st),st.tag){case 1:return P=st.flags,P&65536?(st.flags=P&-65537|128,st):null;case 3:return Wr(er),Yn(),P=st.flags,(P&65536)!==0&&(P&128)===0?(st.flags=P&-65537|128,st):null;case 26:case 27:case 5:return Qn(st),null;case 13:if(ea(st),P=st.memoizedState,P!==null&&P.dehydrated!==null){if(st.alternate===null)throw Error(ft(340));Lo()}return P=st.flags,P&65536?(st.flags=P&-65537|128,st):null;case 19:return nn(nr),null;case 4:return Yn(),null;case 10:return Wr(st.type),null;case 22:case 23:return ea(st),pu(),P!==null&&nn(Va),P=st.flags,P&65536?(st.flags=P&-65537|128,st):null;case 24:return Wr(er),null;case 25:return null;default:return null}}function qh(P,st){switch(eu(st),st.tag){case 3:Wr(er),Yn();break;case 26:case 27:case 5:Qn(st);break;case 4:Yn();break;case 13:ea(st);break;case 19:nn(nr);break;case 10:Wr(st.type);break;case 22:case 23:ea(st),pu(),P!==null&&nn(Va);break;case 24:Wr(er)}}function il(P,st){try{var ht=st.updateQueue,xt=ht!==null?ht.lastEffect:null;if(xt!==null){var vt=xt.next;ht=vt;do{if((ht.tag&P)===P){xt=void 0;var Mt=ht.create,Bt=ht.inst;xt=Mt(),Bt.destroy=xt}ht=ht.next}while(ht!==vt)}}catch(Lt){Ui(st,st.return,Lt)}}function xa(P,st,ht){try{var xt=st.updateQueue,vt=xt!==null?xt.lastEffect:null;if(vt!==null){var Mt=vt.next;xt=Mt;do{if((xt.tag&P)===P){var Bt=xt.inst,Lt=Bt.destroy;if(Lt!==void 0){Bt.destroy=void 0,vt=st;var pe=ht,un=Lt;try{un()}catch(vn){Ui(vt,pe,vn)}}}xt=xt.next}while(xt!==Mt)}}catch(vn){Ui(st,st.return,vn)}}function Yh(P){var st=P.updateQueue;if(st!==null){var ht=P.stateNode;try{Df(st,ht)}catch(xt){Ui(P,P.return,xt)}}}function Gh(P,st,ht){ht.props=Ya(P.type,P.memoizedProps),ht.state=P.memoizedState;try{ht.componentWillUnmount()}catch(xt){Ui(P,st,xt)}}function rl(P,st){try{var ht=P.ref;if(ht!==null){switch(P.tag){case 26:case 27:case 5:var xt=P.stateNode;break;case 30:xt=P.stateNode;break;default:xt=P.stateNode}typeof ht=="function"?P.refCleanup=ht(xt):ht.current=xt}}catch(vt){Ui(P,st,vt)}}function Gr(P,st){var ht=P.ref,xt=P.refCleanup;if(ht!==null)if(typeof xt=="function")try{xt()}catch(vt){Ui(P,st,vt)}finally{P.refCleanup=null,P=P.alternate,P!=null&&(P.refCleanup=null)}else if(typeof ht=="function")try{ht(null)}catch(vt){Ui(P,st,vt)}else ht.current=null}function Ph(P){var st=P.type,ht=P.memoizedProps,xt=P.stateNode;try{t:switch(st){case"button":case"input":case"select":case"textarea":ht.autoFocus&&xt.focus();break t;case"img":ht.src?xt.src=ht.src:ht.srcSet&&(xt.srcset=ht.srcSet)}}catch(vt){Ui(P,P.return,vt)}}function Yu(P,st,ht){try{var xt=P.stateNode;B1(xt,P.type,ht,st),xt[en]=st}catch(vt){Ui(P,P.return,vt)}}function Fh(P){return P.tag===5||P.tag===3||P.tag===26||P.tag===27&&_a(P.type)||P.tag===4}function Gu(P){t:for(;;){for(;P.sibling===null;){if(P.return===null||Fh(P.return))return null;P=P.return}for(P.sibling.return=P.return,P=P.sibling;P.tag!==5&&P.tag!==6&&P.tag!==18;){if(P.tag===27&&_a(P.type)||P.flags&2||P.child===null||P.tag===4)continue t;P.child.return=P,P=P.child}if(!(P.flags&2))return P.stateNode}}function Pu(P,st,ht){var xt=P.tag;if(xt===5||xt===6)P=P.stateNode,st?(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).insertBefore(P,st):(st=ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht,st.appendChild(P),ht=ht._reactRootContainer,ht!=null||st.onclick!==null||(st.onclick=ms));else if(xt!==4&&(xt===27&&_a(P.type)&&(ht=P.stateNode,st=null),P=P.child,P!==null))for(Pu(P,st,ht),P=P.sibling;P!==null;)Pu(P,st,ht),P=P.sibling}function as(P,st,ht){var xt=P.tag;if(xt===5||xt===6)P=P.stateNode,st?ht.insertBefore(P,st):ht.appendChild(P);else if(xt!==4&&(xt===27&&_a(P.type)&&(ht=P.stateNode),P=P.child,P!==null))for(as(P,st,ht),P=P.sibling;P!==null;)as(P,st,ht),P=P.sibling}function Xh(P){var st=P.stateNode,ht=P.memoizedProps;try{for(var xt=P.type,vt=st.attributes;vt.length;)st.removeAttributeNode(vt[0]);ur(st,xt,ht),st[Yt]=P,st[en]=ht}catch(Mt){Ui(P,P.return,Mt)}}var ra=!1,Qi=!1,Fu=!1,Hh=typeof WeakSet=="function"?WeakSet:Set,rr=null;function d1(P,st){if(P=P.containerInfo,mc=Ss,P=af(P),Gs(P)){if("selectionStart"in P)var ht={start:P.selectionStart,end:P.selectionEnd};else t:{ht=(ht=P.ownerDocument)&&ht.defaultView||window;var xt=ht.getSelection&&ht.getSelection();if(xt&&xt.rangeCount!==0){ht=xt.anchorNode;var vt=xt.anchorOffset,Mt=xt.focusNode;xt=xt.focusOffset;try{ht.nodeType,Mt.nodeType}catch{ht=null;break t}var Bt=0,Lt=-1,pe=-1,un=0,vn=0,Sn=P,fn=null;e:for(;;){for(var dn;Sn!==ht||vt!==0&&Sn.nodeType!==3||(Lt=Bt+vt),Sn!==Mt||xt!==0&&Sn.nodeType!==3||(pe=Bt+xt),Sn.nodeType===3&&(Bt+=Sn.nodeValue.length),(dn=Sn.firstChild)!==null;)fn=Sn,Sn=dn;for(;;){if(Sn===P)break e;if(fn===ht&&++un===vt&&(Lt=Bt),fn===Mt&&++vn===xt&&(pe=Bt),(dn=Sn.nextSibling)!==null)break;Sn=fn,fn=Sn.parentNode}Sn=dn}ht=Lt===-1||pe===-1?null:{start:Lt,end:pe}}else ht=null}ht=ht||{start:0,end:0}}else ht=null;for(xc={focusedElem:P,selectionRange:ht},Ss=!1,rr=st;rr!==null;)if(st=rr,P=st.child,(st.subtreeFlags&1024)!==0&&P!==null)P.return=st,rr=P;else for(;rr!==null;){switch(st=rr,Mt=st.alternate,P=st.flags,st.tag){case 0:break;case 11:case 15:break;case 1:if((P&1024)!==0&&Mt!==null){P=void 0,ht=st,vt=Mt.memoizedProps,Mt=Mt.memoizedState,xt=ht.stateNode;try{var di=Ya(ht.type,vt,ht.elementType===ht.type);P=xt.getSnapshotBeforeUpdate(di,Mt),xt.__reactInternalSnapshotBeforeUpdate=P}catch(ui){Ui(ht,ht.return,ui)}}break;case 3:if((P&1024)!==0){if(P=st.stateNode.containerInfo,ht=P.nodeType,ht===9)vc(P);else if(ht===1)switch(P.nodeName){case"HEAD":case"HTML":case"BODY":vc(P);break;default:P.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((P&1024)!==0)throw Error(ft(163))}if(P=st.sibling,P!==null){P.return=st.return,rr=P;break}rr=st.return}}function Zh(P,st,ht){var xt=ht.flags;switch(ht.tag){case 0:case 11:case 15:wa(P,ht),xt&4&&il(5,ht);break;case 1:if(wa(P,ht),xt&4)if(P=ht.stateNode,st===null)try{P.componentDidMount()}catch(Bt){Ui(ht,ht.return,Bt)}else{var vt=Ya(ht.type,st.memoizedProps);st=st.memoizedState;try{P.componentDidUpdate(vt,st,P.__reactInternalSnapshotBeforeUpdate)}catch(Bt){Ui(ht,ht.return,Bt)}}xt&64&&Yh(ht),xt&512&&rl(ht,ht.return);break;case 3:if(wa(P,ht),xt&64&&(P=ht.updateQueue,P!==null)){if(st=null,ht.child!==null)switch(ht.child.tag){case 27:case 5:st=ht.child.stateNode;break;case 1:st=ht.child.stateNode}try{Df(P,st)}catch(Bt){Ui(ht,ht.return,Bt)}}break;case 27:st===null&&xt&4&&Xh(ht);case 26:case 5:wa(P,ht),st===null&&xt&4&&Ph(ht),xt&512&&rl(ht,ht.return);break;case 12:wa(P,ht);break;case 13:wa(P,ht),xt&4&&Jh(P,ht),xt&64&&(P=ht.memoizedState,P!==null&&(P=P.dehydrated,P!==null&&(ht=E1.bind(null,ht),L1(P,ht))));break;case 22:if(xt=ht.memoizedState!==null||ra,!xt){st=st!==null&&st.memoizedState!==null||Qi,vt=ra;var Mt=Qi;ra=xt,(Qi=st)&&!Mt?ya(P,ht,(ht.subtreeFlags&8772)!==0):wa(P,ht),ra=vt,Qi=Mt}break;case 30:break;default:wa(P,ht)}}function Kh(P){var st=P.alternate;st!==null&&(P.alternate=null,Kh(st)),P.child=null,P.deletions=null,P.sibling=null,P.tag===5&&(st=P.stateNode,st!==null&&Le(st)),P.stateNode=null,P.return=null,P.dependencies=null,P.memoizedProps=null,P.memoizedState=null,P.pendingProps=null,P.stateNode=null,P.updateQueue=null}var Gi=null,vr=!1;function aa(P,st,ht){for(ht=ht.child;ht!==null;)Qh(P,st,ht),ht=ht.sibling}function Qh(P,st,ht){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(zn,ht)}catch{}switch(ht.tag){case 26:Qi||Gr(ht,st),aa(P,st,ht),ht.memoizedState?ht.memoizedState.count--:ht.stateNode&&(ht=ht.stateNode,ht.parentNode.removeChild(ht));break;case 27:Qi||Gr(ht,st);var xt=Gi,vt=vr;_a(ht.type)&&(Gi=ht.stateNode,vr=!1),aa(P,st,ht),dl(ht.stateNode),Gi=xt,vr=vt;break;case 5:Qi||Gr(ht,st);case 6:if(xt=Gi,vt=vr,Gi=null,aa(P,st,ht),Gi=xt,vr=vt,Gi!==null)if(vr)try{(Gi.nodeType===9?Gi.body:Gi.nodeName==="HTML"?Gi.ownerDocument.body:Gi).removeChild(ht.stateNode)}catch(Mt){Ui(ht,st,Mt)}else try{Gi.removeChild(ht.stateNode)}catch(Mt){Ui(ht,st,Mt)}break;case 18:Gi!==null&&(vr?(P=Gi,I0(P.nodeType===9?P.body:P.nodeName==="HTML"?P.ownerDocument.body:P,ht.stateNode),bl(P)):I0(Gi,ht.stateNode));break;case 4:xt=Gi,vt=vr,Gi=ht.stateNode.containerInfo,vr=!0,aa(P,st,ht),Gi=xt,vr=vt;break;case 0:case 11:case 14:case 15:Qi||xa(2,ht,st),Qi||xa(4,ht,st),aa(P,st,ht);break;case 1:Qi||(Gr(ht,st),xt=ht.stateNode,typeof xt.componentWillUnmount=="function"&&Gh(ht,st,xt)),aa(P,st,ht);break;case 21:aa(P,st,ht);break;case 22:Qi=(xt=Qi)||ht.memoizedState!==null,aa(P,st,ht),Qi=xt;break;default:aa(P,st,ht)}}function Jh(P,st){if(st.memoizedState===null&&(P=st.alternate,P!==null&&(P=P.memoizedState,P!==null&&(P=P.dehydrated,P!==null))))try{bl(P)}catch(ht){Ui(st,st.return,ht)}}function g1(P){switch(P.tag){case 13:case 19:var st=P.stateNode;return st===null&&(st=P.stateNode=new Hh),st;case 22:return P=P.stateNode,st=P._retryCache,st===null&&(st=P._retryCache=new Hh),st;default:throw Error(ft(435,P.tag))}}function Xu(P,st){var ht=g1(P);st.forEach(function(xt){var vt=S1.bind(null,P,xt);ht.has(xt)||(ht.add(xt),xt.then(vt,vt))})}function _r(P,st){var ht=st.deletions;if(ht!==null)for(var xt=0;xt<ht.length;xt++){var vt=ht[xt],Mt=P,Bt=st,Lt=Bt;t:for(;Lt!==null;){switch(Lt.tag){case 27:if(_a(Lt.type)){Gi=Lt.stateNode,vr=!1;break t}break;case 5:Gi=Lt.stateNode,vr=!1;break t;case 3:case 4:Gi=Lt.stateNode.containerInfo,vr=!0;break t}Lt=Lt.return}if(Gi===null)throw Error(ft(160));Qh(Mt,Bt,vt),Gi=null,vr=!1,Mt=vt.alternate,Mt!==null&&(Mt.return=null),vt.return=null}if(st.subtreeFlags&13878)for(st=st.child;st!==null;)Wh(st,P),st=st.sibling}var Ir=null;function Wh(P,st){var ht=P.alternate,xt=P.flags;switch(P.tag){case 0:case 11:case 14:case 15:_r(st,P),Mr(P),xt&4&&(xa(3,P,P.return),il(3,P),xa(5,P,P.return));break;case 1:_r(st,P),Mr(P),xt&512&&(Qi||ht===null||Gr(ht,ht.return)),xt&64&&ra&&(P=P.updateQueue,P!==null&&(xt=P.callbacks,xt!==null&&(ht=P.shared.hiddenCallbacks,P.shared.hiddenCallbacks=ht===null?xt:ht.concat(xt))));break;case 26:var vt=Ir;if(_r(st,P),Mr(P),xt&512&&(Qi||ht===null||Gr(ht,ht.return)),xt&4){var Mt=ht!==null?ht.memoizedState:null;if(xt=P.memoizedState,ht===null)if(xt===null)if(P.stateNode===null){t:{xt=P.type,ht=P.memoizedProps,vt=vt.ownerDocument||vt;e:switch(xt){case"title":Mt=vt.getElementsByTagName("title")[0],(!Mt||Mt[jn]||Mt[Yt]||Mt.namespaceURI==="http://www.w3.org/2000/svg"||Mt.hasAttribute("itemprop"))&&(Mt=vt.createElement(xt),vt.head.insertBefore(Mt,vt.querySelector("head > title"))),ur(Mt,xt,ht),Mt[Yt]=P,pi(Mt),xt=Mt;break t;case"link":var Bt=X0("link","href",vt).get(xt+(ht.href||""));if(Bt){for(var Lt=0;Lt<Bt.length;Lt++)if(Mt=Bt[Lt],Mt.getAttribute("href")===(ht.href==null||ht.href===""?null:ht.href)&&Mt.getAttribute("rel")===(ht.rel==null?null:ht.rel)&&Mt.getAttribute("title")===(ht.title==null?null:ht.title)&&Mt.getAttribute("crossorigin")===(ht.crossOrigin==null?null:ht.crossOrigin)){Bt.splice(Lt,1);break e}}Mt=vt.createElement(xt),ur(Mt,xt,ht),vt.head.appendChild(Mt);break;case"meta":if(Bt=X0("meta","content",vt).get(xt+(ht.content||""))){for(Lt=0;Lt<Bt.length;Lt++)if(Mt=Bt[Lt],Mt.getAttribute("content")===(ht.content==null?null:""+ht.content)&&Mt.getAttribute("name")===(ht.name==null?null:ht.name)&&Mt.getAttribute("property")===(ht.property==null?null:ht.property)&&Mt.getAttribute("http-equiv")===(ht.httpEquiv==null?null:ht.httpEquiv)&&Mt.getAttribute("charset")===(ht.charSet==null?null:ht.charSet)){Bt.splice(Lt,1);break e}}Mt=vt.createElement(xt),ur(Mt,xt,ht),vt.head.appendChild(Mt);break;default:throw Error(ft(468,xt))}Mt[Yt]=P,pi(Mt),xt=Mt}P.stateNode=xt}else H0(vt,P.type,P.stateNode);else P.stateNode=F0(vt,xt,P.memoizedProps);else Mt!==xt?(Mt===null?ht.stateNode!==null&&(ht=ht.stateNode,ht.parentNode.removeChild(ht)):Mt.count--,xt===null?H0(vt,P.type,P.stateNode):F0(vt,xt,P.memoizedProps)):xt===null&&P.stateNode!==null&&Yu(P,P.memoizedProps,ht.memoizedProps)}break;case 27:_r(st,P),Mr(P),xt&512&&(Qi||ht===null||Gr(ht,ht.return)),ht!==null&&xt&4&&Yu(P,P.memoizedProps,ht.memoizedProps);break;case 5:if(_r(st,P),Mr(P),xt&512&&(Qi||ht===null||Gr(ht,ht.return)),P.flags&32){vt=P.stateNode;try{Za(vt,"")}catch(dn){Ui(P,P.return,dn)}}xt&4&&P.stateNode!=null&&(vt=P.memoizedProps,Yu(P,vt,ht!==null?ht.memoizedProps:vt)),xt&1024&&(Fu=!0);break;case 6:if(_r(st,P),Mr(P),xt&4){if(P.stateNode===null)throw Error(ft(162));xt=P.memoizedProps,ht=P.stateNode;try{ht.nodeValue=xt}catch(dn){Ui(P,P.return,dn)}}break;case 3:if(vs=null,vt=Ir,Ir=ws(st.containerInfo),_r(st,P),Ir=vt,Mr(P),xt&4&&ht!==null&&ht.memoizedState.isDehydrated)try{bl(st.containerInfo)}catch(dn){Ui(P,P.return,dn)}Fu&&(Fu=!1,t0(P));break;case 4:xt=Ir,Ir=ws(P.stateNode.containerInfo),_r(st,P),Mr(P),Ir=xt;break;case 12:_r(st,P),Mr(P);break;case 13:_r(st,P),Mr(P),P.child.flags&8192&&P.memoizedState!==null!=(ht!==null&&ht.memoizedState!==null)&&(Wu=Xn()),xt&4&&(xt=P.updateQueue,xt!==null&&(P.updateQueue=null,Xu(P,xt)));break;case 22:vt=P.memoizedState!==null;var pe=ht!==null&&ht.memoizedState!==null,un=ra,vn=Qi;if(ra=un||vt,Qi=vn||pe,_r(st,P),Qi=vn,ra=un,Mr(P),xt&8192)t:for(st=P.stateNode,st._visibility=vt?st._visibility&-2:st._visibility|1,vt&&(ht===null||pe||ra||Qi||Ga(P)),ht=null,st=P;;){if(st.tag===5||st.tag===26){if(ht===null){pe=ht=st;try{if(Mt=pe.stateNode,vt)Bt=Mt.style,typeof Bt.setProperty=="function"?Bt.setProperty("display","none","important"):Bt.display="none";else{Lt=pe.stateNode;var Sn=pe.memoizedProps.style,fn=Sn!=null&&Sn.hasOwnProperty("display")?Sn.display:null;Lt.style.display=fn==null||typeof fn=="boolean"?"":(""+fn).trim()}}catch(dn){Ui(pe,pe.return,dn)}}}else if(st.tag===6){if(ht===null){pe=st;try{pe.stateNode.nodeValue=vt?"":pe.memoizedProps}catch(dn){Ui(pe,pe.return,dn)}}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===P)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===P)break t;for(;st.sibling===null;){if(st.return===null||st.return===P)break t;ht===st&&(ht=null),st=st.return}ht===st&&(ht=null),st.sibling.return=st.return,st=st.sibling}xt&4&&(xt=P.updateQueue,xt!==null&&(ht=xt.retryQueue,ht!==null&&(xt.retryQueue=null,Xu(P,ht))));break;case 19:_r(st,P),Mr(P),xt&4&&(xt=P.updateQueue,xt!==null&&(P.updateQueue=null,Xu(P,xt)));break;case 30:break;case 21:break;default:_r(st,P),Mr(P)}}function Mr(P){var st=P.flags;if(st&2){try{for(var ht,xt=P.return;xt!==null;){if(Fh(xt)){ht=xt;break}xt=xt.return}if(ht==null)throw Error(ft(160));switch(ht.tag){case 27:var vt=ht.stateNode,Mt=Gu(P);as(P,Mt,vt);break;case 5:var Bt=ht.stateNode;ht.flags&32&&(Za(Bt,""),ht.flags&=-33);var Lt=Gu(P);as(P,Lt,Bt);break;case 3:case 4:var pe=ht.stateNode.containerInfo,un=Gu(P);Pu(P,un,pe);break;default:throw Error(ft(161))}}catch(vn){Ui(P,P.return,vn)}P.flags&=-3}st&4096&&(P.flags&=-4097)}function t0(P){if(P.subtreeFlags&1024)for(P=P.child;P!==null;){var st=P;t0(st),st.tag===5&&st.flags&1024&&st.stateNode.reset(),P=P.sibling}}function wa(P,st){if(st.subtreeFlags&8772)for(st=st.child;st!==null;)Zh(P,st.alternate,st),st=st.sibling}function Ga(P){for(P=P.child;P!==null;){var st=P;switch(st.tag){case 0:case 11:case 14:case 15:xa(4,st,st.return),Ga(st);break;case 1:Gr(st,st.return);var ht=st.stateNode;typeof ht.componentWillUnmount=="function"&&Gh(st,st.return,ht),Ga(st);break;case 27:dl(st.stateNode);case 26:case 5:Gr(st,st.return),Ga(st);break;case 22:st.memoizedState===null&&Ga(st);break;case 30:Ga(st);break;default:Ga(st)}P=P.sibling}}function ya(P,st,ht){for(ht=ht&&(st.subtreeFlags&8772)!==0,st=st.child;st!==null;){var xt=st.alternate,vt=P,Mt=st,Bt=Mt.flags;switch(Mt.tag){case 0:case 11:case 15:ya(vt,Mt,ht),il(4,Mt);break;case 1:if(ya(vt,Mt,ht),xt=Mt,vt=xt.stateNode,typeof vt.componentDidMount=="function")try{vt.componentDidMount()}catch(un){Ui(xt,xt.return,un)}if(xt=Mt,vt=xt.updateQueue,vt!==null){var Lt=xt.stateNode;try{var pe=vt.shared.hiddenCallbacks;if(pe!==null)for(vt.shared.hiddenCallbacks=null,vt=0;vt<pe.length;vt++)$f(pe[vt],Lt)}catch(un){Ui(xt,xt.return,un)}}ht&&Bt&64&&Yh(Mt),rl(Mt,Mt.return);break;case 27:Xh(Mt);case 26:case 5:ya(vt,Mt,ht),ht&&xt===null&&Bt&4&&Ph(Mt),rl(Mt,Mt.return);break;case 12:ya(vt,Mt,ht);break;case 13:ya(vt,Mt,ht),ht&&Bt&4&&Jh(vt,Mt);break;case 22:Mt.memoizedState===null&&ya(vt,Mt,ht),rl(Mt,Mt.return);break;case 30:break;default:ya(vt,Mt,ht)}st=st.sibling}}function Hu(P,st){var ht=null;P!==null&&P.memoizedState!==null&&P.memoizedState.cachePool!==null&&(ht=P.memoizedState.cachePool.pool),P=null,st.memoizedState!==null&&st.memoizedState.cachePool!==null&&(P=st.memoizedState.cachePool.pool),P!==ht&&(P!=null&&P.refCount++,ht!=null&&Yo(ht))}function Zu(P,st){P=null,st.alternate!==null&&(P=st.alternate.memoizedState.cache),st=st.memoizedState.cache,st!==P&&(st.refCount++,P!=null&&Yo(P))}function Pr(P,st,ht,xt){if(st.subtreeFlags&10256)for(st=st.child;st!==null;)e0(P,st,ht,xt),st=st.sibling}function e0(P,st,ht,xt){var vt=st.flags;switch(st.tag){case 0:case 11:case 15:Pr(P,st,ht,xt),vt&2048&&il(9,st);break;case 1:Pr(P,st,ht,xt);break;case 3:Pr(P,st,ht,xt),vt&2048&&(P=null,st.alternate!==null&&(P=st.alternate.memoizedState.cache),st=st.memoizedState.cache,st!==P&&(st.refCount++,P!=null&&Yo(P)));break;case 12:if(vt&2048){Pr(P,st,ht,xt),P=st.stateNode;try{var Mt=st.memoizedProps,Bt=Mt.id,Lt=Mt.onPostCommit;typeof Lt=="function"&&Lt(Bt,st.alternate===null?"mount":"update",P.passiveEffectDuration,-0)}catch(pe){Ui(st,st.return,pe)}}else Pr(P,st,ht,xt);break;case 13:Pr(P,st,ht,xt);break;case 23:break;case 22:Mt=st.stateNode,Bt=st.alternate,st.memoizedState!==null?Mt._visibility&2?Pr(P,st,ht,xt):al(P,st):Mt._visibility&2?Pr(P,st,ht,xt):(Mt._visibility|=2,po(P,st,ht,xt,(st.subtreeFlags&10256)!==0)),vt&2048&&Hu(Bt,st);break;case 24:Pr(P,st,ht,xt),vt&2048&&Zu(st.alternate,st);break;default:Pr(P,st,ht,xt)}}function po(P,st,ht,xt,vt){for(vt=vt&&(st.subtreeFlags&10256)!==0,st=st.child;st!==null;){var Mt=P,Bt=st,Lt=ht,pe=xt,un=Bt.flags;switch(Bt.tag){case 0:case 11:case 15:po(Mt,Bt,Lt,pe,vt),il(8,Bt);break;case 23:break;case 22:var vn=Bt.stateNode;Bt.memoizedState!==null?vn._visibility&2?po(Mt,Bt,Lt,pe,vt):al(Mt,Bt):(vn._visibility|=2,po(Mt,Bt,Lt,pe,vt)),vt&&un&2048&&Hu(Bt.alternate,Bt);break;case 24:po(Mt,Bt,Lt,pe,vt),vt&&un&2048&&Zu(Bt.alternate,Bt);break;default:po(Mt,Bt,Lt,pe,vt)}st=st.sibling}}function al(P,st){if(st.subtreeFlags&10256)for(st=st.child;st!==null;){var ht=P,xt=st,vt=xt.flags;switch(xt.tag){case 22:al(ht,xt),vt&2048&&Hu(xt.alternate,xt);break;case 24:al(ht,xt),vt&2048&&Zu(xt.alternate,xt);break;default:al(ht,xt)}st=st.sibling}}var ol=8192;function mo(P){if(P.subtreeFlags&ol)for(P=P.child;P!==null;)n0(P),P=P.sibling}function n0(P){switch(P.tag){case 26:mo(P),P.flags&ol&&P.memoizedState!==null&&W1(Ir,P.memoizedState,P.memoizedProps);break;case 5:mo(P);break;case 3:case 4:var st=Ir;Ir=ws(P.stateNode.containerInfo),mo(P),Ir=st;break;case 22:P.memoizedState===null&&(st=P.alternate,st!==null&&st.memoizedState!==null?(st=ol,ol=16777216,mo(P),ol=st):mo(P));break;default:mo(P)}}function i0(P){var st=P.alternate;if(st!==null&&(P=st.child,P!==null)){st.child=null;do st=P.sibling,P.sibling=null,P=st;while(P!==null)}}function ll(P){var st=P.deletions;if((P.flags&16)!==0){if(st!==null)for(var ht=0;ht<st.length;ht++){var xt=st[ht];rr=xt,a0(xt,P)}i0(P)}if(P.subtreeFlags&10256)for(P=P.child;P!==null;)r0(P),P=P.sibling}function r0(P){switch(P.tag){case 0:case 11:case 15:ll(P),P.flags&2048&&xa(9,P,P.return);break;case 3:ll(P);break;case 12:ll(P);break;case 22:var st=P.stateNode;P.memoizedState!==null&&st._visibility&2&&(P.return===null||P.return.tag!==13)?(st._visibility&=-3,os(P)):ll(P);break;default:ll(P)}}function os(P){var st=P.deletions;if((P.flags&16)!==0){if(st!==null)for(var ht=0;ht<st.length;ht++){var xt=st[ht];rr=xt,a0(xt,P)}i0(P)}for(P=P.child;P!==null;){switch(st=P,st.tag){case 0:case 11:case 15:xa(8,st,st.return),os(st);break;case 22:ht=st.stateNode,ht._visibility&2&&(ht._visibility&=-3,os(st));break;default:os(st)}P=P.sibling}}function a0(P,st){for(;rr!==null;){var ht=rr;switch(ht.tag){case 0:case 11:case 15:xa(8,ht,st);break;case 23:case 22:if(ht.memoizedState!==null&&ht.memoizedState.cachePool!==null){var xt=ht.memoizedState.cachePool.pool;xt!=null&&xt.refCount++}break;case 24:Yo(ht.memoizedState.cache)}if(xt=ht.child,xt!==null)xt.return=ht,rr=xt;else t:for(ht=P;rr!==null;){xt=rr;var vt=xt.sibling,Mt=xt.return;if(Kh(xt),xt===ht){rr=null;break t}if(vt!==null){vt.return=Mt,rr=vt;break t}rr=Mt}}}var p1={getCacheForType:function(P){var st=hr(er),ht=st.data.get(P);return ht===void 0&&(ht=P(),st.data.set(P,ht)),ht}},m1=typeof WeakMap=="function"?WeakMap:Map,Oi=0,qi=null,Ri=null,Ai=0,Bi=0,Tr=null,va=!1,xo=!1,Ku=!1,oa=0,Xi=0,ba=0,Pa=0,Qu=0,jr=0,wo=0,sl=null,br=null,Ju=!1,Wu=0,ls=1/0,ss=null,Ea=null,sr=0,Sa=null,yo=null,vo=0,tc=0,ec=null,o0=null,ul=0,nc=null;function Ar(){if((Oi&2)!==0&&Ai!==0)return Ai&-Ai;if(on.T!==null){var P=oo;return P!==0?P:uc()}return Vt()}function l0(){jr===0&&(jr=(Ai&536870912)===0||Di?Dr():536870912);var P=Nr.current;return P!==null&&(P.flags|=32),jr}function $r(P,st,ht){(P===qi&&(Bi===2||Bi===9)||P.cancelPendingCommit!==null)&&(bo(P,0),Ra(P,Ai,jr,!1)),zt(P,ht),((Oi&2)===0||P!==qi)&&(P===qi&&((Oi&2)===0&&(Pa|=ht),Xi===4&&Ra(P,Ai,jr,!1)),Fr(P))}function s0(P,st,ht){if((Oi&6)!==0)throw Error(ft(327));var xt=!ht&&(st&124)===0&&(st&P.expiredLanes)===0||zi(P,st),vt=xt?y1(P,st):ac(P,st,!0),Mt=xt;do{if(vt===0){xo&&!xt&&Ra(P,st,0,!1);break}else{if(ht=P.current.alternate,Mt&&!x1(ht)){vt=ac(P,st,!1),Mt=!1;continue}if(vt===2){if(Mt=st,P.errorRecoveryDisabledLanes&Mt)var Bt=0;else Bt=P.pendingLanes&-536870913,Bt=Bt!==0?Bt:Bt&536870912?536870912:0;if(Bt!==0){st=Bt;t:{var Lt=P;vt=sl;var pe=Lt.current.memoizedState.isDehydrated;if(pe&&(bo(Lt,Bt).flags|=256),Bt=ac(Lt,Bt,!1),Bt!==2){if(Ku&&!pe){Lt.errorRecoveryDisabledLanes|=Mt,Pa|=Mt,vt=4;break t}Mt=br,br=vt,Mt!==null&&(br===null?br=Mt:br.push.apply(br,Mt))}vt=Bt}if(Mt=!1,vt!==2)continue}}if(vt===1){bo(P,0),Ra(P,st,0,!0);break}t:{switch(xt=P,Mt=vt,Mt){case 0:case 1:throw Error(ft(345));case 4:if((st&4194048)!==st)break;case 6:Ra(xt,st,jr,!va);break t;case 2:br=null;break;case 3:case 5:break;default:throw Error(ft(329))}if((st&62914560)===st&&(vt=Wu+300-Xn(),10<vt)){if(Ra(xt,st,jr,!va),Yi(xt,0,!0)!==0)break t;xt.timeoutHandle=k0(u0.bind(null,xt,ht,br,ss,Ju,st,jr,Pa,wo,va,Mt,2,-0,0),vt);break t}u0(xt,ht,br,ss,Ju,st,jr,Pa,wo,va,Mt,0,-0,0)}}break}while(!0);Fr(P)}function u0(P,st,ht,xt,vt,Mt,Bt,Lt,pe,un,vn,Sn,fn,dn){if(P.timeoutHandle=-1,Sn=st.subtreeFlags,(Sn&8192||(Sn&16785408)===16785408)&&(ml={stylesheets:null,count:0,unsuspend:J1},n0(st),Sn=tg(),Sn!==null)){P.cancelPendingCommit=Sn(m0.bind(null,P,st,Mt,ht,xt,vt,Bt,Lt,pe,vn,1,fn,dn)),Ra(P,Mt,Bt,!un);return}m0(P,st,Mt,ht,xt,vt,Bt,Lt,pe)}function x1(P){for(var st=P;;){var ht=st.tag;if((ht===0||ht===11||ht===15)&&st.flags&16384&&(ht=st.updateQueue,ht!==null&&(ht=ht.stores,ht!==null)))for(var xt=0;xt<ht.length;xt++){var vt=ht[xt],Mt=vt.getSnapshot;vt=vt.value;try{if(!Sr(Mt(),vt))return!1}catch{return!1}}if(ht=st.child,st.subtreeFlags&16384&&ht!==null)ht.return=st,st=ht;else{if(st===P)break;for(;st.sibling===null;){if(st.return===null||st.return===P)return!0;st=st.return}st.sibling.return=st.return,st=st.sibling}}return!0}function Ra(P,st,ht,xt){st&=~Qu,st&=~Pa,P.suspendedLanes|=st,P.pingedLanes&=~st,xt&&(P.warmLanes|=st),xt=P.expirationTimes;for(var vt=st;0<vt;){var Mt=31-Nn(vt),Bt=1<<Mt;xt[Mt]=-1,vt&=~Bt}ht!==0&&Et(P,ht,st)}function us(){return(Oi&6)===0?(cl(0),!1):!0}function ic(){if(Ri!==null){if(Bi===0)var P=Ri.return;else P=Ri,Jr=Ia=null,vu(P),ho=null,tl=0,P=Ri;for(;P!==null;)qh(P.alternate,P),P=P.return;Ri=null}}function bo(P,st){var ht=P.timeoutHandle;ht!==-1&&(P.timeoutHandle=-1,N1(ht)),ht=P.cancelPendingCommit,ht!==null&&(P.cancelPendingCommit=null,ht()),ic(),qi=P,Ri=ht=Zr(P.current,null),Ai=st,Bi=0,Tr=null,va=!1,xo=zi(P,st),Ku=!1,wo=jr=Qu=Pa=ba=Xi=0,br=sl=null,Ju=!1,(st&8)!==0&&(st|=st&32);var xt=P.entangledLanes;if(xt!==0)for(P=P.entanglements,xt&=st;0<xt;){var vt=31-Nn(xt),Mt=1<<vt;st|=P[vt],xt&=~Mt}return oa=st,Cl(),ht}function c0(P,st){vi=null,on.H=Kl,st===Po||st===Ll?(st=Tf(),Bi=3):st===Rf?(st=Tf(),Bi=4):Bi=st===Ah?8:st!==null&&typeof st=="object"&&typeof st.then=="function"?6:1,Tr=st,Ri===null&&(Xi=1,es(P,Cr(st,P.current)))}function f0(){var P=on.H;return on.H=Kl,P===null?Kl:P}function h0(){var P=on.A;return on.A=p1,P}function rc(){Xi=4,va||(Ai&4194048)!==Ai&&Nr.current!==null||(xo=!0),(ba&134217727)===0&&(Pa&134217727)===0||qi===null||Ra(qi,Ai,jr,!1)}function ac(P,st,ht){var xt=Oi;Oi|=2;var vt=f0(),Mt=h0();(qi!==P||Ai!==st)&&(ss=null,bo(P,st)),st=!1;var Bt=Xi;t:do try{if(Bi!==0&&Ri!==null){var Lt=Ri,pe=Tr;switch(Bi){case 8:ic(),Bt=6;break t;case 3:case 2:case 9:case 6:Nr.current===null&&(st=!0);var un=Bi;if(Bi=0,Tr=null,Eo(P,Lt,pe,un),ht&&xo){Bt=0;break t}break;default:un=Bi,Bi=0,Tr=null,Eo(P,Lt,pe,un)}}w1(),Bt=Xi;break}catch(vn){c0(P,vn)}while(!0);return st&&P.shellSuspendCounter++,Jr=Ia=null,Oi=xt,on.H=vt,on.A=Mt,Ri===null&&(qi=null,Ai=0,Cl()),Bt}function w1(){for(;Ri!==null;)d0(Ri)}function y1(P,st){var ht=Oi;Oi|=2;var xt=f0(),vt=h0();qi!==P||Ai!==st?(ss=null,ls=Xn()+500,bo(P,st)):xo=zi(P,st);t:do try{if(Bi!==0&&Ri!==null){st=Ri;var Mt=Tr;e:switch(Bi){case 1:Bi=0,Tr=null,Eo(P,st,Mt,1);break;case 2:case 9:if(_f(Mt)){Bi=0,Tr=null,g0(st);break}st=function(){Bi!==2&&Bi!==9||qi!==P||(Bi=7),Fr(P)},Mt.then(st,st);break t;case 3:Bi=7;break t;case 4:Bi=5;break t;case 7:_f(Mt)?(Bi=0,Tr=null,g0(st)):(Bi=0,Tr=null,Eo(P,st,Mt,7));break;case 5:var Bt=null;switch(Ri.tag){case 26:Bt=Ri.memoizedState;case 5:case 27:var Lt=Ri;if(!Bt||Z0(Bt)){Bi=0,Tr=null;var pe=Lt.sibling;if(pe!==null)Ri=pe;else{var un=Lt.return;un!==null?(Ri=un,cs(un)):Ri=null}break e}}Bi=0,Tr=null,Eo(P,st,Mt,5);break;case 6:Bi=0,Tr=null,Eo(P,st,Mt,6);break;case 8:ic(),Xi=6;break t;default:throw Error(ft(462))}}v1();break}catch(vn){c0(P,vn)}while(!0);return Jr=Ia=null,on.H=xt,on.A=vt,Oi=ht,Ri!==null?0:(qi=null,Ai=0,Cl(),Xi)}function v1(){for(;Ri!==null&&!An();)d0(Ri)}function d0(P){var st=Lh(P.alternate,P,oa);P.memoizedProps=P.pendingProps,st===null?cs(P):Ri=st}function g0(P){var st=P,ht=st.alternate;switch(st.tag){case 15:case 0:st=zh(ht,st,st.pendingProps,st.type,void 0,Ai);break;case 11:st=zh(ht,st,st.pendingProps,st.type.render,st.ref,Ai);break;case 5:vu(st);default:qh(ht,st),st=Ri=pf(st,oa),st=Lh(ht,st,oa)}P.memoizedProps=P.pendingProps,st===null?cs(P):Ri=st}function Eo(P,st,ht,xt){Jr=Ia=null,vu(st),ho=null,tl=0;var vt=st.return;try{if(u1(P,vt,st,ht,Ai)){Xi=1,es(P,Cr(ht,P.current)),Ri=null;return}}catch(Mt){if(vt!==null)throw Ri=vt,Mt;Xi=1,es(P,Cr(ht,P.current)),Ri=null;return}st.flags&32768?(Di||xt===1?P=!0:xo||(Ai&536870912)!==0?P=!1:(va=P=!0,(xt===2||xt===9||xt===3||xt===6)&&(xt=Nr.current,xt!==null&&xt.tag===13&&(xt.flags|=16384))),p0(st,P)):cs(st)}function cs(P){var st=P;do{if((st.flags&32768)!==0){p0(st,va);return}P=st.return;var ht=f1(st.alternate,st,oa);if(ht!==null){Ri=ht;return}if(st=st.sibling,st!==null){Ri=st;return}Ri=st=P}while(st!==null);Xi===0&&(Xi=5)}function p0(P,st){do{var ht=h1(P.alternate,P);if(ht!==null){ht.flags&=32767,Ri=ht;return}if(ht=P.return,ht!==null&&(ht.flags|=32768,ht.subtreeFlags=0,ht.deletions=null),!st&&(P=P.sibling,P!==null)){Ri=P;return}Ri=P=ht}while(P!==null);Xi=6,Ri=null}function m0(P,st,ht,xt,vt,Mt,Bt,Lt,pe){P.cancelPendingCommit=null;do fs();while(sr!==0);if((Oi&6)!==0)throw Error(ft(327));if(st!==null){if(st===P.current)throw Error(ft(177));if(Mt=st.lanes|st.childLanes,Mt|=Zs,bt(P,ht,Mt,Bt,Lt,pe),P===qi&&(Ri=qi=null,Ai=0),yo=st,Sa=P,vo=ht,tc=Mt,ec=vt,o0=xt,(st.subtreeFlags&10256)!==0||(st.flags&10256)!==0?(P.callbackNode=null,P.callbackPriority=0,R1(Vn,function(){return b0(),null})):(P.callbackNode=null,P.callbackPriority=0),xt=(st.flags&13878)!==0,(st.subtreeFlags&13878)!==0||xt){xt=on.T,on.T=null,vt=yn.p,yn.p=2,Bt=Oi,Oi|=4;try{d1(P,st,ht)}finally{Oi=Bt,yn.p=vt,on.T=xt}}sr=1,x0(),w0(),y0()}}function x0(){if(sr===1){sr=0;var P=Sa,st=yo,ht=(st.flags&13878)!==0;if((st.subtreeFlags&13878)!==0||ht){ht=on.T,on.T=null;var xt=yn.p;yn.p=2;var vt=Oi;Oi|=4;try{Wh(st,P);var Mt=xc,Bt=af(P.containerInfo),Lt=Mt.focusedElem,pe=Mt.selectionRange;if(Bt!==Lt&&Lt&&Lt.ownerDocument&&rf(Lt.ownerDocument.documentElement,Lt)){if(pe!==null&&Gs(Lt)){var un=pe.start,vn=pe.end;if(vn===void 0&&(vn=un),"selectionStart"in Lt)Lt.selectionStart=un,Lt.selectionEnd=Math.min(vn,Lt.value.length);else{var Sn=Lt.ownerDocument||document,fn=Sn&&Sn.defaultView||window;if(fn.getSelection){var dn=fn.getSelection(),di=Lt.textContent.length,ui=Math.min(pe.start,di),ki=pe.end===void 0?ui:Math.min(pe.end,di);!dn.extend&&ui>ki&&(Bt=ki,ki=ui,ui=Bt);var an=nf(Lt,ui),Ye=nf(Lt,ki);if(an&&Ye&&(dn.rangeCount!==1||dn.anchorNode!==an.node||dn.anchorOffset!==an.offset||dn.focusNode!==Ye.node||dn.focusOffset!==Ye.offset)){var ln=Sn.createRange();ln.setStart(an.node,an.offset),dn.removeAllRanges(),ui>ki?(dn.addRange(ln),dn.extend(Ye.node,Ye.offset)):(ln.setEnd(Ye.node,Ye.offset),dn.addRange(ln))}}}}for(Sn=[],dn=Lt;dn=dn.parentNode;)dn.nodeType===1&&Sn.push({element:dn,left:dn.scrollLeft,top:dn.scrollTop});for(typeof Lt.focus=="function"&&Lt.focus(),Lt=0;Lt<Sn.length;Lt++){var En=Sn[Lt];En.element.scrollLeft=En.left,En.element.scrollTop=En.top}}Ss=!!mc,xc=mc=null}finally{Oi=vt,yn.p=xt,on.T=ht}}P.current=st,sr=2}}function w0(){if(sr===2){sr=0;var P=Sa,st=yo,ht=(st.flags&8772)!==0;if((st.subtreeFlags&8772)!==0||ht){ht=on.T,on.T=null;var xt=yn.p;yn.p=2;var vt=Oi;Oi|=4;try{Zh(P,st.alternate,st)}finally{Oi=vt,yn.p=xt,on.T=ht}}sr=3}}function y0(){if(sr===4||sr===3){sr=0,gi();var P=Sa,st=yo,ht=vo,xt=o0;(st.subtreeFlags&10256)!==0||(st.flags&10256)!==0?sr=5:(sr=0,yo=Sa=null,v0(P,P.pendingLanes));var vt=P.pendingLanes;if(vt===0&&(Ea=null),$t(ht),st=st.stateNode,kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(zn,st,void 0,(st.current.flags&128)===128)}catch{}if(xt!==null){st=on.T,vt=yn.p,yn.p=2,on.T=null;try{for(var Mt=P.onRecoverableError,Bt=0;Bt<xt.length;Bt++){var Lt=xt[Bt];Mt(Lt.value,{componentStack:Lt.stack})}}finally{on.T=st,yn.p=vt}}(vo&3)!==0&&fs(),Fr(P),vt=P.pendingLanes,(ht&4194090)!==0&&(vt&42)!==0?P===nc?ul++:(ul=0,nc=P):ul=0,cl(0)}}function v0(P,st){(P.pooledCacheLanes&=st)===0&&(st=P.pooledCache,st!=null&&(P.pooledCache=null,Yo(st)))}function fs(P){return x0(),w0(),y0(),b0()}function b0(){if(sr!==5)return!1;var P=Sa,st=tc;tc=0;var ht=$t(vo),xt=on.T,vt=yn.p;try{yn.p=32>ht?32:ht,on.T=null,ht=ec,ec=null;var Mt=Sa,Bt=vo;if(sr=0,yo=Sa=null,vo=0,(Oi&6)!==0)throw Error(ft(331));var Lt=Oi;if(Oi|=4,r0(Mt.current),e0(Mt,Mt.current,Bt,ht),Oi=Lt,cl(0,!1),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(zn,Mt)}catch{}return!0}finally{yn.p=vt,on.T=xt,v0(P,st)}}function E0(P,st,ht){st=Cr(ht,st),st=zu(P.stateNode,st,2),P=da(P,st,2),P!==null&&(zt(P,2),Fr(P))}function Ui(P,st,ht){if(P.tag===3)E0(P,P,ht);else for(;st!==null;){if(st.tag===3){E0(st,P,ht);break}else if(st.tag===1){var xt=st.stateNode;if(typeof st.type.getDerivedStateFromError=="function"||typeof xt.componentDidCatch=="function"&&(Ea===null||!Ea.has(xt))){P=Cr(ht,P),ht=Mh(2),xt=da(st,ht,2),xt!==null&&(Th(ht,xt,st,P),zt(xt,2),Fr(xt));break}}st=st.return}}function oc(P,st,ht){var xt=P.pingCache;if(xt===null){xt=P.pingCache=new m1;var vt=new Set;xt.set(st,vt)}else vt=xt.get(st),vt===void 0&&(vt=new Set,xt.set(st,vt));vt.has(ht)||(Ku=!0,vt.add(ht),P=b1.bind(null,P,st,ht),st.then(P,P))}function b1(P,st,ht){var xt=P.pingCache;xt!==null&&xt.delete(st),P.pingedLanes|=P.suspendedLanes&ht,P.warmLanes&=~ht,qi===P&&(Ai&ht)===ht&&(Xi===4||Xi===3&&(Ai&62914560)===Ai&&300>Xn()-Wu?(Oi&2)===0&&bo(P,0):Qu|=ht,wo===Ai&&(wo=0)),Fr(P)}function S0(P,st){st===0&&(st=Xr()),P=no(P,st),P!==null&&(zt(P,st),Fr(P))}function E1(P){var st=P.memoizedState,ht=0;st!==null&&(ht=st.retryLane),S0(P,ht)}function S1(P,st){var ht=0;switch(P.tag){case 13:var xt=P.stateNode,vt=P.memoizedState;vt!==null&&(ht=vt.retryLane);break;case 19:xt=P.stateNode;break;case 22:xt=P.stateNode._retryCache;break;default:throw Error(ft(314))}xt!==null&&xt.delete(st),S0(P,ht)}function R1(P,st){return ei(P,st)}var hs=null,So=null,lc=!1,ds=!1,sc=!1,Fa=0;function Fr(P){P!==So&&P.next===null&&(So===null?hs=So=P:So=So.next=P),ds=!0,lc||(lc=!0,M1())}function cl(P,st){if(!sc&&ds){sc=!0;do for(var ht=!1,xt=hs;xt!==null;){if(P!==0){var vt=xt.pendingLanes;if(vt===0)var Mt=0;else{var Bt=xt.suspendedLanes,Lt=xt.pingedLanes;Mt=(1<<31-Nn(42|P)+1)-1,Mt&=vt&~(Bt&~Lt),Mt=Mt&201326741?Mt&201326741|1:Mt?Mt|2:0}Mt!==0&&(ht=!0,T0(xt,Mt))}else Mt=Ai,Mt=Yi(xt,xt===qi?Mt:0,xt.cancelPendingCommit!==null||xt.timeoutHandle!==-1),(Mt&3)===0||zi(xt,Mt)||(ht=!0,T0(xt,Mt));xt=xt.next}while(ht);sc=!1}}function _1(){R0()}function R0(){ds=lc=!1;var P=0;Fa!==0&&(z1()&&(P=Fa),Fa=0);for(var st=Xn(),ht=null,xt=hs;xt!==null;){var vt=xt.next,Mt=_0(xt,st);Mt===0?(xt.next=null,ht===null?hs=vt:ht.next=vt,vt===null&&(So=ht)):(ht=xt,(P!==0||(Mt&3)!==0)&&(ds=!0)),xt=vt}cl(P)}function _0(P,st){for(var ht=P.suspendedLanes,xt=P.pingedLanes,vt=P.expirationTimes,Mt=P.pendingLanes&-62914561;0<Mt;){var Bt=31-Nn(Mt),Lt=1<<Bt,pe=vt[Bt];pe===-1?((Lt&ht)===0||(Lt&xt)!==0)&&(vt[Bt]=cr(Lt,st)):pe<=st&&(P.expiredLanes|=Lt),Mt&=~Lt}if(st=qi,ht=Ai,ht=Yi(P,P===st?ht:0,P.cancelPendingCommit!==null||P.timeoutHandle!==-1),xt=P.callbackNode,ht===0||P===st&&(Bi===2||Bi===9)||P.cancelPendingCommit!==null)return xt!==null&&xt!==null&&Ln(xt),P.callbackNode=null,P.callbackPriority=0;if((ht&3)===0||zi(P,ht)){if(st=ht&-ht,st===P.callbackPriority)return st;switch(xt!==null&&Ln(xt),$t(ht)){case 2:case 8:ht=Pn;break;case 32:ht=Vn;break;case 268435456:ht=ai;break;default:ht=Vn}return xt=M0.bind(null,P),ht=ei(ht,xt),P.callbackPriority=st,P.callbackNode=ht,st}return xt!==null&&xt!==null&&Ln(xt),P.callbackPriority=2,P.callbackNode=null,2}function M0(P,st){if(sr!==0&&sr!==5)return P.callbackNode=null,P.callbackPriority=0,null;var ht=P.callbackNode;if(fs()&&P.callbackNode!==ht)return null;var xt=Ai;return xt=Yi(P,P===qi?xt:0,P.cancelPendingCommit!==null||P.timeoutHandle!==-1),xt===0?null:(s0(P,xt,st),_0(P,Xn()),P.callbackNode!=null&&P.callbackNode===ht?M0.bind(null,P):null)}function T0(P,st){if(fs())return null;s0(P,st,!0)}function M1(){j1(function(){(Oi&6)!==0?ei(cn,_1):R0()})}function uc(){return Fa===0&&(Fa=Dr()),Fa}function A0(P){return P==null||typeof P=="symbol"||typeof P=="boolean"?null:typeof P=="function"?P:Rl(""+P)}function $0(P,st){var ht=st.ownerDocument.createElement("input");return ht.name=st.name,ht.value=st.value,P.id&&ht.setAttribute("form",P.id),st.parentNode.insertBefore(ht,st),P=new FormData(P),ht.parentNode.removeChild(ht),P}function T1(P,st,ht,xt,vt){if(st==="submit"&&ht&&ht.stateNode===vt){var Mt=A0((vt[en]||null).action),Bt=xt.submitter;Bt&&(st=(st=Bt[en]||null)?A0(st.formAction):Bt.getAttribute("formAction"),st!==null&&(Mt=st,Bt=null));var Lt=new Al("action","action",null,xt,vt);P.push({event:Lt,listeners:[{instance:null,listener:function(){if(xt.defaultPrevented){if(Fa!==0){var pe=Bt?$0(vt,Bt):new FormData(vt);$u(ht,{pending:!0,data:pe,method:vt.method,action:Mt},null,pe)}}else typeof Mt=="function"&&(Lt.preventDefault(),pe=Bt?$0(vt,Bt):new FormData(vt),$u(ht,{pending:!0,data:pe,method:vt.method,action:Mt},Mt,pe))},currentTarget:vt}]})}}for(var cc=0;cc<Hs.length;cc++){var fc=Hs[cc],A1=fc.toLowerCase(),$1=fc[0].toUpperCase()+fc.slice(1);Ur(A1,"on"+$1)}Ur(sf,"onAnimationEnd"),Ur(uf,"onAnimationIteration"),Ur(cf,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(Fd,"onTransitionRun"),Ur(Xd,"onTransitionStart"),Ur(Hd,"onTransitionCancel"),Ur(ff,"onTransitionEnd"),tn("onMouseEnter",["mouseout","mouseover"]),tn("onMouseLeave",["mouseout","mouseover"]),tn("onPointerEnter",["pointerout","pointerover"]),tn("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fl));function D0(P,st){st=(st&4)!==0;for(var ht=0;ht<P.length;ht++){var xt=P[ht],vt=xt.event;xt=xt.listeners;t:{var Mt=void 0;if(st)for(var Bt=xt.length-1;0<=Bt;Bt--){var Lt=xt[Bt],pe=Lt.instance,un=Lt.currentTarget;if(Lt=Lt.listener,pe!==Mt&&vt.isPropagationStopped())break t;Mt=Lt,vt.currentTarget=un;try{Mt(vt)}catch(vn){ts(vn)}vt.currentTarget=null,Mt=pe}else for(Bt=0;Bt<xt.length;Bt++){if(Lt=xt[Bt],pe=Lt.instance,un=Lt.currentTarget,Lt=Lt.listener,pe!==Mt&&vt.isPropagationStopped())break t;Mt=Lt,vt.currentTarget=un;try{Mt(vt)}catch(vn){ts(vn)}vt.currentTarget=null,Mt=pe}}}}function _i(P,st){var ht=st[mn];ht===void 0&&(ht=st[mn]=new Set);var xt=P+"__bubble";ht.has(xt)||(C0(st,P,2,!1),ht.add(xt))}function hc(P,st,ht){var xt=0;st&&(xt|=4),C0(ht,P,xt,st)}var gs="_reactListening"+Math.random().toString(36).slice(2);function dc(P){if(!P[gs]){P[gs]=!0,Zn.forEach(function(ht){ht!=="selectionchange"&&(D1.has(ht)||hc(ht,!1,P),hc(ht,!0,P))});var st=P.nodeType===9?P:P.ownerDocument;st===null||st[gs]||(st[gs]=!0,hc("selectionchange",!1,st))}}function C0(P,st,ht,xt){switch(ed(st)){case 2:var vt=ig;break;case 8:vt=rg;break;default:vt=Tc}ht=vt.bind(null,st,ht,P),vt=void 0,!Ns||st!=="touchstart"&&st!=="touchmove"&&st!=="wheel"||(vt=!0),xt?vt!==void 0?P.addEventListener(st,ht,{capture:!0,passive:vt}):P.addEventListener(st,ht,!0):vt!==void 0?P.addEventListener(st,ht,{passive:vt}):P.addEventListener(st,ht,!1)}function gc(P,st,ht,xt,vt){var Mt=xt;if((st&1)===0&&(st&2)===0&&xt!==null)t:for(;;){if(xt===null)return;var Bt=xt.tag;if(Bt===3||Bt===4){var Lt=xt.stateNode.containerInfo;if(Lt===vt)break;if(Bt===4)for(Bt=xt.return;Bt!==null;){var pe=Bt.tag;if((pe===3||pe===4)&&Bt.stateNode.containerInfo===vt)return;Bt=Bt.return}for(;Lt!==null;){if(Bt=Tn(Lt),Bt===null)return;if(pe=Bt.tag,pe===5||pe===6||pe===26||pe===27){xt=Mt=Bt;continue t}Lt=Lt.parentNode}}xt=xt.return}kc(function(){var un=Mt,vn=Bs(ht),Sn=[];t:{var fn=hf.get(P);if(fn!==void 0){var dn=Al,di=P;switch(P){case"keypress":if(Ml(ht)===0)break t;case"keydown":case"keyup":dn=Rd;break;case"focusin":di="focus",dn=Is;break;case"focusout":di="blur",dn=Is;break;case"beforeblur":case"afterblur":dn=Is;break;case"click":if(ht.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dn=Lc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dn=hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dn=Td;break;case sf:case uf:case cf:dn=pd;break;case ff:dn=$d;break;case"scroll":case"scrollend":dn=cd;break;case"wheel":dn=Cd;break;case"copy":case"cut":case"paste":dn=xd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dn=qc;break;case"toggle":case"beforetoggle":dn=Bd}var ui=(st&4)!==0,ki=!ui&&(P==="scroll"||P==="scrollend"),an=ui?fn!==null?fn+"Capture":null:fn;ui=[];for(var Ye=un,ln;Ye!==null;){var En=Ye;if(ln=En.stateNode,En=En.tag,En!==5&&En!==26&&En!==27||ln===null||an===null||(En=Do(Ye,an),En!=null&&ui.push(hl(Ye,En,ln))),ki)break;Ye=Ye.return}0<ui.length&&(fn=new dn(fn,di,null,ht,vn),Sn.push({event:fn,listeners:ui}))}}if((st&7)===0){t:{if(fn=P==="mouseover"||P==="pointerover",dn=P==="mouseout"||P==="pointerout",fn&&ht!==Os&&(di=ht.relatedTarget||ht.fromElement)&&(Tn(di)||di[de]))break t;if((dn||fn)&&(fn=vn.window===vn?vn:(fn=vn.ownerDocument)?fn.defaultView||fn.parentWindow:window,dn?(di=ht.relatedTarget||ht.toElement,dn=un,di=di?Tn(di):null,di!==null&&(ki=mt(di),ui=di.tag,di!==ki||ui!==5&&ui!==27&&ui!==6)&&(di=null)):(dn=null,di=un),dn!==di)){if(ui=Lc,En="onMouseLeave",an="onMouseEnter",Ye="mouse",(P==="pointerout"||P==="pointerover")&&(ui=qc,En="onPointerLeave",an="onPointerEnter",Ye="pointer"),ki=dn==null?fn:Wn(dn),ln=di==null?fn:Wn(di),fn=new ui(En,Ye+"leave",dn,ht,vn),fn.target=ki,fn.relatedTarget=ln,En=null,Tn(vn)===un&&(ui=new ui(an,Ye+"enter",di,ht,vn),ui.target=ln,ui.relatedTarget=ki,En=ui),ki=En,dn&&di)e:{for(ui=dn,an=di,Ye=0,ln=ui;ln;ln=Ro(ln))Ye++;for(ln=0,En=an;En;En=Ro(En))ln++;for(;0<Ye-ln;)ui=Ro(ui),Ye--;for(;0<ln-Ye;)an=Ro(an),ln--;for(;Ye--;){if(ui===an||an!==null&&ui===an.alternate)break e;ui=Ro(ui),an=Ro(an)}ui=null}else ui=null;dn!==null&&O0(Sn,fn,dn,ui,!1),di!==null&&ki!==null&&O0(Sn,ki,di,ui,!0)}}t:{if(fn=un?Wn(un):window,dn=fn.nodeName&&fn.nodeName.toLowerCase(),dn==="select"||dn==="input"&&fn.type==="file")var Fn=Kc;else if(Hc(fn))if(Qc)Fn=Yd;else{Fn=Vd;var Si=Ld}else dn=fn.nodeName,!dn||dn.toLowerCase()!=="input"||fn.type!=="checkbox"&&fn.type!=="radio"?un&&Cs(un.elementType)&&(Fn=Kc):Fn=qd;if(Fn&&(Fn=Fn(P,un))){Zc(Sn,Fn,ht,vn);break t}Si&&Si(P,fn,un),P==="focusout"&&un&&fn.type==="number"&&un.memoizedProps.value!=null&&$o(fn,"number",fn.value)}switch(Si=un?Wn(un):window,P){case"focusin":(Hc(Si)||Si.contentEditable==="true")&&(Wa=Si,Ps=un,Uo=null);break;case"focusout":Uo=Ps=Wa=null;break;case"mousedown":Fs=!0;break;case"contextmenu":case"mouseup":case"dragend":Fs=!1,of(Sn,ht,vn);break;case"selectionchange":if(Pd)break;case"keydown":case"keyup":of(Sn,ht,vn)}var ii;if(Vs)t:{switch(P){case"compositionstart":var ci="onCompositionStart";break t;case"compositionend":ci="onCompositionEnd";break t;case"compositionupdate":ci="onCompositionUpdate";break t}ci=void 0}else Ja?Fc(P,ht)&&(ci="onCompositionEnd"):P==="keydown"&&ht.keyCode===229&&(ci="onCompositionStart");ci&&(Yc&&ht.locale!=="ko"&&(Ja||ci!=="onCompositionStart"?ci==="onCompositionEnd"&&Ja&&(ii=Uc()):(ua=vn,js="value"in ua?ua.value:ua.textContent,Ja=!0)),Si=ps(un,ci),0<Si.length&&(ci=new Vc(ci,P,null,ht,vn),Sn.push({event:ci,listeners:Si}),ii?ci.data=ii:(ii=Xc(ht),ii!==null&&(ci.data=ii)))),(ii=Nd?jd(P,ht):kd(P,ht))&&(ci=ps(un,"onBeforeInput"),0<ci.length&&(Si=new Vc("onBeforeInput","beforeinput",null,ht,vn),Sn.push({event:Si,listeners:ci}),Si.data=ii)),T1(Sn,P,un,ht,vn)}D0(Sn,st)})}function hl(P,st,ht){return{instance:P,listener:st,currentTarget:ht}}function ps(P,st){for(var ht=st+"Capture",xt=[];P!==null;){var vt=P,Mt=vt.stateNode;if(vt=vt.tag,vt!==5&&vt!==26&&vt!==27||Mt===null||(vt=Do(P,ht),vt!=null&&xt.unshift(hl(P,vt,Mt)),vt=Do(P,st),vt!=null&&xt.push(hl(P,vt,Mt))),P.tag===3)return xt;P=P.return}return[]}function Ro(P){if(P===null)return null;do P=P.return;while(P&&P.tag!==5&&P.tag!==27);return P||null}function O0(P,st,ht,xt,vt){for(var Mt=st._reactName,Bt=[];ht!==null&&ht!==xt;){var Lt=ht,pe=Lt.alternate,un=Lt.stateNode;if(Lt=Lt.tag,pe!==null&&pe===xt)break;Lt!==5&&Lt!==26&&Lt!==27||un===null||(pe=un,vt?(un=Do(ht,Mt),un!=null&&Bt.unshift(hl(ht,un,pe))):vt||(un=Do(ht,Mt),un!=null&&Bt.push(hl(ht,un,pe)))),ht=ht.return}Bt.length!==0&&P.push({event:st,listeners:Bt})}var C1=/\r\n?/g,O1=/\u0000|\uFFFD/g;function B0(P){return(typeof P=="string"?P:""+P).replace(C1,`
`).replace(O1,"")}function z0(P,st){return st=B0(st),B0(P)===st}function ms(){}function ji(P,st,ht,xt,vt,Mt){switch(ht){case"children":typeof xt=="string"?st==="body"||st==="textarea"&&xt===""||Za(P,xt):(typeof xt=="number"||typeof xt=="bigint")&&st!=="body"&&Za(P,""+xt);break;case"className":Ci(P,"class",xt);break;case"tabIndex":Ci(P,"tabindex",xt);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(P,ht,xt);break;case"style":Nc(P,xt,Mt);break;case"data":if(st!=="object"){Ci(P,"data",xt);break}case"src":case"href":if(xt===""&&(st!=="a"||ht!=="href")){P.removeAttribute(ht);break}if(xt==null||typeof xt=="function"||typeof xt=="symbol"||typeof xt=="boolean"){P.removeAttribute(ht);break}xt=Rl(""+xt),P.setAttribute(ht,xt);break;case"action":case"formAction":if(typeof xt=="function"){P.setAttribute(ht,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Mt=="function"&&(ht==="formAction"?(st!=="input"&&ji(P,st,"name",vt.name,vt,null),ji(P,st,"formEncType",vt.formEncType,vt,null),ji(P,st,"formMethod",vt.formMethod,vt,null),ji(P,st,"formTarget",vt.formTarget,vt,null)):(ji(P,st,"encType",vt.encType,vt,null),ji(P,st,"method",vt.method,vt,null),ji(P,st,"target",vt.target,vt,null)));if(xt==null||typeof xt=="symbol"||typeof xt=="boolean"){P.removeAttribute(ht);break}xt=Rl(""+xt),P.setAttribute(ht,xt);break;case"onClick":xt!=null&&(P.onclick=ms);break;case"onScroll":xt!=null&&_i("scroll",P);break;case"onScrollEnd":xt!=null&&_i("scrollend",P);break;case"dangerouslySetInnerHTML":if(xt!=null){if(typeof xt!="object"||!("__html"in xt))throw Error(ft(61));if(ht=xt.__html,ht!=null){if(vt.children!=null)throw Error(ft(60));P.innerHTML=ht}}break;case"multiple":P.multiple=xt&&typeof xt!="function"&&typeof xt!="symbol";break;case"muted":P.muted=xt&&typeof xt!="function"&&typeof xt!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(xt==null||typeof xt=="function"||typeof xt=="boolean"||typeof xt=="symbol"){P.removeAttribute("xlink:href");break}ht=Rl(""+xt),P.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",ht);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":xt!=null&&typeof xt!="function"&&typeof xt!="symbol"?P.setAttribute(ht,""+xt):P.removeAttribute(ht);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":xt&&typeof xt!="function"&&typeof xt!="symbol"?P.setAttribute(ht,""):P.removeAttribute(ht);break;case"capture":case"download":xt===!0?P.setAttribute(ht,""):xt!==!1&&xt!=null&&typeof xt!="function"&&typeof xt!="symbol"?P.setAttribute(ht,xt):P.removeAttribute(ht);break;case"cols":case"rows":case"size":case"span":xt!=null&&typeof xt!="function"&&typeof xt!="symbol"&&!isNaN(xt)&&1<=xt?P.setAttribute(ht,xt):P.removeAttribute(ht);break;case"rowSpan":case"start":xt==null||typeof xt=="function"||typeof xt=="symbol"||isNaN(xt)?P.removeAttribute(ht):P.setAttribute(ht,xt);break;case"popover":_i("beforetoggle",P),_i("toggle",P),Mi(P,"popover",xt);break;case"xlinkActuate":Ti(P,"http://www.w3.org/1999/xlink","xlink:actuate",xt);break;case"xlinkArcrole":Ti(P,"http://www.w3.org/1999/xlink","xlink:arcrole",xt);break;case"xlinkRole":Ti(P,"http://www.w3.org/1999/xlink","xlink:role",xt);break;case"xlinkShow":Ti(P,"http://www.w3.org/1999/xlink","xlink:show",xt);break;case"xlinkTitle":Ti(P,"http://www.w3.org/1999/xlink","xlink:title",xt);break;case"xlinkType":Ti(P,"http://www.w3.org/1999/xlink","xlink:type",xt);break;case"xmlBase":Ti(P,"http://www.w3.org/XML/1998/namespace","xml:base",xt);break;case"xmlLang":Ti(P,"http://www.w3.org/XML/1998/namespace","xml:lang",xt);break;case"xmlSpace":Ti(P,"http://www.w3.org/XML/1998/namespace","xml:space",xt);break;case"is":Mi(P,"is",xt);break;case"innerText":case"textContent":break;default:(!(2<ht.length)||ht[0]!=="o"&&ht[0]!=="O"||ht[1]!=="n"&&ht[1]!=="N")&&(ht=sd.get(ht)||ht,Mi(P,ht,xt))}}function pc(P,st,ht,xt,vt,Mt){switch(ht){case"style":Nc(P,xt,Mt);break;case"dangerouslySetInnerHTML":if(xt!=null){if(typeof xt!="object"||!("__html"in xt))throw Error(ft(61));if(ht=xt.__html,ht!=null){if(vt.children!=null)throw Error(ft(60));P.innerHTML=ht}}break;case"children":typeof xt=="string"?Za(P,xt):(typeof xt=="number"||typeof xt=="bigint")&&Za(P,""+xt);break;case"onScroll":xt!=null&&_i("scroll",P);break;case"onScrollEnd":xt!=null&&_i("scrollend",P);break;case"onClick":xt!=null&&(P.onclick=ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(ht))t:{if(ht[0]==="o"&&ht[1]==="n"&&(vt=ht.endsWith("Capture"),st=ht.slice(2,vt?ht.length-7:void 0),Mt=P[en]||null,Mt=Mt!=null?Mt[ht]:null,typeof Mt=="function"&&P.removeEventListener(st,Mt,vt),typeof xt=="function")){typeof Mt!="function"&&Mt!==null&&(ht in P?P[ht]=null:P.hasAttribute(ht)&&P.removeAttribute(ht)),P.addEventListener(st,xt,vt);break t}ht in P?P[ht]=xt:xt===!0?P.setAttribute(ht,""):Mi(P,ht,xt)}}}function ur(P,st,ht){switch(st){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_i("error",P),_i("load",P);var xt=!1,vt=!1,Mt;for(Mt in ht)if(ht.hasOwnProperty(Mt)){var Bt=ht[Mt];if(Bt!=null)switch(Mt){case"src":xt=!0;break;case"srcSet":vt=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(ft(137,st));default:ji(P,st,Mt,Bt,ht,null)}}vt&&ji(P,st,"srcSet",ht.srcSet,ht,null),xt&&ji(P,st,"src",ht.src,ht,null);return;case"input":_i("invalid",P);var Lt=Mt=Bt=vt=null,pe=null,un=null;for(xt in ht)if(ht.hasOwnProperty(xt)){var vn=ht[xt];if(vn!=null)switch(xt){case"name":vt=vn;break;case"type":Bt=vn;break;case"checked":pe=vn;break;case"defaultChecked":un=vn;break;case"value":Mt=vn;break;case"defaultValue":Lt=vn;break;case"children":case"dangerouslySetInnerHTML":if(vn!=null)throw Error(ft(137,st));break;default:ji(P,st,xt,vn,ht,null)}}Sl(P,Mt,Lt,pe,un,Bt,vt,!1),Xa(P);return;case"select":_i("invalid",P),xt=Bt=Mt=null;for(vt in ht)if(ht.hasOwnProperty(vt)&&(Lt=ht[vt],Lt!=null))switch(vt){case"value":Mt=Lt;break;case"defaultValue":Bt=Lt;break;case"multiple":xt=Lt;default:ji(P,st,vt,Lt,ht,null)}st=Mt,ht=Bt,P.multiple=!!xt,st!=null?sa(P,!!xt,st,!1):ht!=null&&sa(P,!!xt,ht,!0);return;case"textarea":_i("invalid",P),Mt=vt=xt=null;for(Bt in ht)if(ht.hasOwnProperty(Bt)&&(Lt=ht[Bt],Lt!=null))switch(Bt){case"value":xt=Lt;break;case"defaultValue":vt=Lt;break;case"children":Mt=Lt;break;case"dangerouslySetInnerHTML":if(Lt!=null)throw Error(ft(91));break;default:ji(P,st,Bt,Lt,ht,null)}Bc(P,xt,vt,Mt),Xa(P);return;case"option":for(pe in ht)if(ht.hasOwnProperty(pe)&&(xt=ht[pe],xt!=null))switch(pe){case"selected":P.selected=xt&&typeof xt!="function"&&typeof xt!="symbol";break;default:ji(P,st,pe,xt,ht,null)}return;case"dialog":_i("beforetoggle",P),_i("toggle",P),_i("cancel",P),_i("close",P);break;case"iframe":case"object":_i("load",P);break;case"video":case"audio":for(xt=0;xt<fl.length;xt++)_i(fl[xt],P);break;case"image":_i("error",P),_i("load",P);break;case"details":_i("toggle",P);break;case"embed":case"source":case"link":_i("error",P),_i("load",P);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(un in ht)if(ht.hasOwnProperty(un)&&(xt=ht[un],xt!=null))switch(un){case"children":case"dangerouslySetInnerHTML":throw Error(ft(137,st));default:ji(P,st,un,xt,ht,null)}return;default:if(Cs(st)){for(vn in ht)ht.hasOwnProperty(vn)&&(xt=ht[vn],xt!==void 0&&pc(P,st,vn,xt,ht,void 0));return}}for(Lt in ht)ht.hasOwnProperty(Lt)&&(xt=ht[Lt],xt!=null&&ji(P,st,Lt,xt,ht,null))}function B1(P,st,ht,xt){switch(st){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var vt=null,Mt=null,Bt=null,Lt=null,pe=null,un=null,vn=null;for(dn in ht){var Sn=ht[dn];if(ht.hasOwnProperty(dn)&&Sn!=null)switch(dn){case"checked":break;case"value":break;case"defaultValue":pe=Sn;default:xt.hasOwnProperty(dn)||ji(P,st,dn,null,xt,Sn)}}for(var fn in xt){var dn=xt[fn];if(Sn=ht[fn],xt.hasOwnProperty(fn)&&(dn!=null||Sn!=null))switch(fn){case"type":Mt=dn;break;case"name":vt=dn;break;case"checked":un=dn;break;case"defaultChecked":vn=dn;break;case"value":Bt=dn;break;case"defaultValue":Lt=dn;break;case"children":case"dangerouslySetInnerHTML":if(dn!=null)throw Error(ft(137,st));break;default:dn!==Sn&&ji(P,st,fn,dn,xt,Sn)}}Ao(P,Bt,Lt,pe,un,vn,Mt,vt);return;case"select":dn=Bt=Lt=fn=null;for(Mt in ht)if(pe=ht[Mt],ht.hasOwnProperty(Mt)&&pe!=null)switch(Mt){case"value":break;case"multiple":dn=pe;default:xt.hasOwnProperty(Mt)||ji(P,st,Mt,null,xt,pe)}for(vt in xt)if(Mt=xt[vt],pe=ht[vt],xt.hasOwnProperty(vt)&&(Mt!=null||pe!=null))switch(vt){case"value":fn=Mt;break;case"defaultValue":Lt=Mt;break;case"multiple":Bt=Mt;default:Mt!==pe&&ji(P,st,vt,Mt,xt,pe)}st=Lt,ht=Bt,xt=dn,fn!=null?sa(P,!!ht,fn,!1):!!xt!=!!ht&&(st!=null?sa(P,!!ht,st,!0):sa(P,!!ht,ht?[]:"",!1));return;case"textarea":dn=fn=null;for(Lt in ht)if(vt=ht[Lt],ht.hasOwnProperty(Lt)&&vt!=null&&!xt.hasOwnProperty(Lt))switch(Lt){case"value":break;case"children":break;default:ji(P,st,Lt,null,xt,vt)}for(Bt in xt)if(vt=xt[Bt],Mt=ht[Bt],xt.hasOwnProperty(Bt)&&(vt!=null||Mt!=null))switch(Bt){case"value":fn=vt;break;case"defaultValue":dn=vt;break;case"children":break;case"dangerouslySetInnerHTML":if(vt!=null)throw Error(ft(91));break;default:vt!==Mt&&ji(P,st,Bt,vt,xt,Mt)}Oc(P,fn,dn);return;case"option":for(var di in ht)if(fn=ht[di],ht.hasOwnProperty(di)&&fn!=null&&!xt.hasOwnProperty(di))switch(di){case"selected":P.selected=!1;break;default:ji(P,st,di,null,xt,fn)}for(pe in xt)if(fn=xt[pe],dn=ht[pe],xt.hasOwnProperty(pe)&&fn!==dn&&(fn!=null||dn!=null))switch(pe){case"selected":P.selected=fn&&typeof fn!="function"&&typeof fn!="symbol";break;default:ji(P,st,pe,fn,xt,dn)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ui in ht)fn=ht[ui],ht.hasOwnProperty(ui)&&fn!=null&&!xt.hasOwnProperty(ui)&&ji(P,st,ui,null,xt,fn);for(un in xt)if(fn=xt[un],dn=ht[un],xt.hasOwnProperty(un)&&fn!==dn&&(fn!=null||dn!=null))switch(un){case"children":case"dangerouslySetInnerHTML":if(fn!=null)throw Error(ft(137,st));break;default:ji(P,st,un,fn,xt,dn)}return;default:if(Cs(st)){for(var ki in ht)fn=ht[ki],ht.hasOwnProperty(ki)&&fn!==void 0&&!xt.hasOwnProperty(ki)&&pc(P,st,ki,void 0,xt,fn);for(vn in xt)fn=xt[vn],dn=ht[vn],!xt.hasOwnProperty(vn)||fn===dn||fn===void 0&&dn===void 0||pc(P,st,vn,fn,xt,dn);return}}for(var an in ht)fn=ht[an],ht.hasOwnProperty(an)&&fn!=null&&!xt.hasOwnProperty(an)&&ji(P,st,an,null,xt,fn);for(Sn in xt)fn=xt[Sn],dn=ht[Sn],!xt.hasOwnProperty(Sn)||fn===dn||fn==null&&dn==null||ji(P,st,Sn,fn,xt,dn)}var mc=null,xc=null;function xs(P){return P.nodeType===9?P:P.ownerDocument}function N0(P){switch(P){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j0(P,st){if(P===0)switch(st){case"svg":return 1;case"math":return 2;default:return 0}return P===1&&st==="foreignObject"?0:P}function wc(P,st){return P==="textarea"||P==="noscript"||typeof st.children=="string"||typeof st.children=="number"||typeof st.children=="bigint"||typeof st.dangerouslySetInnerHTML=="object"&&st.dangerouslySetInnerHTML!==null&&st.dangerouslySetInnerHTML.__html!=null}var yc=null;function z1(){var P=window.event;return P&&P.type==="popstate"?P===yc?!1:(yc=P,!0):(yc=null,!1)}var k0=typeof setTimeout=="function"?setTimeout:void 0,N1=typeof clearTimeout=="function"?clearTimeout:void 0,U0=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof U0<"u"?function(P){return U0.resolve(null).then(P).catch(k1)}:k0;function k1(P){setTimeout(function(){throw P})}function _a(P){return P==="head"}function I0(P,st){var ht=st,xt=0,vt=0;do{var Mt=ht.nextSibling;if(P.removeChild(ht),Mt&&Mt.nodeType===8)if(ht=Mt.data,ht==="/$"){if(0<xt&&8>xt){ht=xt;var Bt=P.ownerDocument;if(ht&1&&dl(Bt.documentElement),ht&2&&dl(Bt.body),ht&4)for(ht=Bt.head,dl(ht),Bt=ht.firstChild;Bt;){var Lt=Bt.nextSibling,pe=Bt.nodeName;Bt[jn]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&Bt.rel.toLowerCase()==="stylesheet"||ht.removeChild(Bt),Bt=Lt}}if(vt===0){P.removeChild(Mt),bl(st);return}vt--}else ht==="$"||ht==="$?"||ht==="$!"?vt++:xt=ht.charCodeAt(0)-48;else xt=0;ht=Mt}while(ht);bl(st)}function vc(P){var st=P.firstChild;for(st&&st.nodeType===10&&(st=st.nextSibling);st;){var ht=st;switch(st=st.nextSibling,ht.nodeName){case"HTML":case"HEAD":case"BODY":vc(ht),Le(ht);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(ht.rel.toLowerCase()==="stylesheet")continue}P.removeChild(ht)}}function U1(P,st,ht,xt){for(;P.nodeType===1;){var vt=ht;if(P.nodeName.toLowerCase()!==st.toLowerCase()){if(!xt&&(P.nodeName!=="INPUT"||P.type!=="hidden"))break}else if(xt){if(!P[jn])switch(st){case"meta":if(!P.hasAttribute("itemprop"))break;return P;case"link":if(Mt=P.getAttribute("rel"),Mt==="stylesheet"&&P.hasAttribute("data-precedence"))break;if(Mt!==vt.rel||P.getAttribute("href")!==(vt.href==null||vt.href===""?null:vt.href)||P.getAttribute("crossorigin")!==(vt.crossOrigin==null?null:vt.crossOrigin)||P.getAttribute("title")!==(vt.title==null?null:vt.title))break;return P;case"style":if(P.hasAttribute("data-precedence"))break;return P;case"script":if(Mt=P.getAttribute("src"),(Mt!==(vt.src==null?null:vt.src)||P.getAttribute("type")!==(vt.type==null?null:vt.type)||P.getAttribute("crossorigin")!==(vt.crossOrigin==null?null:vt.crossOrigin))&&Mt&&P.hasAttribute("async")&&!P.hasAttribute("itemprop"))break;return P;default:return P}}else if(st==="input"&&P.type==="hidden"){var Mt=vt.name==null?null:""+vt.name;if(vt.type==="hidden"&&P.getAttribute("name")===Mt)return P}else return P;if(P=Lr(P.nextSibling),P===null)break}return null}function I1(P,st,ht){if(st==="")return null;for(;P.nodeType!==3;)if((P.nodeType!==1||P.nodeName!=="INPUT"||P.type!=="hidden")&&!ht||(P=Lr(P.nextSibling),P===null))return null;return P}function bc(P){return P.data==="$!"||P.data==="$?"&&P.ownerDocument.readyState==="complete"}function L1(P,st){var ht=P.ownerDocument;if(P.data!=="$?"||ht.readyState==="complete")st();else{var xt=function(){st(),ht.removeEventListener("DOMContentLoaded",xt)};ht.addEventListener("DOMContentLoaded",xt),P._reactRetry=xt}}function Lr(P){for(;P!=null;P=P.nextSibling){var st=P.nodeType;if(st===1||st===3)break;if(st===8){if(st=P.data,st==="$"||st==="$!"||st==="$?"||st==="F!"||st==="F")break;if(st==="/$")return null}}return P}var Ec=null;function L0(P){P=P.previousSibling;for(var st=0;P;){if(P.nodeType===8){var ht=P.data;if(ht==="$"||ht==="$!"||ht==="$?"){if(st===0)return P;st--}else ht==="/$"&&st++}P=P.previousSibling}return null}function V0(P,st,ht){switch(st=xs(ht),P){case"html":if(P=st.documentElement,!P)throw Error(ft(452));return P;case"head":if(P=st.head,!P)throw Error(ft(453));return P;case"body":if(P=st.body,!P)throw Error(ft(454));return P;default:throw Error(ft(451))}}function dl(P){for(var st=P.attributes;st.length;)P.removeAttributeNode(st[0]);Le(P)}var kr=new Map,q0=new Set;function ws(P){return typeof P.getRootNode=="function"?P.getRootNode():P.nodeType===9?P:P.ownerDocument}var la=yn.d;yn.d={f:V1,r:q1,D:Y1,C:G1,L:P1,m:F1,X:H1,S:X1,M:Z1};function V1(){var P=la.f(),st=us();return P||st}function q1(P){var st=Un(P);st!==null&&st.tag===5&&st.type==="form"?sh(st):la.r(P)}var _o=typeof document>"u"?null:document;function Y0(P,st,ht){var xt=_o;if(xt&&typeof st=="string"&&st){var vt=xr(st);vt='link[rel="'+P+'"][href="'+vt+'"]',typeof ht=="string"&&(vt+='[crossorigin="'+ht+'"]'),q0.has(vt)||(q0.add(vt),P={rel:P,crossOrigin:ht,href:st},xt.querySelector(vt)===null&&(st=xt.createElement("link"),ur(st,"link",P),pi(st),xt.head.appendChild(st)))}}function Y1(P){la.D(P),Y0("dns-prefetch",P,null)}function G1(P,st){la.C(P,st),Y0("preconnect",P,st)}function P1(P,st,ht){la.L(P,st,ht);var xt=_o;if(xt&&P&&st){var vt='link[rel="preload"][as="'+xr(st)+'"]';st==="image"&&ht&&ht.imageSrcSet?(vt+='[imagesrcset="'+xr(ht.imageSrcSet)+'"]',typeof ht.imageSizes=="string"&&(vt+='[imagesizes="'+xr(ht.imageSizes)+'"]')):vt+='[href="'+xr(P)+'"]';var Mt=vt;switch(st){case"style":Mt=Mo(P);break;case"script":Mt=To(P)}kr.has(Mt)||(P=At({rel:"preload",href:st==="image"&&ht&&ht.imageSrcSet?void 0:P,as:st},ht),kr.set(Mt,P),xt.querySelector(vt)!==null||st==="style"&&xt.querySelector(gl(Mt))||st==="script"&&xt.querySelector(pl(Mt))||(st=xt.createElement("link"),ur(st,"link",P),pi(st),xt.head.appendChild(st)))}}function F1(P,st){la.m(P,st);var ht=_o;if(ht&&P){var xt=st&&typeof st.as=="string"?st.as:"script",vt='link[rel="modulepreload"][as="'+xr(xt)+'"][href="'+xr(P)+'"]',Mt=vt;switch(xt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Mt=To(P)}if(!kr.has(Mt)&&(P=At({rel:"modulepreload",href:P},st),kr.set(Mt,P),ht.querySelector(vt)===null)){switch(xt){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(ht.querySelector(pl(Mt)))return}xt=ht.createElement("link"),ur(xt,"link",P),pi(xt),ht.head.appendChild(xt)}}}function X1(P,st,ht){la.S(P,st,ht);var xt=_o;if(xt&&P){var vt=ni(xt).hoistableStyles,Mt=Mo(P);st=st||"default";var Bt=vt.get(Mt);if(!Bt){var Lt={loading:0,preload:null};if(Bt=xt.querySelector(gl(Mt)))Lt.loading=5;else{P=At({rel:"stylesheet",href:P,"data-precedence":st},ht),(ht=kr.get(Mt))&&Sc(P,ht);var pe=Bt=xt.createElement("link");pi(pe),ur(pe,"link",P),pe._p=new Promise(function(un,vn){pe.onload=un,pe.onerror=vn}),pe.addEventListener("load",function(){Lt.loading|=1}),pe.addEventListener("error",function(){Lt.loading|=2}),Lt.loading|=4,ys(Bt,st,xt)}Bt={type:"stylesheet",instance:Bt,count:1,state:Lt},vt.set(Mt,Bt)}}}function H1(P,st){la.X(P,st);var ht=_o;if(ht&&P){var xt=ni(ht).hoistableScripts,vt=To(P),Mt=xt.get(vt);Mt||(Mt=ht.querySelector(pl(vt)),Mt||(P=At({src:P,async:!0},st),(st=kr.get(vt))&&Rc(P,st),Mt=ht.createElement("script"),pi(Mt),ur(Mt,"link",P),ht.head.appendChild(Mt)),Mt={type:"script",instance:Mt,count:1,state:null},xt.set(vt,Mt))}}function Z1(P,st){la.M(P,st);var ht=_o;if(ht&&P){var xt=ni(ht).hoistableScripts,vt=To(P),Mt=xt.get(vt);Mt||(Mt=ht.querySelector(pl(vt)),Mt||(P=At({src:P,async:!0,type:"module"},st),(st=kr.get(vt))&&Rc(P,st),Mt=ht.createElement("script"),pi(Mt),ur(Mt,"link",P),ht.head.appendChild(Mt)),Mt={type:"script",instance:Mt,count:1,state:null},xt.set(vt,Mt))}}function G0(P,st,ht,xt){var vt=(vt=xn.current)?ws(vt):null;if(!vt)throw Error(ft(446));switch(P){case"meta":case"title":return null;case"style":return typeof ht.precedence=="string"&&typeof ht.href=="string"?(st=Mo(ht.href),ht=ni(vt).hoistableStyles,xt=ht.get(st),xt||(xt={type:"style",instance:null,count:0,state:null},ht.set(st,xt)),xt):{type:"void",instance:null,count:0,state:null};case"link":if(ht.rel==="stylesheet"&&typeof ht.href=="string"&&typeof ht.precedence=="string"){P=Mo(ht.href);var Mt=ni(vt).hoistableStyles,Bt=Mt.get(P);if(Bt||(vt=vt.ownerDocument||vt,Bt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Mt.set(P,Bt),(Mt=vt.querySelector(gl(P)))&&!Mt._p&&(Bt.instance=Mt,Bt.state.loading=5),kr.has(P)||(ht={rel:"preload",as:"style",href:ht.href,crossOrigin:ht.crossOrigin,integrity:ht.integrity,media:ht.media,hrefLang:ht.hrefLang,referrerPolicy:ht.referrerPolicy},kr.set(P,ht),Mt||K1(vt,P,ht,Bt.state))),st&&xt===null)throw Error(ft(528,""));return Bt}if(st&&xt!==null)throw Error(ft(529,""));return null;case"script":return st=ht.async,ht=ht.src,typeof ht=="string"&&st&&typeof st!="function"&&typeof st!="symbol"?(st=To(ht),ht=ni(vt).hoistableScripts,xt=ht.get(st),xt||(xt={type:"script",instance:null,count:0,state:null},ht.set(st,xt)),xt):{type:"void",instance:null,count:0,state:null};default:throw Error(ft(444,P))}}function Mo(P){return'href="'+xr(P)+'"'}function gl(P){return'link[rel="stylesheet"]['+P+"]"}function P0(P){return At({},P,{"data-precedence":P.precedence,precedence:null})}function K1(P,st,ht,xt){P.querySelector('link[rel="preload"][as="style"]['+st+"]")?xt.loading=1:(st=P.createElement("link"),xt.preload=st,st.addEventListener("load",function(){return xt.loading|=1}),st.addEventListener("error",function(){return xt.loading|=2}),ur(st,"link",ht),pi(st),P.head.appendChild(st))}function To(P){return'[src="'+xr(P)+'"]'}function pl(P){return"script[async]"+P}function F0(P,st,ht){if(st.count++,st.instance===null)switch(st.type){case"style":var xt=P.querySelector('style[data-href~="'+xr(ht.href)+'"]');if(xt)return st.instance=xt,pi(xt),xt;var vt=At({},ht,{"data-href":ht.href,"data-precedence":ht.precedence,href:null,precedence:null});return xt=(P.ownerDocument||P).createElement("style"),pi(xt),ur(xt,"style",vt),ys(xt,ht.precedence,P),st.instance=xt;case"stylesheet":vt=Mo(ht.href);var Mt=P.querySelector(gl(vt));if(Mt)return st.state.loading|=4,st.instance=Mt,pi(Mt),Mt;xt=P0(ht),(vt=kr.get(vt))&&Sc(xt,vt),Mt=(P.ownerDocument||P).createElement("link"),pi(Mt);var Bt=Mt;return Bt._p=new Promise(function(Lt,pe){Bt.onload=Lt,Bt.onerror=pe}),ur(Mt,"link",xt),st.state.loading|=4,ys(Mt,ht.precedence,P),st.instance=Mt;case"script":return Mt=To(ht.src),(vt=P.querySelector(pl(Mt)))?(st.instance=vt,pi(vt),vt):(xt=ht,(vt=kr.get(Mt))&&(xt=At({},ht),Rc(xt,vt)),P=P.ownerDocument||P,vt=P.createElement("script"),pi(vt),ur(vt,"link",xt),P.head.appendChild(vt),st.instance=vt);case"void":return null;default:throw Error(ft(443,st.type))}else st.type==="stylesheet"&&(st.state.loading&4)===0&&(xt=st.instance,st.state.loading|=4,ys(xt,ht.precedence,P));return st.instance}function ys(P,st,ht){for(var xt=ht.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),vt=xt.length?xt[xt.length-1]:null,Mt=vt,Bt=0;Bt<xt.length;Bt++){var Lt=xt[Bt];if(Lt.dataset.precedence===st)Mt=Lt;else if(Mt!==vt)break}Mt?Mt.parentNode.insertBefore(P,Mt.nextSibling):(st=ht.nodeType===9?ht.head:ht,st.insertBefore(P,st.firstChild))}function Sc(P,st){P.crossOrigin==null&&(P.crossOrigin=st.crossOrigin),P.referrerPolicy==null&&(P.referrerPolicy=st.referrerPolicy),P.title==null&&(P.title=st.title)}function Rc(P,st){P.crossOrigin==null&&(P.crossOrigin=st.crossOrigin),P.referrerPolicy==null&&(P.referrerPolicy=st.referrerPolicy),P.integrity==null&&(P.integrity=st.integrity)}var vs=null;function X0(P,st,ht){if(vs===null){var xt=new Map,vt=vs=new Map;vt.set(ht,xt)}else vt=vs,xt=vt.get(ht),xt||(xt=new Map,vt.set(ht,xt));if(xt.has(P))return xt;for(xt.set(P,null),ht=ht.getElementsByTagName(P),vt=0;vt<ht.length;vt++){var Mt=ht[vt];if(!(Mt[jn]||Mt[Yt]||P==="link"&&Mt.getAttribute("rel")==="stylesheet")&&Mt.namespaceURI!=="http://www.w3.org/2000/svg"){var Bt=Mt.getAttribute(st)||"";Bt=P+Bt;var Lt=xt.get(Bt);Lt?Lt.push(Mt):xt.set(Bt,[Mt])}}return xt}function H0(P,st,ht){P=P.ownerDocument||P,P.head.insertBefore(ht,st==="title"?P.querySelector("head > title"):null)}function Q1(P,st,ht){if(ht===1||st.itemProp!=null)return!1;switch(P){case"meta":case"title":return!0;case"style":if(typeof st.precedence!="string"||typeof st.href!="string"||st.href==="")break;return!0;case"link":if(typeof st.rel!="string"||typeof st.href!="string"||st.href===""||st.onLoad||st.onError)break;switch(st.rel){case"stylesheet":return P=st.disabled,typeof st.precedence=="string"&&P==null;default:return!0}case"script":if(st.async&&typeof st.async!="function"&&typeof st.async!="symbol"&&!st.onLoad&&!st.onError&&st.src&&typeof st.src=="string")return!0}return!1}function Z0(P){return!(P.type==="stylesheet"&&(P.state.loading&3)===0)}var ml=null;function J1(){}function W1(P,st,ht){if(ml===null)throw Error(ft(475));var xt=ml;if(st.type==="stylesheet"&&(typeof ht.media!="string"||matchMedia(ht.media).matches!==!1)&&(st.state.loading&4)===0){if(st.instance===null){var vt=Mo(ht.href),Mt=P.querySelector(gl(vt));if(Mt){P=Mt._p,P!==null&&typeof P=="object"&&typeof P.then=="function"&&(xt.count++,xt=bs.bind(xt),P.then(xt,xt)),st.state.loading|=4,st.instance=Mt,pi(Mt);return}Mt=P.ownerDocument||P,ht=P0(ht),(vt=kr.get(vt))&&Sc(ht,vt),Mt=Mt.createElement("link"),pi(Mt);var Bt=Mt;Bt._p=new Promise(function(Lt,pe){Bt.onload=Lt,Bt.onerror=pe}),ur(Mt,"link",ht),st.instance=Mt}xt.stylesheets===null&&(xt.stylesheets=new Map),xt.stylesheets.set(st,P),(P=st.state.preload)&&(st.state.loading&3)===0&&(xt.count++,st=bs.bind(xt),P.addEventListener("load",st),P.addEventListener("error",st))}}function tg(){if(ml===null)throw Error(ft(475));var P=ml;return P.stylesheets&&P.count===0&&_c(P,P.stylesheets),0<P.count?function(st){var ht=setTimeout(function(){if(P.stylesheets&&_c(P,P.stylesheets),P.unsuspend){var xt=P.unsuspend;P.unsuspend=null,xt()}},6e4);return P.unsuspend=st,function(){P.unsuspend=null,clearTimeout(ht)}}:null}function bs(){if(this.count--,this.count===0){if(this.stylesheets)_c(this,this.stylesheets);else if(this.unsuspend){var P=this.unsuspend;this.unsuspend=null,P()}}}var Es=null;function _c(P,st){P.stylesheets=null,P.unsuspend!==null&&(P.count++,Es=new Map,st.forEach(eg,P),Es=null,bs.call(P))}function eg(P,st){if(!(st.state.loading&4)){var ht=Es.get(P);if(ht)var xt=ht.get(null);else{ht=new Map,Es.set(P,ht);for(var vt=P.querySelectorAll("link[data-precedence],style[data-precedence]"),Mt=0;Mt<vt.length;Mt++){var Bt=vt[Mt];(Bt.nodeName==="LINK"||Bt.getAttribute("media")!=="not all")&&(ht.set(Bt.dataset.precedence,Bt),xt=Bt)}xt&&ht.set(null,xt)}vt=st.instance,Bt=vt.getAttribute("data-precedence"),Mt=ht.get(Bt)||xt,Mt===xt&&ht.set(null,vt),ht.set(Bt,vt),this.count++,xt=bs.bind(this),vt.addEventListener("load",xt),vt.addEventListener("error",xt),Mt?Mt.parentNode.insertBefore(vt,Mt.nextSibling):(P=P.nodeType===9?P.head:P,P.insertBefore(vt,P.firstChild)),st.state.loading|=4}}var xl={$$typeof:Nt,Provider:null,Consumer:null,_currentValue:bn,_currentValue2:bn,_threadCount:0};function ng(P,st,ht,xt,vt,Mt,Bt,Lt){this.tag=1,this.containerInfo=P,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dr(0),this.hiddenUpdates=dr(null),this.identifierPrefix=xt,this.onUncaughtError=vt,this.onCaughtError=Mt,this.onRecoverableError=Bt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Lt,this.incompleteTransitions=new Map}function K0(P,st,ht,xt,vt,Mt,Bt,Lt,pe,un,vn,Sn){return P=new ng(P,st,ht,Bt,Lt,pe,un,Sn),st=1,Mt===!0&&(st|=24),Mt=Rr(3,null,null,st),P.current=Mt,Mt.stateNode=P,st=ou(),st.refCount++,P.pooledCache=st,st.refCount++,Mt.memoizedState={element:xt,isDehydrated:ht,cache:st},cu(Mt),P}function Q0(P){return P?(P=io,P):io}function J0(P,st,ht,xt,vt,Mt){vt=Q0(vt),xt.context===null?xt.context=vt:xt.pendingContext=vt,xt=ha(st),xt.payload={element:ht},Mt=Mt===void 0?null:Mt,Mt!==null&&(xt.callback=Mt),ht=da(P,xt,st),ht!==null&&($r(ht,P,st),Xo(ht,P,st))}function W0(P,st){if(P=P.memoizedState,P!==null&&P.dehydrated!==null){var ht=P.retryLane;P.retryLane=ht!==0&&ht<st?ht:st}}function Mc(P,st){W0(P,st),(P=P.alternate)&&W0(P,st)}function td(P){if(P.tag===13){var st=no(P,67108864);st!==null&&$r(st,P,67108864),Mc(P,67108864)}}var Ss=!0;function ig(P,st,ht,xt){var vt=on.T;on.T=null;var Mt=yn.p;try{yn.p=2,Tc(P,st,ht,xt)}finally{yn.p=Mt,on.T=vt}}function rg(P,st,ht,xt){var vt=on.T;on.T=null;var Mt=yn.p;try{yn.p=8,Tc(P,st,ht,xt)}finally{yn.p=Mt,on.T=vt}}function Tc(P,st,ht,xt){if(Ss){var vt=Ac(xt);if(vt===null)gc(P,st,xt,Rs,ht),nd(P,xt);else if(og(vt,P,st,ht,xt))xt.stopPropagation();else if(nd(P,xt),st&4&&-1<ag.indexOf(P)){for(;vt!==null;){var Mt=Un(vt);if(Mt!==null)switch(Mt.tag){case 3:if(Mt=Mt.stateNode,Mt.current.memoizedState.isDehydrated){var Bt=yi(Mt.pendingLanes);if(Bt!==0){var Lt=Mt;for(Lt.pendingLanes|=2,Lt.entangledLanes|=2;Bt;){var pe=1<<31-Nn(Bt);Lt.entanglements[1]|=pe,Bt&=~pe}Fr(Mt),(Oi&6)===0&&(ls=Xn()+500,cl(0))}}break;case 13:Lt=no(Mt,2),Lt!==null&&$r(Lt,Mt,2),us(),Mc(Mt,2)}if(Mt=Ac(xt),Mt===null&&gc(P,st,xt,Rs,ht),Mt===vt)break;vt=Mt}vt!==null&&xt.stopPropagation()}else gc(P,st,xt,null,ht)}}function Ac(P){return P=Bs(P),$c(P)}var Rs=null;function $c(P){if(Rs=null,P=Tn(P),P!==null){var st=mt(P);if(st===null)P=null;else{var ht=st.tag;if(ht===13){if(P=yt(st),P!==null)return P;P=null}else if(ht===3){if(st.stateNode.current.memoizedState.isDehydrated)return st.tag===3?st.stateNode.containerInfo:null;P=null}else st!==P&&(P=null)}}return Rs=P,null}function ed(P){switch(P){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ri()){case cn:return 2;case Pn:return 8;case Vn:case Gn:return 32;case ai:return 268435456;default:return 32}default:return 32}}var Dc=!1,Ma=null,Ta=null,Aa=null,wl=new Map,yl=new Map,$a=[],ag="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nd(P,st){switch(P){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":wl.delete(st.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(st.pointerId)}}function vl(P,st,ht,xt,vt,Mt){return P===null||P.nativeEvent!==Mt?(P={blockedOn:st,domEventName:ht,eventSystemFlags:xt,nativeEvent:Mt,targetContainers:[vt]},st!==null&&(st=Un(st),st!==null&&td(st)),P):(P.eventSystemFlags|=xt,st=P.targetContainers,vt!==null&&st.indexOf(vt)===-1&&st.push(vt),P)}function og(P,st,ht,xt,vt){switch(st){case"focusin":return Ma=vl(Ma,P,st,ht,xt,vt),!0;case"dragenter":return Ta=vl(Ta,P,st,ht,xt,vt),!0;case"mouseover":return Aa=vl(Aa,P,st,ht,xt,vt),!0;case"pointerover":var Mt=vt.pointerId;return wl.set(Mt,vl(wl.get(Mt)||null,P,st,ht,xt,vt)),!0;case"gotpointercapture":return Mt=vt.pointerId,yl.set(Mt,vl(yl.get(Mt)||null,P,st,ht,xt,vt)),!0}return!1}function id(P){var st=Tn(P.target);if(st!==null){var ht=mt(st);if(ht!==null){if(st=ht.tag,st===13){if(st=yt(ht),st!==null){P.blockedOn=st,qt(P.priority,function(){if(ht.tag===13){var xt=Ar();xt=Rt(xt);var vt=no(ht,xt);vt!==null&&$r(vt,ht,xt),Mc(ht,xt)}});return}}else if(st===3&&ht.stateNode.current.memoizedState.isDehydrated){P.blockedOn=ht.tag===3?ht.stateNode.containerInfo:null;return}}}P.blockedOn=null}function _s(P){if(P.blockedOn!==null)return!1;for(var st=P.targetContainers;0<st.length;){var ht=Ac(P.nativeEvent);if(ht===null){ht=P.nativeEvent;var xt=new ht.constructor(ht.type,ht);Os=xt,ht.target.dispatchEvent(xt),Os=null}else return st=Un(ht),st!==null&&td(st),P.blockedOn=ht,!1;st.shift()}return!0}function rd(P,st,ht){_s(P)&&ht.delete(st)}function lg(){Dc=!1,Ma!==null&&_s(Ma)&&(Ma=null),Ta!==null&&_s(Ta)&&(Ta=null),Aa!==null&&_s(Aa)&&(Aa=null),wl.forEach(rd),yl.forEach(rd)}function Ms(P,st){P.blockedOn===st&&(P.blockedOn=null,Dc||(Dc=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,lg)))}var Ts=null;function ad(P){Ts!==P&&(Ts=P,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,function(){Ts===P&&(Ts=null);for(var st=0;st<P.length;st+=3){var ht=P[st],xt=P[st+1],vt=P[st+2];if(typeof xt!="function"){if($c(xt||ht)===null)continue;break}var Mt=Un(ht);Mt!==null&&(P.splice(st,3),st-=3,$u(Mt,{pending:!0,data:vt,method:ht.method,action:xt},xt,vt))}}))}function bl(P){function st(pe){return Ms(pe,P)}Ma!==null&&Ms(Ma,P),Ta!==null&&Ms(Ta,P),Aa!==null&&Ms(Aa,P),wl.forEach(st),yl.forEach(st);for(var ht=0;ht<$a.length;ht++){var xt=$a[ht];xt.blockedOn===P&&(xt.blockedOn=null)}for(;0<$a.length&&(ht=$a[0],ht.blockedOn===null);)id(ht),ht.blockedOn===null&&$a.shift();if(ht=(P.ownerDocument||P).$$reactFormReplay,ht!=null)for(xt=0;xt<ht.length;xt+=3){var vt=ht[xt],Mt=ht[xt+1],Bt=vt[en]||null;if(typeof Mt=="function")Bt||ad(ht);else if(Bt){var Lt=null;if(Mt&&Mt.hasAttribute("formAction")){if(vt=Mt,Bt=Mt[en]||null)Lt=Bt.formAction;else if($c(vt)!==null)continue}else Lt=Bt.action;typeof Lt=="function"?ht[xt+1]=Lt:(ht.splice(xt,3),xt-=3),ad(ht)}}}function Cc(P){this._internalRoot=P}As.prototype.render=Cc.prototype.render=function(P){var st=this._internalRoot;if(st===null)throw Error(ft(409));var ht=st.current,xt=Ar();J0(ht,xt,P,st,null,null)},As.prototype.unmount=Cc.prototype.unmount=function(){var P=this._internalRoot;if(P!==null){this._internalRoot=null;var st=P.containerInfo;J0(P.current,2,null,P,null,null),us(),st[de]=null}};function As(P){this._internalRoot=P}As.prototype.unstable_scheduleHydration=function(P){if(P){var st=Vt();P={blockedOn:null,target:P,priority:st};for(var ht=0;ht<$a.length&&st!==0&&st<$a[ht].priority;ht++);$a.splice(ht,0,P),ht===0&&id(P)}};var od=nt.version;if(od!=="19.1.1")throw Error(ft(527,od,"19.1.1"));yn.findDOMNode=function(P){var st=P._reactInternals;if(st===void 0)throw typeof P.render=="function"?Error(ft(188)):(P=Object.keys(P).join(","),Error(ft(268,P)));return P=Tt(st),P=P!==null?St(P):null,P=P===null?null:P.stateNode,P};var sg={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:on,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$s.isDisabled&&$s.supportsFiber)try{zn=$s.inject(sg),kn=$s}catch{}}return reactDomClient_production.createRoot=function(P,st){if(!gt(P))throw Error(ft(299));var ht=!1,xt="",vt=Eh,Mt=Sh,Bt=Rh,Lt=null;return st!=null&&(st.unstable_strictMode===!0&&(ht=!0),st.identifierPrefix!==void 0&&(xt=st.identifierPrefix),st.onUncaughtError!==void 0&&(vt=st.onUncaughtError),st.onCaughtError!==void 0&&(Mt=st.onCaughtError),st.onRecoverableError!==void 0&&(Bt=st.onRecoverableError),st.unstable_transitionCallbacks!==void 0&&(Lt=st.unstable_transitionCallbacks)),st=K0(P,1,!1,null,null,ht,xt,vt,Mt,Bt,Lt,null),P[de]=st.current,dc(P),new Cc(st)},reactDomClient_production.hydrateRoot=function(P,st,ht){if(!gt(P))throw Error(ft(299));var xt=!1,vt="",Mt=Eh,Bt=Sh,Lt=Rh,pe=null,un=null;return ht!=null&&(ht.unstable_strictMode===!0&&(xt=!0),ht.identifierPrefix!==void 0&&(vt=ht.identifierPrefix),ht.onUncaughtError!==void 0&&(Mt=ht.onUncaughtError),ht.onCaughtError!==void 0&&(Bt=ht.onCaughtError),ht.onRecoverableError!==void 0&&(Lt=ht.onRecoverableError),ht.unstable_transitionCallbacks!==void 0&&(pe=ht.unstable_transitionCallbacks),ht.formState!==void 0&&(un=ht.formState)),st=K0(P,1,!0,st,ht??null,xt,vt,Mt,Bt,Lt,pe,un),st.context=Q0(null),ht=st.current,xt=Ar(),xt=Rt(xt),vt=ha(xt),vt.callback=null,da(ht,vt,xt),ht=xt,st.current.lanes=ht,zt(st,ht),Fr(st),P[de]=st.current,dc(P),new As(st)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function tt(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tt)}catch(nt){console.error(nt)}}return tt(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),__assign=function(){return __assign=Object.assign||function(nt){for(var ot,ft=1,gt=arguments.length;ft<gt;ft++){ot=arguments[ft];for(var mt in ot)Object.prototype.hasOwnProperty.call(ot,mt)&&(nt[mt]=ot[mt])}return nt},__assign.apply(this,arguments)};function __spreadArray(tt,nt,ot){if(ot||arguments.length===2)for(var ft=0,gt=nt.length,mt;ft<gt;ft++)(mt||!(ft in nt))&&(mt||(mt=Array.prototype.slice.call(nt,0,ft)),mt[ft]=nt[ft]);return tt.concat(mt||Array.prototype.slice.call(nt))}typeof SuppressedError=="function"&&SuppressedError;var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT$1="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign$1=Object.assign;function hash(tt,nt){return charat(tt,0)^45?(((nt<<2^charat(tt,0))<<2^charat(tt,1))<<2^charat(tt,2))<<2^charat(tt,3):0}function trim(tt){return tt.trim()}function match(tt,nt){return(tt=nt.exec(tt))?tt[0]:tt}function replace(tt,nt,ot){return tt.replace(nt,ot)}function indexof(tt,nt,ot){return tt.indexOf(nt,ot)}function charat(tt,nt){return tt.charCodeAt(nt)|0}function substr(tt,nt,ot){return tt.slice(nt,ot)}function strlen(tt){return tt.length}function sizeof(tt){return tt.length}function append(tt,nt){return nt.push(tt),tt}function combine(tt,nt){return tt.map(nt).join("")}function filter(tt,nt){return tt.filter(function(ot){return!match(ot,nt)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(tt,nt,ot,ft,gt,mt,yt,_t){return{value:tt,root:nt,parent:ot,type:ft,props:gt,children:mt,line,column,length:yt,return:"",siblings:_t}}function copy(tt,nt){return assign$1(node("",null,null,"",null,null,0,tt.siblings),tt,{length:-tt.length},nt)}function lift(tt){for(;tt.root;)tt=copy(tt.root,{children:[tt]});append(tt,tt.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(tt,nt){return substr(characters,tt,nt)}function token(tt){switch(tt){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(tt){return line=column=1,length=strlen(characters=tt),position=0,[]}function dealloc(tt){return characters="",tt}function delimit(tt){return trim(slice(position-1,delimiter(tt===91?tt+2:tt===40?tt+1:tt)))}function whitespace(tt){for(;(character=peek())&&character<33;)next();return token(tt)>2||token(character)>3?"":" "}function escaping(tt,nt){for(;--nt&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(tt,caret()+(nt<6&&peek()==32&&next()==32))}function delimiter(tt){for(;next();)switch(character){case tt:return position;case 34:case 39:tt!==34&&tt!==39&&delimiter(character);break;case 40:tt===41&&delimiter(tt);break;case 92:next();break}return position}function commenter(tt,nt){for(;next()&&tt+character!==57;)if(tt+character===84&&peek()===47)break;return"/*"+slice(nt,position-1)+"*"+from(tt===47?tt:next())}function identifier(tt){for(;!token(peek());)next();return slice(tt,position)}function compile(tt){return dealloc(parse("",null,null,null,[""],tt=alloc(tt),0,[0],tt))}function parse(tt,nt,ot,ft,gt,mt,yt,_t,Tt){for(var St=0,At=0,Ct=yt,Ot=0,Dt=0,Ut=0,Xt=1,Pt=1,Jt=1,Kt=0,Nt="",jt=gt,kt=mt,Zt=ft,Ft=Nt;Pt;)switch(Ut=Kt,Kt=next()){case 40:if(Ut!=108&&charat(Ft,Ct-1)==58){indexof(Ft+=replace(delimit(Kt),"&","&\f"),"&\f",abs(St?_t[St-1]:0))!=-1&&(Jt=-1);break}case 34:case 39:case 91:Ft+=delimit(Kt);break;case 9:case 10:case 13:case 32:Ft+=whitespace(Ut);break;case 92:Ft+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),nt,ot,Tt),Tt);break;default:Ft+="/"}break;case 123*Xt:_t[St++]=strlen(Ft)*Jt;case 125*Xt:case 59:case 0:switch(Kt){case 0:case 125:Pt=0;case 59+At:Jt==-1&&(Ft=replace(Ft,/\f/g,"")),Dt>0&&strlen(Ft)-Ct&&append(Dt>32?declaration(Ft+";",ft,ot,Ct-1,Tt):declaration(replace(Ft," ","")+";",ft,ot,Ct-2,Tt),Tt);break;case 59:Ft+=";";default:if(append(Zt=ruleset(Ft,nt,ot,St,At,gt,_t,Nt,jt=[],kt=[],Ct,mt),mt),Kt===123)if(At===0)parse(Ft,nt,Zt,Zt,jt,mt,Ct,_t,kt);else switch(Ot===99&&charat(Ft,3)===110?100:Ot){case 100:case 108:case 109:case 115:parse(tt,Zt,Zt,ft&&append(ruleset(tt,Zt,Zt,0,0,gt,_t,Nt,gt,jt=[],Ct,kt),kt),gt,kt,Ct,_t,ft?jt:kt);break;default:parse(Ft,Zt,Zt,Zt,[""],kt,0,_t,kt)}}St=At=Dt=0,Xt=Jt=1,Nt=Ft="",Ct=yt;break;case 58:Ct=1+strlen(Ft),Dt=Ut;default:if(Xt<1){if(Kt==123)--Xt;else if(Kt==125&&Xt++==0&&prev()==125)continue}switch(Ft+=from(Kt),Kt*Xt){case 38:Jt=At>0?1:(Ft+="\f",-1);break;case 44:_t[St++]=(strlen(Ft)-1)*Jt,Jt=1;break;case 64:peek()===45&&(Ft+=delimit(next())),Ot=peek(),At=Ct=strlen(Nt=Ft+=identifier(caret())),Kt++;break;case 45:Ut===45&&strlen(Ft)==2&&(Xt=0)}}return mt}function ruleset(tt,nt,ot,ft,gt,mt,yt,_t,Tt,St,At,Ct){for(var Ot=gt-1,Dt=gt===0?mt:[""],Ut=sizeof(Dt),Xt=0,Pt=0,Jt=0;Xt<ft;++Xt)for(var Kt=0,Nt=substr(tt,Ot+1,Ot=abs(Pt=yt[Xt])),jt=tt;Kt<Ut;++Kt)(jt=trim(Pt>0?Dt[Kt]+" "+Nt:replace(Nt,/&\f/g,Dt[Kt])))&&(Tt[Jt++]=jt);return node(tt,nt,ot,gt===0?RULESET:_t,Tt,St,At,Ct)}function comment(tt,nt,ot,ft){return node(tt,nt,ot,COMMENT$1,from(char()),substr(tt,2,-2),0,ft)}function declaration(tt,nt,ot,ft,gt){return node(tt,nt,ot,DECLARATION,substr(tt,0,ft),substr(tt,ft+1,-1),ft,gt)}function prefix(tt,nt,ot){switch(hash(tt,nt)){case 5103:return WEBKIT+"print-"+tt+tt;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+tt+tt;case 4789:return MOZ+tt+tt;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+tt+MOZ+tt+MS+tt+tt;case 5936:switch(charat(tt,nt+11)){case 114:return WEBKIT+tt+MS+replace(tt,/[svh]\w+-[tblr]{2}/,"tb")+tt;case 108:return WEBKIT+tt+MS+replace(tt,/[svh]\w+-[tblr]{2}/,"tb-rl")+tt;case 45:return WEBKIT+tt+MS+replace(tt,/[svh]\w+-[tblr]{2}/,"lr")+tt}case 6828:case 4268:case 2903:return WEBKIT+tt+MS+tt+tt;case 6165:return WEBKIT+tt+MS+"flex-"+tt+tt;case 5187:return WEBKIT+tt+replace(tt,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+tt;case 5443:return WEBKIT+tt+MS+"flex-item-"+replace(tt,/flex-|-self/g,"")+(match(tt,/flex-|baseline/)?"":MS+"grid-row-"+replace(tt,/flex-|-self/g,""))+tt;case 4675:return WEBKIT+tt+MS+"flex-line-pack"+replace(tt,/align-content|flex-|-self/g,"")+tt;case 5548:return WEBKIT+tt+MS+replace(tt,"shrink","negative")+tt;case 5292:return WEBKIT+tt+MS+replace(tt,"basis","preferred-size")+tt;case 6060:return WEBKIT+"box-"+replace(tt,"-grow","")+WEBKIT+tt+MS+replace(tt,"grow","positive")+tt;case 4554:return WEBKIT+replace(tt,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+tt;case 6187:return replace(replace(replace(tt,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),tt,"")+tt;case 5495:case 3959:return replace(tt,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(tt,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+tt+tt;case 4200:if(!match(tt,/flex-|baseline/))return MS+"grid-column-align"+substr(tt,nt)+tt;break;case 2592:case 3360:return MS+replace(tt,"template-","")+tt;case 4384:case 3616:return ot&&ot.some(function(ft,gt){return nt=gt,match(ft.props,/grid-\w+-end/)})?~indexof(tt+(ot=ot[nt].value),"span",0)?tt:MS+replace(tt,"-start","")+tt+MS+"grid-row-span:"+(~indexof(ot,"span",0)?match(ot,/\d+/):+match(ot,/\d+/)-+match(tt,/\d+/))+";":MS+replace(tt,"-start","")+tt;case 4896:case 4128:return ot&&ot.some(function(ft){return match(ft.props,/grid-\w+-start/)})?tt:MS+replace(replace(tt,"-end","-span"),"span ","")+tt;case 4095:case 3583:case 4068:case 2532:return replace(tt,/(.+)-inline(.+)/,WEBKIT+"$1$2")+tt;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(tt)-1-nt>6)switch(charat(tt,nt+1)){case 109:if(charat(tt,nt+4)!==45)break;case 102:return replace(tt,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(tt,nt+3)==108?"$3":"$2-$3"))+tt;case 115:return~indexof(tt,"stretch",0)?prefix(replace(tt,"stretch","fill-available"),nt,ot)+tt:tt}break;case 5152:case 5920:return replace(tt,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(ft,gt,mt,yt,_t,Tt,St){return MS+gt+":"+mt+St+(yt?MS+gt+"-span:"+(_t?Tt:+Tt-+mt)+St:"")+tt});case 4949:if(charat(tt,nt+6)===121)return replace(tt,":",":"+WEBKIT)+tt;break;case 6444:switch(charat(tt,charat(tt,14)===45?18:11)){case 120:return replace(tt,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(tt,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+tt;case 100:return replace(tt,":",":"+MS)+tt}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(tt,"scroll-","scroll-snap-")+tt}return tt}function serialize(tt,nt){for(var ot="",ft=0;ft<tt.length;ft++)ot+=nt(tt[ft],ft,tt,nt)||"";return ot}function stringify(tt,nt,ot,ft){switch(tt.type){case LAYER:if(tt.children.length)break;case IMPORT:case DECLARATION:return tt.return=tt.return||tt.value;case COMMENT$1:return"";case KEYFRAMES:return tt.return=tt.value+"{"+serialize(tt.children,ft)+"}";case RULESET:if(!strlen(tt.value=tt.props.join(",")))return""}return strlen(ot=serialize(tt.children,ft))?tt.return=tt.value+"{"+ot+"}":""}function middleware(tt){var nt=sizeof(tt);return function(ot,ft,gt,mt){for(var yt="",_t=0;_t<nt;_t++)yt+=tt[_t](ot,ft,gt,mt)||"";return yt}}function rulesheet(tt){return function(nt){nt.root||(nt=nt.return)&&tt(nt)}}function prefixer(tt,nt,ot,ft){if(tt.length>-1&&!tt.return)switch(tt.type){case DECLARATION:tt.return=prefix(tt.value,tt.length,ot);return;case KEYFRAMES:return serialize([copy(tt,{value:replace(tt.value,"@","@"+WEBKIT)})],ft);case RULESET:if(tt.length)return combine(ot=tt.props,function(gt){switch(match(gt,ft=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(tt,{props:[replace(gt,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(tt,{props:[gt]})),assign$1(tt,{props:filter(ot,ft)});break;case"::placeholder":lift(copy(tt,{props:[replace(gt,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(tt,{props:[replace(gt,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(tt,{props:[replace(gt,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(tt,{props:[gt]})),assign$1(tt,{props:filter(ot,ft)});break}return""})}}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default={},f$1=typeof process<"u"&&define_process_env_default!==void 0&&(define_process_env_default.REACT_APP_SC_ATTR||define_process_env_default.SC_ATTR)||"data-styled",m$3="active",y$2="data-styled-version",v$3="6.1.19",g$1=`/*!sc*/
`,S$2=typeof window<"u"&&typeof document<"u",w$3=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default.SC_DISABLE_SPEEDY!==""&&define_process_env_default.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default.SC_DISABLE_SPEEDY),_$1=Object.freeze([]),C=Object.freeze({});function I$2(tt,nt,ot){return ot===void 0&&(ot=C),tt.theme!==ot.theme&&tt.theme||nt||ot.theme}var A$1=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D$1=/(^-|-$)/g;function R(tt){return tt.replace(O,"-").replace(D$1,"")}var T$1=/(a)(d)/gi,k$2=52,j$2=function(tt){return String.fromCharCode(tt+(tt>25?39:97))};function x$4(tt){var nt,ot="";for(nt=Math.abs(tt);nt>k$2;nt=nt/k$2|0)ot=j$2(nt%k$2)+ot;return(j$2(nt%k$2)+ot).replace(T$1,"$1-$2")}var V,F=5381,M$3=function(tt,nt){for(var ot=nt.length;ot;)tt=33*tt^nt.charCodeAt(--ot);return tt},z$1=function(tt){return M$3(F,tt)};function $$3(tt){return x$4(z$1(tt)>>>0)}function B(tt){return tt.displayName||tt.name||"Component"}function L$1(tt){return typeof tt=="string"&&!0}var G=typeof Symbol=="function"&&Symbol.for,Y=G?Symbol.for("react.memo"):60115,W$1=G?Symbol.for("react.forward_ref"):60112,q={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H$2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J=((V={})[W$1]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V[Y]=U,V);function X$1(tt){return("type"in(nt=tt)&&nt.type.$$typeof)===Y?U:"$$typeof"in tt?J[tt.$$typeof]:q;var nt}var Z=Object.defineProperty,K=Object.getOwnPropertyNames,Q=Object.getOwnPropertySymbols,ee=Object.getOwnPropertyDescriptor,te=Object.getPrototypeOf,ne=Object.prototype;function oe(tt,nt,ot){if(typeof nt!="string"){if(ne){var ft=te(nt);ft&&ft!==ne&&oe(tt,ft,ot)}var gt=K(nt);Q&&(gt=gt.concat(Q(nt)));for(var mt=X$1(tt),yt=X$1(nt),_t=0;_t<gt.length;++_t){var Tt=gt[_t];if(!(Tt in H$2||ot&&ot[Tt]||yt&&Tt in yt||mt&&Tt in mt)){var St=ee(nt,Tt);try{Z(tt,Tt,St)}catch{}}}}return tt}function re(tt){return typeof tt=="function"}function se(tt){return typeof tt=="object"&&"styledComponentId"in tt}function ie(tt,nt){return tt&&nt?"".concat(tt," ").concat(nt):tt||nt||""}function ae(tt,nt){if(tt.length===0)return"";for(var ot=tt[0],ft=1;ft<tt.length;ft++)ot+=tt[ft];return ot}function ce(tt){return tt!==null&&typeof tt=="object"&&tt.constructor.name===Object.name&&!("props"in tt&&tt.$$typeof)}function le(tt,nt,ot){if(ot===void 0&&(ot=!1),!ot&&!ce(tt)&&!Array.isArray(tt))return nt;if(Array.isArray(nt))for(var ft=0;ft<nt.length;ft++)tt[ft]=le(tt[ft],nt[ft]);else if(ce(nt))for(var ft in nt)tt[ft]=le(tt[ft],nt[ft]);return tt}function ue(tt,nt){Object.defineProperty(tt,"toString",{value:nt})}function he(tt){for(var nt=[],ot=1;ot<arguments.length;ot++)nt[ot-1]=arguments[ot];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(tt," for more information.").concat(nt.length>0?" Args: ".concat(nt.join(", ")):""))}var fe=(function(){function tt(nt){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=nt}return tt.prototype.indexOfGroup=function(nt){for(var ot=0,ft=0;ft<nt;ft++)ot+=this.groupSizes[ft];return ot},tt.prototype.insertRules=function(nt,ot){if(nt>=this.groupSizes.length){for(var ft=this.groupSizes,gt=ft.length,mt=gt;nt>=mt;)if((mt<<=1)<0)throw he(16,"".concat(nt));this.groupSizes=new Uint32Array(mt),this.groupSizes.set(ft),this.length=mt;for(var yt=gt;yt<mt;yt++)this.groupSizes[yt]=0}for(var _t=this.indexOfGroup(nt+1),Tt=(yt=0,ot.length);yt<Tt;yt++)this.tag.insertRule(_t,ot[yt])&&(this.groupSizes[nt]++,_t++)},tt.prototype.clearGroup=function(nt){if(nt<this.length){var ot=this.groupSizes[nt],ft=this.indexOfGroup(nt),gt=ft+ot;this.groupSizes[nt]=0;for(var mt=ft;mt<gt;mt++)this.tag.deleteRule(ft)}},tt.prototype.getGroup=function(nt){var ot="";if(nt>=this.length||this.groupSizes[nt]===0)return ot;for(var ft=this.groupSizes[nt],gt=this.indexOfGroup(nt),mt=gt+ft,yt=gt;yt<mt;yt++)ot+="".concat(this.tag.getRule(yt)).concat(g$1);return ot},tt})(),ye=new Map,ve=new Map,ge=1,Se=function(tt){if(ye.has(tt))return ye.get(tt);for(;ve.has(ge);)ge++;var nt=ge++;return ye.set(tt,nt),ve.set(nt,tt),nt},we=function(tt,nt){ge=nt+1,ye.set(tt,nt),ve.set(nt,tt)},be="style[".concat(f$1,"][").concat(y$2,'="').concat(v$3,'"]'),Ee=new RegExp("^".concat(f$1,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ne=function(tt,nt,ot){for(var ft,gt=ot.split(","),mt=0,yt=gt.length;mt<yt;mt++)(ft=gt[mt])&&tt.registerName(nt,ft)},Pe=function(tt,nt){for(var ot,ft=((ot=nt.textContent)!==null&&ot!==void 0?ot:"").split(g$1),gt=[],mt=0,yt=ft.length;mt<yt;mt++){var _t=ft[mt].trim();if(_t){var Tt=_t.match(Ee);if(Tt){var St=0|parseInt(Tt[1],10),At=Tt[2];St!==0&&(we(At,St),Ne(tt,At,Tt[3]),tt.getTag().insertRules(St,gt)),gt.length=0}else gt.push(_t)}}},_e=function(tt){for(var nt=document.querySelectorAll(be),ot=0,ft=nt.length;ot<ft;ot++){var gt=nt[ot];gt&&gt.getAttribute(f$1)!==m$3&&(Pe(tt,gt),gt.parentNode&&gt.parentNode.removeChild(gt))}};function Ce(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ie=function(tt){var nt=document.head,ot=tt||nt,ft=document.createElement("style"),gt=(function(_t){var Tt=Array.from(_t.querySelectorAll("style[".concat(f$1,"]")));return Tt[Tt.length-1]})(ot),mt=gt!==void 0?gt.nextSibling:null;ft.setAttribute(f$1,m$3),ft.setAttribute(y$2,v$3);var yt=Ce();return yt&&ft.setAttribute("nonce",yt),ot.insertBefore(ft,mt),ft},Ae=(function(){function tt(nt){this.element=Ie(nt),this.element.appendChild(document.createTextNode("")),this.sheet=(function(ot){if(ot.sheet)return ot.sheet;for(var ft=document.styleSheets,gt=0,mt=ft.length;gt<mt;gt++){var yt=ft[gt];if(yt.ownerNode===ot)return yt}throw he(17)})(this.element),this.length=0}return tt.prototype.insertRule=function(nt,ot){try{return this.sheet.insertRule(ot,nt),this.length++,!0}catch{return!1}},tt.prototype.deleteRule=function(nt){this.sheet.deleteRule(nt),this.length--},tt.prototype.getRule=function(nt){var ot=this.sheet.cssRules[nt];return ot&&ot.cssText?ot.cssText:""},tt})(),Oe=(function(){function tt(nt){this.element=Ie(nt),this.nodes=this.element.childNodes,this.length=0}return tt.prototype.insertRule=function(nt,ot){if(nt<=this.length&&nt>=0){var ft=document.createTextNode(ot);return this.element.insertBefore(ft,this.nodes[nt]||null),this.length++,!0}return!1},tt.prototype.deleteRule=function(nt){this.element.removeChild(this.nodes[nt]),this.length--},tt.prototype.getRule=function(nt){return nt<this.length?this.nodes[nt].textContent:""},tt})(),De=(function(){function tt(nt){this.rules=[],this.length=0}return tt.prototype.insertRule=function(nt,ot){return nt<=this.length&&(this.rules.splice(nt,0,ot),this.length++,!0)},tt.prototype.deleteRule=function(nt){this.rules.splice(nt,1),this.length--},tt.prototype.getRule=function(nt){return nt<this.length?this.rules[nt]:""},tt})(),Re=S$2,Te={isServer:!S$2,useCSSOMInjection:!w$3},ke=(function(){function tt(nt,ot,ft){nt===void 0&&(nt=C),ot===void 0&&(ot={});var gt=this;this.options=__assign(__assign({},Te),nt),this.gs=ot,this.names=new Map(ft),this.server=!!nt.isServer,!this.server&&S$2&&Re&&(Re=!1,_e(this)),ue(this,function(){return(function(mt){for(var yt=mt.getTag(),_t=yt.length,Tt="",St=function(Ct){var Ot=(function(Jt){return ve.get(Jt)})(Ct);if(Ot===void 0)return"continue";var Dt=mt.names.get(Ot),Ut=yt.getGroup(Ct);if(Dt===void 0||!Dt.size||Ut.length===0)return"continue";var Xt="".concat(f$1,".g").concat(Ct,'[id="').concat(Ot,'"]'),Pt="";Dt!==void 0&&Dt.forEach(function(Jt){Jt.length>0&&(Pt+="".concat(Jt,","))}),Tt+="".concat(Ut).concat(Xt,'{content:"').concat(Pt,'"}').concat(g$1)},At=0;At<_t;At++)St(At);return Tt})(gt)})}return tt.registerId=function(nt){return Se(nt)},tt.prototype.rehydrate=function(){!this.server&&S$2&&_e(this)},tt.prototype.reconstructWithOptions=function(nt,ot){return ot===void 0&&(ot=!0),new tt(__assign(__assign({},this.options),nt),this.gs,ot&&this.names||void 0)},tt.prototype.allocateGSInstance=function(nt){return this.gs[nt]=(this.gs[nt]||0)+1},tt.prototype.getTag=function(){return this.tag||(this.tag=(nt=(function(ot){var ft=ot.useCSSOMInjection,gt=ot.target;return ot.isServer?new De(gt):ft?new Ae(gt):new Oe(gt)})(this.options),new fe(nt)));var nt},tt.prototype.hasNameForId=function(nt,ot){return this.names.has(nt)&&this.names.get(nt).has(ot)},tt.prototype.registerName=function(nt,ot){if(Se(nt),this.names.has(nt))this.names.get(nt).add(ot);else{var ft=new Set;ft.add(ot),this.names.set(nt,ft)}},tt.prototype.insertRules=function(nt,ot,ft){this.registerName(nt,ot),this.getTag().insertRules(Se(nt),ft)},tt.prototype.clearNames=function(nt){this.names.has(nt)&&this.names.get(nt).clear()},tt.prototype.clearRules=function(nt){this.getTag().clearGroup(Se(nt)),this.clearNames(nt)},tt.prototype.clearTag=function(){this.tag=void 0},tt})(),je=/&/g,xe=/^\s*\/\/.*$/gm;function Ve(tt,nt){return tt.map(function(ot){return ot.type==="rule"&&(ot.value="".concat(nt," ").concat(ot.value),ot.value=ot.value.replaceAll(",",",".concat(nt," ")),ot.props=ot.props.map(function(ft){return"".concat(nt," ").concat(ft)})),Array.isArray(ot.children)&&ot.type!=="@keyframes"&&(ot.children=Ve(ot.children,nt)),ot})}function Fe(tt){var nt,ot,ft,gt=C,mt=gt.options,yt=mt===void 0?C:mt,_t=gt.plugins,Tt=_t===void 0?_$1:_t,St=function(Ot,Dt,Ut){return Ut.startsWith(ot)&&Ut.endsWith(ot)&&Ut.replaceAll(ot,"").length>0?".".concat(nt):Ot},At=Tt.slice();At.push(function(Ot){Ot.type===RULESET&&Ot.value.includes("&")&&(Ot.props[0]=Ot.props[0].replace(je,ot).replace(ft,St))}),yt.prefix&&At.push(prefixer),At.push(stringify);var Ct=function(Ot,Dt,Ut,Xt){Dt===void 0&&(Dt=""),Ut===void 0&&(Ut=""),Xt===void 0&&(Xt="&"),nt=Xt,ot=Dt,ft=new RegExp("\\".concat(ot,"\\b"),"g");var Pt=Ot.replace(xe,""),Jt=compile(Ut||Dt?"".concat(Ut," ").concat(Dt," { ").concat(Pt," }"):Pt);yt.namespace&&(Jt=Ve(Jt,yt.namespace));var Kt=[];return serialize(Jt,middleware(At.concat(rulesheet(function(Nt){return Kt.push(Nt)})))),Kt};return Ct.hash=Tt.length?Tt.reduce(function(Ot,Dt){return Dt.name||he(15),M$3(Ot,Dt.name)},F).toString():"",Ct}var Me=new ke,ze=Fe(),$e=u$3.createContext({shouldForwardProp:void 0,styleSheet:Me,stylis:ze});$e.Consumer;u$3.createContext(void 0);function Ge(){return reactExports.useContext($e)}var We=(function(){function tt(nt,ot){var ft=this;this.inject=function(gt,mt){mt===void 0&&(mt=ze);var yt=ft.name+mt.hash;gt.hasNameForId(ft.id,yt)||gt.insertRules(ft.id,yt,mt(ft.rules,yt,"@keyframes"))},this.name=nt,this.id="sc-keyframes-".concat(nt),this.rules=ot,ue(this,function(){throw he(12,String(ft.name))})}return tt.prototype.getName=function(nt){return nt===void 0&&(nt=ze),this.name+nt.hash},tt})(),qe=function(tt){return tt>="A"&&tt<="Z"};function He(tt){for(var nt="",ot=0;ot<tt.length;ot++){var ft=tt[ot];if(ot===1&&ft==="-"&&tt[0]==="-")return tt;qe(ft)?nt+="-"+ft.toLowerCase():nt+=ft}return nt.startsWith("ms-")?"-"+nt:nt}var Ue=function(tt){return tt==null||tt===!1||tt===""},Je=function(tt){var nt,ot,ft=[];for(var gt in tt){var mt=tt[gt];tt.hasOwnProperty(gt)&&!Ue(mt)&&(Array.isArray(mt)&&mt.isCss||re(mt)?ft.push("".concat(He(gt),":"),mt,";"):ce(mt)?ft.push.apply(ft,__spreadArray(__spreadArray(["".concat(gt," {")],Je(mt),!1),["}"],!1)):ft.push("".concat(He(gt),": ").concat((nt=gt,(ot=mt)==null||typeof ot=="boolean"||ot===""?"":typeof ot!="number"||ot===0||nt in unitlessKeys||nt.startsWith("--")?String(ot).trim():"".concat(ot,"px")),";")))}return ft};function Xe(tt,nt,ot,ft){if(Ue(tt))return[];if(se(tt))return[".".concat(tt.styledComponentId)];if(re(tt)){if(!re(mt=tt)||mt.prototype&&mt.prototype.isReactComponent||!nt)return[tt];var gt=tt(nt);return Xe(gt,nt,ot,ft)}var mt;return tt instanceof We?ot?(tt.inject(ot,ft),[tt.getName(ft)]):[tt]:ce(tt)?Je(tt):Array.isArray(tt)?Array.prototype.concat.apply(_$1,tt.map(function(yt){return Xe(yt,nt,ot,ft)})):[tt.toString()]}function Ze(tt){for(var nt=0;nt<tt.length;nt+=1){var ot=tt[nt];if(re(ot)&&!se(ot))return!1}return!0}var Ke=z$1(v$3),Qe=(function(){function tt(nt,ot,ft){this.rules=nt,this.staticRulesId="",this.isStatic=(ft===void 0||ft.isStatic)&&Ze(nt),this.componentId=ot,this.baseHash=M$3(Ke,ot),this.baseStyle=ft,ke.registerId(ot)}return tt.prototype.generateAndInjectStyles=function(nt,ot,ft){var gt=this.baseStyle?this.baseStyle.generateAndInjectStyles(nt,ot,ft):"";if(this.isStatic&&!ft.hash)if(this.staticRulesId&&ot.hasNameForId(this.componentId,this.staticRulesId))gt=ie(gt,this.staticRulesId);else{var mt=ae(Xe(this.rules,nt,ot,ft)),yt=x$4(M$3(this.baseHash,mt)>>>0);if(!ot.hasNameForId(this.componentId,yt)){var _t=ft(mt,".".concat(yt),void 0,this.componentId);ot.insertRules(this.componentId,yt,_t)}gt=ie(gt,yt),this.staticRulesId=yt}else{for(var Tt=M$3(this.baseHash,ft.hash),St="",At=0;At<this.rules.length;At++){var Ct=this.rules[At];if(typeof Ct=="string")St+=Ct;else if(Ct){var Ot=ae(Xe(Ct,nt,ot,ft));Tt=M$3(Tt,Ot+At),St+=Ot}}if(St){var Dt=x$4(Tt>>>0);ot.hasNameForId(this.componentId,Dt)||ot.insertRules(this.componentId,Dt,ft(St,".".concat(Dt),void 0,this.componentId)),gt=ie(gt,Dt)}}return gt},tt})(),et=u$3.createContext(void 0);et.Consumer;var rt={};function it(tt,nt,ot){var ft=se(tt),gt=tt,mt=!L$1(tt),yt=nt.attrs,_t=yt===void 0?_$1:yt,Tt=nt.componentId,St=Tt===void 0?(function(jt,kt){var Zt=typeof jt!="string"?"sc":R(jt);rt[Zt]=(rt[Zt]||0)+1;var Ft="".concat(Zt,"-").concat($$3(v$3+Zt+rt[Zt]));return kt?"".concat(kt,"-").concat(Ft):Ft})(nt.displayName,nt.parentComponentId):Tt,At=nt.displayName,Ct=At===void 0?(function(jt){return L$1(jt)?"styled.".concat(jt):"Styled(".concat(B(jt),")")})(tt):At,Ot=nt.displayName&&nt.componentId?"".concat(R(nt.displayName),"-").concat(nt.componentId):nt.componentId||St,Dt=ft&&gt.attrs?gt.attrs.concat(_t).filter(Boolean):_t,Ut=nt.shouldForwardProp;if(ft&&gt.shouldForwardProp){var Xt=gt.shouldForwardProp;if(nt.shouldForwardProp){var Pt=nt.shouldForwardProp;Ut=function(jt,kt){return Xt(jt,kt)&&Pt(jt,kt)}}else Ut=Xt}var Jt=new Qe(ot,Ot,ft?gt.componentStyle:void 0);function Kt(jt,kt){return(function(Zt,Ft,It){var Wt=Zt.attrs,Qt=Zt.componentStyle,me=Zt.defaultProps,rn=Zt.foldedComponentIds,Dn=Zt.styledComponentId,Mn=Zt.target,$n=u$3.useContext(et),on=Ge(),yn=Zt.shouldForwardProp||on.shouldForwardProp,bn=I$2(Ft,$n,me)||C,On=(function(Be,xn,qn){for(var Bn,Yn=__assign(__assign({},xn),{className:void 0,theme:qn}),Kn=0;Kn<Be.length;Kn+=1){var Qn=re(Bn=Be[Kn])?Bn(Yn):Bn;for(var Jn in Qn)Yn[Jn]=Jn==="className"?ie(Yn[Jn],Qn[Jn]):Jn==="style"?__assign(__assign({},Yn[Jn]),Qn[Jn]):Qn[Jn]}return xn.className&&(Yn.className=ie(Yn.className,xn.className)),Yn})(Wt,Ft,bn),Ht=On.as||Mn,sn={};for(var nn in On)On[nn]===void 0||nn[0]==="$"||nn==="as"||nn==="theme"&&On.theme===bn||(nn==="forwardedAs"?sn.as=On.forwardedAs:yn&&!yn(nn,Ht)||(sn[nn]=On[nn]));var pn=(function(Be,xn){var qn=Ge(),Bn=Be.generateAndInjectStyles(xn,qn.styleSheet,qn.stylis);return Bn})(Qt,On),gn=ie(rn,Dn);return pn&&(gn+=" "+pn),On.className&&(gn+=" "+On.className),sn[L$1(Ht)&&!A$1.has(Ht)?"class":"className"]=gn,It&&(sn.ref=It),reactExports.createElement(Ht,sn)})(Nt,jt,kt)}Kt.displayName=Ct;var Nt=u$3.forwardRef(Kt);return Nt.attrs=Dt,Nt.componentStyle=Jt,Nt.displayName=Ct,Nt.shouldForwardProp=Ut,Nt.foldedComponentIds=ft?ie(gt.foldedComponentIds,gt.styledComponentId):"",Nt.styledComponentId=Ot,Nt.target=ft?gt.target:tt,Object.defineProperty(Nt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(jt){this._foldedDefaultProps=ft?(function(kt){for(var Zt=[],Ft=1;Ft<arguments.length;Ft++)Zt[Ft-1]=arguments[Ft];for(var It=0,Wt=Zt;It<Wt.length;It++)le(kt,Wt[It],!0);return kt})({},gt.defaultProps,jt):jt}}),ue(Nt,function(){return".".concat(Nt.styledComponentId)}),mt&&oe(Nt,tt,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Nt}function at(tt,nt){for(var ot=[tt[0]],ft=0,gt=nt.length;ft<gt;ft+=1)ot.push(nt[ft],tt[ft+1]);return ot}var ct=function(tt){return Object.assign(tt,{isCss:!0})};function lt(tt){for(var nt=[],ot=1;ot<arguments.length;ot++)nt[ot-1]=arguments[ot];if(re(tt)||ce(tt))return ct(Xe(at(_$1,__spreadArray([tt],nt,!0))));var ft=tt;return nt.length===0&&ft.length===1&&typeof ft[0]=="string"?Xe(ft):ct(Xe(at(ft,nt)))}function ut(tt,nt,ot){if(ot===void 0&&(ot=C),!nt)throw he(1,nt);var ft=function(gt){for(var mt=[],yt=1;yt<arguments.length;yt++)mt[yt-1]=arguments[yt];return tt(nt,ot,lt.apply(void 0,__spreadArray([gt],mt,!1)))};return ft.attrs=function(gt){return ut(tt,nt,__assign(__assign({},ot),{attrs:Array.prototype.concat(ot.attrs,gt).filter(Boolean)}))},ft.withConfig=function(gt){return ut(tt,nt,__assign(__assign({},ot),gt))},ft}var pt=function(tt){return ut(it,tt)},dt=pt;A$1.forEach(function(tt){dt[tt]=pt(tt)});var Step=(tt=>(tt.SELECT_TEMPLATE="SELECT_TEMPLATE",tt.UPLOAD_PROFILE_IMAGE="UPLOAD_PROFILE_IMAGE",tt.PROFILE_CROPPING="PROFILE_CROPPING",tt.MAPPING_FINAL_IMAGE="MAPPING_FINAL_IMAGE",tt))(Step||{});const template1="/rov-profile/assets/1-05E9sJiu.png",theme={colors:{primary:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",500:"#3b82f6",600:"#2563eb"},gray:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b"},error:{500:"#ef4444",600:"#dc2626"},background:"#f8fafc",surface:"#ffffff"},typography:{fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem"},lineHeight:{tight:1.25,relaxed:1.625},fontWeight:{medium:500,semibold:600,bold:700}},spacing:{1:"0.25rem",2:"0.5rem",3:"0.75rem",4:"1rem",5:"1.25rem",6:"1.5rem",8:"2rem",10:"2.5rem",12:"3rem"},borderRadius:{lg:"0.5rem",xl:"0.75rem","2xl":"1rem",full:"9999px"},boxShadow:{base:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)"},breakpoints:{sm:"480px",md:"768px"},touchTarget:{min:"44px",comfortable:"48px"},animation:{duration:{fast:"150ms",normal:"250ms"},easing:{ease:"cubic-bezier(0.4, 0, 0.2, 1)"}}},media={sm:`@media (min-width: ${theme.breakpoints.sm})`,md:`@media (min-width: ${theme.breakpoints.md})`},buttonStyles={base:`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: ${theme.borderRadius.xl};
    font-weight: ${theme.typography.fontWeight.semibold};
    transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
    cursor: pointer;
    border: none;
    text-decoration: none;
    font-family: inherit;
    min-height: ${theme.touchTarget.comfortable};
    min-width: ${theme.touchTarget.comfortable};
    
    &:focus {
      outline: 2px solid ${theme.colors.primary[500]};
      outline-offset: 2px;
    }
    
    &:disabled {
      cursor: not-allowed;
      opacity: 0.6;
    }
  `,sizes:{sm:`
      padding: ${theme.spacing[2]} ${theme.spacing[4]};
      font-size: ${theme.typography.fontSize.sm};
      min-width: 120px;
      
      ${media.sm} {
        min-width: 140px;
      }
    `,md:`
      padding: ${theme.spacing[3]} ${theme.spacing[6]};
      font-size: ${theme.typography.fontSize.base};
      min-width: 160px;
      
      ${media.sm} {
        min-width: 180px;
      }
    `,lg:`
      padding: ${theme.spacing[4]} ${theme.spacing[8]};
      font-size: ${theme.typography.fontSize.lg};
      min-width: 180px;
      
      ${media.sm} {
        min-width: 200px;
      }
    `},variants:{primary:`
      background-color: ${theme.colors.primary[500]};
      color: white;
      box-shadow: ${theme.boxShadow.md};
      
      &:hover:not(:disabled) {
        background-color: ${theme.colors.primary[600]};
        transform: translateY(-1px);
        box-shadow: ${theme.boxShadow.lg};
      }
      
      &:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: ${theme.boxShadow.base};
      }
    `,secondary:`
      background-color: ${theme.colors.gray[600]};
      color: white;
      box-shadow: ${theme.boxShadow.md};
      
      &:hover:not(:disabled) {
        background-color: ${theme.colors.gray[700]};
        transform: translateY(-1px);
        box-shadow: ${theme.boxShadow.lg};
      }
      
      &:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: ${theme.boxShadow.base};
      }
    `,outline:`
      background-color: transparent;
      color: ${theme.colors.primary[600]};
      border: 2px solid ${theme.colors.primary[200]};
      
      &:hover:not(:disabled) {
        background-color: ${theme.colors.primary[50]};
        border-color: ${theme.colors.primary[300]};
      }
    `}},LayoutTemplates=[{name:"Template 1",image:template1,mapping:{topLeft:{x:13,y:11},topRight:{x:26,y:23},bottomLeft:{x:12,y:87},bottomRight:{x:26,y:80}}},{name:"Template 2",image:template1,mapping:{topLeft:{x:13,y:11},topRight:{x:26,y:23},bottomLeft:{x:12,y:87},bottomRight:{x:26,y:80}}},{name:"Template 3",image:template1,mapping:{topLeft:{x:13,y:11},topRight:{x:26,y:23},bottomLeft:{x:12,y:87},bottomRight:{x:26,y:80}}}],Grid=dt.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: ${theme.spacing[4]};
  
  ${media.sm} {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: ${theme.spacing[5]};
  }
  
  ${media.md} {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: ${theme.spacing[6]};
  }
`,GridItem=dt.div`
  width: 100%;
  position: relative;
  cursor: pointer;
  transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  aspect-ratio: 4/3;
  border-radius: ${theme.borderRadius["2xl"]};
  overflow: hidden;
  box-shadow: 0 2px 8px -2px rgba(0, 0, 0, 0.08), 0 4px 16px -4px rgba(0, 0, 0, 0.04);
  
  /* Mobile-first: smaller transforms for touch */
  ${({$selected:tt})=>tt&&lt`
    transform: scale(1.02);
    z-index: 1;
    box-shadow: 
      0 0 0 3px ${theme.colors.primary[500]},
      0 0 0 6px ${theme.colors.primary[100]},
      0 8px 32px -4px ${theme.colors.primary[500]}25,
      0 16px 48px -8px ${theme.colors.primary[500]}15,
      0 4px 20px -2px rgba(0, 0, 0, 0.12);
  `}
  
  &:hover {
    transform: scale(1.01);
    box-shadow: 
      0 4px 16px -2px rgba(0, 0, 0, 0.12),
      0 8px 24px -4px rgba(0, 0, 0, 0.08),
      0 2px 8px -2px ${theme.colors.primary[300]}20;
  }
  
  &:active {
    transform: scale(0.98);
    box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.1), 0 2px 8px -2px rgba(0, 0, 0, 0.06);
  }
  
  ${media.sm} {
    ${({$selected:tt})=>tt&&lt`
      transform: scale(1.05);
      box-shadow: 
        0 0 0 4px ${theme.colors.primary[500]},
        0 0 0 8px ${theme.colors.primary[100]},
        0 12px 40px -6px ${theme.colors.primary[500]}30,
        0 20px 56px -12px ${theme.colors.primary[500]}18,
        0 6px 24px -3px rgba(0, 0, 0, 0.15);
    `}
    
    &:hover {
      transform: scale(1.02);
      box-shadow: 
        0 6px 20px -3px rgba(0, 0, 0, 0.15),
        0 10px 32px -6px rgba(0, 0, 0, 0.1),
        0 3px 12px -2px ${theme.colors.primary[300]}25;
    }
  }
  
  ${media.md} {
    aspect-ratio: 4/3;
  }
`,Image$1=dt.img`
  width: 100%;
  height: 100%;
  object-fit: contain;
  border: none;
  border-radius: ${theme.borderRadius.xl};
  transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  display: block;
`,CheckMark=dt.div`
  position: absolute;
  top: ${theme.spacing[2]};
  right: ${theme.spacing[2]};
  width: 36px;
  height: 36px;
  background-color: ${theme.colors.primary[500]};
  border-radius: ${theme.borderRadius.full};
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: ${theme.typography.fontWeight.bold};
  font-size: ${theme.typography.fontSize.lg};
  box-shadow: ${theme.boxShadow.lg};
  z-index: 2;
  border: 2px solid white;
  
  ${media.sm} {
    width: 32px;
    height: 32px;
    font-size: ${theme.typography.fontSize.base};
  }
`,Wrapper$3=dt.div`
  width: 100vw;
  min-height: 100vh;
  padding: ${theme.spacing[4]};
  background-color: ${theme.colors.background};
  box-sizing: border-box;
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[8]};
  }
`,Container$3=dt.div`
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
`,Header$3=dt.div`
  text-align: center;
  margin-bottom: ${theme.spacing[6]};
  
  ${media.sm} {
    margin-bottom: ${theme.spacing[8]};
  }
  
  ${media.md} {
    margin-bottom: ${theme.spacing[12]};
  }
`,Title$3=dt.h1`
  font-size: ${theme.typography.fontSize["3xl"]};
  font-weight: ${theme.typography.fontWeight.bold};
  color: ${theme.colors.gray[800]};
  margin-bottom: ${theme.spacing[2]};
  line-height: ${theme.typography.lineHeight.tight};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["4xl"]};
  }
  
  ${media.md} {
    font-size: ${theme.typography.fontSize["5xl"]};
  }
`,Subtitle$3=dt.p`
  font-size: ${theme.typography.fontSize.base};
  color: ${theme.colors.gray[500]};
  margin: 0;
  line-height: ${theme.typography.lineHeight.relaxed};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.lg};
  }
`,TemplateSelection=({selectedTemplate:tt,setSelectedTemplate:nt,onNext:ot})=>{const ft=gt=>{nt(gt),setTimeout(()=>{ot()},300)};return jsxRuntimeExports.jsx(Wrapper$3,{children:jsxRuntimeExports.jsxs(Container$3,{children:[jsxRuntimeExports.jsxs(Header$3,{children:[jsxRuntimeExports.jsx(Title$3,{children:"Choose Your Template"}),jsxRuntimeExports.jsx(Subtitle$3,{children:"Select a template design for your profile mockup"})]}),jsxRuntimeExports.jsx(Grid,{children:LayoutTemplates.map(gt=>{const mt=tt?.name===gt.name;return jsxRuntimeExports.jsxs(GridItem,{onClick:()=>ft(gt),$selected:mt,children:[jsxRuntimeExports.jsx(Image$1,{src:gt.image,alt:gt.name,$selected:mt}),mt&&jsxRuntimeExports.jsx(CheckMark,{children:"✓"})]},gt.name)})})]})})},StyledButton=dt.button`
  ${buttonStyles.base}
  ${({$size:tt})=>buttonStyles.sizes[tt]}
  ${({$variant:tt})=>buttonStyles.variants[tt]}
  
  ${({$fullWidth:tt})=>tt&&lt`
    width: 100%;
    
    @media (min-width: ${theme.breakpoints.sm}) {
      width: auto;
    }
  `}
`,Button=({variant:tt="primary",size:nt="md",disabled:ot=!1,fullWidth:ft=!1,children:gt,onClick:mt,type:yt="button",..._t})=>jsxRuntimeExports.jsx(StyledButton,{$variant:tt,$size:nt,$fullWidth:ft,disabled:ot,onClick:mt,type:yt,..._t,children:gt}),Wrapper$2=dt.div`
  width: 100vw;
  min-height: 100vh;
  padding: ${theme.spacing[4]};
  background-color: ${theme.colors.background};
  box-sizing: border-box;
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[8]};
  }
`,Container$2=dt.div`
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
`,Header$2=dt.div`
  text-align: center;
  margin-bottom: ${theme.spacing[6]};
  
  ${media.sm} {
    margin-bottom: ${theme.spacing[8]};
  }
  
  ${media.md} {
    margin-bottom: ${theme.spacing[12]};
  }
`,Title$2=dt.h1`
  font-size: ${theme.typography.fontSize["3xl"]};
  font-weight: ${theme.typography.fontWeight.bold};
  color: ${theme.colors.gray[800]};
  margin-bottom: ${theme.spacing[2]};
  line-height: ${theme.typography.lineHeight.tight};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["4xl"]};
  }
  
  ${media.md} {
    font-size: ${theme.typography.fontSize["5xl"]};
  }
`,Subtitle$2=dt.p`
  font-size: ${theme.typography.fontSize.base};
  color: ${theme.colors.gray[500]};
  margin: 0;
  line-height: ${theme.typography.lineHeight.relaxed};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.lg};
  }
`,UploadArea=dt.div`
  border: 3px dashed ${({$isDragOver:tt,$hasImage:nt})=>nt?theme.colors.primary[500]:tt?theme.colors.primary[600]:theme.colors.gray[300]};
  border-radius: ${theme.borderRadius["2xl"]};
  padding: ${theme.spacing[8]} ${theme.spacing[4]};
  text-align: center;
  background-color: ${({$isDragOver:tt,$hasImage:nt})=>nt||tt?theme.colors.primary[50]:theme.colors.surface};
  cursor: pointer;
  transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  margin-bottom: ${theme.spacing[8]};
  min-height: ${theme.touchTarget.comfortable};
  
  &:hover {
    border-color: ${theme.colors.primary[500]};
    background-color: ${theme.colors.gray[50]};
  }
  
  &:active {
    transform: scale(0.99);
  }
  
  ${media.sm} {
    padding: ${theme.spacing[12]} ${theme.spacing[8]};
  }
`,UploadIcon=dt.div`
  font-size: ${theme.typography.fontSize["5xl"]};
  color: ${theme.colors.gray[400]};
  margin-bottom: ${theme.spacing[4]};
  
  ${media.sm} {
    font-size: 5rem;
  }
`,UploadText=dt.p`
  font-size: ${theme.typography.fontSize.base};
  color: ${theme.colors.gray[600]};
  margin-bottom: ${theme.spacing[2]};
  font-weight: ${theme.typography.fontWeight.semibold};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.xl};
  }
`,UploadSubtext=dt.p`
  font-size: ${theme.typography.fontSize.sm};
  color: ${theme.colors.gray[500]};
  margin: 0;
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.base};
  }
`,HiddenInput=dt.input`
  display: none;
`,PreviewContainer=dt.div`
  display: flex;
  justify-content: center;
  margin-bottom: ${theme.spacing[8]};
`,PreviewImageContainer=dt.div`
  background: ${theme.colors.surface};
  border-radius: ${theme.borderRadius["2xl"]};
  padding: ${theme.spacing[6]};
  box-shadow: ${theme.boxShadow.xl};
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 600px;
  
  ${media.sm} {
    padding: ${theme.spacing[8]};
    max-width: 700px;
  }
  
  ${media.md} {
    max-width: 800px;
  }
`,PreviewImage=dt.img`
  width: 100%;
  max-width: 500px;
  max-height: 400px;
  border-radius: ${theme.borderRadius.xl};
  box-shadow: ${theme.boxShadow.lg};
  object-fit: contain;
  margin-bottom: ${theme.spacing[6]};
  
  ${media.sm} {
    max-height: 500px;
    max-width: 600px;
  }
  
  ${media.md} {
    max-height: 600px;
    max-width: 700px;
  }
`,ImageTitle=dt.h3`
  color: ${theme.colors.gray[800]};
  font-size: ${theme.typography.fontSize.xl};
  font-weight: ${theme.typography.fontWeight.semibold};
  margin: 0 0 ${theme.spacing[2]} 0;
  text-align: center;
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["2xl"]};
  }
`,ImageSubtext=dt.p`
  color: ${theme.colors.gray[500]};
  font-size: ${theme.typography.fontSize.base};
  margin: 0 0 ${theme.spacing[4]} 0;
  text-align: center;
`,RemoveButton=dt.button`
  margin-top: ${theme.spacing[4]};
  padding: ${theme.spacing[2]} ${theme.spacing[4]};
  background-color: ${theme.colors.error[500]};
  color: white;
  border: none;
  border-radius: ${theme.borderRadius.lg};
  font-size: ${theme.typography.fontSize.sm};
  font-weight: ${theme.typography.fontWeight.medium};
  cursor: pointer;
  transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  min-height: ${theme.touchTarget.min};
  
  &:hover {
    background-color: ${theme.colors.error[600]};
    transform: translateY(-1px);
  }
  
  &:active {
    transform: translateY(0);
  }
`,Footer$2=dt.div`
  display: flex;
  justify-content: center;
  gap: ${theme.spacing[4]};
  margin-top: ${theme.spacing[8]};
  
  ${media.sm} {
    margin-top: ${theme.spacing[10]};
    flex-direction: row;
    gap: ${theme.spacing[4]};
  }
  
  ${media.md} {
    margin-top: ${theme.spacing[12]};
  }
  
  /* Mobile: stack buttons vertically */
  flex-direction: column;
  align-items: center;
  gap: ${theme.spacing[3]};
`,UploadProfileImage=({profileImageUrl:tt,setProfileImageUrl:nt,onNext:ot,onBack:ft})=>{const[gt,mt]=reactExports.useState(!1),yt=reactExports.useCallback(Dt=>{if(Dt&&Dt.type.startsWith("image/")){const Ut=new FileReader;Ut.onload=Xt=>{const Pt=Xt.target?.result;Pt&&nt({dataUrl:Pt,path:Dt.name})},Ut.readAsDataURL(Dt)}},[nt]),_t=Dt=>{const Ut=Dt.target.files?.[0];Ut&&yt(Ut)},Tt=Dt=>{Dt.preventDefault(),mt(!1);const Ut=Dt.dataTransfer.files[0];Ut&&yt(Ut)},St=Dt=>{Dt.preventDefault(),mt(!0)},At=()=>{mt(!1)},Ct=()=>{nt(null),document.getElementById("file-input")?.click()},Ot=tt!==null;return jsxRuntimeExports.jsx(Wrapper$2,{children:jsxRuntimeExports.jsxs(Container$2,{children:[jsxRuntimeExports.jsxs(Header$2,{children:[jsxRuntimeExports.jsx(Title$2,{children:"Upload Your Profile Image"}),jsxRuntimeExports.jsx(Subtitle$2,{children:"Choose a high-quality image that represents you best"})]}),Ot?jsxRuntimeExports.jsx(PreviewContainer,{children:jsxRuntimeExports.jsxs(PreviewImageContainer,{children:[jsxRuntimeExports.jsx(ImageTitle,{children:"Your Profile Image"}),jsxRuntimeExports.jsx(ImageSubtext,{children:"Looking great! Ready to crop and position your image."}),tt&&jsxRuntimeExports.jsx(PreviewImage,{src:tt.dataUrl,alt:"Profile preview"}),jsxRuntimeExports.jsx(RemoveButton,{onClick:Ct,children:"🗑️ Choose Different Image"})]})}):jsxRuntimeExports.jsxs(UploadArea,{$isDragOver:gt,$hasImage:Ot,onClick:()=>document.getElementById("file-input")?.click(),onDrop:Tt,onDragOver:St,onDragLeave:At,children:[jsxRuntimeExports.jsx(UploadIcon,{children:"📷"}),jsxRuntimeExports.jsx(UploadText,{children:gt?"Drop your image here!":"Click to upload or drag and drop"}),jsxRuntimeExports.jsx(UploadSubtext,{children:"PNG, JPG, JPEG up to 10MB"})]}),jsxRuntimeExports.jsx(HiddenInput,{id:"file-input",type:"file",accept:"image/*",onChange:_t}),jsxRuntimeExports.jsxs(Footer$2,{children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"lg",fullWidth:!0,onClick:ft,children:"← Back to Templates"}),jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",fullWidth:!0,disabled:!Ot,onClick:Ot?ot:void 0,children:Ot?"Continue to Cropping":"Upload an Image"})]})]})})};var _=Object.defineProperty,$$2=(tt,nt,ot)=>nt in tt?_(tt,nt,{enumerable:!0,configurable:!0,writable:!0,value:ot}):tt[nt]=ot,m$2=(tt,nt,ot)=>$$2(tt,typeof nt!="symbol"?nt+"":nt,ot);const E={x:0,y:0,width:0,height:0,unit:"px"},b$3=(tt,nt,ot)=>Math.min(Math.max(tt,nt),ot),H$1=(...tt)=>tt.filter(nt=>nt&&typeof nt=="string").join(" "),X=(tt,nt)=>tt===nt||tt.width===nt.width&&tt.height===nt.height&&tt.x===nt.x&&tt.y===nt.y&&tt.unit===nt.unit;function v$2(tt,nt,ot){return tt.unit==="%"?{...E,...tt,unit:"%"}:{unit:"%",x:tt.x?tt.x/nt*100:0,y:tt.y?tt.y/ot*100:0,width:tt.width?tt.width/nt*100:0,height:tt.height?tt.height/ot*100:0}}function D(tt,nt,ot){return tt.unit?tt.unit==="px"?{...E,...tt,unit:"px"}:{unit:"px",x:tt.x?tt.x*nt/100:0,y:tt.y?tt.y*ot/100:0,width:tt.width?tt.width*nt/100:0,height:tt.height?tt.height*ot/100:0}:{...E,...tt,unit:"px"}}function k$1(tt,nt,ot,ft,gt,mt=0,yt=0,_t=ft,Tt=gt){const St={...tt};let At=Math.min(mt,ft),Ct=Math.min(yt,gt),Ot=Math.min(_t,ft),Dt=Math.min(Tt,gt);nt&&(nt>1?(At=yt?yt*nt:At,Ct=At/nt,Ot=_t*nt):(Ct=mt?mt/nt:Ct,At=Ct*nt,Dt=Tt/nt)),St.y<0&&(St.height=Math.max(St.height+St.y,Ct),St.y=0),St.x<0&&(St.width=Math.max(St.width+St.x,At),St.x=0);const Ut=ft-(St.x+St.width);Ut<0&&(St.x=Math.min(St.x,ft-At),St.width+=Ut);const Xt=gt-(St.y+St.height);if(Xt<0&&(St.y=Math.min(St.y,gt-Ct),St.height+=Xt),St.width<At&&((ot==="sw"||ot=="nw")&&(St.x-=At-St.width),St.width=At),St.height<Ct&&((ot==="nw"||ot=="ne")&&(St.y-=Ct-St.height),St.height=Ct),St.width>Ot&&((ot==="sw"||ot=="nw")&&(St.x-=Ot-St.width),St.width=Ot),St.height>Dt&&((ot==="nw"||ot=="ne")&&(St.y-=Dt-St.height),St.height=Dt),nt){const Pt=St.width/St.height;if(Pt<nt){const Jt=Math.max(St.width/nt,Ct);(ot==="nw"||ot=="ne")&&(St.y-=Jt-St.height),St.height=Jt}else if(Pt>nt){const Jt=Math.max(St.height*nt,At);(ot==="sw"||ot=="nw")&&(St.x-=Jt-St.width),St.width=Jt}}return St}function I$1(tt,nt,ot,ft){const gt={...tt};return nt==="ArrowLeft"?ft==="nw"?(gt.x-=ot,gt.y-=ot,gt.width+=ot,gt.height+=ot):ft==="w"?(gt.x-=ot,gt.width+=ot):ft==="sw"?(gt.x-=ot,gt.width+=ot,gt.height+=ot):ft==="ne"?(gt.y+=ot,gt.width-=ot,gt.height-=ot):ft==="e"?gt.width-=ot:ft==="se"&&(gt.width-=ot,gt.height-=ot):nt==="ArrowRight"&&(ft==="nw"?(gt.x+=ot,gt.y+=ot,gt.width-=ot,gt.height-=ot):ft==="w"?(gt.x+=ot,gt.width-=ot):ft==="sw"?(gt.x+=ot,gt.width-=ot,gt.height-=ot):ft==="ne"?(gt.y-=ot,gt.width+=ot,gt.height+=ot):ft==="e"?gt.width+=ot:ft==="se"&&(gt.width+=ot,gt.height+=ot)),nt==="ArrowUp"?ft==="nw"?(gt.x-=ot,gt.y-=ot,gt.width+=ot,gt.height+=ot):ft==="n"?(gt.y-=ot,gt.height+=ot):ft==="ne"?(gt.y-=ot,gt.width+=ot,gt.height+=ot):ft==="sw"?(gt.x+=ot,gt.width-=ot,gt.height-=ot):ft==="s"?gt.height-=ot:ft==="se"&&(gt.width-=ot,gt.height-=ot):nt==="ArrowDown"&&(ft==="nw"?(gt.x+=ot,gt.y+=ot,gt.width-=ot,gt.height-=ot):ft==="n"?(gt.y+=ot,gt.height-=ot):ft==="ne"?(gt.y+=ot,gt.width-=ot,gt.height-=ot):ft==="sw"?(gt.x-=ot,gt.width+=ot,gt.height+=ot):ft==="s"?gt.height+=ot:ft==="se"&&(gt.width+=ot,gt.height+=ot)),gt}const M$2={capture:!0,passive:!1};let N$1=0;const x$3=class Vr extends reactExports.PureComponent{constructor(){super(...arguments),m$2(this,"docMoveBound",!1),m$2(this,"mouseDownOnCrop",!1),m$2(this,"dragStarted",!1),m$2(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),m$2(this,"componentRef",reactExports.createRef()),m$2(this,"mediaRef",reactExports.createRef()),m$2(this,"resizeObserver"),m$2(this,"initChangeCalled",!1),m$2(this,"instanceId",`rc-${N$1++}`),m$2(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),m$2(this,"onCropPointerDown",nt=>{const{crop:ot,disabled:ft}=this.props,gt=this.getBox();if(!ot)return;const mt=D(ot,gt.width,gt.height);if(ft)return;nt.cancelable&&nt.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const yt=nt.target.dataset.ord,_t=!!yt;let Tt=nt.clientX,St=nt.clientY,At=mt.x,Ct=mt.y;if(yt){const Ot=nt.clientX-gt.x,Dt=nt.clientY-gt.y;let Ut=0,Xt=0;yt==="ne"||yt=="e"?(Ut=Ot-(mt.x+mt.width),Xt=Dt-mt.y,At=mt.x,Ct=mt.y+mt.height):yt==="se"||yt==="s"?(Ut=Ot-(mt.x+mt.width),Xt=Dt-(mt.y+mt.height),At=mt.x,Ct=mt.y):yt==="sw"||yt=="w"?(Ut=Ot-mt.x,Xt=Dt-(mt.y+mt.height),At=mt.x+mt.width,Ct=mt.y):(yt==="nw"||yt=="n")&&(Ut=Ot-mt.x,Xt=Dt-mt.y,At=mt.x+mt.width,Ct=mt.y+mt.height),Tt=At+gt.x+Ut,St=Ct+gt.y+Xt}this.evData={startClientX:Tt,startClientY:St,startCropX:At,startCropY:Ct,clientX:nt.clientX,clientY:nt.clientY,isResize:_t,ord:yt},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),m$2(this,"onComponentPointerDown",nt=>{const{crop:ot,disabled:ft,locked:gt,keepSelection:mt,onChange:yt}=this.props,_t=this.getBox();if(ft||gt||mt&&ot)return;nt.cancelable&&nt.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const Tt=nt.clientX-_t.x,St=nt.clientY-_t.y,At={unit:"px",x:Tt,y:St,width:0,height:0};this.evData={startClientX:nt.clientX,startClientY:nt.clientY,startCropX:Tt,startCropY:St,clientX:nt.clientX,clientY:nt.clientY,isResize:!0},this.mouseDownOnCrop=!0,yt(D(At,_t.width,_t.height),v$2(At,_t.width,_t.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),m$2(this,"onDocPointerMove",nt=>{const{crop:ot,disabled:ft,onChange:gt,onDragStart:mt}=this.props,yt=this.getBox();if(ft||!ot||!this.mouseDownOnCrop)return;nt.cancelable&&nt.preventDefault(),this.dragStarted||(this.dragStarted=!0,mt&&mt(nt));const{evData:_t}=this;_t.clientX=nt.clientX,_t.clientY=nt.clientY;let Tt;_t.isResize?Tt=this.resizeCrop():Tt=this.dragCrop(),X(ot,Tt)||gt(D(Tt,yt.width,yt.height),v$2(Tt,yt.width,yt.height))}),m$2(this,"onComponentKeyDown",nt=>{const{crop:ot,disabled:ft,onChange:gt,onComplete:mt}=this.props;if(ft)return;const yt=nt.key;let _t=!1;if(!ot)return;const Tt=this.getBox(),St=this.makePixelCrop(Tt),At=(navigator.platform.match("Mac")?nt.metaKey:nt.ctrlKey)?Vr.nudgeStepLarge:nt.shiftKey?Vr.nudgeStepMedium:Vr.nudgeStep;if(yt==="ArrowLeft"?(St.x-=At,_t=!0):yt==="ArrowRight"?(St.x+=At,_t=!0):yt==="ArrowUp"?(St.y-=At,_t=!0):yt==="ArrowDown"&&(St.y+=At,_t=!0),_t){nt.cancelable&&nt.preventDefault(),St.x=b$3(St.x,0,Tt.width-St.width),St.y=b$3(St.y,0,Tt.height-St.height);const Ct=D(St,Tt.width,Tt.height),Ot=v$2(St,Tt.width,Tt.height);gt(Ct,Ot),mt&&mt(Ct,Ot)}}),m$2(this,"onHandlerKeyDown",(nt,ot)=>{const{aspect:ft=0,crop:gt,disabled:mt,minWidth:yt=0,minHeight:_t=0,maxWidth:Tt,maxHeight:St,onChange:At,onComplete:Ct}=this.props,Ot=this.getBox();if(mt||!gt)return;if(nt.key==="ArrowUp"||nt.key==="ArrowDown"||nt.key==="ArrowLeft"||nt.key==="ArrowRight")nt.stopPropagation(),nt.preventDefault();else return;const Dt=(navigator.platform.match("Mac")?nt.metaKey:nt.ctrlKey)?Vr.nudgeStepLarge:nt.shiftKey?Vr.nudgeStepMedium:Vr.nudgeStep,Ut=D(gt,Ot.width,Ot.height),Xt=I$1(Ut,nt.key,Dt,ot),Pt=k$1(Xt,ft,ot,Ot.width,Ot.height,yt,_t,Tt,St);if(!X(gt,Pt)){const Jt=v$2(Pt,Ot.width,Ot.height);At(Pt,Jt),Ct&&Ct(Pt,Jt)}}),m$2(this,"onDocPointerDone",nt=>{const{crop:ot,disabled:ft,onComplete:gt,onDragEnd:mt}=this.props,yt=this.getBox();this.unbindDocMove(),!(ft||!ot)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,mt&&mt(nt),gt&&gt(D(ot,yt.width,yt.height),v$2(ot,yt.width,yt.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),m$2(this,"onDragFocus",()=>{var nt;(nt=this.componentRef.current)==null||nt.scrollTo(0,0)})}get document(){return document}getBox(){const nt=this.mediaRef.current;if(!nt)return{x:0,y:0,width:0,height:0};const{x:ot,y:ft,width:gt,height:mt}=nt.getBoundingClientRect();return{x:ot,y:ft,width:gt,height:mt}}componentDidUpdate(nt){const{crop:ot,onComplete:ft}=this.props;if(ft&&!nt.crop&&ot){const{width:gt,height:mt}=this.getBox();gt&&mt&&ft(D(ot,gt,mt),v$2(ot,gt,mt))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,M$2),this.document.addEventListener("pointerup",this.onDocPointerDone,M$2),this.document.addEventListener("pointercancel",this.onDocPointerDone,M$2),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,M$2),this.document.removeEventListener("pointerup",this.onDocPointerDone,M$2),this.document.removeEventListener("pointercancel",this.onDocPointerDone,M$2),this.docMoveBound=!1)}getCropStyle(){const{crop:nt}=this.props;if(nt)return{top:`${nt.y}${nt.unit}`,left:`${nt.x}${nt.unit}`,width:`${nt.width}${nt.unit}`,height:`${nt.height}${nt.unit}`}}dragCrop(){const{evData:nt}=this,ot=this.getBox(),ft=this.makePixelCrop(ot),gt=nt.clientX-nt.startClientX,mt=nt.clientY-nt.startClientY;return ft.x=b$3(nt.startCropX+gt,0,ot.width-ft.width),ft.y=b$3(nt.startCropY+mt,0,ot.height-ft.height),ft}getPointRegion(nt,ot,ft,gt){const{evData:mt}=this,yt=mt.clientX-nt.x,_t=mt.clientY-nt.y;let Tt;gt&&ot?Tt=ot==="nw"||ot==="n"||ot==="ne":Tt=_t<mt.startCropY;let St;return ft&&ot?St=ot==="nw"||ot==="w"||ot==="sw":St=yt<mt.startCropX,St?Tt?"nw":"sw":Tt?"ne":"se"}resolveMinDimensions(nt,ot,ft=0,gt=0){const mt=Math.min(ft,nt.width),yt=Math.min(gt,nt.height);return!ot||!mt&&!yt?[mt,yt]:ot>1?mt?[mt,mt/ot]:[yt*ot,yt]:yt?[yt*ot,yt]:[mt,mt/ot]}resizeCrop(){const{evData:nt}=this,{aspect:ot=0,maxWidth:ft,maxHeight:gt}=this.props,mt=this.getBox(),[yt,_t]=this.resolveMinDimensions(mt,ot,this.props.minWidth,this.props.minHeight);let Tt=this.makePixelCrop(mt);const St=this.getPointRegion(mt,nt.ord,yt,_t),At=nt.ord||St;let Ct=nt.clientX-nt.startClientX,Ot=nt.clientY-nt.startClientY;(yt&&At==="nw"||At==="w"||At==="sw")&&(Ct=Math.min(Ct,-yt)),(_t&&At==="nw"||At==="n"||At==="ne")&&(Ot=Math.min(Ot,-_t));const Dt={unit:"px",x:0,y:0,width:0,height:0};St==="ne"?(Dt.x=nt.startCropX,Dt.width=Ct,ot?(Dt.height=Dt.width/ot,Dt.y=nt.startCropY-Dt.height):(Dt.height=Math.abs(Ot),Dt.y=nt.startCropY-Dt.height)):St==="se"?(Dt.x=nt.startCropX,Dt.y=nt.startCropY,Dt.width=Ct,ot?Dt.height=Dt.width/ot:Dt.height=Ot):St==="sw"?(Dt.x=nt.startCropX+Ct,Dt.y=nt.startCropY,Dt.width=Math.abs(Ct),ot?Dt.height=Dt.width/ot:Dt.height=Ot):St==="nw"&&(Dt.x=nt.startCropX+Ct,Dt.width=Math.abs(Ct),ot?(Dt.height=Dt.width/ot,Dt.y=nt.startCropY-Dt.height):(Dt.height=Math.abs(Ot),Dt.y=nt.startCropY+Ot));const Ut=k$1(Dt,ot,St,mt.width,mt.height,yt,_t,ft,gt);return ot||Vr.xyOrds.indexOf(At)>-1?Tt=Ut:Vr.xOrds.indexOf(At)>-1?(Tt.x=Ut.x,Tt.width=Ut.width):Vr.yOrds.indexOf(At)>-1&&(Tt.y=Ut.y,Tt.height=Ut.height),Tt.x=b$3(Tt.x,0,mt.width-Tt.width),Tt.y=b$3(Tt.y,0,mt.height-Tt.height),Tt}renderCropSelection(){const{ariaLabels:nt=Vr.defaultProps.ariaLabels,disabled:ot,locked:ft,renderSelectionAddon:gt,ruleOfThirds:mt,crop:yt}=this.props,_t=this.getCropStyle();if(yt)return u$3.createElement("div",{style:_t,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":nt.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!ot&&!ft&&u$3.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},u$3.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),u$3.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),u$3.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),u$3.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":nt.nwDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"nw"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":nt.nDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"n"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":nt.neDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"ne"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":nt.eDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"e"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":nt.seDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"se"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":nt.sDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"s"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":nt.swDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"sw"),role:"button"}),u$3.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":nt.wDragHandle,onKeyDown:Tt=>this.onHandlerKeyDown(Tt,"w"),role:"button"})),gt&&u$3.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:Tt=>Tt.stopPropagation()},gt(this.state)),mt&&u$3.createElement(u$3.Fragment,null,u$3.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),u$3.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(nt){const ot={...E,...this.props.crop||{}};return D(ot,nt.width,nt.height)}render(){const{aspect:nt,children:ot,circularCrop:ft,className:gt,crop:mt,disabled:yt,locked:_t,style:Tt,ruleOfThirds:St}=this.props,{cropIsActive:At,newCropIsBeingDrawn:Ct}=this.state,Ot=mt?this.renderCropSelection():null,Dt=H$1("ReactCrop",gt,At&&"ReactCrop--active",yt&&"ReactCrop--disabled",_t&&"ReactCrop--locked",Ct&&"ReactCrop--new-crop",mt&&nt&&"ReactCrop--fixed-aspect",mt&&ft&&"ReactCrop--circular-crop",mt&&St&&"ReactCrop--rule-of-thirds",!this.dragStarted&&mt&&!mt.width&&!mt.height&&"ReactCrop--invisible-crop",ft&&"ReactCrop--no-animate");return u$3.createElement("div",{ref:this.componentRef,className:Dt,style:Tt},u$3.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},ot),mt?u$3.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},u$3.createElement("defs",null,u$3.createElement("mask",{id:`hole-${this.instanceId}`},u$3.createElement("rect",{width:"100%",height:"100%",fill:"white"}),ft?u$3.createElement("ellipse",{cx:`${mt.x+mt.width/2}${mt.unit}`,cy:`${mt.y+mt.height/2}${mt.unit}`,rx:`${mt.width/2}${mt.unit}`,ry:`${mt.height/2}${mt.unit}`,fill:"black"}):u$3.createElement("rect",{x:`${mt.x}${mt.unit}`,y:`${mt.y}${mt.unit}`,width:`${mt.width}${mt.unit}`,height:`${mt.height}${mt.unit}`,fill:"black"}))),u$3.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,Ot)}};m$2(x$3,"xOrds",["e","w"]),m$2(x$3,"yOrds",["n","s"]),m$2(x$3,"xyOrds",["nw","ne","se","sw"]),m$2(x$3,"nudgeStep",1),m$2(x$3,"nudgeStepMedium",10),m$2(x$3,"nudgeStepLarge",100),m$2(x$3,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let S$1=x$3;var matrix$1={};const toString$1=Object.prototype.toString;function isAnyArray(tt){const nt=toString$1.call(tt);return nt.endsWith("Array]")&&!nt.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(libEsm);function max$1(tt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");var ot=nt.fromIndex,ft=ot===void 0?0:ot,gt=nt.toIndex,mt=gt===void 0?tt.length:gt;if(ft<0||ft>=tt.length||!Number.isInteger(ft))throw new Error("fromIndex must be a positive integer smaller than length");if(mt<=ft||mt>tt.length||!Number.isInteger(mt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var yt=tt[ft],_t=ft+1;_t<mt;_t++)tt[_t]>yt&&(yt=tt[_t]);return yt}function min$1(tt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");var ot=nt.fromIndex,ft=ot===void 0?0:ot,gt=nt.toIndex,mt=gt===void 0?tt.length:gt;if(ft<0||ft>=tt.length||!Number.isInteger(ft))throw new Error("fromIndex must be a positive integer smaller than length");if(mt<=ft||mt>tt.length||!Number.isInteger(mt))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var yt=tt[ft],_t=ft+1;_t<mt;_t++)tt[_t]<yt&&(yt=tt[_t]);return yt}function rescale(tt){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(tt)){if(tt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var ot;if(nt.output!==void 0){if(!isAnyArray(nt.output))throw new TypeError("output option must be an array if specified");ot=nt.output}else ot=new Array(tt.length);var ft=min$1(tt),gt=max$1(tt);if(ft===gt)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var mt=nt.min,yt=mt===void 0?nt.autoMinMax?ft:0:mt,_t=nt.max,Tt=_t===void 0?nt.autoMinMax?gt:1:_t;if(yt>=Tt)throw new RangeError("min option must be smaller than max option");for(var St=(Tt-yt)/(gt-ft),At=0;At<tt.length;At++)ot[At]=(tt[At]-ft)*St+yt;return ot}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var tt=require$$0,nt=require$$1;const ot=" ".repeat(2),ft=" ".repeat(4);function gt(){return mt(this)}function mt(zt,bt={}){const{maxRows:Et=15,maxColumns:wt=10,maxNumSize:Rt=8,padMinus:$t="auto"}=bt;return`${zt.constructor.name} {
${ot}[
${ft}${yt(zt,Et,wt,Rt,$t)}
${ot}]
${ot}rows: ${zt.rows}
${ot}columns: ${zt.columns}
}`}function yt(zt,bt,Et,wt,Rt){const{rows:$t,columns:Vt}=zt,qt=Math.min($t,bt),Gt=Math.min(Vt,Et),Yt=[];if(Rt==="auto"){Rt=!1;t:for(let en=0;en<qt;en++)for(let de=0;de<Gt;de++)if(zt.get(en,de)<0){Rt=!0;break t}}for(let en=0;en<qt;en++){let de=[];for(let mn=0;mn<Gt;mn++)de.push(_t(zt.get(en,mn),wt,Rt));Yt.push(`${de.join(" ")}`)}return Gt!==Vt&&(Yt[Yt.length-1]+=` ... ${Vt-Et} more columns`),qt!==$t&&Yt.push(`... ${$t-bt} more rows`),Yt.join(`
${ft}`)}function _t(zt,bt,Et){return(zt>=0&&Et?` ${Tt(zt,bt-1)}`:Tt(zt,bt)).padEnd(bt)}function Tt(zt,bt){let Et=zt.toString();if(Et.length<=bt)return Et;let wt=zt.toFixed(bt);if(wt.length>bt&&(wt=zt.toFixed(Math.max(0,bt-(wt.length-bt)))),wt.length<=bt&&!wt.startsWith("0.000")&&!wt.startsWith("-0.000"))return wt;let Rt=zt.toExponential(bt);return Rt.length>bt&&(Rt=zt.toExponential(Math.max(0,bt-(Rt.length-bt)))),Rt.slice(0)}function St(zt,bt){zt.prototype.add=function(wt){return typeof wt=="number"?this.addS(wt):this.addM(wt)},zt.prototype.addS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)+wt);return this},zt.prototype.addM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)+wt.get(Rt,$t));return this},zt.add=function(wt,Rt){return new bt(wt).add(Rt)},zt.prototype.sub=function(wt){return typeof wt=="number"?this.subS(wt):this.subM(wt)},zt.prototype.subS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)-wt);return this},zt.prototype.subM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)-wt.get(Rt,$t));return this},zt.sub=function(wt,Rt){return new bt(wt).sub(Rt)},zt.prototype.subtract=zt.prototype.sub,zt.prototype.subtractS=zt.prototype.subS,zt.prototype.subtractM=zt.prototype.subM,zt.subtract=zt.sub,zt.prototype.mul=function(wt){return typeof wt=="number"?this.mulS(wt):this.mulM(wt)},zt.prototype.mulS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)*wt);return this},zt.prototype.mulM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)*wt.get(Rt,$t));return this},zt.mul=function(wt,Rt){return new bt(wt).mul(Rt)},zt.prototype.multiply=zt.prototype.mul,zt.prototype.multiplyS=zt.prototype.mulS,zt.prototype.multiplyM=zt.prototype.mulM,zt.multiply=zt.mul,zt.prototype.div=function(wt){return typeof wt=="number"?this.divS(wt):this.divM(wt)},zt.prototype.divS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)/wt);return this},zt.prototype.divM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)/wt.get(Rt,$t));return this},zt.div=function(wt,Rt){return new bt(wt).div(Rt)},zt.prototype.divide=zt.prototype.div,zt.prototype.divideS=zt.prototype.divS,zt.prototype.divideM=zt.prototype.divM,zt.divide=zt.div,zt.prototype.mod=function(wt){return typeof wt=="number"?this.modS(wt):this.modM(wt)},zt.prototype.modS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)%wt);return this},zt.prototype.modM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)%wt.get(Rt,$t));return this},zt.mod=function(wt,Rt){return new bt(wt).mod(Rt)},zt.prototype.modulus=zt.prototype.mod,zt.prototype.modulusS=zt.prototype.modS,zt.prototype.modulusM=zt.prototype.modM,zt.modulus=zt.mod,zt.prototype.and=function(wt){return typeof wt=="number"?this.andS(wt):this.andM(wt)},zt.prototype.andS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)&wt);return this},zt.prototype.andM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)&wt.get(Rt,$t));return this},zt.and=function(wt,Rt){return new bt(wt).and(Rt)},zt.prototype.or=function(wt){return typeof wt=="number"?this.orS(wt):this.orM(wt)},zt.prototype.orS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)|wt);return this},zt.prototype.orM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)|wt.get(Rt,$t));return this},zt.or=function(wt,Rt){return new bt(wt).or(Rt)},zt.prototype.xor=function(wt){return typeof wt=="number"?this.xorS(wt):this.xorM(wt)},zt.prototype.xorS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)^wt);return this},zt.prototype.xorM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)^wt.get(Rt,$t));return this},zt.xor=function(wt,Rt){return new bt(wt).xor(Rt)},zt.prototype.leftShift=function(wt){return typeof wt=="number"?this.leftShiftS(wt):this.leftShiftM(wt)},zt.prototype.leftShiftS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)<<wt);return this},zt.prototype.leftShiftM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)<<wt.get(Rt,$t));return this},zt.leftShift=function(wt,Rt){return new bt(wt).leftShift(Rt)},zt.prototype.signPropagatingRightShift=function(wt){return typeof wt=="number"?this.signPropagatingRightShiftS(wt):this.signPropagatingRightShiftM(wt)},zt.prototype.signPropagatingRightShiftS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)>>wt);return this},zt.prototype.signPropagatingRightShiftM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)>>wt.get(Rt,$t));return this},zt.signPropagatingRightShift=function(wt,Rt){return new bt(wt).signPropagatingRightShift(Rt)},zt.prototype.rightShift=function(wt){return typeof wt=="number"?this.rightShiftS(wt):this.rightShiftM(wt)},zt.prototype.rightShiftS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)>>>wt);return this},zt.prototype.rightShiftM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)>>>wt.get(Rt,$t));return this},zt.rightShift=function(wt,Rt){return new bt(wt).rightShift(Rt)},zt.prototype.zeroFillRightShift=zt.prototype.rightShift,zt.prototype.zeroFillRightShiftS=zt.prototype.rightShiftS,zt.prototype.zeroFillRightShiftM=zt.prototype.rightShiftM,zt.zeroFillRightShift=zt.rightShift,zt.prototype.not=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,~this.get(wt,Rt));return this},zt.not=function(wt){return new bt(wt).not()},zt.prototype.abs=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.abs(this.get(wt,Rt)));return this},zt.abs=function(wt){return new bt(wt).abs()},zt.prototype.acos=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.acos(this.get(wt,Rt)));return this},zt.acos=function(wt){return new bt(wt).acos()},zt.prototype.acosh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.acosh(this.get(wt,Rt)));return this},zt.acosh=function(wt){return new bt(wt).acosh()},zt.prototype.asin=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.asin(this.get(wt,Rt)));return this},zt.asin=function(wt){return new bt(wt).asin()},zt.prototype.asinh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.asinh(this.get(wt,Rt)));return this},zt.asinh=function(wt){return new bt(wt).asinh()},zt.prototype.atan=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.atan(this.get(wt,Rt)));return this},zt.atan=function(wt){return new bt(wt).atan()},zt.prototype.atanh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.atanh(this.get(wt,Rt)));return this},zt.atanh=function(wt){return new bt(wt).atanh()},zt.prototype.cbrt=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.cbrt(this.get(wt,Rt)));return this},zt.cbrt=function(wt){return new bt(wt).cbrt()},zt.prototype.ceil=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.ceil(this.get(wt,Rt)));return this},zt.ceil=function(wt){return new bt(wt).ceil()},zt.prototype.clz32=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.clz32(this.get(wt,Rt)));return this},zt.clz32=function(wt){return new bt(wt).clz32()},zt.prototype.cos=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.cos(this.get(wt,Rt)));return this},zt.cos=function(wt){return new bt(wt).cos()},zt.prototype.cosh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.cosh(this.get(wt,Rt)));return this},zt.cosh=function(wt){return new bt(wt).cosh()},zt.prototype.exp=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.exp(this.get(wt,Rt)));return this},zt.exp=function(wt){return new bt(wt).exp()},zt.prototype.expm1=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.expm1(this.get(wt,Rt)));return this},zt.expm1=function(wt){return new bt(wt).expm1()},zt.prototype.floor=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.floor(this.get(wt,Rt)));return this},zt.floor=function(wt){return new bt(wt).floor()},zt.prototype.fround=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.fround(this.get(wt,Rt)));return this},zt.fround=function(wt){return new bt(wt).fround()},zt.prototype.log=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.log(this.get(wt,Rt)));return this},zt.log=function(wt){return new bt(wt).log()},zt.prototype.log1p=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.log1p(this.get(wt,Rt)));return this},zt.log1p=function(wt){return new bt(wt).log1p()},zt.prototype.log10=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.log10(this.get(wt,Rt)));return this},zt.log10=function(wt){return new bt(wt).log10()},zt.prototype.log2=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.log2(this.get(wt,Rt)));return this},zt.log2=function(wt){return new bt(wt).log2()},zt.prototype.round=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.round(this.get(wt,Rt)));return this},zt.round=function(wt){return new bt(wt).round()},zt.prototype.sign=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.sign(this.get(wt,Rt)));return this},zt.sign=function(wt){return new bt(wt).sign()},zt.prototype.sin=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.sin(this.get(wt,Rt)));return this},zt.sin=function(wt){return new bt(wt).sin()},zt.prototype.sinh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.sinh(this.get(wt,Rt)));return this},zt.sinh=function(wt){return new bt(wt).sinh()},zt.prototype.sqrt=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.sqrt(this.get(wt,Rt)));return this},zt.sqrt=function(wt){return new bt(wt).sqrt()},zt.prototype.tan=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.tan(this.get(wt,Rt)));return this},zt.tan=function(wt){return new bt(wt).tan()},zt.prototype.tanh=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.tanh(this.get(wt,Rt)));return this},zt.tanh=function(wt){return new bt(wt).tanh()},zt.prototype.trunc=function(){for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.set(wt,Rt,Math.trunc(this.get(wt,Rt)));return this},zt.trunc=function(wt){return new bt(wt).trunc()},zt.pow=function(wt,Rt){return new bt(wt).pow(Rt)},zt.prototype.pow=function(wt){return typeof wt=="number"?this.powS(wt):this.powM(wt)},zt.prototype.powS=function(wt){for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)**wt);return this},zt.prototype.powM=function(wt){if(wt=bt.checkMatrix(wt),this.rows!==wt.rows||this.columns!==wt.columns)throw new RangeError("Matrices dimensions must be equal");for(let Rt=0;Rt<this.rows;Rt++)for(let $t=0;$t<this.columns;$t++)this.set(Rt,$t,this.get(Rt,$t)**wt.get(Rt,$t));return this}}function At(zt,bt,Et){let wt=Et?zt.rows:zt.rows-1;if(bt<0||bt>wt)throw new RangeError("Row index out of range")}function Ct(zt,bt,Et){let wt=Et?zt.columns:zt.columns-1;if(bt<0||bt>wt)throw new RangeError("Column index out of range")}function Ot(zt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==zt.columns)throw new RangeError("vector size must be the same as the number of columns");return bt}function Dt(zt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==zt.rows)throw new RangeError("vector size must be the same as the number of rows");return bt}function Ut(zt,bt){if(!tt.isAnyArray(bt))throw new TypeError("row indices must be an array");for(let Et=0;Et<bt.length;Et++)if(bt[Et]<0||bt[Et]>=zt.rows)throw new RangeError("row indices are out of range")}function Xt(zt,bt){if(!tt.isAnyArray(bt))throw new TypeError("column indices must be an array");for(let Et=0;Et<bt.length;Et++)if(bt[Et]<0||bt[Et]>=zt.columns)throw new RangeError("column indices are out of range")}function Pt(zt,bt,Et,wt,Rt){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Kt("startRow",bt),Kt("endRow",Et),Kt("startColumn",wt),Kt("endColumn",Rt),bt>Et||wt>Rt||bt<0||bt>=zt.rows||Et<0||Et>=zt.rows||wt<0||wt>=zt.columns||Rt<0||Rt>=zt.columns)throw new RangeError("Submatrix indices are out of range")}function Jt(zt,bt=0){let Et=[];for(let wt=0;wt<zt;wt++)Et.push(bt);return Et}function Kt(zt,bt){if(typeof bt!="number")throw new TypeError(`${zt} must be a number`)}function Nt(zt){if(zt.isEmpty())throw new Error("Empty matrix has no elements to index")}function jt(zt){let bt=Jt(zt.rows);for(let Et=0;Et<zt.rows;++Et)for(let wt=0;wt<zt.columns;++wt)bt[Et]+=zt.get(Et,wt);return bt}function kt(zt){let bt=Jt(zt.columns);for(let Et=0;Et<zt.rows;++Et)for(let wt=0;wt<zt.columns;++wt)bt[wt]+=zt.get(Et,wt);return bt}function Zt(zt){let bt=0;for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)bt+=zt.get(Et,wt);return bt}function Ft(zt){let bt=Jt(zt.rows,1);for(let Et=0;Et<zt.rows;++Et)for(let wt=0;wt<zt.columns;++wt)bt[Et]*=zt.get(Et,wt);return bt}function It(zt){let bt=Jt(zt.columns,1);for(let Et=0;Et<zt.rows;++Et)for(let wt=0;wt<zt.columns;++wt)bt[wt]*=zt.get(Et,wt);return bt}function Wt(zt){let bt=1;for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)bt*=zt.get(Et,wt);return bt}function Qt(zt,bt,Et){const wt=zt.rows,Rt=zt.columns,$t=[];for(let Vt=0;Vt<wt;Vt++){let qt=0,Gt=0,Yt=0;for(let en=0;en<Rt;en++)Yt=zt.get(Vt,en)-Et[Vt],qt+=Yt,Gt+=Yt*Yt;bt?$t.push((Gt-qt*qt/Rt)/(Rt-1)):$t.push((Gt-qt*qt/Rt)/Rt)}return $t}function me(zt,bt,Et){const wt=zt.rows,Rt=zt.columns,$t=[];for(let Vt=0;Vt<Rt;Vt++){let qt=0,Gt=0,Yt=0;for(let en=0;en<wt;en++)Yt=zt.get(en,Vt)-Et[Vt],qt+=Yt,Gt+=Yt*Yt;bt?$t.push((Gt-qt*qt/wt)/(wt-1)):$t.push((Gt-qt*qt/wt)/wt)}return $t}function rn(zt,bt,Et){const wt=zt.rows,Rt=zt.columns,$t=wt*Rt;let Vt=0,qt=0,Gt=0;for(let Yt=0;Yt<wt;Yt++)for(let en=0;en<Rt;en++)Gt=zt.get(Yt,en)-Et,Vt+=Gt,qt+=Gt*Gt;return bt?(qt-Vt*Vt/$t)/($t-1):(qt-Vt*Vt/$t)/$t}function Dn(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)-bt[Et])}function Mn(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)-bt[wt])}function $n(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)-bt)}function on(zt){const bt=[];for(let Et=0;Et<zt.rows;Et++){let wt=0;for(let Rt=0;Rt<zt.columns;Rt++)wt+=zt.get(Et,Rt)**2/(zt.columns-1);bt.push(Math.sqrt(wt))}return bt}function yn(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)/bt[Et])}function bn(zt){const bt=[];for(let Et=0;Et<zt.columns;Et++){let wt=0;for(let Rt=0;Rt<zt.rows;Rt++)wt+=zt.get(Rt,Et)**2/(zt.rows-1);bt.push(Math.sqrt(wt))}return bt}function On(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)/bt[wt])}function Ht(zt){const bt=zt.size-1;let Et=0;for(let wt=0;wt<zt.columns;wt++)for(let Rt=0;Rt<zt.rows;Rt++)Et+=zt.get(Rt,wt)**2/bt;return Math.sqrt(Et)}function sn(zt,bt){for(let Et=0;Et<zt.rows;Et++)for(let wt=0;wt<zt.columns;wt++)zt.set(Et,wt,zt.get(Et,wt)/bt)}class nn{static from1DArray(bt,Et,wt){if(bt*Et!==wt.length)throw new RangeError("data length does not match given dimensions");let $t=new Be(bt,Et);for(let Vt=0;Vt<bt;Vt++)for(let qt=0;qt<Et;qt++)$t.set(Vt,qt,wt[Vt*Et+qt]);return $t}static rowVector(bt){let Et=new Be(1,bt.length);for(let wt=0;wt<bt.length;wt++)Et.set(0,wt,bt[wt]);return Et}static columnVector(bt){let Et=new Be(bt.length,1);for(let wt=0;wt<bt.length;wt++)Et.set(wt,0,bt[wt]);return Et}static zeros(bt,Et){return new Be(bt,Et)}static ones(bt,Et){return new Be(bt,Et).fill(1)}static rand(bt,Et,wt={}){if(typeof wt!="object")throw new TypeError("options must be an object");const{random:Rt=Math.random}=wt;let $t=new Be(bt,Et);for(let Vt=0;Vt<bt;Vt++)for(let qt=0;qt<Et;qt++)$t.set(Vt,qt,Rt());return $t}static randInt(bt,Et,wt={}){if(typeof wt!="object")throw new TypeError("options must be an object");const{min:Rt=0,max:$t=1e3,random:Vt=Math.random}=wt;if(!Number.isInteger(Rt))throw new TypeError("min must be an integer");if(!Number.isInteger($t))throw new TypeError("max must be an integer");if(Rt>=$t)throw new RangeError("min must be smaller than max");let qt=$t-Rt,Gt=new Be(bt,Et);for(let Yt=0;Yt<bt;Yt++)for(let en=0;en<Et;en++){let de=Rt+Math.round(Vt()*qt);Gt.set(Yt,en,de)}return Gt}static eye(bt,Et,wt){Et===void 0&&(Et=bt),wt===void 0&&(wt=1);let Rt=Math.min(bt,Et),$t=this.zeros(bt,Et);for(let Vt=0;Vt<Rt;Vt++)$t.set(Vt,Vt,wt);return $t}static diag(bt,Et,wt){let Rt=bt.length;Et===void 0&&(Et=Rt),wt===void 0&&(wt=Et);let $t=Math.min(Rt,Et,wt),Vt=this.zeros(Et,wt);for(let qt=0;qt<$t;qt++)Vt.set(qt,qt,bt[qt]);return Vt}static min(bt,Et){bt=this.checkMatrix(bt),Et=this.checkMatrix(Et);let wt=bt.rows,Rt=bt.columns,$t=new Be(wt,Rt);for(let Vt=0;Vt<wt;Vt++)for(let qt=0;qt<Rt;qt++)$t.set(Vt,qt,Math.min(bt.get(Vt,qt),Et.get(Vt,qt)));return $t}static max(bt,Et){bt=this.checkMatrix(bt),Et=this.checkMatrix(Et);let wt=bt.rows,Rt=bt.columns,$t=new this(wt,Rt);for(let Vt=0;Vt<wt;Vt++)for(let qt=0;qt<Rt;qt++)$t.set(Vt,qt,Math.max(bt.get(Vt,qt),Et.get(Vt,qt)));return $t}static checkMatrix(bt){return nn.isMatrix(bt)?bt:new Be(bt)}static isMatrix(bt){return bt!=null&&bt.klass==="Matrix"}get size(){return this.rows*this.columns}apply(bt){if(typeof bt!="function")throw new TypeError("callback must be a function");for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)bt.call(this,Et,wt);return this}to1DArray(){let bt=[];for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)bt.push(this.get(Et,wt));return bt}to2DArray(){let bt=[];for(let Et=0;Et<this.rows;Et++){bt.push([]);for(let wt=0;wt<this.columns;wt++)bt[Et].push(this.get(Et,wt))}return bt}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let bt=0;bt<this.rows;bt++)for(let Et=0;Et<=bt;Et++)if(this.get(bt,Et)!==this.get(Et,bt))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let bt=0;bt<this.rows;bt++)if(this.get(bt,bt)!==0)return!1;return!0}isEchelonForm(){let bt=0,Et=0,wt=-1,Rt=!0,$t=!1;for(;bt<this.rows&&Rt;){for(Et=0,$t=!1;Et<this.columns&&$t===!1;)this.get(bt,Et)===0?Et++:this.get(bt,Et)===1&&Et>wt?($t=!0,wt=Et):(Rt=!1,$t=!0);bt++}return Rt}isReducedEchelonForm(){let bt=0,Et=0,wt=-1,Rt=!0,$t=!1;for(;bt<this.rows&&Rt;){for(Et=0,$t=!1;Et<this.columns&&$t===!1;)this.get(bt,Et)===0?Et++:this.get(bt,Et)===1&&Et>wt?($t=!0,wt=Et):(Rt=!1,$t=!0);for(let Vt=Et+1;Vt<this.rows;Vt++)this.get(bt,Vt)!==0&&(Rt=!1);bt++}return Rt}echelonForm(){let bt=this.clone(),Et=0,wt=0;for(;Et<bt.rows&&wt<bt.columns;){let Rt=Et;for(let $t=Et;$t<bt.rows;$t++)bt.get($t,wt)>bt.get(Rt,wt)&&(Rt=$t);if(bt.get(Rt,wt)===0)wt++;else{bt.swapRows(Et,Rt);let $t=bt.get(Et,wt);for(let Vt=wt;Vt<bt.columns;Vt++)bt.set(Et,Vt,bt.get(Et,Vt)/$t);for(let Vt=Et+1;Vt<bt.rows;Vt++){let qt=bt.get(Vt,wt)/bt.get(Et,wt);bt.set(Vt,wt,0);for(let Gt=wt+1;Gt<bt.columns;Gt++)bt.set(Vt,Gt,bt.get(Vt,Gt)-bt.get(Et,Gt)*qt)}Et++,wt++}}return bt}reducedEchelonForm(){let bt=this.echelonForm(),Et=bt.columns,wt=bt.rows,Rt=wt-1;for(;Rt>=0;)if(bt.maxRow(Rt)===0)Rt--;else{let $t=0,Vt=!1;for(;$t<wt&&Vt===!1;)bt.get(Rt,$t)===1?Vt=!0:$t++;for(let qt=0;qt<Rt;qt++){let Gt=bt.get(qt,$t);for(let Yt=$t;Yt<Et;Yt++){let en=bt.get(qt,Yt)-Gt*bt.get(Rt,Yt);bt.set(qt,Yt,en)}}Rt--}return bt}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(bt={}){if(typeof bt!="object")throw new TypeError("options must be an object");const{rows:Et=1,columns:wt=1}=bt;if(!Number.isInteger(Et)||Et<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(wt)||wt<=0)throw new TypeError("columns must be a positive integer");let Rt=new Be(this.rows*Et,this.columns*wt);for(let $t=0;$t<Et;$t++)for(let Vt=0;Vt<wt;Vt++)Rt.setSubMatrix(this,this.rows*$t,this.columns*Vt);return Rt}fill(bt){for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,bt);return this}neg(){return this.mulS(-1)}getRow(bt){At(this,bt);let Et=[];for(let wt=0;wt<this.columns;wt++)Et.push(this.get(bt,wt));return Et}getRowVector(bt){return Be.rowVector(this.getRow(bt))}setRow(bt,Et){At(this,bt),Et=Ot(this,Et);for(let wt=0;wt<this.columns;wt++)this.set(bt,wt,Et[wt]);return this}swapRows(bt,Et){At(this,bt),At(this,Et);for(let wt=0;wt<this.columns;wt++){let Rt=this.get(bt,wt);this.set(bt,wt,this.get(Et,wt)),this.set(Et,wt,Rt)}return this}getColumn(bt){Ct(this,bt);let Et=[];for(let wt=0;wt<this.rows;wt++)Et.push(this.get(wt,bt));return Et}getColumnVector(bt){return Be.columnVector(this.getColumn(bt))}setColumn(bt,Et){Ct(this,bt),Et=Dt(this,Et);for(let wt=0;wt<this.rows;wt++)this.set(wt,bt,Et[wt]);return this}swapColumns(bt,Et){Ct(this,bt),Ct(this,Et);for(let wt=0;wt<this.rows;wt++){let Rt=this.get(wt,bt);this.set(wt,bt,this.get(wt,Et)),this.set(wt,Et,Rt)}return this}addRowVector(bt){bt=Ot(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)+bt[wt]);return this}subRowVector(bt){bt=Ot(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)-bt[wt]);return this}mulRowVector(bt){bt=Ot(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)*bt[wt]);return this}divRowVector(bt){bt=Ot(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)/bt[wt]);return this}addColumnVector(bt){bt=Dt(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)+bt[Et]);return this}subColumnVector(bt){bt=Dt(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)-bt[Et]);return this}mulColumnVector(bt){bt=Dt(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)*bt[Et]);return this}divColumnVector(bt){bt=Dt(this,bt);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)this.set(Et,wt,this.get(Et,wt)/bt[Et]);return this}mulRow(bt,Et){At(this,bt);for(let wt=0;wt<this.columns;wt++)this.set(bt,wt,this.get(bt,wt)*Et);return this}mulColumn(bt,Et){Ct(this,bt);for(let wt=0;wt<this.rows;wt++)this.set(wt,bt,this.get(wt,bt)*Et);return this}max(bt){if(this.isEmpty())return NaN;switch(bt){case"row":{const Et=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)>Et[wt]&&(Et[wt]=this.get(wt,Rt));return Et}case"column":{const Et=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)>Et[Rt]&&(Et[Rt]=this.get(wt,Rt));return Et}case void 0:{let Et=this.get(0,0);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)>Et&&(Et=this.get(wt,Rt));return Et}default:throw new Error(`invalid option: ${bt}`)}}maxIndex(){Nt(this);let bt=this.get(0,0),Et=[0,0];for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)>bt&&(bt=this.get(wt,Rt),Et[0]=wt,Et[1]=Rt);return Et}min(bt){if(this.isEmpty())return NaN;switch(bt){case"row":{const Et=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)<Et[wt]&&(Et[wt]=this.get(wt,Rt));return Et}case"column":{const Et=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)<Et[Rt]&&(Et[Rt]=this.get(wt,Rt));return Et}case void 0:{let Et=this.get(0,0);for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)<Et&&(Et=this.get(wt,Rt));return Et}default:throw new Error(`invalid option: ${bt}`)}}minIndex(){Nt(this);let bt=this.get(0,0),Et=[0,0];for(let wt=0;wt<this.rows;wt++)for(let Rt=0;Rt<this.columns;Rt++)this.get(wt,Rt)<bt&&(bt=this.get(wt,Rt),Et[0]=wt,Et[1]=Rt);return Et}maxRow(bt){if(At(this,bt),this.isEmpty())return NaN;let Et=this.get(bt,0);for(let wt=1;wt<this.columns;wt++)this.get(bt,wt)>Et&&(Et=this.get(bt,wt));return Et}maxRowIndex(bt){At(this,bt),Nt(this);let Et=this.get(bt,0),wt=[bt,0];for(let Rt=1;Rt<this.columns;Rt++)this.get(bt,Rt)>Et&&(Et=this.get(bt,Rt),wt[1]=Rt);return wt}minRow(bt){if(At(this,bt),this.isEmpty())return NaN;let Et=this.get(bt,0);for(let wt=1;wt<this.columns;wt++)this.get(bt,wt)<Et&&(Et=this.get(bt,wt));return Et}minRowIndex(bt){At(this,bt),Nt(this);let Et=this.get(bt,0),wt=[bt,0];for(let Rt=1;Rt<this.columns;Rt++)this.get(bt,Rt)<Et&&(Et=this.get(bt,Rt),wt[1]=Rt);return wt}maxColumn(bt){if(Ct(this,bt),this.isEmpty())return NaN;let Et=this.get(0,bt);for(let wt=1;wt<this.rows;wt++)this.get(wt,bt)>Et&&(Et=this.get(wt,bt));return Et}maxColumnIndex(bt){Ct(this,bt),Nt(this);let Et=this.get(0,bt),wt=[0,bt];for(let Rt=1;Rt<this.rows;Rt++)this.get(Rt,bt)>Et&&(Et=this.get(Rt,bt),wt[0]=Rt);return wt}minColumn(bt){if(Ct(this,bt),this.isEmpty())return NaN;let Et=this.get(0,bt);for(let wt=1;wt<this.rows;wt++)this.get(wt,bt)<Et&&(Et=this.get(wt,bt));return Et}minColumnIndex(bt){Ct(this,bt),Nt(this);let Et=this.get(0,bt),wt=[0,bt];for(let Rt=1;Rt<this.rows;Rt++)this.get(Rt,bt)<Et&&(Et=this.get(Rt,bt),wt[0]=Rt);return wt}diag(){let bt=Math.min(this.rows,this.columns),Et=[];for(let wt=0;wt<bt;wt++)Et.push(this.get(wt,wt));return Et}norm(bt="frobenius"){switch(bt){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${bt}`)}}cumulativeSum(){let bt=0;for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)bt+=this.get(Et,wt),this.set(Et,wt,bt);return this}dot(bt){nn.isMatrix(bt)&&(bt=bt.to1DArray());let Et=this.to1DArray();if(Et.length!==bt.length)throw new RangeError("vectors do not have the same size");let wt=0;for(let Rt=0;Rt<Et.length;Rt++)wt+=Et[Rt]*bt[Rt];return wt}mmul(bt){bt=Be.checkMatrix(bt);let Et=this.rows,wt=this.columns,Rt=bt.columns,$t=new Be(Et,Rt),Vt=new Float64Array(wt);for(let qt=0;qt<Rt;qt++){for(let Gt=0;Gt<wt;Gt++)Vt[Gt]=bt.get(Gt,qt);for(let Gt=0;Gt<Et;Gt++){let Yt=0;for(let en=0;en<wt;en++)Yt+=this.get(Gt,en)*Vt[en];$t.set(Gt,qt,Yt)}}return $t}mpow(bt){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(bt)||bt<0)throw new RangeError("Exponent must be a non-negative integer");let Et=Be.eye(this.rows),wt=this;for(let Rt=bt;Rt>=1;Rt/=2)(Rt&1)!==0&&(Et=Et.mmul(wt)),wt=wt.mmul(wt);return Et}strassen2x2(bt){bt=Be.checkMatrix(bt);let Et=new Be(2,2);const wt=this.get(0,0),Rt=bt.get(0,0),$t=this.get(0,1),Vt=bt.get(0,1),qt=this.get(1,0),Gt=bt.get(1,0),Yt=this.get(1,1),en=bt.get(1,1),de=(wt+Yt)*(Rt+en),mn=(qt+Yt)*Rt,Cn=wt*(Vt-en),hn=Yt*(Gt-Rt),wn=(wt+$t)*en,jn=(qt-wt)*(Rt+Vt),Le=($t-Yt)*(Gt+en),Tn=de+hn-wn+Le,Un=Cn+wn,Wn=mn+hn,ni=de-mn+Cn+jn;return Et.set(0,0,Tn),Et.set(0,1,Un),Et.set(1,0,Wn),Et.set(1,1,ni),Et}strassen3x3(bt){bt=Be.checkMatrix(bt);let Et=new Be(3,3);const wt=this.get(0,0),Rt=this.get(0,1),$t=this.get(0,2),Vt=this.get(1,0),qt=this.get(1,1),Gt=this.get(1,2),Yt=this.get(2,0),en=this.get(2,1),de=this.get(2,2),mn=bt.get(0,0),Cn=bt.get(0,1),hn=bt.get(0,2),wn=bt.get(1,0),jn=bt.get(1,1),Le=bt.get(1,2),Tn=bt.get(2,0),Un=bt.get(2,1),Wn=bt.get(2,2),ni=(wt+Rt+$t-Vt-qt-en-de)*jn,pi=(wt-Vt)*(-Cn+jn),Zn=qt*(-mn+Cn+wn-jn-Le-Tn+Wn),ti=(-wt+Vt+qt)*(mn-Cn+jn),bi=(Vt+qt)*(-mn+Cn),tn=wt*mn,Rn=(-wt+Yt+en)*(mn-hn+Le),In=(-wt+Yt)*(hn-Le),_n=(Yt+en)*(-mn+hn),Ii=(wt+Rt+$t-qt-Gt-Yt-en)*Le,Mi=en*(-mn+hn+wn-jn-Le-Tn+Un),Ci=(-$t+en+de)*(jn+Tn-Un),Ti=($t-de)*(jn-Un),Hi=$t*Tn,pr=(en+de)*(-Tn+Un),Li=(-$t+qt+Gt)*(Le+Tn-Wn),mr=($t-Gt)*(Le-Wn),Er=(qt+Gt)*(-Tn+Wn),Ei=Rt*wn,Ji=Gt*Un,Vi=Vt*hn,fr=Yt*Cn,Zi=de*Wn,Xa=tn+Hi+Ei,El=ni+ti+bi+tn+Ci+Hi+pr,Ha=tn+Rn+_n+Ii+Hi+Li+Er,Ds=pi+Zn+ti+tn+Hi+Li+mr,xr=pi+ti+bi+tn+Ji,Ao=Hi+Li+mr+Er+Vi,Sl=tn+Rn+In+Mi+Ci+Ti+Hi,$o=Ci+Ti+Hi+pr+fr,sa=tn+Rn+In+_n+Zi;return Et.set(0,0,Xa),Et.set(0,1,El),Et.set(0,2,Ha),Et.set(1,0,Ds),Et.set(1,1,xr),Et.set(1,2,Ao),Et.set(2,0,Sl),Et.set(2,1,$o),Et.set(2,2,sa),Et}mmulStrassen(bt){bt=Be.checkMatrix(bt);let Et=this.clone(),wt=Et.rows,Rt=Et.columns,$t=bt.rows,Vt=bt.columns;Rt!==$t&&console.warn(`Multiplying ${wt} x ${Rt} and ${$t} x ${Vt} matrix: dimensions do not match.`);function qt(de,mn,Cn){let hn=de.rows,wn=de.columns;if(hn===mn&&wn===Cn)return de;{let jn=nn.zeros(mn,Cn);return jn=jn.setSubMatrix(de,0,0),jn}}let Gt=Math.max(wt,$t),Yt=Math.max(Rt,Vt);Et=qt(Et,Gt,Yt),bt=qt(bt,Gt,Yt);function en(de,mn,Cn,hn){if(Cn<=512||hn<=512)return de.mmul(mn);Cn%2===1&&hn%2===1?(de=qt(de,Cn+1,hn+1),mn=qt(mn,Cn+1,hn+1)):Cn%2===1?(de=qt(de,Cn+1,hn),mn=qt(mn,Cn+1,hn)):hn%2===1&&(de=qt(de,Cn,hn+1),mn=qt(mn,Cn,hn+1));let wn=parseInt(de.rows/2,10),jn=parseInt(de.columns/2,10),Le=de.subMatrix(0,wn-1,0,jn-1),Tn=mn.subMatrix(0,wn-1,0,jn-1),Un=de.subMatrix(0,wn-1,jn,de.columns-1),Wn=mn.subMatrix(0,wn-1,jn,mn.columns-1),ni=de.subMatrix(wn,de.rows-1,0,jn-1),pi=mn.subMatrix(wn,mn.rows-1,0,jn-1),Zn=de.subMatrix(wn,de.rows-1,jn,de.columns-1),ti=mn.subMatrix(wn,mn.rows-1,jn,mn.columns-1),bi=en(nn.add(Le,Zn),nn.add(Tn,ti),wn,jn),tn=en(nn.add(ni,Zn),Tn,wn,jn),Rn=en(Le,nn.sub(Wn,ti),wn,jn),In=en(Zn,nn.sub(pi,Tn),wn,jn),_n=en(nn.add(Le,Un),ti,wn,jn),Ii=en(nn.sub(ni,Le),nn.add(Tn,Wn),wn,jn),Mi=en(nn.sub(Un,Zn),nn.add(pi,ti),wn,jn),Ci=nn.add(bi,In);Ci.sub(_n),Ci.add(Mi);let Ti=nn.add(Rn,_n),Hi=nn.add(tn,In),pr=nn.sub(bi,tn);pr.add(Rn),pr.add(Ii);let Li=nn.zeros(2*Ci.rows,2*Ci.columns);return Li=Li.setSubMatrix(Ci,0,0),Li=Li.setSubMatrix(Ti,Ci.rows,0),Li=Li.setSubMatrix(Hi,0,Ci.columns),Li=Li.setSubMatrix(pr,Ci.rows,Ci.columns),Li.subMatrix(0,Cn-1,0,hn-1)}return en(Et,bt,Gt,Yt)}scaleRows(bt={}){if(typeof bt!="object")throw new TypeError("options must be an object");const{min:Et=0,max:wt=1}=bt;if(!Number.isFinite(Et))throw new TypeError("min must be a number");if(!Number.isFinite(wt))throw new TypeError("max must be a number");if(Et>=wt)throw new RangeError("min must be smaller than max");let Rt=new Be(this.rows,this.columns);for(let $t=0;$t<this.rows;$t++){const Vt=this.getRow($t);Vt.length>0&&nt(Vt,{min:Et,max:wt,output:Vt}),Rt.setRow($t,Vt)}return Rt}scaleColumns(bt={}){if(typeof bt!="object")throw new TypeError("options must be an object");const{min:Et=0,max:wt=1}=bt;if(!Number.isFinite(Et))throw new TypeError("min must be a number");if(!Number.isFinite(wt))throw new TypeError("max must be a number");if(Et>=wt)throw new RangeError("min must be smaller than max");let Rt=new Be(this.rows,this.columns);for(let $t=0;$t<this.columns;$t++){const Vt=this.getColumn($t);Vt.length&&nt(Vt,{min:Et,max:wt,output:Vt}),Rt.setColumn($t,Vt)}return Rt}flipRows(){const bt=Math.ceil(this.columns/2);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<bt;wt++){let Rt=this.get(Et,wt),$t=this.get(Et,this.columns-1-wt);this.set(Et,wt,$t),this.set(Et,this.columns-1-wt,Rt)}return this}flipColumns(){const bt=Math.ceil(this.rows/2);for(let Et=0;Et<this.columns;Et++)for(let wt=0;wt<bt;wt++){let Rt=this.get(wt,Et),$t=this.get(this.rows-1-wt,Et);this.set(wt,Et,$t),this.set(this.rows-1-wt,Et,Rt)}return this}kroneckerProduct(bt){bt=Be.checkMatrix(bt);let Et=this.rows,wt=this.columns,Rt=bt.rows,$t=bt.columns,Vt=new Be(Et*Rt,wt*$t);for(let qt=0;qt<Et;qt++)for(let Gt=0;Gt<wt;Gt++)for(let Yt=0;Yt<Rt;Yt++)for(let en=0;en<$t;en++)Vt.set(Rt*qt+Yt,$t*Gt+en,this.get(qt,Gt)*bt.get(Yt,en));return Vt}kroneckerSum(bt){if(bt=Be.checkMatrix(bt),!this.isSquare()||!bt.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let Et=this.rows,wt=bt.rows,Rt=this.kroneckerProduct(Be.eye(wt,wt)),$t=Be.eye(Et,Et).kroneckerProduct(bt);return Rt.add($t)}transpose(){let bt=new Be(this.columns,this.rows);for(let Et=0;Et<this.rows;Et++)for(let wt=0;wt<this.columns;wt++)bt.set(wt,Et,this.get(Et,wt));return bt}sortRows(bt=pn){for(let Et=0;Et<this.rows;Et++)this.setRow(Et,this.getRow(Et).sort(bt));return this}sortColumns(bt=pn){for(let Et=0;Et<this.columns;Et++)this.setColumn(Et,this.getColumn(Et).sort(bt));return this}subMatrix(bt,Et,wt,Rt){Pt(this,bt,Et,wt,Rt);let $t=new Be(Et-bt+1,Rt-wt+1);for(let Vt=bt;Vt<=Et;Vt++)for(let qt=wt;qt<=Rt;qt++)$t.set(Vt-bt,qt-wt,this.get(Vt,qt));return $t}subMatrixRow(bt,Et,wt){if(Et===void 0&&(Et=0),wt===void 0&&(wt=this.columns-1),Et>wt||Et<0||Et>=this.columns||wt<0||wt>=this.columns)throw new RangeError("Argument out of range");let Rt=new Be(bt.length,wt-Et+1);for(let $t=0;$t<bt.length;$t++)for(let Vt=Et;Vt<=wt;Vt++){if(bt[$t]<0||bt[$t]>=this.rows)throw new RangeError(`Row index out of range: ${bt[$t]}`);Rt.set($t,Vt-Et,this.get(bt[$t],Vt))}return Rt}subMatrixColumn(bt,Et,wt){if(Et===void 0&&(Et=0),wt===void 0&&(wt=this.rows-1),Et>wt||Et<0||Et>=this.rows||wt<0||wt>=this.rows)throw new RangeError("Argument out of range");let Rt=new Be(wt-Et+1,bt.length);for(let $t=0;$t<bt.length;$t++)for(let Vt=Et;Vt<=wt;Vt++){if(bt[$t]<0||bt[$t]>=this.columns)throw new RangeError(`Column index out of range: ${bt[$t]}`);Rt.set(Vt-Et,$t,this.get(Vt,bt[$t]))}return Rt}setSubMatrix(bt,Et,wt){if(bt=Be.checkMatrix(bt),bt.isEmpty())return this;let Rt=Et+bt.rows-1,$t=wt+bt.columns-1;Pt(this,Et,Rt,wt,$t);for(let Vt=0;Vt<bt.rows;Vt++)for(let qt=0;qt<bt.columns;qt++)this.set(Et+Vt,wt+qt,bt.get(Vt,qt));return this}selection(bt,Et){Ut(this,bt),Xt(this,Et);let wt=new Be(bt.length,Et.length);for(let Rt=0;Rt<bt.length;Rt++){let $t=bt[Rt];for(let Vt=0;Vt<Et.length;Vt++){let qt=Et[Vt];wt.set(Rt,Vt,this.get($t,qt))}}return wt}trace(){let bt=Math.min(this.rows,this.columns),Et=0;for(let wt=0;wt<bt;wt++)Et+=this.get(wt,wt);return Et}clone(){return this.constructor.copy(this,new Be(this.rows,this.columns))}static copy(bt,Et){for(const[wt,Rt,$t]of bt.entries())Et.set(wt,Rt,$t);return Et}sum(bt){switch(bt){case"row":return jt(this);case"column":return kt(this);case void 0:return Zt(this);default:throw new Error(`invalid option: ${bt}`)}}product(bt){switch(bt){case"row":return Ft(this);case"column":return It(this);case void 0:return Wt(this);default:throw new Error(`invalid option: ${bt}`)}}mean(bt){const Et=this.sum(bt);switch(bt){case"row":{for(let wt=0;wt<this.rows;wt++)Et[wt]/=this.columns;return Et}case"column":{for(let wt=0;wt<this.columns;wt++)Et[wt]/=this.rows;return Et}case void 0:return Et/this.size;default:throw new Error(`invalid option: ${bt}`)}}variance(bt,Et={}){if(typeof bt=="object"&&(Et=bt,bt=void 0),typeof Et!="object")throw new TypeError("options must be an object");const{unbiased:wt=!0,mean:Rt=this.mean(bt)}=Et;if(typeof wt!="boolean")throw new TypeError("unbiased must be a boolean");switch(bt){case"row":{if(!tt.isAnyArray(Rt))throw new TypeError("mean must be an array");return Qt(this,wt,Rt)}case"column":{if(!tt.isAnyArray(Rt))throw new TypeError("mean must be an array");return me(this,wt,Rt)}case void 0:{if(typeof Rt!="number")throw new TypeError("mean must be a number");return rn(this,wt,Rt)}default:throw new Error(`invalid option: ${bt}`)}}standardDeviation(bt,Et){typeof bt=="object"&&(Et=bt,bt=void 0);const wt=this.variance(bt,Et);if(bt===void 0)return Math.sqrt(wt);for(let Rt=0;Rt<wt.length;Rt++)wt[Rt]=Math.sqrt(wt[Rt]);return wt}center(bt,Et={}){if(typeof bt=="object"&&(Et=bt,bt=void 0),typeof Et!="object")throw new TypeError("options must be an object");const{center:wt=this.mean(bt)}=Et;switch(bt){case"row":{if(!tt.isAnyArray(wt))throw new TypeError("center must be an array");return Dn(this,wt),this}case"column":{if(!tt.isAnyArray(wt))throw new TypeError("center must be an array");return Mn(this,wt),this}case void 0:{if(typeof wt!="number")throw new TypeError("center must be a number");return $n(this,wt),this}default:throw new Error(`invalid option: ${bt}`)}}scale(bt,Et={}){if(typeof bt=="object"&&(Et=bt,bt=void 0),typeof Et!="object")throw new TypeError("options must be an object");let wt=Et.scale;switch(bt){case"row":{if(wt===void 0)wt=on(this);else if(!tt.isAnyArray(wt))throw new TypeError("scale must be an array");return yn(this,wt),this}case"column":{if(wt===void 0)wt=bn(this);else if(!tt.isAnyArray(wt))throw new TypeError("scale must be an array");return On(this,wt),this}case void 0:{if(wt===void 0)wt=Ht(this);else if(typeof wt!="number")throw new TypeError("scale must be a number");return sn(this,wt),this}default:throw new Error(`invalid option: ${bt}`)}}toString(bt){return mt(this,bt)}[Symbol.iterator](){return this.entries()}*entries(){for(let bt=0;bt<this.rows;bt++)for(let Et=0;Et<this.columns;Et++)yield[bt,Et,this.get(bt,Et)]}*values(){for(let bt=0;bt<this.rows;bt++)for(let Et=0;Et<this.columns;Et++)yield this.get(bt,Et)}}nn.prototype.klass="Matrix",typeof Symbol<"u"&&(nn.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt);function pn(zt,bt){return zt-bt}function gn(zt){return zt.every(bt=>typeof bt=="number")}nn.random=nn.rand,nn.randomInt=nn.randInt,nn.diagonal=nn.diag,nn.prototype.diagonal=nn.prototype.diag,nn.identity=nn.eye,nn.prototype.negate=nn.prototype.neg,nn.prototype.tensorProduct=nn.prototype.kroneckerProduct;class Be extends nn{data;#t(bt,Et){if(this.data=[],Number.isInteger(Et)&&Et>=0)for(let wt=0;wt<bt;wt++)this.data.push(new Float64Array(Et));else throw new TypeError("nColumns must be a positive integer");this.rows=bt,this.columns=Et}constructor(bt,Et){if(super(),Be.isMatrix(bt))this.#t(bt.rows,bt.columns),Be.copy(bt,this);else if(Number.isInteger(bt)&&bt>=0)this.#t(bt,Et);else if(tt.isAnyArray(bt)){const wt=bt;if(bt=wt.length,Et=bt?wt[0].length:0,typeof Et!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let Rt=0;Rt<bt;Rt++){if(wt[Rt].length!==Et)throw new RangeError("Inconsistent array dimensions");if(!gn(wt[Rt]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(wt[Rt]))}this.rows=bt,this.columns=Et}else throw new TypeError("First argument must be a positive number or an array")}set(bt,Et,wt){return this.data[bt][Et]=wt,this}get(bt,Et){return this.data[bt][Et]}removeRow(bt){return At(this,bt),this.data.splice(bt,1),this.rows-=1,this}addRow(bt,Et){return Et===void 0&&(Et=bt,bt=this.rows),At(this,bt,!0),Et=Float64Array.from(Ot(this,Et)),this.data.splice(bt,0,Et),this.rows+=1,this}removeColumn(bt){Ct(this,bt);for(let Et=0;Et<this.rows;Et++){const wt=new Float64Array(this.columns-1);for(let Rt=0;Rt<bt;Rt++)wt[Rt]=this.data[Et][Rt];for(let Rt=bt+1;Rt<this.columns;Rt++)wt[Rt-1]=this.data[Et][Rt];this.data[Et]=wt}return this.columns-=1,this}addColumn(bt,Et){typeof Et>"u"&&(Et=bt,bt=this.columns),Ct(this,bt,!0),Et=Dt(this,Et);for(let wt=0;wt<this.rows;wt++){const Rt=new Float64Array(this.columns+1);let $t=0;for(;$t<bt;$t++)Rt[$t]=this.data[wt][$t];for(Rt[$t++]=Et[wt];$t<this.columns+1;$t++)Rt[$t]=this.data[wt][$t-1];this.data[wt]=Rt}return this.columns+=1,this}}St(nn,Be);class xn extends nn{#t;get size(){return this.#t.size}get rows(){return this.#t.rows}get columns(){return this.#t.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(bt){return Be.isMatrix(bt)&&bt.klassType==="SymmetricMatrix"}static zeros(bt){return new this(bt)}static ones(bt){return new this(bt).fill(1)}constructor(bt){if(super(),Be.isMatrix(bt)){if(!bt.isSymmetric())throw new TypeError("not symmetric data");this.#t=Be.copy(bt,new Be(bt.rows,bt.rows))}else if(Number.isInteger(bt)&&bt>=0)this.#t=new Be(bt,bt);else if(this.#t=new Be(bt),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const bt=new xn(this.diagonalSize);for(const[Et,wt,Rt]of this.upperRightEntries())bt.set(Et,wt,Rt);return bt}toMatrix(){return new Be(this)}get(bt,Et){return this.#t.get(bt,Et)}set(bt,Et,wt){return this.#t.set(bt,Et,wt),this.#t.set(Et,bt,wt),this}removeCross(bt){return this.#t.removeRow(bt),this.#t.removeColumn(bt),this}addCross(bt,Et){Et===void 0&&(Et=bt,bt=this.diagonalSize);const wt=Et.slice();return wt.splice(bt,1),this.#t.addRow(bt,wt),this.#t.addColumn(bt,Et),this}applyMask(bt){if(bt.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const Et=[];for(const[wt,Rt]of bt.entries())Rt||Et.push(wt);Et.reverse();for(const wt of Et)this.removeCross(wt);return this}toCompact(){const{diagonalSize:bt}=this,Et=new Array(bt*(bt+1)/2);for(let wt=0,Rt=0,$t=0;$t<Et.length;$t++)Et[$t]=this.get(Rt,wt),++wt>=bt&&(wt=++Rt);return Et}static fromCompact(bt){const Et=bt.length,wt=(Math.sqrt(8*Et+1)-1)/2;if(!Number.isInteger(wt))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(bt)}`);const Rt=new xn(wt);for(let $t=0,Vt=0,qt=0;qt<Et;qt++)Rt.set($t,Vt,bt[qt]),++$t>=wt&&($t=++Vt);return Rt}*upperRightEntries(){for(let bt=0,Et=0;bt<this.diagonalSize;void 0){const wt=this.get(bt,Et);yield[bt,Et,wt],++Et>=this.diagonalSize&&(Et=++bt)}}*upperRightValues(){for(let bt=0,Et=0;bt<this.diagonalSize;void 0)yield this.get(bt,Et),++Et>=this.diagonalSize&&(Et=++bt)}}xn.prototype.klassType="SymmetricMatrix";class qn extends xn{static isDistanceMatrix(bt){return xn.isSymmetricMatrix(bt)&&bt.klassSubType==="DistanceMatrix"}constructor(bt){if(super(bt),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(bt,Et,wt){return bt===Et&&(wt=0),super.set(bt,Et,wt)}addCross(bt,Et){return Et===void 0&&(Et=bt,bt=this.diagonalSize),Et=Et.slice(),Et[bt]=0,super.addCross(bt,Et)}toSymmetricMatrix(){return new xn(this)}clone(){const bt=new qn(this.diagonalSize);for(const[Et,wt,Rt]of this.upperRightEntries())Et!==wt&&bt.set(Et,wt,Rt);return bt}toCompact(){const{diagonalSize:bt}=this,Et=(bt-1)*bt/2,wt=new Array(Et);for(let Rt=1,$t=0,Vt=0;Vt<wt.length;Vt++)wt[Vt]=this.get($t,Rt),++Rt>=bt&&(Rt=++$t+1);return wt}static fromCompact(bt){const Et=bt.length;if(Et===0)return new this(0);const wt=(Math.sqrt(8*Et+1)+1)/2;if(!Number.isInteger(wt))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(bt)}`);const Rt=new this(wt);for(let $t=1,Vt=0,qt=0;qt<Et;qt++)Rt.set($t,Vt,bt[qt]),++$t>=wt&&($t=++Vt+1);return Rt}}qn.prototype.klassSubType="DistanceMatrix";class Bn extends nn{constructor(bt,Et,wt){super(),this.matrix=bt,this.rows=Et,this.columns=wt}}class Yn extends Bn{constructor(bt,Et){Ct(bt,Et),super(bt,bt.rows,1),this.column=Et}set(bt,Et,wt){return this.matrix.set(bt,this.column,wt),this}get(bt){return this.matrix.get(bt,this.column)}}class Kn extends Bn{constructor(bt,Et){Xt(bt,Et),super(bt,bt.rows,Et.length),this.columnIndices=Et}set(bt,Et,wt){return this.matrix.set(bt,this.columnIndices[Et],wt),this}get(bt,Et){return this.matrix.get(bt,this.columnIndices[Et])}}class Qn extends Bn{constructor(bt){super(bt,bt.rows,bt.columns)}set(bt,Et,wt){return this.matrix.set(bt,this.columns-Et-1,wt),this}get(bt,Et){return this.matrix.get(bt,this.columns-Et-1)}}class Jn extends Bn{constructor(bt){super(bt,bt.rows,bt.columns)}set(bt,Et,wt){return this.matrix.set(this.rows-bt-1,Et,wt),this}get(bt,Et){return this.matrix.get(this.rows-bt-1,Et)}}class ei extends Bn{constructor(bt,Et){At(bt,Et),super(bt,1,bt.columns),this.row=Et}set(bt,Et,wt){return this.matrix.set(this.row,Et,wt),this}get(bt,Et){return this.matrix.get(this.row,Et)}}class Ln extends Bn{constructor(bt,Et){Ut(bt,Et),super(bt,Et.length,bt.columns),this.rowIndices=Et}set(bt,Et,wt){return this.matrix.set(this.rowIndices[bt],Et,wt),this}get(bt,Et){return this.matrix.get(this.rowIndices[bt],Et)}}class An extends Bn{constructor(bt,Et,wt){Ut(bt,Et),Xt(bt,wt),super(bt,Et.length,wt.length),this.rowIndices=Et,this.columnIndices=wt}set(bt,Et,wt){return this.matrix.set(this.rowIndices[bt],this.columnIndices[Et],wt),this}get(bt,Et){return this.matrix.get(this.rowIndices[bt],this.columnIndices[Et])}}class gi extends Bn{constructor(bt,Et,wt,Rt,$t){Pt(bt,Et,wt,Rt,$t),super(bt,wt-Et+1,$t-Rt+1),this.startRow=Et,this.startColumn=Rt}set(bt,Et,wt){return this.matrix.set(this.startRow+bt,this.startColumn+Et,wt),this}get(bt,Et){return this.matrix.get(this.startRow+bt,this.startColumn+Et)}}class Xn extends Bn{constructor(bt){super(bt,bt.columns,bt.rows)}set(bt,Et,wt){return this.matrix.set(Et,bt,wt),this}get(bt,Et){return this.matrix.get(Et,bt)}}class ri extends nn{constructor(bt,Et={}){const{rows:wt=1}=Et;if(bt.length%wt!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=wt,this.columns=bt.length/wt,this.data=bt}set(bt,Et,wt){let Rt=this._calculateIndex(bt,Et);return this.data[Rt]=wt,this}get(bt,Et){let wt=this._calculateIndex(bt,Et);return this.data[wt]}_calculateIndex(bt,Et){return bt*this.columns+Et}}class cn extends nn{constructor(bt){super(),this.data=bt,this.rows=bt.length,this.columns=bt[0].length}set(bt,Et,wt){return this.data[bt][Et]=wt,this}get(bt,Et){return this.data[bt][Et]}}function Pn(zt,bt){if(tt.isAnyArray(zt))return zt[0]&&tt.isAnyArray(zt[0])?new cn(zt):new ri(zt,bt);throw new Error("the argument is not an array")}class Vn{constructor(bt){bt=cn.checkMatrix(bt);let Et=bt.clone(),wt=Et.rows,Rt=Et.columns,$t=new Float64Array(wt),Vt=1,qt,Gt,Yt,en,de,mn,Cn,hn,wn;for(qt=0;qt<wt;qt++)$t[qt]=qt;for(hn=new Float64Array(wt),Gt=0;Gt<Rt;Gt++){for(qt=0;qt<wt;qt++)hn[qt]=Et.get(qt,Gt);for(qt=0;qt<wt;qt++){for(wn=Math.min(qt,Gt),de=0,Yt=0;Yt<wn;Yt++)de+=Et.get(qt,Yt)*hn[Yt];hn[qt]-=de,Et.set(qt,Gt,hn[qt])}for(en=Gt,qt=Gt+1;qt<wt;qt++)Math.abs(hn[qt])>Math.abs(hn[en])&&(en=qt);if(en!==Gt){for(Yt=0;Yt<Rt;Yt++)mn=Et.get(en,Yt),Et.set(en,Yt,Et.get(Gt,Yt)),Et.set(Gt,Yt,mn);Cn=$t[en],$t[en]=$t[Gt],$t[Gt]=Cn,Vt=-Vt}if(Gt<wt&&Et.get(Gt,Gt)!==0)for(qt=Gt+1;qt<wt;qt++)Et.set(qt,Gt,Et.get(qt,Gt)/Et.get(Gt,Gt))}this.LU=Et,this.pivotVector=$t,this.pivotSign=Vt}isSingular(){let bt=this.LU,Et=bt.columns;for(let wt=0;wt<Et;wt++)if(bt.get(wt,wt)===0)return!0;return!1}solve(bt){bt=Be.checkMatrix(bt);let Et=this.LU;if(Et.rows!==bt.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let Rt=bt.columns,$t=bt.subMatrixRow(this.pivotVector,0,Rt-1),Vt=Et.columns,qt,Gt,Yt;for(Yt=0;Yt<Vt;Yt++)for(qt=Yt+1;qt<Vt;qt++)for(Gt=0;Gt<Rt;Gt++)$t.set(qt,Gt,$t.get(qt,Gt)-$t.get(Yt,Gt)*Et.get(qt,Yt));for(Yt=Vt-1;Yt>=0;Yt--){for(Gt=0;Gt<Rt;Gt++)$t.set(Yt,Gt,$t.get(Yt,Gt)/Et.get(Yt,Yt));for(qt=0;qt<Yt;qt++)for(Gt=0;Gt<Rt;Gt++)$t.set(qt,Gt,$t.get(qt,Gt)-$t.get(Yt,Gt)*Et.get(qt,Yt))}return $t}get determinant(){let bt=this.LU;if(!bt.isSquare())throw new Error("Matrix must be square");let Et=this.pivotSign,wt=bt.columns;for(let Rt=0;Rt<wt;Rt++)Et*=bt.get(Rt,Rt);return Et}get lowerTriangularMatrix(){let bt=this.LU,Et=bt.rows,wt=bt.columns,Rt=new Be(Et,wt);for(let $t=0;$t<Et;$t++)for(let Vt=0;Vt<wt;Vt++)$t>Vt?Rt.set($t,Vt,bt.get($t,Vt)):$t===Vt?Rt.set($t,Vt,1):Rt.set($t,Vt,0);return Rt}get upperTriangularMatrix(){let bt=this.LU,Et=bt.rows,wt=bt.columns,Rt=new Be(Et,wt);for(let $t=0;$t<Et;$t++)for(let Vt=0;Vt<wt;Vt++)$t<=Vt?Rt.set($t,Vt,bt.get($t,Vt)):Rt.set($t,Vt,0);return Rt}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Gn(zt,bt){let Et=0;return Math.abs(zt)>Math.abs(bt)?(Et=bt/zt,Math.abs(zt)*Math.sqrt(1+Et*Et)):bt!==0?(Et=zt/bt,Math.abs(bt)*Math.sqrt(1+Et*Et)):0}class ai{constructor(bt){bt=cn.checkMatrix(bt);let Et=bt.clone(),wt=bt.rows,Rt=bt.columns,$t=new Float64Array(Rt),Vt,qt,Gt,Yt;for(Gt=0;Gt<Rt;Gt++){let en=0;for(Vt=Gt;Vt<wt;Vt++)en=Gn(en,Et.get(Vt,Gt));if(en!==0){for(Et.get(Gt,Gt)<0&&(en=-en),Vt=Gt;Vt<wt;Vt++)Et.set(Vt,Gt,Et.get(Vt,Gt)/en);for(Et.set(Gt,Gt,Et.get(Gt,Gt)+1),qt=Gt+1;qt<Rt;qt++){for(Yt=0,Vt=Gt;Vt<wt;Vt++)Yt+=Et.get(Vt,Gt)*Et.get(Vt,qt);for(Yt=-Yt/Et.get(Gt,Gt),Vt=Gt;Vt<wt;Vt++)Et.set(Vt,qt,Et.get(Vt,qt)+Yt*Et.get(Vt,Gt))}}$t[Gt]=-en}this.QR=Et,this.Rdiag=$t}solve(bt){bt=Be.checkMatrix(bt);let Et=this.QR,wt=Et.rows;if(bt.rows!==wt)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let Rt=bt.columns,$t=bt.clone(),Vt=Et.columns,qt,Gt,Yt,en;for(Yt=0;Yt<Vt;Yt++)for(Gt=0;Gt<Rt;Gt++){for(en=0,qt=Yt;qt<wt;qt++)en+=Et.get(qt,Yt)*$t.get(qt,Gt);for(en=-en/Et.get(Yt,Yt),qt=Yt;qt<wt;qt++)$t.set(qt,Gt,$t.get(qt,Gt)+en*Et.get(qt,Yt))}for(Yt=Vt-1;Yt>=0;Yt--){for(Gt=0;Gt<Rt;Gt++)$t.set(Yt,Gt,$t.get(Yt,Gt)/this.Rdiag[Yt]);for(qt=0;qt<Yt;qt++)for(Gt=0;Gt<Rt;Gt++)$t.set(qt,Gt,$t.get(qt,Gt)-$t.get(Yt,Gt)*Et.get(qt,Yt))}return $t.subMatrix(0,Vt-1,0,Rt-1)}isFullRank(){let bt=this.QR.columns;for(let Et=0;Et<bt;Et++)if(this.Rdiag[Et]===0)return!1;return!0}get upperTriangularMatrix(){let bt=this.QR,Et=bt.columns,wt=new Be(Et,Et),Rt,$t;for(Rt=0;Rt<Et;Rt++)for($t=0;$t<Et;$t++)Rt<$t?wt.set(Rt,$t,bt.get(Rt,$t)):Rt===$t?wt.set(Rt,$t,this.Rdiag[Rt]):wt.set(Rt,$t,0);return wt}get orthogonalMatrix(){let bt=this.QR,Et=bt.rows,wt=bt.columns,Rt=new Be(Et,wt),$t,Vt,qt,Gt;for(qt=wt-1;qt>=0;qt--){for($t=0;$t<Et;$t++)Rt.set($t,qt,0);for(Rt.set(qt,qt,1),Vt=qt;Vt<wt;Vt++)if(bt.get(qt,qt)!==0){for(Gt=0,$t=qt;$t<Et;$t++)Gt+=bt.get($t,qt)*Rt.get($t,Vt);for(Gt=-Gt/bt.get(qt,qt),$t=qt;$t<Et;$t++)Rt.set($t,Vt,Rt.get($t,Vt)+Gt*bt.get($t,qt))}}return Rt}}class oi{constructor(bt,Et={}){if(bt=cn.checkMatrix(bt),bt.isEmpty())throw new Error("Matrix must be non-empty");let wt=bt.rows,Rt=bt.columns;const{computeLeftSingularVectors:$t=!0,computeRightSingularVectors:Vt=!0,autoTranspose:qt=!1}=Et;let Gt=!!$t,Yt=!!Vt,en=!1,de;if(wt<Rt)if(!qt)de=bt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{de=bt.transpose(),wt=de.rows,Rt=de.columns,en=!0;let tn=Gt;Gt=Yt,Yt=tn}else de=bt.clone();let mn=Math.min(wt,Rt),Cn=Math.min(wt+1,Rt),hn=new Float64Array(Cn),wn=new Be(wt,mn),jn=new Be(Rt,Rt),Le=new Float64Array(Rt),Tn=new Float64Array(wt),Un=new Float64Array(Cn);for(let tn=0;tn<Cn;tn++)Un[tn]=tn;let Wn=Math.min(wt-1,Rt),ni=Math.max(0,Math.min(Rt-2,wt)),pi=Math.max(Wn,ni);for(let tn=0;tn<pi;tn++){if(tn<Wn){hn[tn]=0;for(let Rn=tn;Rn<wt;Rn++)hn[tn]=Gn(hn[tn],de.get(Rn,tn));if(hn[tn]!==0){de.get(tn,tn)<0&&(hn[tn]=-hn[tn]);for(let Rn=tn;Rn<wt;Rn++)de.set(Rn,tn,de.get(Rn,tn)/hn[tn]);de.set(tn,tn,de.get(tn,tn)+1)}hn[tn]=-hn[tn]}for(let Rn=tn+1;Rn<Rt;Rn++){if(tn<Wn&&hn[tn]!==0){let In=0;for(let _n=tn;_n<wt;_n++)In+=de.get(_n,tn)*de.get(_n,Rn);In=-In/de.get(tn,tn);for(let _n=tn;_n<wt;_n++)de.set(_n,Rn,de.get(_n,Rn)+In*de.get(_n,tn))}Le[Rn]=de.get(tn,Rn)}if(Gt&&tn<Wn)for(let Rn=tn;Rn<wt;Rn++)wn.set(Rn,tn,de.get(Rn,tn));if(tn<ni){Le[tn]=0;for(let Rn=tn+1;Rn<Rt;Rn++)Le[tn]=Gn(Le[tn],Le[Rn]);if(Le[tn]!==0){Le[tn+1]<0&&(Le[tn]=0-Le[tn]);for(let Rn=tn+1;Rn<Rt;Rn++)Le[Rn]/=Le[tn];Le[tn+1]+=1}if(Le[tn]=-Le[tn],tn+1<wt&&Le[tn]!==0){for(let Rn=tn+1;Rn<wt;Rn++)Tn[Rn]=0;for(let Rn=tn+1;Rn<wt;Rn++)for(let In=tn+1;In<Rt;In++)Tn[Rn]+=Le[In]*de.get(Rn,In);for(let Rn=tn+1;Rn<Rt;Rn++){let In=-Le[Rn]/Le[tn+1];for(let _n=tn+1;_n<wt;_n++)de.set(_n,Rn,de.get(_n,Rn)+In*Tn[_n])}}if(Yt)for(let Rn=tn+1;Rn<Rt;Rn++)jn.set(Rn,tn,Le[Rn])}}let Zn=Math.min(Rt,wt+1);if(Wn<Rt&&(hn[Wn]=de.get(Wn,Wn)),wt<Zn&&(hn[Zn-1]=0),ni+1<Zn&&(Le[ni]=de.get(ni,Zn-1)),Le[Zn-1]=0,Gt){for(let tn=Wn;tn<mn;tn++){for(let Rn=0;Rn<wt;Rn++)wn.set(Rn,tn,0);wn.set(tn,tn,1)}for(let tn=Wn-1;tn>=0;tn--)if(hn[tn]!==0){for(let Rn=tn+1;Rn<mn;Rn++){let In=0;for(let _n=tn;_n<wt;_n++)In+=wn.get(_n,tn)*wn.get(_n,Rn);In=-In/wn.get(tn,tn);for(let _n=tn;_n<wt;_n++)wn.set(_n,Rn,wn.get(_n,Rn)+In*wn.get(_n,tn))}for(let Rn=tn;Rn<wt;Rn++)wn.set(Rn,tn,-wn.get(Rn,tn));wn.set(tn,tn,1+wn.get(tn,tn));for(let Rn=0;Rn<tn-1;Rn++)wn.set(Rn,tn,0)}else{for(let Rn=0;Rn<wt;Rn++)wn.set(Rn,tn,0);wn.set(tn,tn,1)}}if(Yt)for(let tn=Rt-1;tn>=0;tn--){if(tn<ni&&Le[tn]!==0)for(let Rn=tn+1;Rn<Rt;Rn++){let In=0;for(let _n=tn+1;_n<Rt;_n++)In+=jn.get(_n,tn)*jn.get(_n,Rn);In=-In/jn.get(tn+1,tn);for(let _n=tn+1;_n<Rt;_n++)jn.set(_n,Rn,jn.get(_n,Rn)+In*jn.get(_n,tn))}for(let Rn=0;Rn<Rt;Rn++)jn.set(Rn,tn,0);jn.set(tn,tn,1)}let ti=Zn-1,bi=Number.EPSILON;for(;Zn>0;){let tn,Rn;for(tn=Zn-2;tn>=-1&&tn!==-1;tn--){const In=Number.MIN_VALUE+bi*Math.abs(hn[tn]+Math.abs(hn[tn+1]));if(Math.abs(Le[tn])<=In||Number.isNaN(Le[tn])){Le[tn]=0;break}}if(tn===Zn-2)Rn=4;else{let In;for(In=Zn-1;In>=tn&&In!==tn;In--){let _n=(In!==Zn?Math.abs(Le[In]):0)+(In!==tn+1?Math.abs(Le[In-1]):0);if(Math.abs(hn[In])<=bi*_n){hn[In]=0;break}}In===tn?Rn=3:In===Zn-1?Rn=1:(Rn=2,tn=In)}switch(tn++,Rn){case 1:{let In=Le[Zn-2];Le[Zn-2]=0;for(let _n=Zn-2;_n>=tn;_n--){let Ii=Gn(hn[_n],In),Mi=hn[_n]/Ii,Ci=In/Ii;if(hn[_n]=Ii,_n!==tn&&(In=-Ci*Le[_n-1],Le[_n-1]=Mi*Le[_n-1]),Yt)for(let Ti=0;Ti<Rt;Ti++)Ii=Mi*jn.get(Ti,_n)+Ci*jn.get(Ti,Zn-1),jn.set(Ti,Zn-1,-Ci*jn.get(Ti,_n)+Mi*jn.get(Ti,Zn-1)),jn.set(Ti,_n,Ii)}break}case 2:{let In=Le[tn-1];Le[tn-1]=0;for(let _n=tn;_n<Zn;_n++){let Ii=Gn(hn[_n],In),Mi=hn[_n]/Ii,Ci=In/Ii;if(hn[_n]=Ii,In=-Ci*Le[_n],Le[_n]=Mi*Le[_n],Gt)for(let Ti=0;Ti<wt;Ti++)Ii=Mi*wn.get(Ti,_n)+Ci*wn.get(Ti,tn-1),wn.set(Ti,tn-1,-Ci*wn.get(Ti,_n)+Mi*wn.get(Ti,tn-1)),wn.set(Ti,_n,Ii)}break}case 3:{const In=Math.max(Math.abs(hn[Zn-1]),Math.abs(hn[Zn-2]),Math.abs(Le[Zn-2]),Math.abs(hn[tn]),Math.abs(Le[tn])),_n=hn[Zn-1]/In,Ii=hn[Zn-2]/In,Mi=Le[Zn-2]/In,Ci=hn[tn]/In,Ti=Le[tn]/In,Hi=((Ii+_n)*(Ii-_n)+Mi*Mi)/2,pr=_n*Mi*(_n*Mi);let Li=0;(Hi!==0||pr!==0)&&(Hi<0?Li=0-Math.sqrt(Hi*Hi+pr):Li=Math.sqrt(Hi*Hi+pr),Li=pr/(Hi+Li));let mr=(Ci+_n)*(Ci-_n)+Li,Er=Ci*Ti;for(let Ei=tn;Ei<Zn-1;Ei++){let Ji=Gn(mr,Er);Ji===0&&(Ji=Number.MIN_VALUE);let Vi=mr/Ji,fr=Er/Ji;if(Ei!==tn&&(Le[Ei-1]=Ji),mr=Vi*hn[Ei]+fr*Le[Ei],Le[Ei]=Vi*Le[Ei]-fr*hn[Ei],Er=fr*hn[Ei+1],hn[Ei+1]=Vi*hn[Ei+1],Yt)for(let Zi=0;Zi<Rt;Zi++)Ji=Vi*jn.get(Zi,Ei)+fr*jn.get(Zi,Ei+1),jn.set(Zi,Ei+1,-fr*jn.get(Zi,Ei)+Vi*jn.get(Zi,Ei+1)),jn.set(Zi,Ei,Ji);if(Ji=Gn(mr,Er),Ji===0&&(Ji=Number.MIN_VALUE),Vi=mr/Ji,fr=Er/Ji,hn[Ei]=Ji,mr=Vi*Le[Ei]+fr*hn[Ei+1],hn[Ei+1]=-fr*Le[Ei]+Vi*hn[Ei+1],Er=fr*Le[Ei+1],Le[Ei+1]=Vi*Le[Ei+1],Gt&&Ei<wt-1)for(let Zi=0;Zi<wt;Zi++)Ji=Vi*wn.get(Zi,Ei)+fr*wn.get(Zi,Ei+1),wn.set(Zi,Ei+1,-fr*wn.get(Zi,Ei)+Vi*wn.get(Zi,Ei+1)),wn.set(Zi,Ei,Ji)}Le[Zn-2]=mr;break}case 4:{if(hn[tn]<=0&&(hn[tn]=hn[tn]<0?-hn[tn]:0,Yt))for(let In=0;In<=ti;In++)jn.set(In,tn,-jn.get(In,tn));for(;tn<ti&&!(hn[tn]>=hn[tn+1]);){let In=hn[tn];if(hn[tn]=hn[tn+1],hn[tn+1]=In,Yt&&tn<Rt-1)for(let _n=0;_n<Rt;_n++)In=jn.get(_n,tn+1),jn.set(_n,tn+1,jn.get(_n,tn)),jn.set(_n,tn,In);if(Gt&&tn<wt-1)for(let _n=0;_n<wt;_n++)In=wn.get(_n,tn+1),wn.set(_n,tn+1,wn.get(_n,tn)),wn.set(_n,tn,In);tn++}Zn--;break}}}if(en){let tn=jn;jn=wn,wn=tn}this.m=wt,this.n=Rt,this.s=hn,this.U=wn,this.V=jn}solve(bt){let Et=bt,wt=this.threshold,Rt=this.s.length,$t=Be.zeros(Rt,Rt);for(let mn=0;mn<Rt;mn++)Math.abs(this.s[mn])<=wt?$t.set(mn,mn,0):$t.set(mn,mn,1/this.s[mn]);let Vt=this.U,qt=this.rightSingularVectors,Gt=qt.mmul($t),Yt=qt.rows,en=Vt.rows,de=Be.zeros(Yt,en);for(let mn=0;mn<Yt;mn++)for(let Cn=0;Cn<en;Cn++){let hn=0;for(let wn=0;wn<Rt;wn++)hn+=Gt.get(mn,wn)*Vt.get(Cn,wn);de.set(mn,Cn,hn)}return de.mmul(Et)}solveForDiagonal(bt){return this.solve(Be.diag(bt))}inverse(){let bt=this.V,Et=this.threshold,wt=bt.rows,Rt=bt.columns,$t=new Be(wt,this.s.length);for(let en=0;en<wt;en++)for(let de=0;de<Rt;de++)Math.abs(this.s[de])>Et&&$t.set(en,de,bt.get(en,de)/this.s[de]);let Vt=this.U,qt=Vt.rows,Gt=Vt.columns,Yt=new Be(wt,qt);for(let en=0;en<wt;en++)for(let de=0;de<qt;de++){let mn=0;for(let Cn=0;Cn<Gt;Cn++)mn+=$t.get(en,Cn)*Vt.get(de,Cn);Yt.set(en,de,mn)}return Yt}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let bt=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,Et=0,wt=this.s;for(let Rt=0,$t=wt.length;Rt<$t;Rt++)wt[Rt]>bt&&Et++;return Et}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Be.diag(this.s)}}function fi(zt,bt=!1){return zt=cn.checkMatrix(zt),bt?new oi(zt).inverse():zn(zt,Be.eye(zt.rows))}function zn(zt,bt,Et=!1){return zt=cn.checkMatrix(zt),bt=cn.checkMatrix(bt),Et?new oi(zt).solve(bt):zt.isSquare()?new Vn(zt).solve(bt):new ai(zt).solve(bt)}function kn(zt){if(zt=Be.checkMatrix(zt),zt.isSquare()){if(zt.columns===0)return 1;let bt,Et,wt,Rt;if(zt.columns===2)return bt=zt.get(0,0),Et=zt.get(0,1),wt=zt.get(1,0),Rt=zt.get(1,1),bt*Rt-Et*wt;if(zt.columns===3){let $t,Vt,qt;return $t=new An(zt,[1,2],[1,2]),Vt=new An(zt,[1,2],[0,2]),qt=new An(zt,[1,2],[0,1]),bt=zt.get(0,0),Et=zt.get(0,1),wt=zt.get(0,2),bt*kn($t)-Et*kn(Vt)+wt*kn(qt)}else return new Vn(zt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Hn(zt,bt){let Et=[];for(let wt=0;wt<zt;wt++)wt!==bt&&Et.push(wt);return Et}function Nn(zt,bt,Et,wt=1e-9,Rt=1e-9){if(zt>Rt)return new Array(bt.rows+1).fill(0);{let $t=bt.addRow(Et,[0]);for(let Vt=0;Vt<$t.rows;Vt++)Math.abs($t.get(Vt,0))<wt&&$t.set(Vt,0,0);return $t.to1DArray()}}function hi(zt,bt={}){const{thresholdValue:Et=1e-9,thresholdError:wt=1e-9}=bt;zt=Be.checkMatrix(zt);let Rt=zt.rows,$t=new Be(Rt,Rt);for(let Vt=0;Vt<Rt;Vt++){let qt=Be.columnVector(zt.getRow(Vt)),Gt=zt.subMatrixRow(Hn(Rt,Vt)).transpose(),en=new oi(Gt).solve(qt),de=Be.sub(qt,Gt.mmul(en)).abs().max();$t.setRow(Vt,Nn(de,en,Vt,Et,wt))}return $t}function wi(zt,bt=Number.EPSILON){if(zt=Be.checkMatrix(zt),zt.isEmpty())return zt.transpose();let Et=new oi(zt,{autoTranspose:!0}),wt=Et.leftSingularVectors,Rt=Et.rightSingularVectors,$t=Et.diagonal;for(let Vt=0;Vt<$t.length;Vt++)Math.abs($t[Vt])>bt?$t[Vt]=1/$t[Vt]:$t[Vt]=0;return Rt.mmul(Be.diag($t).mmul(wt.transpose()))}function si(zt,bt=zt,Et={}){zt=new Be(zt);let wt=!1;if(typeof bt=="object"&&!Be.isMatrix(bt)&&!tt.isAnyArray(bt)?(Et=bt,bt=zt,wt=!0):bt=new Be(bt),zt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Rt=!0}=Et;Rt&&(zt=zt.center("column"),wt||(bt=bt.center("column")));const $t=zt.transpose().mmul(bt);for(let Vt=0;Vt<$t.rows;Vt++)for(let qt=0;qt<$t.columns;qt++)$t.set(Vt,qt,$t.get(Vt,qt)*(1/(zt.rows-1)));return $t}function xi(zt,bt=zt,Et={}){zt=new Be(zt);let wt=!1;if(typeof bt=="object"&&!Be.isMatrix(bt)&&!tt.isAnyArray(bt)?(Et=bt,bt=zt,wt=!0):bt=new Be(bt),zt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Rt=!0,scale:$t=!0}=Et;Rt&&(zt.center("column"),wt||bt.center("column")),$t&&(zt.scale("column"),wt||bt.scale("column"));const Vt=zt.standardDeviation("column",{unbiased:!0}),qt=wt?Vt:bt.standardDeviation("column",{unbiased:!0}),Gt=zt.transpose().mmul(bt);for(let Yt=0;Yt<Gt.rows;Yt++)for(let en=0;en<Gt.columns;en++)Gt.set(Yt,en,Gt.get(Yt,en)*(1/(Vt[Yt]*qt[en]))*(1/(zt.rows-1)));return Gt}class mi{constructor(bt,Et={}){const{assumeSymmetric:wt=!1}=Et;if(bt=cn.checkMatrix(bt),!bt.isSquare())throw new Error("Matrix is not a square matrix");if(bt.isEmpty())throw new Error("Matrix must be non-empty");let Rt=bt.columns,$t=new Be(Rt,Rt),Vt=new Float64Array(Rt),qt=new Float64Array(Rt),Gt=bt,Yt,en,de=!1;if(wt?de=!0:de=bt.isSymmetric(),de){for(Yt=0;Yt<Rt;Yt++)for(en=0;en<Rt;en++)$t.set(Yt,en,Gt.get(Yt,en));yi(Rt,qt,Vt,$t),Yi(Rt,qt,Vt,$t)}else{let mn=new Be(Rt,Rt),Cn=new Float64Array(Rt);for(en=0;en<Rt;en++)for(Yt=0;Yt<Rt;Yt++)mn.set(Yt,en,Gt.get(Yt,en));zi(Rt,mn,Cn,$t),cr(Rt,qt,Vt,$t,mn)}this.n=Rt,this.e=qt,this.d=Vt,this.V=$t}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let bt=this.n,Et=this.e,wt=this.d,Rt=new Be(bt,bt),$t,Vt;for($t=0;$t<bt;$t++){for(Vt=0;Vt<bt;Vt++)Rt.set($t,Vt,0);Rt.set($t,$t,wt[$t]),Et[$t]>0?Rt.set($t,$t+1,Et[$t]):Et[$t]<0&&Rt.set($t,$t-1,Et[$t])}return Rt}}function yi(zt,bt,Et,wt){let Rt,$t,Vt,qt,Gt,Yt,en,de;for(Gt=0;Gt<zt;Gt++)Et[Gt]=wt.get(zt-1,Gt);for(qt=zt-1;qt>0;qt--){for(de=0,Vt=0,Yt=0;Yt<qt;Yt++)de=de+Math.abs(Et[Yt]);if(de===0)for(bt[qt]=Et[qt-1],Gt=0;Gt<qt;Gt++)Et[Gt]=wt.get(qt-1,Gt),wt.set(qt,Gt,0),wt.set(Gt,qt,0);else{for(Yt=0;Yt<qt;Yt++)Et[Yt]/=de,Vt+=Et[Yt]*Et[Yt];for(Rt=Et[qt-1],$t=Math.sqrt(Vt),Rt>0&&($t=-$t),bt[qt]=de*$t,Vt=Vt-Rt*$t,Et[qt-1]=Rt-$t,Gt=0;Gt<qt;Gt++)bt[Gt]=0;for(Gt=0;Gt<qt;Gt++){for(Rt=Et[Gt],wt.set(Gt,qt,Rt),$t=bt[Gt]+wt.get(Gt,Gt)*Rt,Yt=Gt+1;Yt<=qt-1;Yt++)$t+=wt.get(Yt,Gt)*Et[Yt],bt[Yt]+=wt.get(Yt,Gt)*Rt;bt[Gt]=$t}for(Rt=0,Gt=0;Gt<qt;Gt++)bt[Gt]/=Vt,Rt+=bt[Gt]*Et[Gt];for(en=Rt/(Vt+Vt),Gt=0;Gt<qt;Gt++)bt[Gt]-=en*Et[Gt];for(Gt=0;Gt<qt;Gt++){for(Rt=Et[Gt],$t=bt[Gt],Yt=Gt;Yt<=qt-1;Yt++)wt.set(Yt,Gt,wt.get(Yt,Gt)-(Rt*bt[Yt]+$t*Et[Yt]));Et[Gt]=wt.get(qt-1,Gt),wt.set(qt,Gt,0)}}Et[qt]=Vt}for(qt=0;qt<zt-1;qt++){if(wt.set(zt-1,qt,wt.get(qt,qt)),wt.set(qt,qt,1),Vt=Et[qt+1],Vt!==0){for(Yt=0;Yt<=qt;Yt++)Et[Yt]=wt.get(Yt,qt+1)/Vt;for(Gt=0;Gt<=qt;Gt++){for($t=0,Yt=0;Yt<=qt;Yt++)$t+=wt.get(Yt,qt+1)*wt.get(Yt,Gt);for(Yt=0;Yt<=qt;Yt++)wt.set(Yt,Gt,wt.get(Yt,Gt)-$t*Et[Yt])}}for(Yt=0;Yt<=qt;Yt++)wt.set(Yt,qt+1,0)}for(Gt=0;Gt<zt;Gt++)Et[Gt]=wt.get(zt-1,Gt),wt.set(zt-1,Gt,0);wt.set(zt-1,zt-1,1),bt[0]=0}function Yi(zt,bt,Et,wt){let Rt,$t,Vt,qt,Gt,Yt,en,de,mn,Cn,hn,wn,jn,Le,Tn,Un;for(Vt=1;Vt<zt;Vt++)bt[Vt-1]=bt[Vt];bt[zt-1]=0;let Wn=0,ni=0,pi=Number.EPSILON;for(Yt=0;Yt<zt;Yt++){for(ni=Math.max(ni,Math.abs(Et[Yt])+Math.abs(bt[Yt])),en=Yt;en<zt&&!(Math.abs(bt[en])<=pi*ni);)en++;if(en>Yt)do{for(Rt=Et[Yt],de=(Et[Yt+1]-Rt)/(2*bt[Yt]),mn=Gn(de,1),de<0&&(mn=-mn),Et[Yt]=bt[Yt]/(de+mn),Et[Yt+1]=bt[Yt]*(de+mn),Cn=Et[Yt+1],$t=Rt-Et[Yt],Vt=Yt+2;Vt<zt;Vt++)Et[Vt]-=$t;for(Wn=Wn+$t,de=Et[en],hn=1,wn=hn,jn=hn,Le=bt[Yt+1],Tn=0,Un=0,Vt=en-1;Vt>=Yt;Vt--)for(jn=wn,wn=hn,Un=Tn,Rt=hn*bt[Vt],$t=hn*de,mn=Gn(de,bt[Vt]),bt[Vt+1]=Tn*mn,Tn=bt[Vt]/mn,hn=de/mn,de=hn*Et[Vt]-Tn*Rt,Et[Vt+1]=$t+Tn*(hn*Rt+Tn*Et[Vt]),Gt=0;Gt<zt;Gt++)$t=wt.get(Gt,Vt+1),wt.set(Gt,Vt+1,Tn*wt.get(Gt,Vt)+hn*$t),wt.set(Gt,Vt,hn*wt.get(Gt,Vt)-Tn*$t);de=-Tn*Un*jn*Le*bt[Yt]/Cn,bt[Yt]=Tn*de,Et[Yt]=hn*de}while(Math.abs(bt[Yt])>pi*ni);Et[Yt]=Et[Yt]+Wn,bt[Yt]=0}for(Vt=0;Vt<zt-1;Vt++){for(Gt=Vt,de=Et[Vt],qt=Vt+1;qt<zt;qt++)Et[qt]<de&&(Gt=qt,de=Et[qt]);if(Gt!==Vt)for(Et[Gt]=Et[Vt],Et[Vt]=de,qt=0;qt<zt;qt++)de=wt.get(qt,Vt),wt.set(qt,Vt,wt.get(qt,Gt)),wt.set(qt,Gt,de)}}function zi(zt,bt,Et,wt){let Rt=0,$t=zt-1,Vt,qt,Gt,Yt,en,de,mn;for(de=Rt+1;de<=$t-1;de++){for(mn=0,Yt=de;Yt<=$t;Yt++)mn=mn+Math.abs(bt.get(Yt,de-1));if(mn!==0){for(Gt=0,Yt=$t;Yt>=de;Yt--)Et[Yt]=bt.get(Yt,de-1)/mn,Gt+=Et[Yt]*Et[Yt];for(qt=Math.sqrt(Gt),Et[de]>0&&(qt=-qt),Gt=Gt-Et[de]*qt,Et[de]=Et[de]-qt,en=de;en<zt;en++){for(Vt=0,Yt=$t;Yt>=de;Yt--)Vt+=Et[Yt]*bt.get(Yt,en);for(Vt=Vt/Gt,Yt=de;Yt<=$t;Yt++)bt.set(Yt,en,bt.get(Yt,en)-Vt*Et[Yt])}for(Yt=0;Yt<=$t;Yt++){for(Vt=0,en=$t;en>=de;en--)Vt+=Et[en]*bt.get(Yt,en);for(Vt=Vt/Gt,en=de;en<=$t;en++)bt.set(Yt,en,bt.get(Yt,en)-Vt*Et[en])}Et[de]=mn*Et[de],bt.set(de,de-1,mn*qt)}}for(Yt=0;Yt<zt;Yt++)for(en=0;en<zt;en++)wt.set(Yt,en,Yt===en?1:0);for(de=$t-1;de>=Rt+1;de--)if(bt.get(de,de-1)!==0){for(Yt=de+1;Yt<=$t;Yt++)Et[Yt]=bt.get(Yt,de-1);for(en=de;en<=$t;en++){for(qt=0,Yt=de;Yt<=$t;Yt++)qt+=Et[Yt]*wt.get(Yt,en);for(qt=qt/Et[de]/bt.get(de,de-1),Yt=de;Yt<=$t;Yt++)wt.set(Yt,en,wt.get(Yt,en)+qt*Et[Yt])}}}function cr(zt,bt,Et,wt,Rt){let $t=zt-1,Vt=0,qt=zt-1,Gt=Number.EPSILON,Yt=0,en=0,de=0,mn=0,Cn=0,hn=0,wn=0,jn=0,Le,Tn,Un,Wn,ni,pi,Zn,ti,bi,tn,Rn,In,_n,Ii,Mi;for(Le=0;Le<zt;Le++)for((Le<Vt||Le>qt)&&(Et[Le]=Rt.get(Le,Le),bt[Le]=0),Tn=Math.max(Le-1,0);Tn<zt;Tn++)en=en+Math.abs(Rt.get(Le,Tn));for(;$t>=Vt;){for(Wn=$t;Wn>Vt&&(hn=Math.abs(Rt.get(Wn-1,Wn-1))+Math.abs(Rt.get(Wn,Wn)),hn===0&&(hn=en),!(Math.abs(Rt.get(Wn,Wn-1))<Gt*hn));)Wn--;if(Wn===$t)Rt.set($t,$t,Rt.get($t,$t)+Yt),Et[$t]=Rt.get($t,$t),bt[$t]=0,$t--,jn=0;else if(Wn===$t-1){if(Zn=Rt.get($t,$t-1)*Rt.get($t-1,$t),de=(Rt.get($t-1,$t-1)-Rt.get($t,$t))/2,mn=de*de+Zn,wn=Math.sqrt(Math.abs(mn)),Rt.set($t,$t,Rt.get($t,$t)+Yt),Rt.set($t-1,$t-1,Rt.get($t-1,$t-1)+Yt),ti=Rt.get($t,$t),mn>=0){for(wn=de>=0?de+wn:de-wn,Et[$t-1]=ti+wn,Et[$t]=Et[$t-1],wn!==0&&(Et[$t]=ti-Zn/wn),bt[$t-1]=0,bt[$t]=0,ti=Rt.get($t,$t-1),hn=Math.abs(ti)+Math.abs(wn),de=ti/hn,mn=wn/hn,Cn=Math.sqrt(de*de+mn*mn),de=de/Cn,mn=mn/Cn,Tn=$t-1;Tn<zt;Tn++)wn=Rt.get($t-1,Tn),Rt.set($t-1,Tn,mn*wn+de*Rt.get($t,Tn)),Rt.set($t,Tn,mn*Rt.get($t,Tn)-de*wn);for(Le=0;Le<=$t;Le++)wn=Rt.get(Le,$t-1),Rt.set(Le,$t-1,mn*wn+de*Rt.get(Le,$t)),Rt.set(Le,$t,mn*Rt.get(Le,$t)-de*wn);for(Le=Vt;Le<=qt;Le++)wn=wt.get(Le,$t-1),wt.set(Le,$t-1,mn*wn+de*wt.get(Le,$t)),wt.set(Le,$t,mn*wt.get(Le,$t)-de*wn)}else Et[$t-1]=ti+de,Et[$t]=ti+de,bt[$t-1]=wn,bt[$t]=-wn;$t=$t-2,jn=0}else{if(ti=Rt.get($t,$t),bi=0,Zn=0,Wn<$t&&(bi=Rt.get($t-1,$t-1),Zn=Rt.get($t,$t-1)*Rt.get($t-1,$t)),jn===10){for(Yt+=ti,Le=Vt;Le<=$t;Le++)Rt.set(Le,Le,Rt.get(Le,Le)-ti);hn=Math.abs(Rt.get($t,$t-1))+Math.abs(Rt.get($t-1,$t-2)),ti=bi=.75*hn,Zn=-.4375*hn*hn}if(jn===30&&(hn=(bi-ti)/2,hn=hn*hn+Zn,hn>0)){for(hn=Math.sqrt(hn),bi<ti&&(hn=-hn),hn=ti-Zn/((bi-ti)/2+hn),Le=Vt;Le<=$t;Le++)Rt.set(Le,Le,Rt.get(Le,Le)-hn);Yt+=hn,ti=bi=Zn=.964}for(jn=jn+1,ni=$t-2;ni>=Wn&&(wn=Rt.get(ni,ni),Cn=ti-wn,hn=bi-wn,de=(Cn*hn-Zn)/Rt.get(ni+1,ni)+Rt.get(ni,ni+1),mn=Rt.get(ni+1,ni+1)-wn-Cn-hn,Cn=Rt.get(ni+2,ni+1),hn=Math.abs(de)+Math.abs(mn)+Math.abs(Cn),de=de/hn,mn=mn/hn,Cn=Cn/hn,!(ni===Wn||Math.abs(Rt.get(ni,ni-1))*(Math.abs(mn)+Math.abs(Cn))<Gt*(Math.abs(de)*(Math.abs(Rt.get(ni-1,ni-1))+Math.abs(wn)+Math.abs(Rt.get(ni+1,ni+1))))));)ni--;for(Le=ni+2;Le<=$t;Le++)Rt.set(Le,Le-2,0),Le>ni+2&&Rt.set(Le,Le-3,0);for(Un=ni;Un<=$t-1&&(Ii=Un!==$t-1,Un!==ni&&(de=Rt.get(Un,Un-1),mn=Rt.get(Un+1,Un-1),Cn=Ii?Rt.get(Un+2,Un-1):0,ti=Math.abs(de)+Math.abs(mn)+Math.abs(Cn),ti!==0&&(de=de/ti,mn=mn/ti,Cn=Cn/ti)),ti!==0);Un++)if(hn=Math.sqrt(de*de+mn*mn+Cn*Cn),de<0&&(hn=-hn),hn!==0){for(Un!==ni?Rt.set(Un,Un-1,-hn*ti):Wn!==ni&&Rt.set(Un,Un-1,-Rt.get(Un,Un-1)),de=de+hn,ti=de/hn,bi=mn/hn,wn=Cn/hn,mn=mn/de,Cn=Cn/de,Tn=Un;Tn<zt;Tn++)de=Rt.get(Un,Tn)+mn*Rt.get(Un+1,Tn),Ii&&(de=de+Cn*Rt.get(Un+2,Tn),Rt.set(Un+2,Tn,Rt.get(Un+2,Tn)-de*wn)),Rt.set(Un,Tn,Rt.get(Un,Tn)-de*ti),Rt.set(Un+1,Tn,Rt.get(Un+1,Tn)-de*bi);for(Le=0;Le<=Math.min($t,Un+3);Le++)de=ti*Rt.get(Le,Un)+bi*Rt.get(Le,Un+1),Ii&&(de=de+wn*Rt.get(Le,Un+2),Rt.set(Le,Un+2,Rt.get(Le,Un+2)-de*Cn)),Rt.set(Le,Un,Rt.get(Le,Un)-de),Rt.set(Le,Un+1,Rt.get(Le,Un+1)-de*mn);for(Le=Vt;Le<=qt;Le++)de=ti*wt.get(Le,Un)+bi*wt.get(Le,Un+1),Ii&&(de=de+wn*wt.get(Le,Un+2),wt.set(Le,Un+2,wt.get(Le,Un+2)-de*Cn)),wt.set(Le,Un,wt.get(Le,Un)-de),wt.set(Le,Un+1,wt.get(Le,Un+1)-de*mn)}}}if(en!==0){for($t=zt-1;$t>=0;$t--)if(de=Et[$t],mn=bt[$t],mn===0)for(Wn=$t,Rt.set($t,$t,1),Le=$t-1;Le>=0;Le--){for(Zn=Rt.get(Le,Le)-de,Cn=0,Tn=Wn;Tn<=$t;Tn++)Cn=Cn+Rt.get(Le,Tn)*Rt.get(Tn,$t);if(bt[Le]<0)wn=Zn,hn=Cn;else if(Wn=Le,bt[Le]===0?Rt.set(Le,$t,Zn!==0?-Cn/Zn:-Cn/(Gt*en)):(ti=Rt.get(Le,Le+1),bi=Rt.get(Le+1,Le),mn=(Et[Le]-de)*(Et[Le]-de)+bt[Le]*bt[Le],pi=(ti*hn-wn*Cn)/mn,Rt.set(Le,$t,pi),Rt.set(Le+1,$t,Math.abs(ti)>Math.abs(wn)?(-Cn-Zn*pi)/ti:(-hn-bi*pi)/wn)),pi=Math.abs(Rt.get(Le,$t)),Gt*pi*pi>1)for(Tn=Le;Tn<=$t;Tn++)Rt.set(Tn,$t,Rt.get(Tn,$t)/pi)}else if(mn<0)for(Wn=$t-1,Math.abs(Rt.get($t,$t-1))>Math.abs(Rt.get($t-1,$t))?(Rt.set($t-1,$t-1,mn/Rt.get($t,$t-1)),Rt.set($t-1,$t,-(Rt.get($t,$t)-de)/Rt.get($t,$t-1))):(Mi=Dr(0,-Rt.get($t-1,$t),Rt.get($t-1,$t-1)-de,mn),Rt.set($t-1,$t-1,Mi[0]),Rt.set($t-1,$t,Mi[1])),Rt.set($t,$t-1,0),Rt.set($t,$t,1),Le=$t-2;Le>=0;Le--){for(tn=0,Rn=0,Tn=Wn;Tn<=$t;Tn++)tn=tn+Rt.get(Le,Tn)*Rt.get(Tn,$t-1),Rn=Rn+Rt.get(Le,Tn)*Rt.get(Tn,$t);if(Zn=Rt.get(Le,Le)-de,bt[Le]<0)wn=Zn,Cn=tn,hn=Rn;else if(Wn=Le,bt[Le]===0?(Mi=Dr(-tn,-Rn,Zn,mn),Rt.set(Le,$t-1,Mi[0]),Rt.set(Le,$t,Mi[1])):(ti=Rt.get(Le,Le+1),bi=Rt.get(Le+1,Le),In=(Et[Le]-de)*(Et[Le]-de)+bt[Le]*bt[Le]-mn*mn,_n=(Et[Le]-de)*2*mn,In===0&&_n===0&&(In=Gt*en*(Math.abs(Zn)+Math.abs(mn)+Math.abs(ti)+Math.abs(bi)+Math.abs(wn))),Mi=Dr(ti*Cn-wn*tn+mn*Rn,ti*hn-wn*Rn-mn*tn,In,_n),Rt.set(Le,$t-1,Mi[0]),Rt.set(Le,$t,Mi[1]),Math.abs(ti)>Math.abs(wn)+Math.abs(mn)?(Rt.set(Le+1,$t-1,(-tn-Zn*Rt.get(Le,$t-1)+mn*Rt.get(Le,$t))/ti),Rt.set(Le+1,$t,(-Rn-Zn*Rt.get(Le,$t)-mn*Rt.get(Le,$t-1))/ti)):(Mi=Dr(-Cn-bi*Rt.get(Le,$t-1),-hn-bi*Rt.get(Le,$t),wn,mn),Rt.set(Le+1,$t-1,Mi[0]),Rt.set(Le+1,$t,Mi[1]))),pi=Math.max(Math.abs(Rt.get(Le,$t-1)),Math.abs(Rt.get(Le,$t))),Gt*pi*pi>1)for(Tn=Le;Tn<=$t;Tn++)Rt.set(Tn,$t-1,Rt.get(Tn,$t-1)/pi),Rt.set(Tn,$t,Rt.get(Tn,$t)/pi)}for(Le=0;Le<zt;Le++)if(Le<Vt||Le>qt)for(Tn=Le;Tn<zt;Tn++)wt.set(Le,Tn,Rt.get(Le,Tn));for(Tn=zt-1;Tn>=Vt;Tn--)for(Le=Vt;Le<=qt;Le++){for(wn=0,Un=Vt;Un<=Math.min(Tn,qt);Un++)wn=wn+wt.get(Le,Un)*Rt.get(Un,Tn);wt.set(Le,Tn,wn)}}}function Dr(zt,bt,Et,wt){let Rt,$t;return Math.abs(Et)>Math.abs(wt)?(Rt=wt/Et,$t=Et+Rt*wt,[(zt+Rt*bt)/$t,(bt-Rt*zt)/$t]):(Rt=Et/wt,$t=wt+Rt*Et,[(Rt*zt+bt)/$t,(Rt*bt-zt)/$t])}class Xr{constructor(bt){if(bt=cn.checkMatrix(bt),!bt.isSymmetric())throw new Error("Matrix is not symmetric");let Et=bt,wt=Et.rows,Rt=new Be(wt,wt),$t=!0,Vt,qt,Gt;for(qt=0;qt<wt;qt++){let Yt=0;for(Gt=0;Gt<qt;Gt++){let en=0;for(Vt=0;Vt<Gt;Vt++)en+=Rt.get(Gt,Vt)*Rt.get(qt,Vt);en=(Et.get(qt,Gt)-en)/Rt.get(Gt,Gt),Rt.set(qt,Gt,en),Yt=Yt+en*en}for(Yt=Et.get(qt,qt)-Yt,$t&&=Yt>0,Rt.set(qt,qt,Math.sqrt(Math.max(Yt,0))),Gt=qt+1;Gt<wt;Gt++)Rt.set(qt,Gt,0)}this.L=Rt,this.positiveDefinite=$t}isPositiveDefinite(){return this.positiveDefinite}solve(bt){bt=cn.checkMatrix(bt);let Et=this.L,wt=Et.rows;if(bt.rows!==wt)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let Rt=bt.columns,$t=bt.clone(),Vt,qt,Gt;for(Gt=0;Gt<wt;Gt++)for(qt=0;qt<Rt;qt++){for(Vt=0;Vt<Gt;Vt++)$t.set(Gt,qt,$t.get(Gt,qt)-$t.get(Vt,qt)*Et.get(Gt,Vt));$t.set(Gt,qt,$t.get(Gt,qt)/Et.get(Gt,Gt))}for(Gt=wt-1;Gt>=0;Gt--)for(qt=0;qt<Rt;qt++){for(Vt=Gt+1;Vt<wt;Vt++)$t.set(Gt,qt,$t.get(Gt,qt)-$t.get(Vt,qt)*Et.get(Vt,Gt));$t.set(Gt,qt,$t.get(Gt,qt)/Et.get(Gt,Gt))}return $t}get lowerTriangularMatrix(){return this.L}}class dr{constructor(bt,Et={}){bt=cn.checkMatrix(bt);let{Y:wt}=Et;const{scaleScores:Rt=!1,maxIterations:$t=1e3,terminationCriteria:Vt=1e-10}=Et;let qt;if(wt){if(tt.isAnyArray(wt)&&typeof wt[0]=="number"?wt=Be.columnVector(wt):wt=cn.checkMatrix(wt),wt.rows!==bt.rows)throw new Error("Y should have the same number of rows as X");qt=wt.getColumnVector(0)}else qt=bt.getColumnVector(0);let Gt=1,Yt,en,de,mn;for(let Cn=0;Cn<$t&&Gt>Vt;Cn++)de=bt.transpose().mmul(qt).div(qt.transpose().mmul(qt).get(0,0)),de=de.div(de.norm()),Yt=bt.mmul(de).div(de.transpose().mmul(de).get(0,0)),Cn>0&&(Gt=Yt.clone().sub(mn).pow(2).sum()),mn=Yt.clone(),wt?(en=wt.transpose().mmul(Yt).div(Yt.transpose().mmul(Yt).get(0,0)),en=en.div(en.norm()),qt=wt.mmul(en).div(en.transpose().mmul(en).get(0,0))):qt=Yt;if(wt){let Cn=bt.transpose().mmul(Yt).div(Yt.transpose().mmul(Yt).get(0,0));Cn=Cn.div(Cn.norm());let hn=bt.clone().sub(Yt.clone().mmul(Cn.transpose())),wn=qt.transpose().mmul(Yt).div(Yt.transpose().mmul(Yt).get(0,0)),jn=wt.clone().sub(Yt.clone().mulS(wn.get(0,0)).mmul(en.transpose()));this.t=Yt,this.p=Cn.transpose(),this.w=de.transpose(),this.q=en,this.u=qt,this.s=Yt.transpose().mmul(Yt),this.xResidual=hn,this.yResidual=jn,this.betas=wn}else this.w=de.transpose(),this.s=Yt.transpose().mmul(Yt).sqrt(),Rt?this.t=Yt.clone().div(this.s.get(0,0)):this.t=Yt,this.xResidual=bt.sub(Yt.mmul(de.transpose()))}}return matrix$1.AbstractMatrix=nn,matrix$1.CHO=Xr,matrix$1.CholeskyDecomposition=Xr,matrix$1.DistanceMatrix=qn,matrix$1.EVD=mi,matrix$1.EigenvalueDecomposition=mi,matrix$1.LU=Vn,matrix$1.LuDecomposition=Vn,matrix$1.Matrix=Be,matrix$1.MatrixColumnSelectionView=Kn,matrix$1.MatrixColumnView=Yn,matrix$1.MatrixFlipColumnView=Qn,matrix$1.MatrixFlipRowView=Jn,matrix$1.MatrixRowSelectionView=Ln,matrix$1.MatrixRowView=ei,matrix$1.MatrixSelectionView=An,matrix$1.MatrixSubView=gi,matrix$1.MatrixTransposeView=Xn,matrix$1.NIPALS=dr,matrix$1.Nipals=dr,matrix$1.QR=ai,matrix$1.QrDecomposition=ai,matrix$1.SVD=oi,matrix$1.SingularValueDecomposition=oi,matrix$1.SymmetricMatrix=xn,matrix$1.WrapperMatrix1D=ri,matrix$1.WrapperMatrix2D=cn,matrix$1.correlation=xi,matrix$1.covariance=si,matrix$1.default=Be,matrix$1.determinant=kn,matrix$1.inverse=fi,matrix$1.linearDependencies=hi,matrix$1.pseudoInverse=wi,matrix$1.solve=zn,matrix$1.wrap=Pn,matrix$1}var matrixExports=requireMatrix();const matrix=getDefaultExportFromCjs(matrixExports),EigenvalueDecomposition=matrixExports.EigenvalueDecomposition,Matrix=matrixExports.Matrix,SVD=matrixExports.SVD;matrix.Matrix?matrix.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,pseudoInverse=matrixExports.pseudoInverse;var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,(function(tt){(function(){function nt(gt){for(var mt=0,yt=gt.length-1,_t=void 0,Tt=void 0,St=void 0,At=ft(mt,yt);;){if(yt<=mt)return gt[At];if(yt==mt+1)return gt[mt]>gt[yt]&&ot(gt,mt,yt),gt[At];for(_t=ft(mt,yt),gt[_t]>gt[yt]&&ot(gt,_t,yt),gt[mt]>gt[yt]&&ot(gt,mt,yt),gt[_t]>gt[mt]&&ot(gt,_t,mt),ot(gt,_t,mt+1),Tt=mt+1,St=yt;;){do Tt++;while(gt[mt]>gt[Tt]);do St--;while(gt[St]>gt[mt]);if(St<Tt)break;ot(gt,Tt,St)}ot(gt,mt,St),St<=At&&(mt=Tt),St>=At&&(yt=St-1)}}var ot=function(mt,yt,_t){var Tt;return Tt=[mt[_t],mt[yt]],mt[yt]=Tt[0],mt[_t]=Tt[1],Tt},ft=function(mt,yt){return~~((mt+yt)/2)};tt.exports?tt.exports=nt:window.median=nt})()})(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function difference(tt,nt){return{column:tt.column-nt.column,row:tt.row-nt.row}}function normalize(tt){const nt=Math.hypot(tt.column,tt.row);return{column:tt.column/nt,row:tt.row/nt}}function rotate$1(tt,nt){const ot=[],ft=Math.cos(tt),gt=Math.sin(tt);for(const mt of nt)ot.push({column:ft*mt.column-gt*mt.row,row:gt*mt.column+ft*mt.row});return ot}function getAngle(tt,nt){const ot=difference(nt,tt),ft=normalize(ot),gt=Math.acos(ft.column);return ft.row<0?-gt:gt}function toDegrees(tt){return tt*180/Math.PI}function getRadius(tt){if(tt%2!==1||tt<0)throw new RangeError("size must be positive and odd");return(tt-1)/2}const t$2=Symbol.for("@ts-pattern/matcher"),e$2=Symbol.for("@ts-pattern/isVariadic"),n$2="@ts-pattern/anonymous-select-key",r$2=tt=>!!(tt&&typeof tt=="object"),i$2=tt=>tt&&!!tt[t$2],o$2=(tt,nt,ot)=>{if(i$2(tt)){const ft=tt[t$2](),{matched:gt,selections:mt}=ft.match(nt);return gt&&mt&&Object.keys(mt).forEach(yt=>ot(yt,mt[yt])),gt}if(r$2(tt)){if(!r$2(nt))return!1;if(Array.isArray(tt)){if(!Array.isArray(nt))return!1;let ft=[],gt=[],mt=[];for(const yt of tt.keys()){const _t=tt[yt];i$2(_t)&&_t[e$2]?mt.push(_t):mt.length?gt.push(_t):ft.push(_t)}if(mt.length){if(mt.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(nt.length<ft.length+gt.length)return!1;const yt=nt.slice(0,ft.length),_t=gt.length===0?[]:nt.slice(-gt.length),Tt=nt.slice(ft.length,gt.length===0?1/0:-gt.length);return ft.every((St,At)=>o$2(St,yt[At],ot))&&gt.every((St,At)=>o$2(St,_t[At],ot))&&(mt.length===0||o$2(mt[0],Tt,ot))}return tt.length===nt.length&&tt.every((yt,_t)=>o$2(yt,nt[_t],ot))}return Reflect.ownKeys(tt).every(ft=>{const gt=tt[ft];return(ft in nt||i$2(mt=gt)&&mt[t$2]().matcherType==="optional")&&o$2(gt,nt[ft],ot);var mt})}return Object.is(nt,tt)},s$1=tt=>{var nt,ot,ft;return r$2(tt)?i$2(tt)?(nt=(ot=(ft=tt[t$2]()).getSelectionKeys)==null?void 0:ot.call(ft))!=null?nt:[]:Array.isArray(tt)?c$1(tt,s$1):c$1(Object.values(tt),s$1):[]},c$1=(tt,nt)=>tt.reduce((ot,ft)=>ot.concat(nt(ft)),[]);function u$2(tt){return Object.assign(tt,{optional:()=>l$2(tt),and:nt=>m$1(tt,nt),or:nt=>d$1(tt,nt),select:nt=>nt===void 0?y$1(tt):y$1(nt,tt)})}function l$2(tt){return u$2({[t$2]:()=>({match:nt=>{let ot={};const ft=(gt,mt)=>{ot[gt]=mt};return nt===void 0?(s$1(tt).forEach(gt=>ft(gt,void 0)),{matched:!0,selections:ot}):{matched:o$2(tt,nt,ft),selections:ot}},getSelectionKeys:()=>s$1(tt),matcherType:"optional"})})}function m$1(...tt){return u$2({[t$2]:()=>({match:nt=>{let ot={};const ft=(gt,mt)=>{ot[gt]=mt};return{matched:tt.every(gt=>o$2(gt,nt,ft)),selections:ot}},getSelectionKeys:()=>c$1(tt,s$1),matcherType:"and"})})}function d$1(...tt){return u$2({[t$2]:()=>({match:nt=>{let ot={};const ft=(gt,mt)=>{ot[gt]=mt};return c$1(tt,s$1).forEach(gt=>ft(gt,void 0)),{matched:tt.some(gt=>o$2(gt,nt,ft)),selections:ot}},getSelectionKeys:()=>c$1(tt,s$1),matcherType:"or"})})}function p$2(tt){return{[t$2]:()=>({match:nt=>({matched:!!tt(nt)})})}}function y$1(...tt){const nt=typeof tt[0]=="string"?tt[0]:void 0,ot=tt.length===2?tt[1]:typeof tt[0]=="string"?void 0:tt[0];return u$2({[t$2]:()=>({match:ft=>{let gt={[nt??n$2]:ft};return{matched:ot===void 0||o$2(ot,ft,(mt,yt)=>{gt[mt]=yt}),selections:gt}},getSelectionKeys:()=>[nt??n$2].concat(ot===void 0?[]:s$1(ot))})})}function v$1(tt){return typeof tt=="number"}function b$2(tt){return typeof tt=="string"}function w$2(tt){return typeof tt=="bigint"}u$2(p$2(function(tt){return!0}));const j$1=tt=>Object.assign(u$2(tt),{startsWith:nt=>{return j$1(m$1(tt,(ot=nt,p$2(ft=>b$2(ft)&&ft.startsWith(ot)))));var ot},endsWith:nt=>{return j$1(m$1(tt,(ot=nt,p$2(ft=>b$2(ft)&&ft.endsWith(ot)))));var ot},minLength:nt=>j$1(m$1(tt,(ot=>p$2(ft=>b$2(ft)&&ft.length>=ot))(nt))),length:nt=>j$1(m$1(tt,(ot=>p$2(ft=>b$2(ft)&&ft.length===ot))(nt))),maxLength:nt=>j$1(m$1(tt,(ot=>p$2(ft=>b$2(ft)&&ft.length<=ot))(nt))),includes:nt=>{return j$1(m$1(tt,(ot=nt,p$2(ft=>b$2(ft)&&ft.includes(ot)))));var ot},regex:nt=>{return j$1(m$1(tt,(ot=nt,p$2(ft=>b$2(ft)&&!!ft.match(ot)))));var ot}});j$1(p$2(b$2));const x$2=tt=>Object.assign(u$2(tt),{between:(nt,ot)=>x$2(m$1(tt,((ft,gt)=>p$2(mt=>v$1(mt)&&ft<=mt&&gt>=mt))(nt,ot))),lt:nt=>x$2(m$1(tt,(ot=>p$2(ft=>v$1(ft)&&ft<ot))(nt))),gt:nt=>x$2(m$1(tt,(ot=>p$2(ft=>v$1(ft)&&ft>ot))(nt))),lte:nt=>x$2(m$1(tt,(ot=>p$2(ft=>v$1(ft)&&ft<=ot))(nt))),gte:nt=>x$2(m$1(tt,(ot=>p$2(ft=>v$1(ft)&&ft>=ot))(nt))),int:()=>x$2(m$1(tt,p$2(nt=>v$1(nt)&&Number.isInteger(nt)))),finite:()=>x$2(m$1(tt,p$2(nt=>v$1(nt)&&Number.isFinite(nt)))),positive:()=>x$2(m$1(tt,p$2(nt=>v$1(nt)&&nt>0))),negative:()=>x$2(m$1(tt,p$2(nt=>v$1(nt)&&nt<0)))});x$2(p$2(v$1));const A=tt=>Object.assign(u$2(tt),{between:(nt,ot)=>A(m$1(tt,((ft,gt)=>p$2(mt=>w$2(mt)&&ft<=mt&&gt>=mt))(nt,ot))),lt:nt=>A(m$1(tt,(ot=>p$2(ft=>w$2(ft)&&ft<ot))(nt))),gt:nt=>A(m$1(tt,(ot=>p$2(ft=>w$2(ft)&&ft>ot))(nt))),lte:nt=>A(m$1(tt,(ot=>p$2(ft=>w$2(ft)&&ft<=ot))(nt))),gte:nt=>A(m$1(tt,(ot=>p$2(ft=>w$2(ft)&&ft>=ot))(nt))),positive:()=>A(m$1(tt,p$2(nt=>w$2(nt)&&nt>0))),negative:()=>A(m$1(tt,p$2(nt=>w$2(nt)&&nt<0)))});A(p$2(w$2));u$2(p$2(function(tt){return typeof tt=="boolean"}));u$2(p$2(function(tt){return typeof tt=="symbol"}));u$2(p$2(function(tt){return tt==null}));u$2(p$2(function(tt){return tt!=null}));class W extends Error{constructor(nt){let ot;try{ot=JSON.stringify(nt)}catch{ot=nt}super(`Pattern matching error: no pattern matches value ${ot}`),this.input=void 0,this.input=nt}}const $$1={matched:!1,value:void 0};function z(tt){return new I(tt,$$1)}class I{constructor(nt,ot){this.input=void 0,this.state=void 0,this.input=nt,this.state=ot}with(...nt){if(this.state.matched)return this;const ot=nt[nt.length-1],ft=[nt[0]];let gt;nt.length===3&&typeof nt[1]=="function"?gt=nt[1]:nt.length>2&&ft.push(...nt.slice(1,nt.length-1));let mt=!1,yt={};const _t=(St,At)=>{mt=!0,yt[St]=At},Tt=!ft.some(St=>o$2(St,this.input,_t))||gt&&!gt(this.input)?$$1:{matched:!0,value:ot(mt?n$2 in yt?yt[n$2]:yt:this.input,this.input)};return new I(this.input,Tt)}when(nt,ot){if(this.state.matched)return this;const ft=!!nt(this.input);return new I(this.input,ft?{matched:!0,value:ot(this.input,this.input)}:$$1)}otherwise(nt){return this.state.matched?this.state.value:nt(this.input)}exhaustive(nt=L){return this.state.matched?this.state.value:nt(this.input)}run(){return this.exhaustive()}returnType(){return this}narrow(){return this}}function L(tt){throw new W(tt)}function T(tt,nt,ot,ft,gt){const mt=Math.abs(ot-tt),yt=tt<ot?1:-1,_t=-Math.abs(ft-nt),Tt=nt<ft?1:-1;let St=mt+_t,At;for(;;){if(gt(tt,nt),At=2*St,At>=_t){if(tt===ot)break;St+=_t,tt+=yt}if(At<=mt){if(nt===ft)break;St+=mt,nt+=Tt}}}function x$1(tt,nt,ot,ft){var gt=-ot,mt=0,yt=2-2*ot;do ft(tt-gt,nt+mt),ft(tt-mt,nt-gt),ft(tt+gt,nt-mt),ft(tt+mt,nt+gt),ot=yt,ot<=mt&&(yt+=++mt*2+1),(ot>gt||yt>mt)&&(yt+=++gt*2+1);while(gt<0)}function deleteDuplicates(tt){const nt=[];for(let ot=0;ot<tt.length;ot++)tt[ot].column===tt[(ot+1)%tt.length].column&&tt[ot].row===tt[(ot+1)%tt.length].row||nt.push(tt[ot]);return nt}function getIndex(tt,nt,ot,ft=0){return(nt*ot.width+tt)*ot.channels+ft}const formatter=new Intl.ListFormat("en",{type:"disjunction"});function checkProcessable(tt,nt={}){let{bitDepth:ot,alpha:ft,colorModel:gt,components:mt,channels:yt}=nt;if(ot&&(Array.isArray(ot)||(ot=[ot]),!ot.includes(tt.bitDepth)))throw new RangeError(`image bitDepth must be ${format(ot)} to apply this algorithm`);if(ft&&(Array.isArray(ft)||(ft=[ft]),!ft.includes(tt.alpha)))throw new RangeError(`image alpha must be ${format(ft)} to apply this algorithm`);if(gt&&(Array.isArray(gt)||(gt=[gt]),!gt.includes(tt.colorModel)))throw new RangeError(`image colorModel must be ${format(gt)} to apply this algorithm`);if(mt&&(Array.isArray(mt)||(mt=[mt]),!mt.includes(tt.components))){const _t=`image components must be ${format(mt)} to apply this algorithm`;throw mt.length===1&&mt[0]===1?new RangeError(`${_t}. The image can be converted using "image.grey()"`):new RangeError(_t)}if(yt&&(Array.isArray(yt)||(yt=[yt]),!yt.includes(tt.channels)))throw new RangeError(`image channels must be ${format(yt)} to apply this algorithm`)}function format(tt){return formatter.format(tt.map(String))}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]],PREWITT_X=[[1,0,-1],[1,0,-1],[1,0,-1]],PREWITT_Y=[[1,1,1],[0,0,0],[-1,-1,-1]];function xMedian(tt,nt={}){if(!isAnyArray(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");const{exact:ot=!1}=nt||{},ft=tt.slice(),gt=calcMiddle(0,ft.length-1),mt=quickSelect(ft,gt);if(ft.length%2===1||!ot)return mt;const yt=quickSelect(ft,gt+1);return(mt+yt)/2}function quickSelect(tt,nt){let ot=0,ft=tt.length-1,gt=0,mt=0,yt=0;for(;;){if(ft<=ot)return tt[nt];if(ft===ot+1)return tt[ot]>tt[ft]&&swap(tt,ot,ft),tt[nt];for(gt=calcMiddle(ot,ft),tt[gt]>tt[ft]&&swap(tt,gt,ft),tt[ot]>tt[ft]&&swap(tt,ot,ft),tt[gt]>tt[ot]&&swap(tt,gt,ot),swap(tt,gt,ot+1),mt=ot+1,yt=ft;;){do mt++;while(tt[ot]>tt[mt]);do yt--;while(tt[yt]>tt[ot]);if(yt<mt)break;swap(tt,mt,yt)}swap(tt,ot,yt),yt<=nt&&(ot=mt),yt>=nt&&(ft=yt-1)}}function swap(tt,nt,ot){const ft=tt[ot];tt[ot]=tt[nt],tt[nt]=ft}function calcMiddle(tt,nt){return Math.floor((tt+nt)/2)}function xCheck(tt,nt={}){const{minLength:ot}=nt;if(!isAnyArray(tt))throw new TypeError("input must be an array");if(tt.length===0)throw new TypeError("input must not be empty");if(typeof tt[0]!="number")throw new TypeError("input must contain numbers");if(ot&&tt.length<ot)throw new Error(`input must have a length of at least ${ot}`)}function xFindClosestIndex(tt,nt,ot={}){const{sorted:ft=!0}=ot;if(ft){let gt=0,mt=tt.length-1,yt=0;for(;mt-gt>1;)if(yt=gt+(mt-gt>>1),tt[yt]<nt)gt=yt;else if(tt[yt]>nt)mt=yt;else return yt;return gt<tt.length-1?Math.abs(nt-tt[gt])<Math.abs(tt[gt+1]-nt)?gt:gt+1:gt}else{let gt=0,mt=Number.POSITIVE_INFINITY;for(let yt=0;yt<tt.length;yt++){const _t=Math.abs(tt[yt]-nt);_t<mt&&(mt=_t,gt=yt)}return gt}}function xGetFromToIndex(tt,nt={}){let{fromIndex:ot,toIndex:ft}=nt;const{from:gt,to:mt}=nt;return ot===void 0&&(gt!==void 0?ot=xFindClosestIndex(tt,gt):ot=0),ft===void 0&&(mt!==void 0?ft=xFindClosestIndex(tt,mt):ft=tt.length-1),ot<0&&(ot=0),ft<0&&(ft=0),ot>=tt.length&&(ot=tt.length-1),ft>=tt.length&&(ft=tt.length-1),ot>ft&&([ot,ft]=[ft,ot]),{fromIndex:ot,toIndex:ft}}function xMean(tt,nt={}){xCheck(tt);const{fromIndex:ot,toIndex:ft}=xGetFromToIndex(tt,nt);let gt=tt[ot];for(let mt=ot+1;mt<=ft;mt++)gt+=tt[mt];return gt/(ft-ot+1)}function xVariance(tt,nt={}){if(!isAnyArray(tt))throw new TypeError("input must be an array");const{unbiased:ot=!0,mean:ft=xMean(tt)}=nt;let gt=0;for(const mt of tt){const yt=mt-ft;gt+=yt*yt}return ot?gt/(tt.length-1):gt/tt.length}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function tt(nt){if(this.size=nt|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=nt<<1;for(var ot=new Array(this.size*2),ft=0;ft<ot.length;ft+=2){const St=Math.PI*ft/this.size;ot[ft]=Math.cos(St),ot[ft+1]=-Math.sin(St)}this.table=ot;for(var gt=0,mt=1;this.size>mt;mt<<=1)gt++;this._width=gt%2===0?gt-1:gt,this._bitrev=new Array(1<<this._width);for(var yt=0;yt<this._bitrev.length;yt++){this._bitrev[yt]=0;for(var _t=0;_t<this._width;_t+=2){var Tt=this._width-_t-2;this._bitrev[yt]|=(yt>>>_t&3)<<Tt}}this._out=null,this._data=null,this._inv=0}return fft=tt,tt.prototype.fromComplexArray=function(ot,ft){for(var gt=ft||new Array(ot.length>>>1),mt=0;mt<ot.length;mt+=2)gt[mt>>>1]=ot[mt];return gt},tt.prototype.createComplexArray=function(){const ot=new Array(this._csize);for(var ft=0;ft<ot.length;ft++)ot[ft]=0;return ot},tt.prototype.toComplexArray=function(ot,ft){for(var gt=ft||this.createComplexArray(),mt=0;mt<gt.length;mt+=2)gt[mt]=ot[mt>>>1],gt[mt+1]=0;return gt},tt.prototype.completeSpectrum=function(ot){for(var ft=this._csize,gt=ft>>>1,mt=2;mt<gt;mt+=2)ot[ft-mt]=ot[mt],ot[ft-mt+1]=-ot[mt+1]},tt.prototype.transform=function(ot,ft){if(ot===ft)throw new Error("Input and output buffers must be different");this._out=ot,this._data=ft,this._inv=0,this._transform4(),this._out=null,this._data=null},tt.prototype.realTransform=function(ot,ft){if(ot===ft)throw new Error("Input and output buffers must be different");this._out=ot,this._data=ft,this._inv=0,this._realTransform4(),this._out=null,this._data=null},tt.prototype.inverseTransform=function(ot,ft){if(ot===ft)throw new Error("Input and output buffers must be different");this._out=ot,this._data=ft,this._inv=1,this._transform4();for(var gt=0;gt<ot.length;gt++)ot[gt]/=this.size;this._out=null,this._data=null},tt.prototype._transform4=function(){var ot=this._out,ft=this._csize,gt=this._width,mt=1<<gt,yt=ft/mt<<1,_t,Tt,St=this._bitrev;if(yt===4)for(_t=0,Tt=0;_t<ft;_t+=yt,Tt++){const Pt=St[Tt];this._singleTransform2(_t,Pt,mt)}else for(_t=0,Tt=0;_t<ft;_t+=yt,Tt++){const Pt=St[Tt];this._singleTransform4(_t,Pt,mt)}var At=this._inv?-1:1,Ct=this.table;for(mt>>=2;mt>=2;mt>>=2){yt=ft/mt<<1;var Ot=yt>>>2;for(_t=0;_t<ft;_t+=yt)for(var Dt=_t+Ot,Ut=_t,Xt=0;Ut<Dt;Ut+=2,Xt+=mt){const Pt=Ut,Jt=Pt+Ot,Kt=Jt+Ot,Nt=Kt+Ot,jt=ot[Pt],kt=ot[Pt+1],Zt=ot[Jt],Ft=ot[Jt+1],It=ot[Kt],Wt=ot[Kt+1],Qt=ot[Nt],me=ot[Nt+1],rn=jt,Dn=kt,Mn=Ct[Xt],$n=At*Ct[Xt+1],on=Zt*Mn-Ft*$n,yn=Zt*$n+Ft*Mn,bn=Ct[2*Xt],On=At*Ct[2*Xt+1],Ht=It*bn-Wt*On,sn=It*On+Wt*bn,nn=Ct[3*Xt],pn=At*Ct[3*Xt+1],gn=Qt*nn-me*pn,Be=Qt*pn+me*nn,xn=rn+Ht,qn=Dn+sn,Bn=rn-Ht,Yn=Dn-sn,Kn=on+gn,Qn=yn+Be,Jn=At*(on-gn),ei=At*(yn-Be),Ln=xn+Kn,An=qn+Qn,gi=xn-Kn,Xn=qn-Qn,ri=Bn+ei,cn=Yn-Jn,Pn=Bn-ei,Vn=Yn+Jn;ot[Pt]=Ln,ot[Pt+1]=An,ot[Jt]=ri,ot[Jt+1]=cn,ot[Kt]=gi,ot[Kt+1]=Xn,ot[Nt]=Pn,ot[Nt+1]=Vn}}},tt.prototype._singleTransform2=function(ot,ft,gt){const mt=this._out,yt=this._data,_t=yt[ft],Tt=yt[ft+1],St=yt[ft+gt],At=yt[ft+gt+1],Ct=_t+St,Ot=Tt+At,Dt=_t-St,Ut=Tt-At;mt[ot]=Ct,mt[ot+1]=Ot,mt[ot+2]=Dt,mt[ot+3]=Ut},tt.prototype._singleTransform4=function(ot,ft,gt){const mt=this._out,yt=this._data,_t=this._inv?-1:1,Tt=gt*2,St=gt*3,At=yt[ft],Ct=yt[ft+1],Ot=yt[ft+gt],Dt=yt[ft+gt+1],Ut=yt[ft+Tt],Xt=yt[ft+Tt+1],Pt=yt[ft+St],Jt=yt[ft+St+1],Kt=At+Ut,Nt=Ct+Xt,jt=At-Ut,kt=Ct-Xt,Zt=Ot+Pt,Ft=Dt+Jt,It=_t*(Ot-Pt),Wt=_t*(Dt-Jt),Qt=Kt+Zt,me=Nt+Ft,rn=jt+Wt,Dn=kt-It,Mn=Kt-Zt,$n=Nt-Ft,on=jt-Wt,yn=kt+It;mt[ot]=Qt,mt[ot+1]=me,mt[ot+2]=rn,mt[ot+3]=Dn,mt[ot+4]=Mn,mt[ot+5]=$n,mt[ot+6]=on,mt[ot+7]=yn},tt.prototype._realTransform4=function(){var ot=this._out,ft=this._csize,gt=this._width,mt=1<<gt,yt=ft/mt<<1,_t,Tt,St=this._bitrev;if(yt===4)for(_t=0,Tt=0;_t<ft;_t+=yt,Tt++){const yi=St[Tt];this._singleRealTransform2(_t,yi>>>1,mt>>>1)}else for(_t=0,Tt=0;_t<ft;_t+=yt,Tt++){const yi=St[Tt];this._singleRealTransform4(_t,yi>>>1,mt>>>1)}var At=this._inv?-1:1,Ct=this.table;for(mt>>=2;mt>=2;mt>>=2){yt=ft/mt<<1;var Ot=yt>>>1,Dt=Ot>>>1,Ut=Dt>>>1;for(_t=0;_t<ft;_t+=yt)for(var Xt=0,Pt=0;Xt<=Ut;Xt+=2,Pt+=mt){var Jt=_t+Xt,Kt=Jt+Dt,Nt=Kt+Dt,jt=Nt+Dt,kt=ot[Jt],Zt=ot[Jt+1],Ft=ot[Kt],It=ot[Kt+1],Wt=ot[Nt],Qt=ot[Nt+1],me=ot[jt],rn=ot[jt+1],Dn=kt,Mn=Zt,$n=Ct[Pt],on=At*Ct[Pt+1],yn=Ft*$n-It*on,bn=Ft*on+It*$n,On=Ct[2*Pt],Ht=At*Ct[2*Pt+1],sn=Wt*On-Qt*Ht,nn=Wt*Ht+Qt*On,pn=Ct[3*Pt],gn=At*Ct[3*Pt+1],Be=me*pn-rn*gn,xn=me*gn+rn*pn,qn=Dn+sn,Bn=Mn+nn,Yn=Dn-sn,Kn=Mn-nn,Qn=yn+Be,Jn=bn+xn,ei=At*(yn-Be),Ln=At*(bn-xn),An=qn+Qn,gi=Bn+Jn,Xn=Yn+Ln,ri=Kn-ei;if(ot[Jt]=An,ot[Jt+1]=gi,ot[Kt]=Xn,ot[Kt+1]=ri,Xt===0){var cn=qn-Qn,Pn=Bn-Jn;ot[Nt]=cn,ot[Nt+1]=Pn;continue}if(Xt!==Ut){var Vn=Yn,Gn=-Kn,ai=qn,oi=-Bn,fi=-At*Ln,zn=-At*ei,kn=-At*Jn,Hn=-At*Qn,Nn=Vn+fi,hi=Gn+zn,wi=ai+Hn,si=oi-kn,xi=_t+Dt-Xt,mi=_t+Ot-Xt;ot[xi]=Nn,ot[xi+1]=hi,ot[mi]=wi,ot[mi+1]=si}}}},tt.prototype._singleRealTransform2=function(ot,ft,gt){const mt=this._out,yt=this._data,_t=yt[ft],Tt=yt[ft+gt],St=_t+Tt,At=_t-Tt;mt[ot]=St,mt[ot+1]=0,mt[ot+2]=At,mt[ot+3]=0},tt.prototype._singleRealTransform4=function(ot,ft,gt){const mt=this._out,yt=this._data,_t=this._inv?-1:1,Tt=gt*2,St=gt*3,At=yt[ft],Ct=yt[ft+gt],Ot=yt[ft+Tt],Dt=yt[ft+St],Ut=At+Ot,Xt=At-Ot,Pt=Ct+Dt,Jt=_t*(Ct-Dt),Kt=Ut+Pt,Nt=Xt,jt=-Jt,kt=Ut-Pt,Zt=Xt,Ft=Jt;mt[ot]=Kt,mt[ot+1]=0,mt[ot+2]=Nt,mt[ot+3]=jt,mt[ot+4]=kt,mt[ot+5]=0,mt[ot+6]=Zt,mt[ot+7]=Ft},fft}requireFft();function xyCovariance(tt,nt={}){const{x:ot,y:ft}=tt,{unbiased:gt=!0}=nt,mt=xMean(ot),yt=xMean(ft);let _t=0;for(let Tt=0;Tt<ot.length;Tt++)_t+=(ot[Tt]-mt)*(ft[Tt]-yt);return gt?_t/(ot.length-1):_t/ot.length}function assert(tt,nt){if(!tt)throw new Error(nt||"unreachable")}function assertUnreachable(tt){throw new Error(`unreachable: ${String(tt)}`)}function getClamp(tt){return tt.maxValue===255?clamp255:(assert(tt.maxValue===65535),clamp65535)}function clamp255(tt){return Math.min(Math.max(tt,0),255)}function clamp65535(tt){return Math.min(Math.max(tt,0),65535)}function validateChannels(tt,nt){for(const ot of tt)validateChannel(ot,nt)}function validateChannel(tt,nt){if(!Number.isInteger(tt)||tt>=nt.channels||tt<0)throw new RangeError(`invalid channel: ${tt}. It must be a positive integer smaller than ${nt.channels}`)}function validateValues(tt,nt){for(const ot of tt)validateValue(ot,nt)}function validateValue(tt,nt){if(tt>nt.maxValue||tt<0)throw new RangeError(`invalid value: ${tt}. It must be a positive value smaller than ${nt.maxValue+1}`)}function validateForComparison(tt,nt){if(tt.width!==nt.width||tt.height!==nt.height)throw new RangeError("both images must have the same size");if(tt.alpha!==nt.alpha||tt.bitDepth!==nt.bitDepth)throw new RangeError("both images must have the same alpha and bitDepth");if(tt.channels!==nt.channels)throw new RangeError("both images must have the same number of channels")}function validateColor(tt,nt){validateChannel(tt.length-1,nt),validateValues(tt,nt)}function divide(tt,nt,ot={}){const{channels:ft=new Array(tt.channels).fill(0).map((mt,yt)=>yt)}=ot;if(validateChannels(ft,tt),nt===0)throw new TypeError("Cannot divide by 0");const gt=getOutputImage(tt,ot,{clone:!0});if(ft.length===0)return gt;for(const mt of ft)for(let yt=0;yt<gt.height;yt++)for(let _t=0;_t<gt.width;_t++){const Tt=gt.getValue(_t,yt,mt)/nt;gt.setClampedValue(_t,yt,mt,Tt)}return gt}function getDefaultColor(tt){return z(tt.colorModel).with("GREY",()=>[0]).with("GREYA",()=>[0,tt.maxValue]).with("RGB",()=>[0,0,0]).with("RGBA",()=>[0,0,0,tt.maxValue]).with("BINARY",()=>[1]).exhaustive()}function setBlendedPixel(tt,nt,ot,ft){if(ft=ft??getDefaultColor(tt),!tt.alpha)tt.setPixel(nt,ot,ft);else{assert(tt instanceof Image);const gt=ft.at(-1);if(gt===tt.maxValue){tt.setPixel(nt,ot,ft);return}const mt=tt.getValue(nt,ot,tt.channels-1),yt=gt+mt*(1-gt/tt.maxValue);tt.setValue(nt,ot,tt.channels-1,yt);for(let _t=0;_t<tt.components;_t++){const Tt=ft[_t],St=tt.getValue(nt,ot,_t),At=(Tt*gt+St*mt*(1-gt/tt.maxValue))/yt;tt.setValue(nt,ot,_t,At)}}}function setBlendedVisiblePixel(tt,nt,ot,ft){nt>=0&&nt<tt.width&&ot>=0&&ot<tt.height&&setBlendedPixel(tt,nt,ot,ft)}function roundPoint(tt){return{row:Math.round(tt.row),column:Math.round(tt.column)}}function drawCircleOnImage(tt,nt,ot,ft={}){const gt=getOutputImage(tt,ft,{clone:!0}),{strokeColor:mt=getDefaultColor(gt),fillColor:yt}=ft;if(validateColor(mt,gt),checkProcessable(gt,{bitDepth:[8,16]}),ot<0)throw new RangeError("circle radius must be positive");if(nt=roundPoint(nt),ot=Math.round(ot),ot===0)return setBlendedVisiblePixel(gt,nt.column,nt.row,mt),gt;if(!yt)x$1(nt.column,nt.row,ot,(_t,Tt)=>{setBlendedVisiblePixel(gt,_t,Tt,mt)});else{ot===1&&setBlendedVisiblePixel(gt,nt.column,nt.row,yt);let _t=nt.row+ot,Tt=0;x$1(nt.column,nt.row,ot,(St,At)=>{setBlendedVisiblePixel(gt,St,At,mt),Tt===0&&gt.drawLine({row:At,column:St-1},{row:At,column:nt.column-(St-nt.column-1)},{strokeColor:yt,out:gt}),Tt%4===1&&_t!==At&&(gt.drawLine({row:At,column:St+1},{row:At,column:nt.column-(St-nt.column+1)},{strokeColor:yt,out:gt}),_t=At,gt.drawLine({row:nt.row-(At-nt.row),column:St+1},{row:nt.row-(At-nt.row),column:nt.column-(St-nt.column+1)},{strokeColor:yt,out:gt})),Tt++})}return gt}function drawLineOnImage(tt,nt,ot,ft={}){const gt=getOutputImage(tt,ft,{clone:!0}),{strokeColor:mt=getDefaultColor(gt),origin:yt={column:0,row:0}}=ft;return validateColor(mt,gt),checkProcessable(gt,{bitDepth:[8,16]}),T(Math.round(yt.column+nt.column),Math.round(yt.row+nt.row),Math.round(yt.column+ot.column),Math.round(yt.row+ot.row),(_t,Tt)=>{setBlendedVisiblePixel(gt,_t,Tt,mt)}),gt}function drawLineOnMask(tt,nt,ot,ft={}){const{origin:gt={column:0,row:0}}=ft,mt=maskToOutputMask(tt,ft,{clone:!0});return T(Math.round(gt.column+nt.column),Math.round(gt.row+nt.row),Math.round(gt.column+ot.column),Math.round(gt.row+ot.row),(yt,_t)=>{mt.setVisiblePixel(yt,_t,[1])}),mt}function drawPolylineOnImage(tt,nt,ot={}){const{strokeColor:ft=getDefaultColor(tt),origin:gt={column:0,row:0}}=ot;checkProcessable(tt,{bitDepth:[8,16]});const mt=getOutputImage(tt,ot,{clone:!0});validateColor(ft,mt);for(let yt=0;yt<nt.length-1;yt++){const _t=nt[yt],Tt=nt[yt+1];mt.drawLine(_t,Tt,{out:mt,strokeColor:ft,origin:gt})}return mt}function drawPolylineOnMask(tt,nt,ot={}){const ft=maskToOutputMask(tt,ot,{clone:!0});for(let gt=0;gt<nt.length-1;gt++){const mt=nt[gt],yt=nt[gt+1];ft.drawLine(mt,yt,{out:ft,origin:ot.origin})}return ft}var orientation={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=nt;var tt=+(Math.pow(2,27)+1);function nt(ot,ft,gt){var mt=ot*ft,yt=tt*ot,_t=yt-ot,Tt=yt-_t,St=ot-Tt,At=tt*ft,Ct=At-ft,Ot=At-Ct,Dt=ft-Ot,Ut=mt-Tt*Ot,Xt=Ut-St*Ot,Pt=Xt-Tt*Dt,Jt=St*Dt-Pt;return gt?(gt[0]=Jt,gt[1]=mt,gt):[Jt,mt]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=nt;function tt(ot,ft){var gt=ot+ft,mt=gt-ot,yt=gt-mt,_t=ft-mt,Tt=ot-yt,St=Tt+_t;return St?[St,gt]:[gt]}function nt(ot,ft){var gt=ot.length|0,mt=ft.length|0;if(gt===1&&mt===1)return tt(ot[0],ft[0]);var yt=gt+mt,_t=new Array(yt),Tt=0,St=0,At=0,Ct=Math.abs,Ot=ot[St],Dt=Ct(Ot),Ut=ft[At],Xt=Ct(Ut),Pt,Jt;Dt<Xt?(Jt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Jt=Ut,At+=1,At<mt&&(Ut=ft[At],Xt=Ct(Ut))),St<gt&&Dt<Xt||At>=mt?(Pt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Pt=Ut,At+=1,At<mt&&(Ut=ft[At],Xt=Ct(Ut)));for(var Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,kt=jt,Zt=Kt,Ft,It,Wt,Qt,me;St<gt&&At<mt;)Dt<Xt?(Pt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Pt=Ut,At+=1,At<mt&&(Ut=ft[At],Xt=Ct(Ut))),Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft;for(;St<gt;)Pt=Ot,Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft,St+=1,St<gt&&(Ot=ot[St]);for(;At<mt;)Pt=Ut,Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft,At+=1,At<mt&&(Ut=ft[At]);return kt&&(_t[Tt++]=kt),Zt&&(_t[Tt++]=Zt),Tt||(_t[Tt++]=0),_t.length=Tt,_t}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=tt;function tt(nt,ot,ft){var gt=nt+ot,mt=gt-nt,yt=gt-mt,_t=ot-mt,Tt=nt-yt;return ft?(ft[0]=Tt+_t,ft[1]=gt,ft):[Tt+_t,gt]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var tt=requireTwoProduct(),nt=requireTwoSum();robustScale=ot;function ot(ft,gt){var mt=ft.length;if(mt===1){var yt=tt(ft[0],gt);return yt[0]?yt:[yt[1]]}var _t=new Array(2*mt),Tt=[.1,.1],St=[.1,.1],At=0;tt(ft[0],gt,Tt),Tt[0]&&(_t[At++]=Tt[0]);for(var Ct=1;Ct<mt;++Ct){tt(ft[Ct],gt,St);var Ot=Tt[1];nt(Ot,St[0],Tt),Tt[0]&&(_t[At++]=Tt[0]);var Dt=St[1],Ut=Tt[1],Xt=Dt+Ut,Pt=Xt-Dt,Jt=Ut-Pt;Tt[1]=Xt,Jt&&(_t[At++]=Jt)}return Tt[1]&&(_t[At++]=Tt[1]),At===0&&(_t[At++]=0),_t.length=At,_t}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=nt;function tt(ot,ft){var gt=ot+ft,mt=gt-ot,yt=gt-mt,_t=ft-mt,Tt=ot-yt,St=Tt+_t;return St?[St,gt]:[gt]}function nt(ot,ft){var gt=ot.length|0,mt=ft.length|0;if(gt===1&&mt===1)return tt(ot[0],-ft[0]);var yt=gt+mt,_t=new Array(yt),Tt=0,St=0,At=0,Ct=Math.abs,Ot=ot[St],Dt=Ct(Ot),Ut=-ft[At],Xt=Ct(Ut),Pt,Jt;Dt<Xt?(Jt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Jt=Ut,At+=1,At<mt&&(Ut=-ft[At],Xt=Ct(Ut))),St<gt&&Dt<Xt||At>=mt?(Pt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Pt=Ut,At+=1,At<mt&&(Ut=-ft[At],Xt=Ct(Ut)));for(var Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,kt=jt,Zt=Kt,Ft,It,Wt,Qt,me;St<gt&&At<mt;)Dt<Xt?(Pt=Ot,St+=1,St<gt&&(Ot=ot[St],Dt=Ct(Ot))):(Pt=Ut,At+=1,At<mt&&(Ut=-ft[At],Xt=Ct(Ut))),Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft;for(;St<gt;)Pt=Ot,Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft,St+=1,St<gt&&(Ot=ot[St]);for(;At<mt;)Pt=Ut,Jt=kt,Kt=Pt+Jt,Nt=Kt-Pt,jt=Jt-Nt,jt&&(_t[Tt++]=jt),Ft=Zt+Kt,It=Ft-Zt,Wt=Ft-It,Qt=Kt-It,me=Zt-Wt,kt=me+Qt,Zt=Ft,At+=1,At<mt&&(Ut=-ft[At]);return kt&&(_t[Tt++]=kt),Zt&&(_t[Tt++]=Zt),Tt||(_t[Tt++]=0),_t.length=Tt,_t}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,(function(tt){var nt=requireTwoProduct(),ot=requireRobustSum(),ft=requireRobustScale(),gt=requireRobustDiff(),mt=5,yt=11102230246251565e-32,_t=(3+16*yt)*yt,Tt=(7+56*yt)*yt;function St(Nt,jt,kt,Zt){return function(It,Wt,Qt){var me=Nt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0]))),rn=Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),Dn=Zt(me,rn);return Dn[Dn.length-1]}}function At(Nt,jt,kt,Zt){return function(It,Wt,Qt,me){var rn=Nt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),-Qt[2]),kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),me[2]))),Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),me[2])))),Dn=Nt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Qt[2]),kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),me[2]))),Nt(kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),Qt[2])))),Mn=Zt(rn,Dn);return Mn[Mn.length-1]}}function Ct(Nt,jt,kt,Zt){return function(It,Wt,Qt,me,rn){var Dn=Nt(Nt(Nt(kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),Qt[2]),Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),-me[2]),kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),rn[2]))),Wt[3]),Nt(kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),-me[2]),kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),rn[2]))),-Qt[3]),kt(Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),-Qt[2]),kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),rn[2]))),me[3]))),Nt(kt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),-Qt[2]),kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),me[2]))),-rn[3]),Nt(kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),-me[2]),kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),rn[2]))),It[3]),kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-me[2]),kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),rn[2]))),-Wt[3])))),Nt(Nt(kt(Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),rn[2]))),me[3]),Nt(kt(Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),me[2]))),-rn[3]),kt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),-Qt[2]),kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),me[2]))),It[3]))),Nt(kt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Qt[2]),kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),me[2]))),-Wt[3]),Nt(kt(Nt(kt(Nt(jt(Wt[1],me[0]),jt(-me[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),me[2]))),Qt[3]),kt(Nt(kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),Qt[2]))),-me[3]))))),Mn=Nt(Nt(Nt(kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),Qt[2]),Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),-me[2]),kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),rn[2]))),It[3]),kt(Nt(kt(Nt(jt(me[1],rn[0]),jt(-rn[1],me[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-me[2]),kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),rn[2]))),-Qt[3])),Nt(kt(Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-Qt[2]),kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),rn[2]))),me[3]),kt(Nt(kt(Nt(jt(Qt[1],me[0]),jt(-me[1],Qt[0])),It[2]),Nt(kt(Nt(jt(It[1],me[0]),jt(-me[1],It[0])),-Qt[2]),kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),me[2]))),-rn[3]))),Nt(Nt(kt(Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),Wt[2]),Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),-Qt[2]),kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),rn[2]))),It[3]),kt(Nt(kt(Nt(jt(Qt[1],rn[0]),jt(-rn[1],Qt[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-Qt[2]),kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),rn[2]))),-Wt[3])),Nt(kt(Nt(kt(Nt(jt(Wt[1],rn[0]),jt(-rn[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],rn[0]),jt(-rn[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),rn[2]))),Qt[3]),kt(Nt(kt(Nt(jt(Wt[1],Qt[0]),jt(-Qt[1],Wt[0])),It[2]),Nt(kt(Nt(jt(It[1],Qt[0]),jt(-Qt[1],It[0])),-Wt[2]),kt(Nt(jt(It[1],Wt[0]),jt(-Wt[1],It[0])),Qt[2]))),-rn[3])))),$n=Zt(Dn,Mn);return $n[$n.length-1]}}function Ot(Nt){var jt=Nt===3?St:Nt===4?At:Ct;return jt(ot,nt,ft,gt)}var Dt=Ot(3),Ut=Ot(4),Xt=[function(){return 0},function(){return 0},function(jt,kt){return kt[0]-jt[0]},function(jt,kt,Zt){var Ft=(jt[1]-Zt[1])*(kt[0]-Zt[0]),It=(jt[0]-Zt[0])*(kt[1]-Zt[1]),Wt=Ft-It,Qt;if(Ft>0){if(It<=0)return Wt;Qt=Ft+It}else if(Ft<0){if(It>=0)return Wt;Qt=-(Ft+It)}else return Wt;var me=_t*Qt;return Wt>=me||Wt<=-me?Wt:Dt(jt,kt,Zt)},function(jt,kt,Zt,Ft){var It=jt[0]-Ft[0],Wt=kt[0]-Ft[0],Qt=Zt[0]-Ft[0],me=jt[1]-Ft[1],rn=kt[1]-Ft[1],Dn=Zt[1]-Ft[1],Mn=jt[2]-Ft[2],$n=kt[2]-Ft[2],on=Zt[2]-Ft[2],yn=Wt*Dn,bn=Qt*rn,On=Qt*me,Ht=It*Dn,sn=It*rn,nn=Wt*me,pn=Mn*(yn-bn)+$n*(On-Ht)+on*(sn-nn),gn=(Math.abs(yn)+Math.abs(bn))*Math.abs(Mn)+(Math.abs(On)+Math.abs(Ht))*Math.abs($n)+(Math.abs(sn)+Math.abs(nn))*Math.abs(on),Be=Tt*gn;return pn>Be||-pn>Be?pn:Ut(jt,kt,Zt,Ft)}];function Pt(Nt){var jt=Xt[Nt.length];return jt||(jt=Xt[Nt.length]=Ot(Nt.length)),jt.apply(void 0,Nt)}function Jt(Nt,jt,kt,Zt,Ft,It,Wt){return function(me,rn,Dn,Mn,$n){switch(arguments.length){case 0:case 1:return 0;case 2:return Zt(me,rn);case 3:return Ft(me,rn,Dn);case 4:return It(me,rn,Dn,Mn);case 5:return Wt(me,rn,Dn,Mn,$n)}for(var on=new Array(arguments.length),yn=0;yn<arguments.length;++yn)on[yn]=arguments[yn];return Nt(on)}}function Kt(){for(;Xt.length<=mt;)Xt.push(Ot(Xt.length));tt.exports=Jt.apply(void 0,[Pt].concat(Xt));for(var Nt=0;Nt<=mt;++Nt)tt.exports[Nt]=Xt[Nt]}Kt()})(orientation)),orientation.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=nt;var tt=requireOrientation();function nt(ot,ft){for(var gt=ft[0],mt=ft[1],yt=ot.length,_t=1,Tt=yt,St=0,At=yt-1;St<Tt;At=St++){var Ct=ot[St],Ot=ot[At],Dt=Ct[1],Ut=Ot[1];if(Ut<Dt){if(Ut<mt&&mt<Dt){var Xt=tt(Ct,Ot,ft);if(Xt===0)return 0;_t^=0<Xt|0}else if(mt===Dt){var Pt=ot[(St+1)%yt],Jt=Pt[1];if(Dt<Jt){var Xt=tt(Ct,Ot,ft);if(Xt===0)return 0;_t^=0<Xt|0}}}else if(Dt<Ut){if(Dt<mt&&mt<Ut){var Xt=tt(Ct,Ot,ft);if(Xt===0)return 0;_t^=Xt<0|0}else if(mt===Dt){var Pt=ot[(St+1)%yt],Jt=Pt[1];if(Jt<Dt){var Xt=tt(Ct,Ot,ft);if(Xt===0)return 0;_t^=Xt<0|0}}}else if(mt===Dt){var Kt=Math.min(Ct[0],Ot[0]),Nt=Math.max(Ct[0],Ot[0]);if(St===0){for(;At>0;){var jt=(At+yt-1)%yt,kt=ot[jt];if(kt[1]!==mt)break;var Zt=kt[0];Kt=Math.min(Kt,Zt),Nt=Math.max(Nt,Zt),At=jt}if(At===0)return Kt<=gt&&gt<=Nt?0:1;Tt=At+1}for(var Ft=ot[(At+yt-1)%yt][1];St+1<Tt;){var kt=ot[St+1];if(kt[1]!==mt)break;var Zt=kt[0];Kt=Math.min(Kt,Zt),Nt=Math.max(Nt,Zt),St+=1}if(Kt<=gt&&gt<=Nt)return 0;var It=ot[(St+1)%yt][1];gt<Kt&&Ft<mt!=It<mt&&(_t^=1)}}return 2*_t-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function arrayPointsToObjects(tt){const nt=[];for(const ot of tt)nt.push([ot.column,ot.row]);return nt}function drawPolygonOnImage(tt,nt,ot={}){const{fillColor:ft,origin:gt={column:0,row:0},...mt}=ot;checkProcessable(tt,{bitDepth:[8,16]});const yt=getOutputImage(tt,ot,{clone:!0});if(ft===void 0)return yt.drawPolyline([...nt,nt[0]],{origin:gt,...mt});{validateColor(ft,yt);const _t=deleteDuplicates(nt),Tt=arrayPointsToObjects(_t);for(let St=0;St<yt.height;St++)for(let At=0;At<yt.width;At++)robustPointInPolygon(Tt,[At,St])===-1&&setBlendedVisiblePixel(yt,Math.round(gt.column)+At,Math.round(gt.row)+St,ft)}return yt.drawPolyline([...nt,nt[0]],{origin:gt,...mt})}function drawPolygonOnMask(tt,nt,ot={}){const{filled:ft=!1,origin:gt={column:0,row:0},...mt}=ot,yt=maskToOutputMask(tt,ot,{clone:!0});if(!ft)return yt.drawPolyline([...nt,nt[0]],{origin:gt,...mt});const _t=deleteDuplicates(nt),Tt=arrayPointsToObjects(_t);for(let St=0;St<yt.height;St++)for(let At=0;At<yt.width;At++)robustPointInPolygon(Tt,[At,St])===-1&&yt.setBit(Math.round(gt.column)+At,Math.round(gt.row)+St,1);return yt.drawPolyline([...nt,nt[0]],{origin:gt,...mt})}function drawRectangle(tt,nt={}){const{width:ot=tt.width,height:ft=tt.height,origin:gt={column:0,row:0},strokeColor:mt=getDefaultColor(tt),fillColor:yt}=nt,_t=Math.round(ot),Tt=Math.round(ft),St=Math.round(gt.column),At=Math.round(gt.row);let Ct;tt instanceof Image?(checkProcessable(tt,{bitDepth:[8,16]}),validateColor(mt,tt),yt&&validateColor(yt,tt),Ct=getOutputImage(tt,nt,{clone:!0})):Ct=maskToOutputMask(tt,nt,{clone:!0});for(let Ot=St;Ot<St+_t;Ot++)setBlendedVisiblePixel(Ct,Ot,At,mt),setBlendedVisiblePixel(Ct,Ot,At+Tt-1,mt);for(let Ot=At+1;Ot<At+Tt-1;Ot++)setBlendedVisiblePixel(Ct,St,Ot,mt),setBlendedVisiblePixel(Ct,St+_t-1,Ot,mt);if(yt)for(let Ot=At+1;Ot<At+Tt-1;Ot++)for(let Dt=St+1;Dt<St+_t-1;Dt++)setBlendedVisiblePixel(Ct,Dt,Ot,yt);return Ct}function drawPoints(tt,nt,ot={}){const{color:ft=getDefaultColor(tt),origin:gt={row:0,column:0}}=ot;let mt;tt instanceof Image?(mt=getOutputImage(tt,ot,{clone:!0}),validateColor(ft,mt)):mt=maskToOutputMask(tt,ot,{clone:!0}),checkProcessable(mt,{bitDepth:[1,8,16]});for(const yt of nt)setBlendedVisiblePixel(mt,Math.round(gt.column+yt.column),Math.round(gt.row+yt.row),ft);return mt}function drawMarker(tt,nt,ot){const ft=getOutputImage(tt,ot,{clone:!0}),{strokeColor:gt=getDefaultColor(ft),fillColor:mt,shape:yt="cross",size:_t=1}=ot,Tt=Math.round(_t);if(validateColor(gt,ft),mt&&validateColor(mt,ft),checkProcessable(ft,{bitDepth:[8,16]}),yt==="circle"&&ft.drawCircle(nt,Tt,{strokeColor:gt,fillColor:mt,out:ft}),yt==="triangle"){const St=[{row:nt.row-Tt,column:nt.column},{row:nt.row,column:nt.column+Tt},{row:nt.row,column:nt.column-Tt}];ft.drawPolygon(St,{strokeColor:gt,fillColor:mt,out:ft})}if(yt==="cross"&&(ft.drawLine({row:nt.row-Tt,column:nt.column},{row:nt.row+Tt,column:nt.column},{strokeColor:gt,out:ft}),ft.drawLine({row:nt.row,column:nt.column-Tt},{row:nt.row,column:nt.column+Tt},{strokeColor:gt,out:ft})),yt==="square"){const St={row:nt.row-(Tt-1)/2,column:nt.column-(Tt-1)/2};ft.drawRectangle({origin:St,width:Tt,height:Tt,strokeColor:gt,fillColor:mt,out:ft})}return ft}function drawMarkers(tt,nt,ot={}){const ft=getOutputImage(tt,ot,{clone:!0});for(const gt of nt)drawMarker(ft,gt,{...ot,out:ft});return ft}function and(tt,nt,ot){const ft=maskToOutputMask(tt,ot);if(tt.width!==nt.width||tt.height!==nt.height)throw new RangeError("both masks must have the same size");for(let gt=0;gt<ft.size;gt++)tt.getBitByIndex(gt)&&nt.getBitByIndex(gt)?ft.setBitByIndex(gt,1):ft.setBitByIndex(gt,0);return ft}function checkSize(tt){if(!Number.isInteger(tt)||tt<1)throw new TypeError(`size must be a positive integer. Got ${tt}`)}function checkKernel$1(tt){if(tt.length===0||tt.length%2!==1)throw new RangeError(`kernel must have an odd positive length. Got ${tt.length}`)}function checkBorderType(tt){if(tt!=="CONSTANT"&&tt!=="CUT")throw new RangeError(`unexpected border type: ${tt}`)}function checkInputLength(tt,nt){if(tt!==nt)throw new RangeError(`input length (${tt}) does not match setup size (${nt})`)}function createArray(tt){const nt=[];for(var ot=0;ot<tt;ot++)nt.push(0);return nt}class DirectConvolution{constructor(nt,ot,ft="CONSTANT"){checkSize(nt),checkKernel$1(ot),checkBorderType(ft),this.size=nt,this.kernelOffset=(ot.length-1)/2,this.outputSize=ft==="CONSTANT"?nt:nt-2*this.kernelOffset,this.output=createArray(this.outputSize),this.kernel=ot,this.kernelSize=ot.length,this.borderType=ft}convolve(nt){return checkInputLength(nt.length,this.size),this.output.fill(0),this.borderType==="CONSTANT"?this._convolutionBorder0(nt):this._convolutionBorderCut(nt),this.output}_convolutionBorder0(nt){for(let ot=0;ot<this.size;ot++)for(let ft=0;ft<this.kernelSize;ft++)this.output[ot]+=interpolateInput(nt,ot-this.kernelOffset+ft)*this.kernel[ft]}_convolutionBorderCut(nt){for(let ot=this.kernelOffset;ot<this.size-this.kernelOffset;ot++){const ft=ot-this.kernelOffset;for(let gt=0;gt<this.kernelSize;gt++)this.output[ft]+=nt[ft+gt]*this.kernel[gt]}}}function interpolateInput(tt,nt){return nt<0||nt>=tt.length?0:tt[nt]}const BorderType={CUT:"CUT"};function getBorderInterpolation(tt,nt){return z(tt).with("constant",()=>getInterpolateConstant(nt)).with("replicate",()=>interpolateReplicate).with("reflect",()=>interpolateReflect).with("reflect101",()=>interpolateReflect101).with("wrap",()=>interpolateWrap).exhaustive()}function checkRange(tt,nt){if(tt<=0-nt||tt>=nt+nt-1)throw new RangeError("border must be smaller than the original image")}function getInterpolateConstant(tt){return function(ot,ft,gt,mt){const yt=interpolateConstantPoint(ot,mt.width),_t=interpolateConstantPoint(ft,mt.height);return yt===-1||_t===-1?tt:mt.getValue(yt,_t,gt)}}function interpolateConstantPoint(tt,nt){return tt>=0&&tt<nt?tt:-1}function interpolateReplicate(tt,nt,ot,ft){return ft.getValue(interpolateReplicatePoint(tt,ft.width),interpolateReplicatePoint(nt,ft.height),ot)}function interpolateReplicatePoint(tt,nt){return tt>=0&&tt<nt?tt:(checkRange(tt,nt),tt<0?0:nt-1)}function interpolateReflect(tt,nt,ot,ft){return ft.getValue(interpolateReflectPoint(tt,ft.width),interpolateReflectPoint(nt,ft.height),ot)}function interpolateReflectPoint(tt,nt){return tt>=0&&tt<nt?tt:(checkRange(tt,nt),tt<0?-1-tt:nt+nt-1-tt)}function interpolateWrap(tt,nt,ot,ft){return ft.getValue(interpolateWrapPoint(tt,ft.width),interpolateWrapPoint(nt,ft.height),ot)}function interpolateWrapPoint(tt,nt){return tt>=0&&tt<nt?tt:(checkRange(tt,nt),tt<0?nt+tt:tt-nt)}function interpolateReflect101(tt,nt,ot,ft){return ft.getValue(interpolateReflect101Point(tt,ft.width),interpolateReflect101Point(nt,ft.height),ot)}function interpolateReflect101Point(tt,nt){return tt>=0&&tt<nt?tt:(checkRange(tt,nt),tt<0?0-tt:nt+nt-2-tt)}function extendBorders(tt,nt){const{horizontal:ot,vertical:ft,borderType:gt="reflect101",borderValue:mt=0}=nt,yt=getBorderInterpolation(gt,mt),_t=Image.createFrom(tt,{width:tt.width+2*ot,height:tt.height+2*ft});tt.copyTo(_t,{origin:{column:ot,row:ft},out:_t});for(let Tt=0;Tt<ft;Tt++)for(let St=0;St<_t.width;St++)for(let At=0;At<tt.channels;At++){const Ct=yt(St-ot,Tt-ft,At,tt);_t.setValue(St,Tt,At,Ct)}for(let Tt=_t.height-ft;Tt<_t.height;Tt++)for(let St=0;St<_t.width;St++)for(let At=0;At<tt.channels;At++){const Ct=yt(St-ot,Tt-ft,At,tt);_t.setValue(St,Tt,At,Ct)}for(let Tt=ft;Tt<_t.height-ft;Tt++)for(let St=0;St<ot;St++)for(let At=0;At<tt.channels;At++){const Ct=yt(St-ot,Tt-ft,At,tt);_t.setValue(St,Tt,At,Ct)}for(let Tt=ft;Tt<_t.height-ft;Tt++)for(let St=_t.width-ot;St<_t.width;St++)for(let At=0;At<tt.channels;At++){const Ct=yt(St-ot,Tt-ft,At,tt);_t.setValue(St,Tt,At,Ct)}return _t}function round(tt){const nt=Math.trunc(tt),ot=tt-nt;return ot<.5?nt:ot>.5?nt+1:nt%2===0?nt:nt+1}function directConvolution(tt,nt,ot={}){const{borderType:ft="reflect101",borderValue:gt=0}=ot,mt=rawDirectConvolution(tt,nt,{borderType:ft,borderValue:gt}),yt=getOutputImage(tt,ot),_t=getClamp(yt);for(let Tt=0;Tt<tt.size;Tt++)for(let St=0;St<tt.channels;St++){const At=Tt*tt.channels+St,Ct=round(_t(mt[At]));yt.setValueByIndex(Tt,St,Ct)}return yt}function rawDirectConvolution(tt,nt,ot={}){const{borderType:ft="reflect101",borderValue:gt=0}=ot,mt=getBorderInterpolation(ft,gt),yt=new Float64Array(tt.size*tt.channels);for(let _t=0;_t<tt.channels;_t++)for(let Tt=0;Tt<tt.height;Tt++)for(let St=0;St<tt.width;St++){const At=getIndex(St,Tt,tt,_t);yt[At]=computeConvolutionValue(St,Tt,_t,tt,nt,mt,{returnRawValue:!0})}return yt}function separableConvolution(tt,nt,ot,ft={}){const{normalize:gt,borderType:mt="reflect101",borderValue:yt=0}=ft;gt&&([nt,ot]=normalizeSeparatedKernel(nt,ot));const Tt=(nt.length-1)/2,At=(ot.length-1)/2,Ct=extendBorders(tt,{horizontal:Tt,vertical:At,borderType:mt,borderValue:yt}),Ot=Image.createFrom(tt),Dt=getClamp(Ot),Ut=new DirectConvolution(Ct.width,nt,BorderType.CUT),Xt=new DirectConvolution(Ct.height,ot,BorderType.CUT),Pt=new Float64Array(Ct.width),Jt=new Float64Array(Ct.height),Kt=new Float64Array(tt.width*Ct.height);for(let Nt=0;Nt<Ct.channels;Nt++){for(let jt=0;jt<Ct.height;jt++){for(let Zt=0;Zt<Ct.width;Zt++)Pt[Zt]=Ct.getValue(Zt,jt,Nt);const kt=Ut.convolve(Pt);for(let Zt=0;Zt<tt.width;Zt++)Kt[jt*tt.width+Zt]=kt[Zt]}for(let jt=0;jt<tt.width;jt++){for(let Zt=0;Zt<Ct.height;Zt++)Jt[Zt]=Kt[Zt*tt.width+jt];const kt=Xt.convolve(Jt);for(let Zt=0;Zt<tt.height;Zt++)Ot.setValue(jt,Zt,Nt,round(Dt(kt[Zt])))}}return Ot}function computeConvolutionValue(tt,nt,ot,ft,gt,mt,yt={}){let{clamp:_t}=yt;const{returnRawValue:Tt=!1}=yt;Tt&&(_t=void 0);let St=0;const At=gt[0].length,Ct=gt.length,Ot=(At-1)/2,Dt=(Ct-1)/2;for(let Ut=0;Ut<Ct;Ut++)for(let Xt=0;Xt<At;Xt++){const Pt=gt[Ut][Xt];St+=Pt*mt(tt+Xt-Ot,nt+Ut-Dt,ot,ft)}return _t?round(_t(St)):St}function normalizeSeparatedKernel(tt,nt){const ot=tt.reduce((yt,_t)=>yt+_t,0),ft=nt.reduce((yt,_t)=>yt+_t,0),gt=ot*ft;if(gt<0)throw new RangeError("this separated kernel cannot be normalized");const mt=1/Math.sqrt(Math.abs(gt));return[tt.map(yt=>yt*mt),nt.map(yt=>yt*mt)]}function blur(tt,nt){const{width:ot,height:ft}=nt;if(ot<1||ot%2===0)throw new RangeError(`Invalid property "width". Must be an odd number greater than 0. Received ${ot}.`);if(ft<1||ft%2===0)throw new RangeError(`Invalid property "height". Must be an odd number greater than 0. Received ${ft}.`);const gt=new Array(ot).fill(1),mt=new Array(ft).fill(1);return separableConvolution(tt,gt,mt,{normalize:!0,...nt})}function derivativeFilter(tt,nt={}){const{filter:ot="sobel"}=nt,ft=z(ot).with("sobel",()=>({kernelX:SOBEL_X,kernelY:SOBEL_Y})).with("scharr",()=>({kernelX:SCHARR_X,kernelY:SCHARR_Y})).with("prewitt",()=>({kernelX:PREWITT_X,kernelY:PREWITT_Y})).exhaustive();return tt.gradientFilter({...ft,...nt})}const ImageColorModel={GREYA:"GREYA",RGBA:"RGBA"},colorModels={GREY:{components:1,alpha:!1,channels:1},GREYA:{components:1,alpha:!0,channels:2},RGB:{components:3,alpha:!1,channels:3},RGBA:{components:3,alpha:!0,channels:4},BINARY:{components:1,alpha:!1,channels:1}};function increaseContrast(tt,nt={}){const{uniform:ot=!1}=nt;checkProcessable(tt,{bitDepth:[8,16]});const ft=tt.minMax();let gt=ft.min,mt=ft.max;if(ot){let _t=-1,Tt=-1;for(let St=0;St<ft.max.length;St++){const At=ft.max[St]-ft.min[St];At>Tt&&(_t=St,Tt=At)}gt=ft.min[_t],mt=ft.max[_t]}let yt=new Array(tt.components).fill(0).map((_t,Tt)=>Tt);return tt.colorModel===ImageColorModel.GREYA?yt=[0]:tt.colorModel===ImageColorModel.RGBA&&(yt=[0,1,2]),tt.level({inputMin:gt,inputMax:mt,outputMin:0,outputMax:tt.maxValue,channels:yt,...nt})}function gaussianBlur(tt,nt){if("sigma"in nt){const{sigma:ot,size:ft=getSize$1(ot),borderType:gt}=nt,mt=getRadius(ft),yt=getKernel(mt,ot);return separableConvolution(tt,yt,yt,{borderType:gt})}else if("sigmaX"in nt&&"sigmaY"in nt){const{sigmaX:ot,sigmaY:ft,sizeX:gt=getSize$1(ot),sizeY:mt=getSize$1(ft),borderType:yt}=nt,_t=getRadius(gt),Tt=getRadius(mt),St=getKernel(_t,ot),At=getKernel(Tt,ft);return separableConvolution(tt,St,At,{borderType:yt})}else throw new TypeError("you must either define sigma or sigmaX and sigmaY in the options argument")}function getKernel(tt,nt){const ot=tt*2+1,ft=new Array(ot),gt=nt||((ot-1)*.5-1)*.3+.8,mt=-.5/(gt*gt);let yt=0;for(let _t=0;_t<ot;_t++){const Tt=_t-tt,St=Math.exp(mt*Tt*Tt);ft[_t]=St,yt+=St}for(let _t=0;_t<ot;_t++)ft[_t]/=yt;return ft}function getSize$1(tt){return 2*Math.ceil(2*tt)+1}function gradientFilter(tt,nt){const{borderType:ot="replicate",borderValue:ft=0}=nt;if(checkProcessable(tt,{bitDepth:[8,16],colorModel:"GREY"}),"kernelX"in nt&&"kernelY"in nt){const{kernelX:gt,kernelY:mt}=nt,yt=tt.rawDirectConvolution(gt,{borderType:ot,borderValue:ft}),_t=tt.rawDirectConvolution(mt,{borderType:ot,borderValue:ft}),Tt=new Image(tt.width,tt.height,{colorModel:"GREY"});for(let St=0;St<tt.size;St++)Tt.setValueByIndex(St,0,Math.hypot(yt[St],_t[St]));return Tt}else{if("kernelX"in nt)return tt.directConvolution(nt.kernelX,{borderType:ot,borderValue:ft});if("kernelY"in nt)return tt.directConvolution(nt.kernelY,{borderType:ot,borderValue:ft});throw new TypeError("kernelX and KernelY are not defined")}}function hypotenuse(tt,nt,ot={}){const{channels:ft=new Array(tt.components).fill(0).map((mt,yt)=>yt)}=ot;if(checkProcessable(tt,{bitDepth:[8,16]}),tt.width!==nt.width||tt.height!==nt.height)throw new RangeError("both images must have the same size");if(tt.alpha!==nt.alpha||tt.bitDepth!==nt.bitDepth)throw new RangeError("both images must have the same alpha and bitDepth");if(tt.channels!==nt.channels)throw new RangeError("both images must have the same number of channels");validateChannels(ft,tt);const gt=getOutputImage(tt,{},{clone:!0});for(const mt of ft)for(let yt=0;yt<tt.size;yt++){const _t=Math.hypot(tt.getValueByIndex(yt,mt),nt.getValueByIndex(yt,mt));gt.setValueByIndex(yt,mt,Math.min(_t,gt.maxValue))}return gt}function convertColor(tt,nt,ot={}){const ft=new Map([["GREY",["GREYA","RGB","RGBA"]],["GREYA",["GREY","RGB","RGBA"]],["RGB",["GREY","GREYA","RGBA"]],["RGBA",["GREY","GREYA","RGB"]],["BINARY",["GREY","RGB","RGBA"]]]);if(tt.colorModel===nt&&nt!=="BINARY")return getOutputImage(tt,{out:ot.out},{clone:!0});if(!ft.get(tt.colorModel)?.includes(nt))throw new RangeError(`conversion from ${tt.colorModel} to ${nt} not implemented`);if(tt instanceof Image){const mt=getOutputImage(tt,ot,{newParameters:{colorModel:nt}});return(tt.colorModel==="GREY"||tt.colorModel==="GREYA")&&convertGreyToAny(tt,mt),(tt.colorModel==="RGB"||tt.colorModel==="RGBA")&&(nt==="RGB"||nt==="RGBA"?convertRgbToRgb(tt,mt):convertRgbToGrey(tt,mt)),!tt.alpha&&mt.alpha&&mt.fillAlpha(mt.maxValue),tt.alpha&&mt.alpha&&copyAlpha(tt,mt),mt}else if(nt==="GREY"){const mt=maskToOutputImage(tt,ot);return convertBinaryToGrey(tt,mt),mt}else{const mt=new Image(tt.width,tt.height,{colorModel:nt});return convertBinaryToRgb(tt,mt),mt}}function copyAlpha(tt,nt){if(tt.size!==nt.size)throw new RangeError("source and destination have different sizes");if(!tt.alpha)throw new RangeError("source image does not have alpha");if(!nt.alpha)throw new RangeError("destination does not have alpha");for(let ot=0;ot<nt.size;ot++)nt.setValueByIndex(ot,nt.channels-1,tt.getValueByIndex(ot,tt.channels-1))}function convertGreyToAny(tt,nt){for(let ot=0;ot<tt.size;ot++)for(let ft=0;ft<nt.components;ft++)nt.setValueByIndex(ot,ft,tt.getValueByIndex(ot,0))}function convertRgbToRgb(tt,nt){for(let ot=0;ot<tt.size;ot++)for(let ft=0;ft<3;ft++)nt.setValueByIndex(ot,ft,tt.getValueByIndex(ot,ft))}function convertRgbToGrey(tt,nt){for(let ot=0;ot<tt.size;ot++){const ft=tt.getValueByIndex(ot,0),gt=tt.getValueByIndex(ot,1),mt=tt.getValueByIndex(ot,2);nt.setValueByIndex(ot,0,Math.round(.299*ft+.587*gt+.114*mt))}}function convertBinaryToGrey(tt,nt){for(let ot=0;ot<tt.size;ot++)nt.setValueByIndex(ot,0,tt.getBitByIndex(ot)?nt.maxValue:0)}function convertBinaryToRgb(tt,nt){const ot=new Array(nt.components).fill(0),ft=new Array(nt.components).fill(nt.maxValue);nt.alpha&&(ot.push(nt.maxValue),ft.push(nt.maxValue));for(let gt=0;gt<tt.size;gt++)nt.setPixelByIndex(gt,tt.getBitByIndex(gt)?ft:ot)}function convertBitDepth(tt,nt,ot={}){if(tt.bitDepth===nt)return getOutputImage(tt,ot,{clone:!0});if(nt!==8&&nt!==16)throw new RangeError(`This image bit depth is not supported: ${nt}`);const ft=getOutputImage(tt,ot,{clone:!1,newParameters:{bitDepth:nt,colorModel:tt.colorModel}});return nt===8?convertToUint8(tt,ft):convertToUint16(tt,ft)}function convertToUint16(tt,nt){for(let ot=0;ot<tt.size;ot++)for(let ft=0;ft<nt.channels;ft++)nt.setValueByIndex(ot,ft,tt.getValueByIndex(ot,ft)<<8);return nt}function convertToUint8(tt,nt){for(let ot=0;ot<tt.size;ot++)for(let ft=0;ft<nt.channels;ft++)nt.setValueByIndex(ot,ft,tt.getValueByIndex(ot,ft)>>8);return nt}function checkPointIsInteger(tt,nt="Point"){if(!Number.isInteger(tt.row)||!Number.isInteger(tt.column))throw new TypeError(`${nt} row and column must be integers`)}function extract(tt,nt,ot={}){const{origin:ft={row:0,column:0}}=ot,{row:gt,column:mt}=ft;assert(gt<tt.height&&mt<tt.width&&gt+nt.width>0&&mt+nt.height>0,"extract: image and mask have no overlap"),checkPointIsInteger(ft,"Origin");const yt=Math.min(tt.width,nt.width+mt)-Math.max(0,mt),_t=Math.min(tt.height,nt.height+gt)-Math.max(0,gt);let Tt=new Image(yt,_t,{colorModel:tt.colorModel,origin:ft});Tt.alpha&&(Tt=Tt.fillAlpha(0));const St=Math.max(0,gt),At=Math.max(0,mt),Ct=gt<0?-gt:0,Ot=mt<0?-mt:0;for(let Dt=0;Dt<_t;Dt++)for(let Ut=0;Ut<yt;Ut++)nt.getBit(Ot+Ut,Ct+Dt)&&Tt.setPixel(Ut,Dt,tt.getPixel(At+Ut,St+Dt));return Tt}function split(tt){const nt=[];for(let ot=0;ot<tt.channels;ot++){const ft=Image.createFrom(tt,{colorModel:"GREY"});for(let gt=0;gt<ft.size;gt++)ft.setValueByIndex(gt,0,tt.getValueByIndex(gt,ot));nt.push(ft)}return nt}function huang(tt){let nt=0;for(let At=0;At<tt.length;At++)if(tt[At]!==0){nt=At;break}let ot=tt.length-1;for(let At=tt.length-1;At>=nt;At--)if(tt[At]!==0){ot=At;break}const ft=1/(ot-nt),gt=new Array(tt.length);let mt=0,yt=0;for(let At=nt;At<tt.length;At++)mt+=At*tt[At],yt+=tt[At],gt[At]=mt/yt;const _t=new Array(tt.length);mt=0,yt=0;for(let At=ot;At>0;At--)mt+=At*tt[At],yt+=tt[At],_t[At-1]=mt/yt;let Tt=-1,St=Number.MAX_VALUE;for(let At=0;At<tt.length;At++){let Ct=0,Ot;for(let Dt=0;Dt<=At;Dt++)Ot=1/(1+ft*Math.abs(Dt-gt[At])),Ot<1e-6||Ot>.999999||(Ct+=tt[Dt]*(-Ot*Math.log(Ot)-(1-Ot)*Math.log(1-Ot)));for(let Dt=At+1;Dt<tt.length;Dt++)Ot=1/(1+ft*Math.abs(Dt-_t[At])),Ot<1e-6||Ot>.999999||(Ct+=tt[Dt]*(-Ot*Math.log(Ot)-(1-Ot)*Math.log(1-Ot)));Ct<St&&(St=Ct,Tt=At)}return Tt}function intermodes(tt){const nt=tt.slice();let ot=0;for(;!bimodalTest$1(nt);){let gt=0,mt=0,yt=nt[0];for(let _t=0;_t<tt.length-1;_t++)gt=mt,mt=yt,yt=nt[_t+1],nt[_t]=(gt+mt+yt)/3;nt[tt.length-1]=(mt+yt)/3,ot++,assert(ot<1e3,"Intermodes threshold not found after 1000 iterations")}let ft=0;for(let gt=1;gt<tt.length-1;gt++)nt[gt-1]<nt[gt]&&nt[gt+1]<nt[gt]&&(ft+=gt);return Math.floor(ft/2)}function bimodalTest$1(tt){let nt=!1,ot=0;for(let ft=1;ft<tt.length-1;ft++)if(tt[ft-1]<tt[ft]&&tt[ft+1]<tt[ft]&&(ot++,ot>2))return!1;return ot===2&&(nt=!0),nt}function isodata(tt){let nt,ot,ft,gt,mt=0;for(let yt=1;yt<tt.length;yt++)if(tt[yt]>0){mt=yt+1;break}for(;;){nt=0,ft=0;for(let yt=0;yt<mt;yt++)ft=ft+tt[yt],nt=nt+tt[yt]*yt;gt=0,ot=0;for(let yt=mt+1;yt<tt.length;yt++)ot+=tt[yt],gt+=tt[yt]*yt;if(ft>0&&ot>0&&(nt/=ft,gt/=ot,mt===Math.round((nt+gt)/2)))break;mt++,assert(mt<=tt.length-2,"Threshold not found")}return mt}function li(tt,nt){let ot,ft,gt,mt,yt,_t,Tt,St,At,Ct,Dt;Ct=0;for(let Ut=0;Ut<tt.length;Ut++)Ct+=Ut*tt[Ut];Ct/=nt,Tt=Ct;do{_t=Tt,ot=_t+.5|0,ft=0,mt=0;for(let Ut=0;Ut<=ot;Ut++)ft+=Ut*tt[Ut],mt+=tt[Ut];St=mt===0?0:ft/mt,gt=0,yt=0;for(let Ut=ot+1;Ut<tt.length;Ut++)gt+=Ut*tt[Ut],yt+=tt[Ut];At=yt===0?0:gt/yt,Dt=(St-At)/(Math.log(St)-Math.log(At)),Dt<-Number.EPSILON?Tt=Dt-.5|0:Tt=Dt+.5|0}while(Math.abs(Tt-_t)>.5);return ot}function maxEntropy(tt,nt){const ot=new Array(tt.length);for(let Ot=0;Ot<tt.length;Ot++)ot[Ot]=tt[Ot]/nt;const ft=new Array(tt.length),gt=new Array(tt.length);ft[0]=ot[0],gt[0]=1-ft[0];for(let Ot=1;Ot<tt.length;Ot++)ft[Ot]=ft[Ot-1]+ot[Ot],gt[Ot]=1-ft[Ot];let mt=0;for(let Ot=0;Ot<tt.length;Ot++)if(Math.abs(ft[Ot])>=Number.EPSILON){mt=Ot;break}let yt=tt.length-1;for(let Ot=tt.length-1;Ot>=mt;Ot--)if(Math.abs(gt[Ot])>=Number.EPSILON){yt=Ot;break}let _t=-1,Tt,St=Number.MIN_VALUE,At,Ct;for(let Ot=mt;Ot<=yt;Ot++){At=0;for(let Dt=0;Dt<=Ot;Dt++)tt[Dt]!==0&&(At-=ot[Dt]/ft[Ot]*Math.log(ot[Dt]/ft[Ot]));Ct=0;for(let Dt=Ot+1;Dt<tt.length;Dt++)tt[Dt]!==0&&(Ct-=ot[Dt]/gt[Ot]*Math.log(ot[Dt]/gt[Ot]));Tt=At+Ct,St<Tt&&(St=Tt,_t=Ot)}return _t}function mean$1(tt,nt){let ot=0;for(let ft=0;ft<tt.length;ft++)ot+=ft*tt[ft];return Math.floor(ot/nt)}function minError(tt,nt){let ot,ft=-2,gt,mt,yt,_t,Tt,St,At,Ct,Ot,Dt,Ut,Xt=0;for(let Pt=0;Pt<tt.length;Pt++)Xt+=Pt*tt[Pt];for(Xt/=nt,ot=Xt;ot!==ft;){const Pt=sumA(tt,ot),Jt=sumA(tt,tt.length-1),Kt=sumB(tt,ot),Nt=sumB(tt,tt.length-1),jt=sumC(tt,ot),kt=sumC(tt,tt.length-1);if(gt=Kt/Pt,mt=(Nt-Kt)/(Jt-Pt),yt=Pt/Jt,_t=(Jt-Pt)/Jt,Tt=jt/Pt-gt*gt,St=(kt-jt)/(Jt-Pt)-mt*mt,At=1/Tt-1/St,Ct=gt/Tt-mt/St,Ot=gt*gt/Tt-mt*mt/St+Math.log10(Tt*(_t*_t)/(St*(yt*yt))),Dt=Ct*Ct-At*Ot,Dt<0)return ot;ft=ot,Ut=(Ct+Math.sqrt(Dt))/At,Number.isNaN(Ut)?ot=ft:ot=Math.floor(Ut)}return ot}function sumA(tt,nt){let ot=0;for(let ft=0;ft<=nt;ft++)ot+=tt[ft];return ot}function sumB(tt,nt){let ot=0;for(let ft=0;ft<=nt;ft++)ot+=ft*tt[ft];return ot}function sumC(tt,nt){let ot=0;for(let ft=0;ft<=nt;ft++)ot+=ft*ft*tt[ft];return ot}function minimum(tt){if(tt.length<2)return 0;let nt=0,ot=-1,ft=-1,gt=new Array(tt.length);for(let mt=0;mt<tt.length;mt++)gt[mt]=tt[mt],tt[mt]>0&&(ft=mt);for(;!bimodalTest(gt);)if(gt=smoothed(gt),nt++,nt>1e4)return ot;for(let mt=1;mt<ft;mt++)if(gt[mt-1]>gt[mt]&&gt[mt+1]>=gt[mt]){ot=mt;break}return ot}function smoothed(tt){const nt=new Array(tt.length);for(let ot=1;ot<tt.length-1;ot++)nt[ot]=(tt[ot-1]+tt[ot]+tt[ot+1])/3;return nt[0]=(tt[0]+tt[1])/3,nt[tt.length-1]=(tt.at(-2)+tt.at(-1))/3,nt}function bimodalTest(tt){const nt=tt.length;let ot=!1,ft=0;for(let gt=1;gt<nt-1;gt++)if(tt[gt-1]<tt[gt]&&tt[gt+1]<tt[gt]&&(ft++,ft>2))return!1;return ft===2&&(ot=!0),ot}function moments(tt,nt){let ft=0,gt=0,mt=0,yt=0,_t=-1;const Tt=tt.length,St=[];for(let Pt=0;Pt<Tt;Pt++)St.push(tt[Pt]/nt);for(let Pt=0;Pt<Tt;Pt++)ft+=Pt*St[Pt],gt+=Pt*Pt*St[Pt],mt+=Pt*Pt*Pt*St[Pt];const At=1*gt-ft*ft,Ct=(-gt*gt+ft*mt)/At,Ot=(1*-mt+gt*ft)/At,Dt=.5*(-Ot-Math.sqrt(Ot*Ot-4*Ct)),Ut=.5*(-Ot+Math.sqrt(Ot*Ot-4*Ct)),Xt=(Ut-ft)/(Ut-Dt);for(let Pt=0;Pt<Tt;Pt++)if(yt+=St[Pt],yt>Xt){_t=Pt;break}return _t}function otsu(tt,nt){let ot=0,ft=0,gt=0,mt=0,yt=0;for(let _t=0;_t<tt.length;_t++)yt+=_t*tt[_t];for(let _t=0;_t<tt.length;_t++){ft=ft+tt[_t];const Tt=nt-ft;if(ft===0||Tt===0)continue;ot=ot+_t*tt[_t];const St=(yt-ot)/Tt,At=ft*Tt*(ot/ft-St)*(ot/ft-St);At>=gt&&(mt=_t,gt=At)}return mt}function percentile(tt){let nt=-1;const ot=.5,ft=new Array(tt.length),gt=partialSum(tt,tt.length-1);let mt=1;for(let yt=0;yt<tt.length;yt++)ft[yt]=Math.abs(partialSum(tt,yt)/gt-ot),ft[yt]<mt&&(mt=ft[yt],nt=yt);return nt}function partialSum(tt,nt){let ot=0;for(let ft=0;ft<=nt;ft++)ot+=tt[ft];return ot}function renyiEntropy(tt,nt){let ot,ft;const gt=new Array(tt.length),mt=new Array(tt.length),yt=new Array(tt.length);let _t=0,Tt=0,St=0,At=0,Ct=0,Ot=0;const Ut=1/(1-.5),Pt=1/(1-2);for(let kt=0;kt<tt.length;kt++)gt[kt]=tt[kt]/nt;mt[0]=gt[0],yt[0]=1-mt[0];for(let kt=1;kt<tt.length;kt++)mt[kt]=mt[kt-1]+gt[kt],yt[kt]=1-mt[kt];ot=0;for(let kt=0;kt<tt.length;kt++)if(Math.abs(mt[kt])>=Number.EPSILON){ot=kt;break}ft=tt.length-1;for(let kt=tt.length-1;kt>=ot;kt--)if(Math.abs(yt[kt])>=Number.EPSILON){ft=kt;break}for(let kt=ot;kt<=ft;kt++){let Zt=0,Ft=0,It=0;for(let $n=0;$n<=kt;$n++)tt[$n]!==0&&(Zt-=gt[$n]/mt[kt]*Math.log(gt[$n]/mt[kt])),Ft+=Math.sqrt(gt[$n]/mt[kt]),It+=gt[$n]*gt[$n]/(mt[kt]*mt[kt]);let Wt=0,Qt=0,me=0;for(let $n=kt+1;$n<tt.length;$n++)tt[$n]!==0&&(Wt-=gt[$n]/yt[kt]*Math.log(gt[$n]/yt[kt])),Qt+=Math.sqrt(gt[$n]/yt[kt]),me+=gt[$n]*gt[$n]/(yt[kt]*yt[kt]);const rn=Zt+Wt,Dn=Ut*(Ft*Qt>0?Math.log(Ft*Qt):0),Mn=Pt*(It*me>0?Math.log(It*me):0);rn>At&&(At=rn,_t=kt),Dn>Ct&&(Ct=Dn,Tt=kt),Mn>Ot&&(Ot=Mn,St=kt)}const Jt=new Uint32Array([_t,Tt,St]);Jt.sort();let Kt;Math.abs(Jt[0]-Jt[1])<=5?Math.abs(Jt[1]-Jt[2])<=5?Kt=[1,2,1]:Kt=[0,1,3]:Math.abs(Jt[1]-Jt[2])<=5?Kt=[3,1,0]:Kt=[1,2,1];const Nt=mt[Jt[2]]-mt[Jt[0]];return Math.round(Jt[0]*(mt[Jt[0]]+.25*Nt*Kt[0])+.25*Jt[1]*Nt*Kt[1]+Jt[2]*(yt[Jt[2]]+.25*Nt*Kt[2]))}function shanbhag(tt,nt){const ot=new Array(tt.length);for(let Dt=0;Dt<tt.length;Dt++)ot[Dt]=tt[Dt]/nt;const ft=new Array(tt.length),gt=new Array(tt.length);ft[0]=ot[0],gt[0]=1-ft[0];for(let Dt=1;Dt<tt.length;Dt++)ft[Dt]=ft[Dt-1]+ot[Dt],gt[Dt]=1-ft[Dt];let mt=0;for(let Dt=0;Dt<tt.length;Dt++)if(Math.abs(ft[Dt])>=Number.EPSILON){mt=Dt;break}let yt=tt.length-1;for(let Dt=tt.length-1;Dt>=mt;Dt--)if(Math.abs(gt[Dt])>=Number.EPSILON){yt=Dt;break}let _t=-1,Tt=Number.MAX_VALUE,St,At,Ct,Ot;for(let Dt=mt;Dt<=yt;Dt++){Ct=0,St=.5/ft[Dt];for(let Ut=1;Ut<=Dt;Ut++)Ct-=ot[Ut]*Math.log(1-St*ft[Ut-1]);Ct*=St,Ot=0,St=.5/gt[Dt];for(let Ut=Dt+1;Ut<tt.length;Ut++)Ot-=ot[Ut]*Math.log(1-St*gt[Ut]);Ot*=St,At=Math.abs(Ct-Ot),At<Tt&&(Tt=At,_t=Dt)}return _t}function triangle(tt){let nt=0,ot=0,ft=0,gt=0;for(let Ct=0;Ct<tt.length;Ct++)if(tt[Ct]>0){nt=Ct;break}nt>0&&nt--;for(let Ct=tt.length-1;Ct>0;Ct--)if(tt[Ct]>0){gt=Ct;break}gt<tt.length-1&&gt++;for(let Ct=0;Ct<tt.length;Ct++)tt[Ct]>ot&&(ft=Ct,ot=tt[Ct]);let mt=!1;if(ft-nt<gt-ft){mt=!0;let Ct=0,Ot=tt.length-1;for(;Ct<Ot;){const Dt=tt[Ct];tt[Ct]=tt[Ot],tt[Ot]=Dt,Ct++,Ot--}nt=tt.length-1-gt,ft=tt.length-1-ft}if(nt===ft)return nt;let yt,_t,Tt;yt=tt[ft],_t=nt-ft,Tt=Math.hypot(yt,_t),yt/=Tt,_t/=Tt,Tt=yt*nt+_t*tt[nt];let St=nt,At=0;for(let Ct=nt+1;Ct<=ft;Ct++){const Ot=yt*Ct+_t*tt[Ct]-Tt;Ot>At&&(St=Ct,At=Ot)}if(St--,mt){let Ct=0,Ot=tt.length-1;for(;Ct<Ot;){const Dt=tt[Ct];tt[Ct]=tt[Ot],tt[Ot]=Dt,Ct++,Ot--}return tt.length-1-St}else return St}function yen(tt,nt){const ot=new Array(tt.length);for(let St=0;St<tt.length;St++)ot[St]=tt[St]/nt;const ft=new Array(tt.length);ft[0]=ot[0];for(let St=1;St<tt.length;St++)ft[St]=ft[St-1]+ot[St];const gt=new Array(tt.length);gt[0]=ot[0]*ot[0];for(let St=1;St<tt.length;St++)gt[St]=gt[St-1]+ot[St]*ot[St];const mt=new Array(tt.length);mt[tt.length-1]=0;for(let St=tt.length-2;St>=0;St--)mt[St]=mt[St+1]+ot[St+1]*ot[St+1];let yt=-1,_t=Number.MIN_VALUE,Tt;for(let St=0;St<tt.length;St++)Tt=-1*(gt[St]*mt[St]>0?Math.log(gt[St]*mt[St]):0)+2*(ft[St]*(1-ft[St])>0?Math.log(ft[St]*(1-ft[St])):0),Tt>_t&&(_t=Tt,yt=St);return yt}function computeThreshold(tt,nt={}){const{algorithm:ot="otsu",slots:ft}=nt;if(tt.channels!==1)throw new TypeError("threshold can only be computed on images with one channel");const gt=tt.histogram({slots:ft}),mt=ft?2**tt.bitDepth/ft:1;return z(ot).with("huang",()=>huang(gt)*mt).with("intermodes",()=>intermodes(gt)*mt).with("isodata",()=>isodata(gt)*mt).with("li",()=>li(gt,tt.size)*mt).with("maxEntropy",()=>maxEntropy(gt,tt.size)*mt).with("mean",()=>mean$1(gt,tt.size)*mt).with("minimum",()=>minimum(gt)*mt).with("minError",()=>minError(gt,tt.size)*mt).with("moments",()=>moments(gt,tt.size)*mt).with("otsu",()=>otsu(gt,tt.size)*mt).with("percentile",()=>percentile(gt)*mt).with("renyiEntropy",()=>renyiEntropy(gt,tt.size)*mt).with("shanbhag",()=>shanbhag(gt,tt.size)*mt).with("triangle",()=>triangle(gt)*mt).with("yen",()=>yen(gt,tt.size)*mt).exhaustive()}function threshold(tt,nt={}){let ot;if("threshold"in nt){const gt=nt.threshold;if(gt<0||gt>1)throw new RangeError("threshold must be a value between 0 and 1");ot=gt*tt.maxValue}else ot=computeThreshold(tt,nt);const ft=imageToOutputMask(tt,nt);for(let gt=0;gt<tt.size;gt++)ft.setBitByIndex(gt,tt.getValueByIndex(gt,0)>ot?1:0);return ft}function luma709(tt,nt,ot){return tt*6966+nt*23436+ot*2366>>15}function luma601(tt,nt,ot){return tt*9798+nt*19235+ot*3735>>15}function max(tt,nt,ot){return Math.max(tt,nt,ot)}function min(tt,nt,ot){return Math.min(tt,nt,ot)}function average(tt,nt,ot){return(tt+nt+ot)/3>>0}function minmax(tt,nt,ot){return(Math.max(tt,nt,ot)+Math.min(tt,nt,ot))/2}function red(tt){return tt}function green(tt,nt){return nt}function blue(tt,nt,ot){return ot}function black(tt,nt,ot,ft){return Math.min(ft.maxValue-tt,ft.maxValue-nt,ft.maxValue-ot)}function cyan(tt,nt,ot,ft){const gt=black(tt,nt,ot,ft);return(ft.maxValue-tt-gt)/(1-gt/ft.maxValue)>>0}function magenta(tt,nt,ot,ft){const gt=black(tt,nt,ot,ft);return(ft.maxValue-nt-gt)/(1-gt/ft.maxValue)>>0}function yellow(tt,nt,ot,ft){const gt=black(tt,nt,ot,ft);return(ft.maxValue-ot-gt)/(1-gt/ft.maxValue)>>0}function hue(tt,nt,ot,ft){const gt=min(tt,nt,ot),mt=max(tt,nt,ot);if(mt===gt)return 0;let yt=0;const _t=mt-gt;return mt===tt?yt=(nt-ot)/_t+(nt<ot?6:0):mt===nt?yt=(ot-tt)/_t+2:(assert(mt===ot),yt=(tt-nt)/_t+4),yt/6*ft.maxValue>>0}function saturation(tt,nt,ot,ft){const gt=min(tt,nt,ot),mt=max(tt,nt,ot),yt=mt-gt;return mt===0?0:yt/mt*ft.maxValue}function lightness(tt,nt,ot){const ft=min(tt,nt,ot);return(max(tt,nt,ot)+ft)/2}const greyAlgorithms=Object.freeze(Object.defineProperty({__proto__:null,average,black,blue,cyan,green,hue,lightness,luma601,luma709,magenta,max,min,minmax,red,saturation,yellow},Symbol.toStringTag,{value:"Module"})),GreyAlgorithm={LUMA_709:"luma709",LUMA_601:"luma601",MAX:"max",MIN:"min",AVERAGE:"average",MINMAX:"minmax",RED:"red",GREEN:"green",BLUE:"blue",BLACK:"black",CYAN:"cyan",MAGENTA:"magenta",YELLOW:"yellow",HUE:"hue",SATURATION:"saturation",LIGHTNESS:"lightness"};{const tt=new Set(Object.values(GreyAlgorithm));for(const nt of Object.keys(greyAlgorithms))assert(tt.has(nt),`Grey algorithm ${nt} is missing in the GreyAlgorithm enum`)}function grey(tt,nt={}){let{keepAlpha:ot=!1,mergeAlpha:ft=!0}=nt;const{algorithm:gt="luma709"}=nt;checkProcessable(tt,{colorModel:["RGB","RGBA"]}),ot=ot&&tt.alpha,ft=ft&&tt.alpha,ot&&(ft=!1);const yt=getOutputImage(tt,nt,{newParameters:{colorModel:ot?"GREYA":"GREY"}});let _t;typeof gt=="function"?_t=gt:_t=greyAlgorithms[gt];const Tt=getClamp(yt);for(let St=0;St<tt.size;St++){const At=tt.getValueByIndex(St,0),Ct=tt.getValueByIndex(St,1),Ot=tt.getValueByIndex(St,2);let Dt;if(ft){const Ut=tt.getValueByIndex(St,3);Dt=Tt(_t(At,Ct,Ot,tt)*Ut/tt.maxValue)}else if(Dt=Tt(_t(At,Ct,Ot,tt)),ot){const Ut=tt.getValueByIndex(St,3);yt.setValueByIndex(St,1,Ut)}yt.setValueByIndex(St,0,Dt)}return yt}function copyTo(tt,nt,ot={}){const{origin:ft={column:0,row:0}}=ot,{column:gt,row:mt}=ft;if(tt.colorModel!==nt.colorModel)throw new RangeError("source and target must have the same color model");checkPointIsInteger(ft,"Origin");let yt;nt instanceof Image?yt=getOutputImage(nt,ot,{clone:!0}):yt=maskToOutputMask(nt,ot,{clone:!0});for(let _t=Math.max(mt,0);_t<Math.min(tt.height+mt,nt.height);_t++)for(let Tt=Math.max(gt,0);Tt<Math.min(tt.width+gt,nt.width);Tt++){const St=tt.getPixel(Tt-gt,_t-mt);setBlendedPixel(yt,Tt,_t,St)}return yt}function crop(tt,nt={}){const{origin:ot={row:0,column:0},width:ft=tt.width-ot.column,height:gt=tt.height-ot.row}=nt,{column:mt,row:yt}=ot;if(checkProcessable(tt,{bitDepth:[8,16]}),checkPointIsInteger(ot,"Origin"),!Number.isInteger(ft)||!Number.isInteger(gt))throw new RangeError(`Width and height (width:${ft}; height:${gt}) must be integers`);if(yt>tt.height-1||mt>tt.width-1)throw new RangeError(`Origin (row:${yt}, column:${mt}) out of range (${tt.width-1}; ${tt.height-1})`);if(ft<=0||gt<=0)throw new RangeError(`Width and height (width:${ft}; height:${gt}) must be positive numbers`);if(yt<0||mt<0)throw new RangeError(`Row and column (row:${yt}, column:${mt}) must be positive numbers`);if(ft>tt.width-mt||gt>tt.height-yt)throw new RangeError(`Size is out of range (row:${yt}, column:${mt}, width:${ft}, height:${gt})`);const _t=Image.createFrom(tt,{width:ft,height:gt});for(let Tt=0;Tt<gt;Tt++)for(let St=0;St<ft;St++)_t.setPixel(St,Tt,tt.getPixel(mt+St,yt+Tt));return _t}function cropAlpha(tt,nt={}){checkProcessable(tt,{alpha:!0});const{threshold:ot=tt.maxValue}=nt,ft=findLeft(tt,ot,tt.components);if(ft===-1)throw new RangeError(`could not find new dimensions. Threshold may be too high: ${ot}`);const gt=findTop(tt,ot,tt.components,ft),mt=findBottom(tt,ot,tt.components,ft),yt=findRight(tt,ot,tt.components,ft,gt,mt);return tt.crop({origin:{column:ft,row:gt},width:yt-ft+1,height:mt-gt+1})}function findLeft(tt,nt,ot){for(let ft=0;ft<tt.width;ft++)for(let gt=0;gt<tt.height;gt++)if(tt.getValue(ft,gt,ot)>=nt)return ft;return-1}function findTop(tt,nt,ot,ft){for(let gt=0;gt<tt.height;gt++)for(let mt=ft;mt<tt.width;mt++)if(tt.getValue(mt,gt,ot)>=nt)return gt;return-1}function findBottom(tt,nt,ot,ft){for(let gt=tt.height-1;gt>=0;gt--)for(let mt=ft;mt<tt.width;mt++)if(tt.getValue(mt,gt,ot)>=nt)return gt;return-1}function findRight(tt,nt,ot,ft,gt,mt){for(let yt=tt.width-1;yt>=ft;yt--)for(let _t=gt;_t<=mt;_t++)if(tt.getValue(yt,_t,ot)>=nt)return yt;return-1}function getInterpolationFunction(tt){return z(tt).with("nearest",()=>interpolateNearest).with("bilinear",()=>interpolateBilinear).with("bicubic",()=>interpolateBicubic).exhaustive()}function interpolateNearest(tt,nt,ot,ft,gt){return nt=Math.round(nt),ot=Math.round(ot),gt(nt,ot,ft,tt)}function interpolateBilinear(tt,nt,ot,ft,gt){const mt=Math.floor(nt),yt=Math.floor(ot),_t=mt+1,Tt=yt+1;if(_t<tt.width&&Tt<tt.height&&mt>=0&&yt>=0){const St=tt.getValue(mt,yt,ft),At=tt.getValue(_t,yt,ft),Ct=tt.getValue(mt,Tt,ft),Ot=tt.getValue(_t,Tt,ft),Dt=(_t-nt)*St+(nt-mt)*At,Ut=(_t-nt)*Ct+(nt-mt)*Ot;return round((Tt-ot)*Dt+(ot-yt)*Ut)}else{const St=gt(mt,yt,ft,tt),At=gt(_t,yt,ft,tt),Ct=gt(mt,Tt,ft,tt),Ot=gt(_t,Tt,ft,tt),Dt=(_t-nt)*St+(nt-mt)*At,Ut=(_t-nt)*Ct+(nt-mt)*Ot;return round((Tt-ot)*Dt+(ot-yt)*Ut)}}function interpolateBicubic(tt,nt,ot,ft,gt,mt){const yt=Math.floor(nt),_t=Math.floor(ot);if(yt===nt&&_t===ot)return gt(yt,_t,ft,tt);const Tt=nt-yt,St=ot-_t,At=gt(yt-1,_t-1,ft,tt),Ct=gt(yt,_t-1,ft,tt),Ot=gt(yt+1,_t-1,ft,tt),Dt=gt(yt+2,_t-1,ft,tt),Ut=cubic(At,Ct,Ot,Dt,Tt),Xt=gt(yt-1,_t,ft,tt),Pt=gt(yt,_t,ft,tt),Jt=gt(yt+1,_t,ft,tt),Kt=gt(yt+2,_t,ft,tt),Nt=cubic(Xt,Pt,Jt,Kt,Tt),jt=gt(yt-1,_t+1,ft,tt),kt=gt(yt,_t+1,ft,tt),Zt=gt(yt+1,_t+1,ft,tt),Ft=gt(yt+2,_t+1,ft,tt),It=cubic(jt,kt,Zt,Ft,Tt),Wt=gt(yt-1,_t+2,ft,tt),Qt=gt(yt,_t+2,ft,tt),me=gt(yt+1,_t+2,ft,tt),rn=gt(yt+2,_t+2,ft,tt),Dn=cubic(Wt,Qt,me,rn,Tt);return round(mt(cubic(Ut,Nt,It,Dn,St)))}function cubic(tt,nt,ot,ft,gt){return nt+.5*gt*(ot-tt+gt*(2*tt-5*nt+4*ot-ft+gt*(3*(nt-ot)+ft-tt)))}function transform(tt,nt,ot={}){const{borderType:ft="constant",borderValue:gt=0,interpolationType:mt="bilinear",fullImage:yt}=ot;let{width:_t=tt.width,height:Tt=tt.height}=ot;if(!isValidMatrix(nt))throw new TypeError(`transformation matrix must be 2x3 or 3x3. Received ${nt.length}x${nt[1].length}`);if(nt.length===2&&nt.push([0,0,1]),yt){nt=nt.map(Qt=>Qt.slice()),nt[0][2]=0,nt[1][2]=0;const Dt=[tt.getCoordinates("top-left"),tt.getCoordinates("top-right"),tt.getCoordinates("bottom-right"),tt.getCoordinates("bottom-left")];Dt[1].column+=1,Dt[2].column+=1,Dt[2].row+=1,Dt[3].row+=1;const Ut=Dt.map(Qt=>[transformPoint(nt[0],nt[2],Qt.column,Qt.row),transformPoint(nt[1],nt[2],Qt.column,Qt.row)]),Xt=Ut.map(Qt=>Qt[0]),Pt=Ut.map(Qt=>Qt[1]),Jt=Math.max(...Xt),Kt=Math.max(...Pt),Nt=Math.min(...Xt),jt=Math.min(...Pt),kt=[(tt.width-1)/2,(tt.height-1)/2];_t=Jt-Nt,Tt=Kt-jt;const Zt=transformPoint(nt[0],nt[2],kt[0],kt[1]),Ft=transformPoint(nt[1],nt[2],kt[0],kt[1]),It=(_t-1)/2-Zt,Wt=(Tt-1)/2-Ft;nt[0][2]=It,nt[1][2]=Wt,_t=Math.round(_t),Tt=Math.round(Tt)}ot.inverse||(nt=inverse(new Matrix(nt)).to2DArray());const St=Image.createFrom(tt,{width:_t,height:Tt}),At=getBorderInterpolation(ft,gt),Ct=getClamp(St),Ot=getInterpolationFunction(mt);for(let Dt=0;Dt<St.height;Dt++)for(let Ut=0;Ut<St.width;Ut++){const Xt=transformPoint(nt[0],nt[2],Ut,Dt),Pt=transformPoint(nt[1],nt[2],Ut,Dt);for(let Jt=0;Jt<St.channels;Jt++){const Kt=Ot(tt,Xt,Pt,Jt,At,Ct);St.setValue(Ut,Dt,Jt,Kt)}}return St}function transformPoint(tt,nt,ot,ft){return(tt[0]*ot+tt[1]*ft+tt[2])/(nt[0]*ot+nt[1]*ft+nt[2])}function isValidMatrix(tt){return tt.length===3&&tt[0].length===3&&tt[1].length===3&&tt[2].length===3||tt.length===2&&tt[0].length===3&&tt[1].length===3}function resize(tt,nt){const{interpolationType:ot="bilinear",borderType:ft="replicate",borderValue:gt=0}=nt,{width:mt,height:yt,xFactor:_t,yFactor:Tt}=checkOptions(tt,nt);return transform(tt,[[_t,0,_t/2],[0,Tt,Tt/2]],{interpolationType:ot,borderType:ft,borderValue:gt,height:yt,width:mt})}function checkOptions(tt,nt){const{width:ot,height:ft,xFactor:gt,yFactor:mt,preserveAspectRatio:yt=!0}=nt;if(ot===void 0&&ft===void 0&&gt===void 0&&mt===void 0)throw new TypeError("at least one of the width, height, xFactor or yFactor options must be passed");let _t,Tt;const St=getSize(ot,gt,tt.width,yt),At=getSize(ft,mt,tt.height,yt);return St===void 0?(assert(At!==void 0),_t=Math.round(At*(tt.width/tt.height))):_t=St,At===void 0?(assert(St!==void 0),Tt=Math.round(St*(tt.height/tt.width))):Tt=At,{width:_t,height:Tt,xFactor:gt??_t/tt.width,yFactor:mt??Tt/tt.height}}function getSize(tt,nt,ot,ft){if(tt===void 0){if(nt!==void 0)return Math.round(ot*nt);if(!ft)return ot}else{if(nt!==void 0)throw new TypeError("factor and size cannot be passed together");return tt}}function rotate(tt,nt){const ot=nt%180===0?tt.width:tt.height,ft=nt%180===0?tt.height:tt.width,gt=Image.createFrom(tt,{width:ot,height:ft});if(nt===90||nt===-270)for(let mt=0;mt<tt.width;mt++)for(let yt=0;yt<tt.height;yt++)for(let _t=0;_t<tt.channels;_t++)gt.setValue(gt.width-yt-1,mt,_t,tt.getValue(mt,yt,_t));else if(nt===180||nt===-180)for(let mt=0;mt<tt.width;mt++)for(let yt=0;yt<tt.height;yt++)for(let _t=0;_t<tt.channels;_t++)gt.setValue(gt.width-mt-1,gt.height-yt-1,_t,tt.getValue(mt,yt,_t));else if(nt===270||nt===-90)for(let mt=0;mt<tt.width;mt++)for(let yt=0;yt<tt.height;yt++)for(let _t=0;_t<tt.channels;_t++)gt.setValue(yt,gt.height-mt-1,_t,tt.getValue(mt,yt,_t));else throw new RangeError(`invalid angle: ${nt}`);return gt}function transformRotate(tt,nt,ot={}){const{center:ft="center",scale:gt=1,...mt}=ot;let yt;typeof ft=="string"?yt=tt.getCoordinates(ft):yt=ft;const _t=getRotationMatrix(nt,yt,gt);return transform(tt,_t,mt)}function getRotationMatrix(tt,nt,ot){const ft=tt*Math.PI/180,gt=ot*Math.cos(ft),mt=ot*Math.sin(ft);return[[gt,mt,(1-gt)*nt.column-mt*nt.row],[-mt,gt,mt*nt.column+(1-gt)*nt.row],[0,0,1]]}function rotatePoint(tt,nt,ot){const ft=Math.cos(ot),gt=Math.sin(ot),mt=tt.column*ft-tt.row*gt+(1-ft)*nt.column+nt.row*gt,yt=tt.column*gt+tt.row*ft+(1-ft)*nt.row-nt.column*gt;return{column:mt,row:yt}}function cropRectangle(tt,nt,ot){if(nt.length!==4)throw new Error("The points array must contain 4 points");const ft=getSmallestAngle(nt),gt={row:(nt[0].row+nt[2].row)/2,column:(nt[0].column+nt[2].column)/2},mt=nt.map(Kt=>rotatePoint(Kt,gt,ft)),[yt,_t,Tt]=mt,St=Math.max(Math.abs(yt.column-_t.column),Math.abs(_t.column-Tt.column)),At=Math.max(Math.abs(yt.row-_t.row),Math.abs(_t.row-Tt.row)),Ct=Math.min(Math.ceil(St),Math.ceil(St-1e-10)),Ot=Math.min(Math.ceil(At),Math.ceil(At-1e-10)),Dt={row:Math.min(...mt.map(Kt=>Kt.row))-(Ot-At)/2,column:Math.min(...mt.map(Kt=>Kt.column))-(Ct-St)/2},Ut=rotatePoint(Dt,gt,-ft),Xt=Math.cos(-ft),Pt=Math.sin(-ft),Jt=[[Xt,-Pt,Ut.column],[Pt,Xt,Ut.row]];return transform(tt,Jt,{inverse:!0,width:Ct,height:Ot,...ot})}function getSmallestAngle(tt){let nt=-getAngle(tt[1],tt[0]);nt>Math.PI/2?nt-=Math.PI:nt<-Math.PI/2&&(nt+=Math.PI);let ot=nt;return Math.abs(nt)>Math.PI/4&&(ot=nt>0?-Math.PI/2+nt:Math.PI/2+nt),ot}function paintMaskOnImage(tt,nt,ot={}){const{origin:ft={row:0,column:0},color:gt=getDefaultColor(tt),blend:mt=!0}=ot,{column:yt,row:_t}=ft;if(gt.length!==tt.channels)throw new RangeError("the given color is not compatible with the image");checkPointIsInteger(ft,"Origin");const Tt=getOutputImage(tt,ot,{clone:!0});if(mt){checkColorIsNumberArray(gt);for(let St=Math.max(_t,0);St<Math.min(nt.height+_t,tt.height);St++)for(let At=Math.max(yt,0);At<Math.min(nt.width+yt,tt.width);At++)nt.getBit(At-yt,St-_t)&&setBlendedPixel(Tt,At,St,gt)}else for(let St=Math.max(_t,0);St<Math.min(nt.height+_t,tt.height);St++)for(let At=Math.max(yt,0);At<Math.min(nt.width+yt,tt.width);At++)if(nt.getBit(At-yt,St-_t))for(let Ct=0;Ct<tt.channels;Ct++){const Ot=gt[Ct];typeof Ot=="number"&&Tt.setValue(At,St,Ct,Ot)}return Tt}function checkColorIsNumberArray(tt){for(const nt of tt)if(typeof nt!="number")throw new TypeError("cannot have null channels in color if blend is true")}function paintMaskOnMask(tt,nt,ot={}){const{origin:ft={row:0,column:0},value:gt=1}=ot,{column:mt,row:yt}=ft;checkPointIsInteger(ft,"Origin");const _t=maskToOutputMask(tt,ot,{clone:!0});for(let Tt=Math.max(yt,0);Tt<Math.min(nt.height+yt,tt.height);Tt++)for(let St=Math.max(mt,0);St<Math.min(nt.width+mt,tt.width);St++)nt.getBit(St-mt,Tt-yt)&&_t.setBit(St,Tt,gt);return _t}function invert(tt,nt){if(tt instanceof Image){const ot=getOutputImage(tt,nt);tt.alpha&&copyAlpha(tt,ot);const{maxValue:ft,size:gt}=ot;for(let mt=0;mt<gt;mt++)for(let yt=0;yt<tt.components;yt++)ot.setValueByIndex(mt,yt,ft-tt.getValueByIndex(mt,yt));return ot}else{const ot=maskToOutputMask(tt,nt);for(let ft=0;ft<ot.size;ft++)ot.setBitByIndex(ft,!tt.getBitByIndex(ft));return ot}}function level(tt,nt={}){const ot=tt.minMax();let{inputMin:ft=ot.min,inputMax:gt=ot.max,outputMin:mt=0,outputMax:yt=tt.maxValue,gamma:_t=1}=nt;const{channels:Tt=new Array(tt.components).fill(0).map((Ct,Ot)=>Ot)}=nt;validateChannels(Tt,tt),checkProcessable(tt,{bitDepth:[8,16]});const St=getOutputImage(tt,nt,{clone:!0}),At=getClamp(tt);ft=getValueArray(ft,tt.channels),gt=getValueArray(gt,tt.channels),mt=getValueArray(mt,tt.channels),yt=getValueArray(yt,tt.channels),_t=getValueArray(_t,tt.channels);for(let Ct=0;Ct<tt.height;Ct++)for(let Ot=0;Ot<tt.width;Ot++)for(const Dt of Tt){const Ut=tt.getValue(Ot,Ct,Dt),Xt=Math.max(Math.min(Ut,gt[Dt]),ft[Dt]);let Pt=At((Xt-ft[Dt])/(gt[Dt]-ft[Dt]));Number.isNaN(Pt)&&(Pt=0);const Jt=At(Pt**(1/_t[Dt])*(yt[Dt]-mt[Dt])+mt[Dt]);St.setValue(Ot,Ct,Dt,Jt)}return St}function getValueArray(tt,nt){if(Array.isArray(tt)){if(tt.length===nt)return tt;throw new RangeError("array length is not compatible with channel option")}else return new Array(nt).fill(tt)}function or(tt,nt,ot){const ft=maskToOutputMask(tt,ot);if(tt.width!==nt.width||tt.height!==nt.height)throw new RangeError("both masks must have the same size");for(let gt=0;gt<ft.size;gt++)tt.getBitByIndex(gt)||nt.getBitByIndex(gt)?ft.setBitByIndex(gt,1):ft.setBitByIndex(gt,0);return ft}function flipX(tt){checkProcessable(tt,{bitDepth:[8,16]});for(let nt=0;nt<tt.height;nt++)for(let ot=0;ot<Math.floor(tt.width/2);ot++){const ft=ot,gt=tt.width-ot-1;for(let mt=0;mt<tt.channels;mt++){const yt=tt.getValue(ft,nt,mt);tt.setValue(ft,nt,mt,tt.getValue(gt,nt,mt)),tt.setValue(gt,nt,mt,yt)}}return tt}function flipY(tt){checkProcessable(tt,{bitDepth:[8,16]});for(let nt=0;nt<Math.floor(tt.height/2);nt++)for(let ot=0;ot<tt.width;ot++){const ft=nt,gt=tt.height-nt-1;for(let mt=0;mt<tt.channels;mt++){const yt=tt.getValue(ot,ft,mt);tt.setValue(ot,ft,mt,tt.getValue(ot,gt,mt)),tt.setValue(ot,gt,mt,yt)}}return tt}function flip(tt,nt={}){const{axis:ot="horizontal"}=nt,ft=getOutputImage(tt,nt,{clone:!0});return ot==="horizontal"?flipX(ft):flipY(ot==="vertical"?ft:flipX(ft))}function medianFilter(tt,nt){const{cellSize:ot=3,borderType:ft="reflect101",borderValue:gt}=nt;if(checkProcessable(tt,{bitDepth:[8,16]}),ot<1)throw new RangeError(`Invalid property "cellSize". Must be greater than 0. Received ${ot}.`);if(ot%2===0)throw new RangeError(`Invalid property "cellSize". Must be an odd number. Received ${ot}.`);const mt=getBorderInterpolation(ft,gt),yt=Image.createFrom(tt),_t=ot**2,Tt=new Uint16Array(_t),St=(ot-1)/2;for(let At=0;At<tt.channels;At++)for(let Ct=0;Ct<tt.height;Ct++)for(let Ot=0;Ot<tt.width;Ot++){let Dt=0;for(let Ut=-St;Ut<=St;Ut++)for(let Xt=-St;Xt<=St;Xt++)Tt[Dt++]=mt(Ot+Xt,Ct+Ut,At,tt);yt.setValue(Ot,Ct,At,xMedian(Tt))}return yt}function pixelate(tt,nt){const{cellSize:ot,algorithm:ft="center"}=nt;if(!Number.isInteger(ot))throw new TypeError("cellSize must be an integer");if(ot<2)throw new RangeError("cellSize must be greater than 1");const gt=getOutputImage(tt,nt),mt=getCellValueFunction(ft);for(let yt=0;yt<tt.channels;yt++)for(let _t=0;_t<tt.width;_t+=ot)for(let Tt=0;Tt<tt.height;Tt+=ot){const St=Math.min(ot,tt.width-_t),At=Math.min(ot,tt.height-Tt),Ct=mt(tt,yt,{width:St,height:At,origin:{column:_t,row:Tt}});for(let Ot=_t;Ot<_t+St;Ot++)for(let Dt=Tt;Dt<Tt+At;Dt++)gt.setValue(Ot,Dt,yt,Ct)}return gt}function getCellCenter(tt,nt,ot){const ft={column:Math.floor((ot.origin.column+ot.origin.column+ot.width-1)/2),row:Math.floor((ot.origin.row+ot.origin.row+ot.height-1)/2)};return tt.getValue(ft.column,ft.row,nt)}function getCellMean(tt,nt,ot){let ft=0;for(let gt=ot.origin.column;gt<ot.origin.column+ot.width;gt++)for(let mt=ot.origin.row;mt<ot.origin.row+ot.height;mt++)ft+=tt.getValue(gt,mt,nt);return Math.round(ft/(ot.width*ot.height))}function getCellMedian(tt,nt,ot){const ft=[];for(let gt=ot.origin.column;gt<ot.origin.column+ot.width;gt++)for(let mt=ot.origin.row;mt<ot.origin.row+ot.height;mt++)ft.push(tt.getValue(gt,mt,nt));return xMedian(ft)}function getCellValueFunction(tt){switch(tt){case"mean":return getCellMean;case"median":return getCellMedian;case"center":return getCellCenter;default:assertUnreachable(tt);break}}function getBorderPoints$1(tt,nt={}){const{innerBorders:ot=!1,allowCorners:ft=!1}=nt;ot||(tt=tt.solidFill());const gt=[];for(let mt=0;mt<tt.width;mt++)tt.getBit(mt,0)&&gt.push({column:mt,row:0}),tt.getBit(mt,tt.height-1)&&gt.push({column:mt,row:tt.height-1});for(let mt=0;mt<tt.height;mt++)tt.getBit(0,mt)&&gt.push({column:0,row:mt}),tt.getBit(tt.width-1,mt)&&gt.push({column:tt.width-1,row:mt});for(let mt=1;mt<tt.height-1;mt++)for(let yt=1;yt<tt.width-1;yt++)tt.getBit(yt,mt)&&((tt.getBit(yt-1,mt)===0||tt.getBit(yt,mt-1)===0||tt.getBit(yt+1,mt)===0||tt.getBit(yt,mt+1)===0)&&gt.push({column:yt,row:mt}),ft&&(tt.getBit(yt-1,mt-1)===0||tt.getBit(yt-1,mt+1)===0||tt.getBit(yt+1,mt-1)===0||tt.getBit(yt+1,mt+1)===0)&&gt.push({column:yt,row:mt}));return gt}function getLineLength(tt,nt){return Math.hypot(tt.column-nt.column,tt.row-nt.row)}function getPolygonPerimeter(tt){let nt=0;for(let ot=0;ot<tt.length;ot++)nt+=getLineLength(tt[(ot+1)%tt.length],tt[ot]);return nt}function getPolygonArea(tt){let nt=0;for(let ot=0;ot<tt.length;ot++){const ft=(ot+1)%tt.length;nt+=tt[ot].column*tt[ft].row,nt-=tt[ot].row*tt[ft].column}return Math.abs(nt/2)}function getExtendedBorderPoints(tt){const nt=tt.getBorderPoints({allowCorners:!0,innerBorders:!1}),ot=[];for(const ft of nt)ot.push(ft,{column:ft.column+1,row:ft.row},{column:ft.column+1,row:ft.row+1},{column:ft.column,row:ft.row+1});return ot}function monotoneChainConvexHull(tt,nt={}){const{sorted:ot=!1}=nt;ot||(tt=tt.slice().sort(byXThenY));const ft=tt.length,gt=new Array(ft*2);let mt=0;for(let _t=0;_t<ft;_t++){const Tt=tt[_t];for(;mt>=2&&cw(gt[mt-2],gt[mt-1],Tt)<=0;)mt--;gt[mt++]=Tt}const yt=mt+1;for(let _t=ft-2;_t>=0;_t--){const Tt=tt[_t];for(;mt>=yt&&cw(gt[mt-2],gt[mt-1],Tt)<=0;)mt--;gt[mt++]=Tt}return gt.slice(0,mt-1)}function cw(tt,nt,ot){return(nt.row-tt.row)*(ot.column-tt.column)-(nt.column-tt.column)*(ot.row-tt.row)}function byXThenY(tt,nt){return tt.column===nt.column?tt.row-nt.row:tt.column-nt.column}function getConvexHull(tt){const nt=getExtendedBorderPoints(tt);if(nt.length===0)return{points:[],surface:0,perimeter:0};const ot=monotoneChainConvexHull(nt),ft=getPolygonPerimeter(ot),gt=getPolygonArea(ot);return{points:ot,perimeter:ft,surface:gt}}function getFeret(tt){const nt=tt.getConvexHull(),ot=nt.points;if(nt.surface===0)return{minDiameter:{length:0,points:[{column:0,row:0},{column:0,row:0}],angle:0,calliperLines:[[{column:0,row:0},{column:0,row:0}],[{column:0,row:0},{column:0,row:0}]]},maxDiameter:{length:0,points:[{column:0,row:0},{column:0,row:0}],angle:0,calliperLines:[[{column:0,row:0},{column:0,row:0}],[{column:0,row:0},{column:0,row:0}]]},aspectRatio:1};let ft=Number.POSITIVE_INFINITY,gt=0,mt=[],yt;for(let Jt=0;Jt<ot.length;Jt++){const Kt=getAngle(ot[Jt],ot[(Jt+1)%ot.length]),Nt=rotate$1(-Kt,ot);let jt=0,kt=[];for(let Zt=0;Zt<ot.length;Zt++){const Ft=Math.abs(Nt[Jt].row-Nt[Zt].row);Ft>jt&&(jt=Ft,kt=[Nt[Jt],Nt[Zt]])}if(jt<ft){ft=jt,gt=Kt,mt=kt;const{minIndex:Zt,maxIndex:Ft}=findPointIndexesOfExtremeColumns(Nt);yt=getMinLines(gt,Zt,Ft,Nt,mt)}}const _t={points:rotate$1(gt,mt),length:ft,angle:toDegrees(gt),calliperLines:yt};let Tt=[],St=0,At=[];for(let Jt=0;Jt<ot.length-1;Jt++)for(let Kt=Jt+1;Kt<ot.length;Kt++){const Nt=(ot[Jt].column-ot[Kt].column)**2+(ot[Jt].row-ot[Kt].row)**2;Nt>St&&(St=Nt,Tt=[ot[Jt],ot[Kt]],At=[Jt,Kt])}const Ct=getAngle(Tt[0],Tt[1]),Ot=rotate$1(-Ct,ot),{minIndex:Dt,maxIndex:Ut}=findPointsIndexesOfExtremeRows(Ot),Xt=getMaxLines(Ct,Dt,Ut,Ot,At),Pt={length:Math.sqrt(St),angle:toDegrees(getAngle(Tt[0],Tt[1])),points:Tt,calliperLines:Xt};return{minDiameter:_t,maxDiameter:Pt,aspectRatio:_t.length/Pt.length}}function findPointIndexesOfExtremeColumns(tt){let nt=0,ot=0;for(let ft=0;ft<tt.length;ft++)tt[ft].column>tt[nt].column&&(nt=ft),tt[ft].column<tt[ot].column&&(ot=ft);return{minIndex:ot,maxIndex:nt}}function findPointsIndexesOfExtremeRows(tt){let nt=0,ot=0;for(let ft=0;ft<tt.length;ft++)tt[ft].row>tt[nt].row&&(nt=ft),tt[ft].row<tt[ot].row&&(ot=ft);return{minIndex:ot,maxIndex:nt}}function getMinLines(tt,nt,ot,ft,gt){const mt=[{column:ft[nt].column,row:gt[0].row},{column:ft[ot].column,row:gt[0].row}],yt=[{column:ft[nt].column,row:gt[1].row},{column:ft[ot].column,row:gt[1].row}];return[rotate$1(tt,mt),rotate$1(tt,yt)]}function getMaxLines(tt,nt,ot,ft,gt){const mt=[{column:ft[gt[0]].column,row:ft[nt].row},{column:ft[gt[0]].column,row:ft[ot].row}],yt=[{column:ft[gt[1]].column,row:ft[nt].row},{column:ft[gt[1]].column,row:ft[ot].row}];return[rotate$1(tt,mt),rotate$1(tt,yt)]}const leftFirst=(tt,nt)=>tt.column<=nt.column?-1:1,topFirst=(tt,nt)=>tt.row>=nt.row?-1:1;function getMbrAngle(tt){const nt=tt.slice().sort(leftFirst),ot=nt.slice(0,2),ft=nt.slice(2,4);ot.sort(topFirst),ft.sort(topFirst);const gt=ot[0],mt=ft[0];return-toDegrees(getAngle(gt,mt))}function getMbrFromPoints(tt){if(tt.length===0)return{points:[],angle:0,width:0,height:0,surface:0,perimeter:0,aspectRatio:0};if(tt.length===1)return{points:[tt[0],tt[0],tt[0],tt[0]],perimeter:0,surface:0,angle:0,width:0,height:0,aspectRatio:1};let nt=[],ot=Number.POSITIVE_INFINITY,ft=0,gt=[];for(let Ct=0;Ct<tt.length;Ct++){const Ot=getAngle(tt[Ct],tt[(Ct+1)%tt.length]);nt=rotate$1(-Ot,tt);const Dt=nt[Ct].column,Ut=nt[Ct].row,Xt=nt[(Ct+1)%nt.length].column,Pt=nt[(Ct+1)%nt.length].row;let Jt=!0,Kt=0,Nt=0,jt=0;for(const It of nt){const Wt=It.column,Qt=It.row,me=(Wt-Dt)/(Xt-Dt);Jt?(Jt=!1,Kt=me,Nt=me):(me<Kt&&(Kt=me),me>Nt&&(Nt=me));const rn=(-(Xt-Dt)*Qt+Xt*Ut-Pt*Dt)/(Xt-Dt);Math.abs(rn)>Math.abs(jt)&&(jt=rn)}const kt={column:Dt+Kt*(Xt-Dt),row:Ut},Zt={column:Dt+Nt*(Xt-Dt),row:Ut},Ft=Math.abs(jt*(Kt-Nt)*(Xt-Dt));Ft<ot&&(ft=Ot,ot=Ft,gt=[Zt,kt,{column:kt.column,row:kt.row-jt},{column:Zt.column,row:Zt.row-jt}])}const mt=rotate$1(ft,gt),yt=[Math.hypot(gt[0].column-gt[1].column,gt[0].row-gt[1].row),Math.hypot(gt[0].column-gt[3].column,gt[0].row-gt[3].row)],_t=Math.max(...yt),Tt=Math.min(...yt),St=getMbrAngle(mt),At=Tt/_t;return{points:mt,surface:ot,angle:St,width:_t,height:Tt,perimeter:2*_t+2*Tt,aspectRatio:At}}function getMbr(tt){const nt=monotoneChainConvexHull(getExtendedBorderPoints(tt));return getMbrFromPoints(nt)}function checkKernel(tt){if(tt.length%2===0||tt[0].length%2===0)throw new TypeError("the number of rows and columns of the kernel must be odd")}function erode(tt,nt={}){let ot=!1;nt.kernel===void 0&&(ot=!0);const{kernel:ft=[[1,1,1],[1,1,1],[1,1,1]],iterations:gt=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ft);let mt=!0;if(!ot){t:for(const _t of ft)for(const Tt of _t)if(Tt!==1){mt=!1;break t}}let yt=tt;for(let _t=0;_t<gt;_t++)if(yt instanceof Mask)if(mt){const Tt=yt.clone();yt=erodeMaskOnlyOnes(yt,Tt,ft[0].length,ft.length)}else{const Tt=Mask.createFrom(tt);yt=erodeMask(yt,Tt,ft)}else if(mt){const Tt=Image.createFrom(tt);yt=erodeGreyOnlyOnes(yt,Tt,ft[0].length,ft.length)}else{const Tt=Image.createFrom(tt);yt=erodeGrey(yt,Tt,ft)}return yt}function erodeGrey(tt,nt,ot){const ft=ot[0].length,gt=ot.length,mt=(ft-1)/2,yt=(gt-1)/2;for(let _t=0;_t<tt.height;_t++)for(let Tt=0;Tt<tt.width;Tt++){let St=tt.maxValue;for(let At=0;At<gt;At++)for(let Ct=0;Ct<ft;Ct++){if(ot[At][Ct]!==1)continue;const Ot=Ct-mt+Tt,Dt=At-yt+_t;if(Ot<0||Dt<0||Ot>=tt.width||Dt>=tt.height)continue;const Ut=tt.getValue(Ot,Dt,0);Ut<St&&(St=Ut)}nt.setValue(Tt,_t,0,St)}return nt}function erodeGreyOnlyOnes(tt,nt,ot,ft){const gt=(ot-1)/2,mt=(ft-1)/2,yt=[];for(let _t=0;_t<tt.width;_t++)yt.push(0);for(let _t=0;_t<tt.height;_t++){for(let Tt=0;Tt<tt.width;Tt++){let St=tt.maxValue;for(let At=Math.max(0,_t-mt);At<Math.min(tt.height,_t+mt+1);At++){const Ct=tt.getValue(Tt,At,0);Ct<St&&(St=Ct)}yt[Tt]=St}for(let Tt=0;Tt<tt.width;Tt++){let St=tt.maxValue;for(let At=Math.max(0,Tt-gt);At<Math.min(tt.width,Tt+gt+1);At++)yt[At]<St&&(St=yt[At]);nt.setValue(Tt,_t,0,St)}}return nt}function erodeMask(tt,nt,ot){const ft=ot[0].length,gt=ot.length,mt=(ft-1)/2,yt=(gt-1)/2;for(let _t=0;_t<tt.height;_t++)for(let Tt=0;Tt<tt.width;Tt++){let St=1;for(let At=0;At<gt;At++)for(let Ct=0;Ct<ft;Ct++){if(ot[At][Ct]!==1)continue;const Ot=Ct-mt+Tt,Dt=At-yt+_t;if(Dt<0||Ot<0||Ot>=tt.width||Dt>=tt.height)continue;if(tt.getBit(Ot,Dt)===0){St=0;break}}St===1&&nt.setBit(Tt,_t,1)}return nt}function erodeMaskOnlyOnes(tt,nt,ot,ft){const gt=(ot-1)/2,mt=(ft-1)/2,yt=[];for(let _t=0;_t<tt.width;_t++)yt.push(0);for(let _t=0;_t<tt.height;_t++){for(let Tt=0;Tt<tt.width;Tt++){yt[Tt]=1;for(let St=Math.max(0,_t-mt);St<Math.min(tt.height,_t+mt+1);St++)if(tt.getBit(Tt,St)===0){yt[Tt]=0;break}}for(let Tt=0;Tt<tt.width;Tt++)if(nt.getBit(Tt,_t)!==0){for(let St=Math.max(0,Tt-gt);St<Math.min(tt.width,Tt+gt+1);St++)if(yt[St]===0){nt.setBit(Tt,_t,0);break}}}return nt}function dilate(tt,nt={}){let ot=!1;nt.kernel===void 0&&(ot=!0);const{kernel:ft=[[1,1,1],[1,1,1],[1,1,1]],iterations:gt=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ft);let mt=!0;if(!ot){t:for(const _t of ft)for(const Tt of _t)if(Tt!==1){mt=!1;break t}}let yt=tt;for(let _t=0;_t<gt;_t++)if(yt instanceof Mask)if(mt){const Tt=yt.clone();yt=dilatMaskOnlyOnes(yt,Tt,ft[0].length,ft.length)}else{const Tt=Mask.createFrom(yt);yt=dilateMask(yt,Tt,ft)}else if(mt){const Tt=Image.createFrom(yt);yt=dilateGreyOnlyOnes(yt,Tt,ft[0].length,ft.length)}else{const Tt=Image.createFrom(yt);yt=dilateGrey(yt,Tt,ft)}return yt}function dilateGrey(tt,nt,ot){const ft=ot[0].length,gt=ot.length,mt=(ft-1)/2,yt=(gt-1)/2;for(let _t=0;_t<tt.height;_t++)for(let Tt=0;Tt<tt.width;Tt++){let St=0;for(let At=0;At<gt;At++)for(let Ct=0;Ct<ft;Ct++){if(ot[At][Ct]!==1)continue;const Ot=Ct-mt+Tt,Dt=At-yt+_t;if(Ot<0||Dt<0||Ot>=tt.width||Dt>=tt.height)continue;const Ut=tt.getValue(Ot,Dt,0);Ut>St&&(St=Ut)}nt.setValue(Tt,_t,0,St)}return nt}function dilateGreyOnlyOnes(tt,nt,ot,ft){const gt=(ot-1)/2,mt=(ft-1)/2,yt=[];for(let _t=0;_t<tt.width;_t++)yt.push(0);for(let _t=0;_t<tt.height;_t++){for(let Tt=0;Tt<tt.width;Tt++){let St=0;for(let At=Math.max(0,_t-mt);At<Math.min(tt.height,_t+mt+1);At++){const Ct=tt.getValue(Tt,At,0);Ct>St&&(St=Ct)}yt[Tt]=St}for(let Tt=0;Tt<tt.width;Tt++){let St=0;for(let At=Math.max(0,Tt-gt);At<Math.min(tt.width,Tt+gt+1);At++)yt[At]>St&&(St=yt[At]);nt.setValue(Tt,_t,0,St)}}return nt}function dilateMask(tt,nt,ot){const ft=ot[0].length,gt=ot.length,mt=(ft-1)/2,yt=(gt-1)/2;for(let _t=0;_t<tt.height;_t++)for(let Tt=0;Tt<tt.width;Tt++){let St=0;for(let At=0;At<gt;At++)for(let Ct=0;Ct<ft;Ct++){if(ot[At][Ct]!==1)continue;const Ot=Ct-mt+Tt,Dt=At-yt+_t;if(Dt<0||Ot<0||Ot>=tt.width||Dt>=tt.height)continue;if(tt.getBit(Ot,Dt)===1){St=1;break}}St===1&&nt.setBit(Tt,_t,1)}return nt}function dilatMaskOnlyOnes(tt,nt,ot,ft){const gt=(ot-1)/2,mt=(ft-1)/2,yt=[];for(let _t=0;_t<tt.width;_t++)yt.push(1);for(let _t=0;_t<tt.height;_t++){for(let Tt=0;Tt<tt.width;Tt++){yt[Tt]=0;for(let St=Math.max(0,_t-mt);St<Math.min(tt.height,_t+mt+1);St++)if(tt.getBit(Tt,St)===1){yt[Tt]=1;break}}for(let Tt=0;Tt<tt.width;Tt++)if(nt.getBit(Tt,_t)!==1){for(let St=Math.max(0,Tt-gt);St<Math.min(tt.width,Tt+gt+1);St++)if(yt[St]===1){nt.setBit(Tt,_t,1);break}}}return nt}function open(tt,nt={}){const{kernel:ot=[[1,1,1],[1,1,1],[1,1,1]],iterations:ft=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ot);let gt=tt;for(let mt=0;mt<ft;mt++)gt=gt.erode({kernel:ot}),gt=gt.dilate({kernel:ot});return gt}function close(tt,nt={}){const{kernel:ot=[[1,1,1],[1,1,1],[1,1,1]],iterations:ft=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ot);let gt=tt;for(let mt=0;mt<ft;mt++)gt=gt.dilate({kernel:ot}).erode({kernel:ot});return gt}function topHat(tt,nt={}){const{kernel:ot=[[1,1,1],[1,1,1],[1,1,1]],iterations:ft=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ot);let gt=tt;for(let mt=0;mt<ft;mt++){const yt=gt.open({kernel:ot});gt=subtract(yt,gt,{absolute:!0})}return gt}function bottomHat(tt,nt={}){const{kernel:ot=[[1,1,1],[1,1,1],[1,1,1]],iterations:ft=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ot);let gt=tt;for(let mt=0;mt<ft;mt++){const yt=gt.close({kernel:ot});gt=subtract(yt,gt,{absolute:!0})}return gt}function morphologicalGradient(tt,nt={}){const{kernel:ot=[[1,1,1],[1,1,1],[1,1,1]],iterations:ft=1}=nt;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:1,alpha:!1}),checkKernel(ot);let gt=tt;for(let mt=0;mt<ft;mt++){const yt=gt.dilate({kernel:ot}),_t=gt.erode({kernel:ot});gt=subtract(yt,_t,{absolute:!0})}return gt}function*borderIterator(tt){for(let nt=0;nt<tt.width;nt++)yield nt;for(let nt=2;nt<tt.height;nt++)yield nt*tt.width-1;for(let nt=0;nt<tt.width;nt++)yield tt.width*tt.height-nt-1;for(let nt=tt.height-2;nt>=1;nt--)yield nt*tt.width}const MAX_ARRAY=65536,toProcess=new Uint32Array(MAX_ARRAY);function multipleFloodFill(tt,nt={}){const{startPixels:ot=[0],startPixelValue:ft=0,newPixelValue:gt=1,allowCorners:mt=!1}=nt,yt=maskToOutputMask(tt,nt,{clone:!0}),_t=Mask.createFrom(tt);let Tt=0,St=0;for(const Ct of ot)yt.getBitByIndex(Ct)===ft&&(toProcess[St++%MAX_ARRAY]=Ct,_t.setBitByIndex(Ct,1),yt.setBitByIndex(Ct,gt));for(;Tt<St;){assert(St-Tt<=MAX_ARRAY);const Ct=toProcess[Tt++%MAX_ARRAY];yt.setBitByIndex(Ct,gt);const Ot=Ct<tt.width,Dt=Ct%tt.width===0,Ut=Ct%tt.width===tt.width-1,Xt=Ct>tt.size-tt.width;if(!Xt){const Pt=Ct+tt.width;At(Pt)}if(!Dt){const Pt=Ct-1;At(Pt)}if(!Ot){const Pt=Ct-tt.width;At(Pt)}if(!Ut){const Pt=Ct+1;At(Pt)}if(mt){if(!Ot){if(!Dt){const Pt=Ct-tt.width-1;At(Pt)}if(!Ut){const Pt=Ct-tt.width+1;At(Pt)}}if(!Xt){if(!Dt){const Pt=Ct+tt.width-1;At(Pt)}if(!Ut){const Pt=Ct+tt.width+1;At(Pt)}}}}function At(Ct){_t.getBitByIndex(Ct)||yt.getBitByIndex(Ct)===ft&&(toProcess[St++%MAX_ARRAY]=Ct,_t.setBitByIndex(Ct,1))}return yt}function clearBorder(tt,nt={}){const{allowCorners:ot=!1,out:ft,color:gt="white"}=nt;return multipleFloodFill(tt,{startPixels:borderIterator(tt),startPixelValue:gt==="white"?1:0,newPixelValue:gt==="white"?0:1,allowCorners:ot,out:ft})}const kernelX=[[-1,0,1],[-2,0,2],[-1,0,1]],kernelY=[[-1,-2,-1],[0,0,0],[1,2,1]];function cannyEdgeDetector(tt,nt={}){const{hysteresis:ot=!0,lowThreshold:ft=.04,highThreshold:gt=.1,gaussianBlurOptions:mt={sigma:1}}=nt,yt=ft*tt.maxValue,_t=gt*tt.maxValue;checkProcessable(tt,{colorModel:"GREY"});const Tt=tt.width,St=tt.height,At=tt.gaussianBlur(mt),Ct=At.rawDirectConvolution(kernelY),Ot=At.rawDirectConvolution(kernelX),Dt=new Float64Array(tt.size);for(let Jt=0;Jt<tt.size;Jt++)Dt[Jt]=Math.hypot(Ct[Jt],Ot[Jt]);const Ut=new Float64Array(tt.size),Xt=new Float64Array(tt.size),Pt=imageToOutputMask(tt,nt);for(let Jt=1;Jt<Tt-1;Jt++)for(let Kt=1;Kt<St-1;Kt++){const Nt=Ct[getIndex(Jt,Kt,tt,0)],jt=Ot[getIndex(Jt,Kt,tt,0)],kt=getDirection(Nt,jt),Zt=Dt[getIndex(Jt,Kt,tt,0)];(kt===0&&Zt>=Dt[getIndex(Jt,Kt-1,tt,0)]&&Zt>=Dt[getIndex(Jt,Kt+1,tt,0)]||kt===1&&Zt>=Dt[getIndex(Jt-1,Kt-1,tt,0)]&&Zt>=Dt[getIndex(Jt+1,Kt+1,tt,0)]||kt===2&&Zt>=Dt[getIndex(Jt-1,Kt,tt,0)]&&Zt>=Dt[getIndex(Jt+1,Kt,tt,0)]||kt===3&&Zt>=Dt[getIndex(Jt-1,Kt+1,tt,0)]&&Zt>=Dt[getIndex(Jt+1,Kt-1,tt,0)])&&(Ut[getIndex(Jt,Kt,tt,0)]=Zt)}for(let Jt=0;Jt<Tt*St;++Jt){const Kt=Ut[Jt];let Nt=0;Kt>_t&&(Nt++,Pt.setBitByIndex(Jt,1)),Kt>yt&&Nt++,Xt[Jt]=Nt}if(ot){let Jt=[];for(let Kt=1;Kt<Tt-1;++Kt)for(let Nt=1;Nt<St-1;++Nt)if(Xt[getIndex(Kt,Nt,tt,0)]===1){t:for(let jt=Kt-1;jt<Kt+2;++jt)for(let kt=Nt-1;kt<Nt+2;++kt)if(Xt[getIndex(jt,kt,tt,0)]===2){Jt.push([Kt,Nt]),Pt.setValue(Kt,Nt,0,1);break t}}for(;Jt.length>0;){const Kt=[];for(const Nt of Jt)for(let jt=-1;jt<2;++jt)for(let kt=-1;kt<2;++kt){if(jt===0&&kt===0)continue;const Zt=Nt[0]+jt,Ft=Nt[1]+kt;Xt[getIndex(Ft,Zt,tt,0)]===1&&Pt.getValue(Ft,Zt,0)===0&&(Kt.push([Zt,Ft]),Pt.setValue(Ft,Zt,0,1))}Jt=Kt}}return Pt}function getDirection(tt,nt){return(Math.round(Math.atan2(nt,tt)*(4/Math.PI))+4)%4}function floodFill(tt,nt={}){const{origin:ot={row:0,column:0},allowCorners:ft=!1,out:gt}=nt,mt=getIndex(ot.column,ot.row,tt);return multipleFloodFill(tt,{startPixels:[mt],allowCorners:ft,out:gt})}function solidFill(tt,nt={}){const{allowCorners:ot=!1}=nt,ft=maskToOutputMask(tt,nt,{clone:!0}),mt=tt.invert().clearBorder({allowCorners:ot});return ft.or(mt,{out:ft})}function boolToNumber(tt){let nt;return typeof tt=="boolean"?nt=tt?1:0:nt=tt,nt}class Mask{width;height;size;bitDepth;colorModel;components;channels;alpha;maxValue;origin;data;constructor(nt,ot,ft={}){const{data:gt,origin:mt={row:0,column:0}}=ft;if(nt<1||!Number.isInteger(nt))throw new RangeError(`width must be an integer and at least 1. Received ${nt}`);if(ot<1||!Number.isInteger(ot))throw new RangeError(`height must be an integer and at least 1. Received ${ot}`);this.width=nt,this.height=ot,this.size=nt*ot,this.bitDepth=1,this.colorModel="BINARY",this.origin=mt;const yt=colorModels[this.colorModel];if(this.components=yt.components,this.alpha=yt.alpha,this.channels=yt.channels,this.maxValue=1,gt===void 0)this.data=new Uint8Array(this.size);else{const _t=this.size*this.channels;if(gt.length!==_t)throw new RangeError(`incorrect data size: ${gt.length}. Expected ${_t}`);this.data=gt}}static createFrom(nt,ot={}){const{width:ft=nt.width,height:gt=nt.height,origin:mt=nt.origin}=ot;return new Mask(ft,gt,{origin:mt,...ot})}getPixel(nt,ot){const ft=[],gt=ot*this.width+nt;return ft.push(this.data[gt]),ft}setPixel(nt,ot,ft){const gt=ot*this.width+nt;this.data[gt]=ft[0]}setVisiblePixel(nt,ot,ft){nt>=0&&nt<this.width&&ot>=0&&ot<this.height&&this.setPixel(nt,ot,ft)}getPixelByIndex(nt){return[this.data[nt]]}setPixelByIndex(nt,ot){this.data[nt]=ot[0]}static fromPoints(nt,ot,ft){const gt=new Mask(nt,ot);for(const mt of ft)gt.setBit(mt.column,mt.row,1);return gt}clone(){return Mask.createFrom(this,{data:this.data.slice()})}getBit(nt,ot){const ft=ot*this.width+nt;return this.data[ft]}setBit(nt,ot,ft){const gt=ot*this.width+nt;this.data[gt]=ft}getBitByIndex(nt){return this.data[nt*this.channels]}setBitByIndex(nt,ot){this.data[nt*this.channels]=boolToNumber(ot)}getNbNonZeroPixels(){let nt=0;for(const ot of this.data)ot&&nt++;return nt}getValue(nt,ot,ft){return checkChannel(ft),this.getBit(nt,ot)}setValue(nt,ot,ft,gt){checkChannel(ft),this.setBit(nt,ot,gt)}getValueByIndex(nt,ot){return checkChannel(ot),this.getBitByIndex(nt)}setValueByIndex(nt,ot,ft){checkChannel(ot),this.setBitByIndex(nt,ft)}getValueByPoint(nt){return this.getValue(nt.column,nt.row,0)}setValueByPoint(nt,ot){this.setValue(nt.column,nt.row,0,ot)}getRawImage(){return{width:this.width,height:this.height,data:this.data}}[Symbol.for("nodejs.util.inspect.custom")](){let nt;return this.height>20||this.width>20?nt="[...]":nt=printData$1(this),`Mask {
  width: ${this.width}
  height: ${this.height}
  data: ${nt}
}`}fill(nt){const ot=boolToNumber(nt);return this.data.fill(ot),this}convertColor(nt){return convertColor(this,nt)}invert(nt){return invert(this,nt)}subtract(nt,ot){return subtract(this,nt,ot)}and(nt,ot){return and(this,nt,ot)}or(nt,ot){return or(this,nt,ot)}getBorderPoints(nt){return getBorderPoints$1(this,nt)}getConvexHull(){return getConvexHull(this)}getMbr(){return getMbr(this)}getFeret(){return getFeret(this)}erode(nt){return erode(this,nt)}dilate(nt){return dilate(this,nt)}open(nt){return open(this,nt)}close(nt){return close(this,nt)}topHat(nt){return topHat(this,nt)}bottomHat(nt){return bottomHat(this,nt)}morphologicalGradient(nt){return morphologicalGradient(this,nt)}clearBorder(nt){return clearBorder(this,nt)}floodFill(nt){return floodFill(this,nt)}solidFill(nt){return solidFill(this,nt)}drawPoints(nt,ot={}){return drawPoints(this,nt,ot)}drawLine(nt,ot,ft={}){return drawLineOnMask(this,nt,ot,ft)}drawPolyline(nt,ot={}){return drawPolylineOnMask(this,nt,ot)}drawPolygon(nt,ot={}){return drawPolygonOnMask(this,nt,ot)}drawRectangle(nt={}){return drawRectangle(this,nt)}copyTo(nt,ot={}){return copyTo(this,nt,ot)}paintMask(nt,ot){return paintMaskOnMask(this,nt,ot)}}function printData$1(tt){const nt=[];for(let ot=0;ot<tt.height;ot++){const ft=[];for(let gt=0;gt<tt.width;gt++)ft.push(String(tt.getBit(gt,ot)));nt.push(`[${ft.join(" ")}]`)}return nt.join(`
        `)}function checkChannel(tt){if(tt!==0)throw new RangeError(`channel value must be 0 on type Mask. Received ${tt}`)}function subtract(tt,nt,ot={}){const{absolute:ft=!1}=ot;tt instanceof Image&&checkProcessable(tt,{bitDepth:[1,8,16],components:[1,3],alpha:!1}),validateForComparison(tt,nt);const gt=tt.clone();if(gt instanceof Image)for(let mt=0;mt<tt.size;mt++)for(let yt=0;yt<tt.channels;yt++){const _t=tt.getValueByIndex(mt,yt)-nt.getValueByIndex(mt,yt);ft?_t<0?gt.setValueByIndex(mt,yt,-_t):gt.setValueByIndex(mt,yt,_t):_t<0?gt.setValueByIndex(mt,yt,0):gt.setValueByIndex(mt,yt,_t)}else if(tt instanceof Mask&&nt instanceof Mask)for(let mt=0;mt<tt.size;mt++){const yt=tt.getBitByIndex(mt)-nt.getBitByIndex(mt);ft?gt.setBitByIndex(mt,yt?1:0):gt.setBitByIndex(mt,yt>0?1:0)}return gt}function add(tt,nt){tt instanceof Image&&checkProcessable(tt,{bitDepth:[8,16],components:[1,3],alpha:!1}),validateForComparison(tt,nt);const ot=tt.clone(),ft=getClamp(tt);for(let gt=0;gt<tt.size;gt++)for(let mt=0;mt<tt.channels;mt++){const yt=tt.getValueByIndex(gt,mt)+nt.getValueByIndex(gt,mt);ot.setValueByIndex(gt,mt,ft(yt))}return ot}function multiply(tt,nt,ot={}){const{channels:ft=new Array(tt.channels).fill(0).map((mt,yt)=>yt)}=ot;validateChannels(ft,tt);const gt=getOutputImage(tt,ot,{clone:!0});if(ft.length===0)return gt;for(const mt of ft)for(let yt=0;yt<gt.height;yt++)for(let _t=0;_t<gt.width;_t++){const Tt=gt.getValue(_t,yt,mt)*nt;gt.setClampedValue(_t,yt,mt,Tt)}return gt}function mean(tt,nt){const ot=new Array(tt.channels).fill(0),ft=nt?nt.points.length:tt.size;if(ft===0)throw new RangeError("Array of coordinates is empty.");if(nt)for(const gt of nt.points)for(let mt=0;mt<tt.channels;mt++){if(gt.column<0||gt.column>=tt.width||gt.row<0||gt.row>=tt.height)throw new RangeError(`Invalid coordinate: {column: ${gt.column}, row: ${gt.row}}.`);ot[mt]+=tt.getValueByPoint(gt,mt)}else for(let gt=0;gt<tt.height;gt++)for(let mt=0;mt<tt.width;mt++)for(let yt=0;yt<tt.channels;yt++)ot[yt]+=tt.getValue(mt,gt,yt);return ot.map(gt=>gt/ft)}function histogram(tt,nt={}){let{channel:ot}=nt;const{slots:ft=2**tt.bitDepth}=nt;if(!(ft!==0&&(ft&ft-1)===0))throw new RangeError("slots must be a power of 2, for example: 64, 256, 1024");if(typeof ot!="number"){if(tt.channels!==1)throw new TypeError("channel option is mandatory for multi-channel images");ot=0}validateChannel(ot,tt);const gt=new Uint32Array(ft);let mt=0;const yt=Math.log2(ft);mt=tt.bitDepth-yt;for(let _t=0;_t<tt.size;_t++)gt[tt.getValueByIndex(_t,ot)>>mt]++;return gt}function median(tt,nt){const ot=new Array(tt.channels).fill(0);if(nt){if(nt.points.length===0)throw new RangeError("Array of coordinates is empty.");for(let ft=0;ft<tt.channels;ft++){const gt=[];for(const mt of nt.points){if(mt.column<0||mt.column>=tt.width||mt.row<0||mt.row>=tt.height)throw new RangeError(`Invalid coordinate: {column: ${mt.column}, row: ${mt.row}}.`);gt.push(tt.getValueByPoint(mt,ft))}ot[ft]=quickMedian(gt)}}else for(let ft=0;ft<tt.channels;ft++){const gt=tt.getChannel(ft);ot[ft]=quickMedian(gt)}return ot}function variance(tt,nt){const ot=tt.mean(nt),ft=new Array(tt.channels).fill(0);if(nt)for(const mt of nt.points)for(let yt=0;yt<tt.channels;yt++)ft[yt]+=(tt.getValue(mt.column,mt.row,yt)-ot[yt])**2;else for(let mt=0;mt<tt.size;mt++)for(let yt=0;yt<tt.channels;yt++)ft[yt]+=(tt.getValueByIndex(mt,yt)-ot[yt])**2;const gt=nt?nt.points.length*tt.channels:tt.size*tt.channels;return ft.map(mt=>mt/gt)}class MultivariateLinearRegression{constructor(nt,ot,ft={}){const{intercept:gt=!0,statistics:mt=!0}=ft;if(this.statistics=mt,nt===!0)this.weights=ot.weights,this.inputs=ot.inputs,this.outputs=ot.outputs,this.intercept=ot.intercept;else{nt=new Matrix(nt),ot=new Matrix(ot),gt&&nt.addColumn(new Array(nt.rows).fill(1));let yt=nt.transpose();const _t=yt.mmul(nt),Tt=yt.mmul(ot),St=new SVD(_t).inverse(),At=Tt.transpose().mmul(St).transpose();if(this.weights=At.to2DArray(),this.inputs=nt.columns,this.outputs=ot.columns,gt&&this.inputs--,this.intercept=gt,mt){const Ct=nt.mmul(At),Dt=ot.clone().addM(Ct.neg()).to2DArray().map(Ut=>Math.pow(Ut[0],2)).reduce((Ut,Xt)=>Ut+Xt)/(ot.rows-nt.columns);this.stdError=Math.sqrt(Dt),this.stdErrorMatrix=pseudoInverse(_t).mul(Dt),this.stdErrors=this.stdErrorMatrix.diagonal().map(Ut=>Math.sqrt(Ut)),this.tStats=this.weights.map((Ut,Xt)=>this.stdErrors[Xt]===0?0:Ut[0]/this.stdErrors[Xt])}}}predict(nt){if(Array.isArray(nt)){if(typeof nt[0]=="number")return this._predict(nt);if(Array.isArray(nt[0])){const ot=new Array(nt.length);for(let ft=0;ft<nt.length;ft++)ot[ft]=this._predict(nt[ft]);return ot}}else if(Matrix.isMatrix(nt)){const ot=new Matrix(nt.rows,this.outputs);for(let ft=0;ft<nt.rows;ft++)ot.setRow(ft,this._predict(nt.getRow(ft)));return ot}throw new TypeError("x must be a matrix or array of numbers")}_predict(nt){const ot=new Array(this.outputs);if(this.intercept)for(let ft=0;ft<this.outputs;ft++)ot[ft]=this.weights[this.inputs][ft];else ot.fill(0);for(let ft=0;ft<this.inputs;ft++)for(let gt=0;gt<this.outputs;gt++)ot[gt]+=this.weights[ft][gt]*nt[ft];return ot}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((nt,ot)=>({label:ot===this.weights.length-1?"Intercept":`X Variable ${ot+1}`,coefficients:nt,standardError:this.stdErrors[ot],tStat:this.tStats[ot]}))}:void 0}}static load(nt){if(nt.name!=="multivariateLinearRegression")throw new Error("not a MLR model");return new MultivariateLinearRegression(!0,nt)}}var r$1={grad:.9,turn:360,rad:360/(2*Math.PI)},t$1=function(tt){return typeof tt=="string"?tt.length>0:typeof tt=="number"},n$1=function(tt,nt,ot){return nt===void 0&&(nt=0),ot===void 0&&(ot=Math.pow(10,nt)),Math.round(ot*tt)/ot+0},e$1=function(tt,nt,ot){return nt===void 0&&(nt=0),ot===void 0&&(ot=1),tt>ot?ot:tt>nt?tt:nt},u$1=function(tt){return(tt=isFinite(tt)?tt%360:0)>0?tt:tt+360},a$1=function(tt){return{r:e$1(tt.r,0,255),g:e$1(tt.g,0,255),b:e$1(tt.b,0,255),a:e$1(tt.a)}},o$1=function(tt){return{r:n$1(tt.r),g:n$1(tt.g),b:n$1(tt.b),a:n$1(tt.a,3)}},i$1=/^#([0-9a-f]{3,8})$/i,s=function(tt){var nt=tt.toString(16);return nt.length<2?"0"+nt:nt},h$1=function(tt){var nt=tt.r,ot=tt.g,ft=tt.b,gt=tt.a,mt=Math.max(nt,ot,ft),yt=mt-Math.min(nt,ot,ft),_t=yt?mt===nt?(ot-ft)/yt:mt===ot?2+(ft-nt)/yt:4+(nt-ot)/yt:0;return{h:60*(_t<0?_t+6:_t),s:mt?yt/mt*100:0,v:mt/255*100,a:gt}},b$1=function(tt){var nt=tt.h,ot=tt.s,ft=tt.v,gt=tt.a;nt=nt/360*6,ot/=100,ft/=100;var mt=Math.floor(nt),yt=ft*(1-ot),_t=ft*(1-(nt-mt)*ot),Tt=ft*(1-(1-nt+mt)*ot),St=mt%6;return{r:255*[ft,_t,yt,yt,Tt,ft][St],g:255*[Tt,ft,ft,_t,yt,yt][St],b:255*[yt,yt,Tt,ft,ft,_t][St],a:gt}},g=function(tt){return{h:u$1(tt.h),s:e$1(tt.s,0,100),l:e$1(tt.l,0,100),a:e$1(tt.a)}},d=function(tt){return{h:n$1(tt.h),s:n$1(tt.s),l:n$1(tt.l),a:n$1(tt.a,3)}},f=function(tt){return b$1((ot=(nt=tt).s,{h:nt.h,s:(ot*=((ft=nt.l)<50?ft:100-ft)/100)>0?2*ot/(ft+ot)*100:0,v:ft+ot,a:nt.a}));var nt,ot,ft},c=function(tt){return{h:(nt=h$1(tt)).h,s:(gt=(200-(ot=nt.s))*(ft=nt.v)/100)>0&&gt<200?ot*ft/100/(gt<=100?gt:200-gt)*100:0,l:gt/2,a:nt.a};var nt,ot,ft,gt},l$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p$1=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(tt){var nt=i$1.exec(tt);return nt?(tt=nt[1]).length<=4?{r:parseInt(tt[0]+tt[0],16),g:parseInt(tt[1]+tt[1],16),b:parseInt(tt[2]+tt[2],16),a:tt.length===4?n$1(parseInt(tt[3]+tt[3],16)/255,2):1}:tt.length===6||tt.length===8?{r:parseInt(tt.substr(0,2),16),g:parseInt(tt.substr(2,2),16),b:parseInt(tt.substr(4,2),16),a:tt.length===8?n$1(parseInt(tt.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(tt){var nt=v.exec(tt)||m.exec(tt);return nt?nt[2]!==nt[4]||nt[4]!==nt[6]?null:a$1({r:Number(nt[1])/(nt[2]?100/255:1),g:Number(nt[3])/(nt[4]?100/255:1),b:Number(nt[5])/(nt[6]?100/255:1),a:nt[7]===void 0?1:Number(nt[7])/(nt[8]?100:1)}):null},"rgb"],[function(tt){var nt=l$1.exec(tt)||p$1.exec(tt);if(!nt)return null;var ot,ft,gt=g({h:(ot=nt[1],ft=nt[2],ft===void 0&&(ft="deg"),Number(ot)*(r$1[ft]||1)),s:Number(nt[3]),l:Number(nt[4]),a:nt[5]===void 0?1:Number(nt[5])/(nt[6]?100:1)});return f(gt)},"hsl"]],object:[[function(tt){var nt=tt.r,ot=tt.g,ft=tt.b,gt=tt.a,mt=gt===void 0?1:gt;return t$1(nt)&&t$1(ot)&&t$1(ft)?a$1({r:Number(nt),g:Number(ot),b:Number(ft),a:Number(mt)}):null},"rgb"],[function(tt){var nt=tt.h,ot=tt.s,ft=tt.l,gt=tt.a,mt=gt===void 0?1:gt;if(!t$1(nt)||!t$1(ot)||!t$1(ft))return null;var yt=g({h:Number(nt),s:Number(ot),l:Number(ft),a:Number(mt)});return f(yt)},"hsl"],[function(tt){var nt=tt.h,ot=tt.s,ft=tt.v,gt=tt.a,mt=gt===void 0?1:gt;if(!t$1(nt)||!t$1(ot)||!t$1(ft))return null;var yt=(function(_t){return{h:u$1(_t.h),s:e$1(_t.s,0,100),v:e$1(_t.v,0,100),a:e$1(_t.a)}})({h:Number(nt),s:Number(ot),v:Number(ft),a:Number(mt)});return b$1(yt)},"hsv"]]},N=function(tt,nt){for(var ot=0;ot<nt.length;ot++){var ft=nt[ot][0](tt);if(ft)return[ft,nt[ot][1]]}return[null,void 0]},x=function(tt){return typeof tt=="string"?N(tt.trim(),y.string):typeof tt=="object"&&tt!==null?N(tt,y.object):[null,void 0]},M$1=function(tt,nt){var ot=c(tt);return{h:ot.h,s:e$1(ot.s+100*nt,0,100),l:ot.l,a:ot.a}},H=function(tt){return(299*tt.r+587*tt.g+114*tt.b)/1e3/255},$=function(tt,nt){var ot=c(tt);return{h:ot.h,s:ot.s,l:e$1(ot.l+100*nt,0,100),a:ot.a}},j=(function(){function tt(nt){this.parsed=x(nt)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return tt.prototype.isValid=function(){return this.parsed!==null},tt.prototype.brightness=function(){return n$1(H(this.rgba),2)},tt.prototype.isDark=function(){return H(this.rgba)<.5},tt.prototype.isLight=function(){return H(this.rgba)>=.5},tt.prototype.toHex=function(){return nt=o$1(this.rgba),ot=nt.r,ft=nt.g,gt=nt.b,yt=(mt=nt.a)<1?s(n$1(255*mt)):"","#"+s(ot)+s(ft)+s(gt)+yt;var nt,ot,ft,gt,mt,yt},tt.prototype.toRgb=function(){return o$1(this.rgba)},tt.prototype.toRgbString=function(){return nt=o$1(this.rgba),ot=nt.r,ft=nt.g,gt=nt.b,(mt=nt.a)<1?"rgba("+ot+", "+ft+", "+gt+", "+mt+")":"rgb("+ot+", "+ft+", "+gt+")";var nt,ot,ft,gt,mt},tt.prototype.toHsl=function(){return d(c(this.rgba))},tt.prototype.toHslString=function(){return nt=d(c(this.rgba)),ot=nt.h,ft=nt.s,gt=nt.l,(mt=nt.a)<1?"hsla("+ot+", "+ft+"%, "+gt+"%, "+mt+")":"hsl("+ot+", "+ft+"%, "+gt+"%)";var nt,ot,ft,gt,mt},tt.prototype.toHsv=function(){return nt=h$1(this.rgba),{h:n$1(nt.h),s:n$1(nt.s),v:n$1(nt.v),a:n$1(nt.a,3)};var nt},tt.prototype.invert=function(){return w$1({r:255-(nt=this.rgba).r,g:255-nt.g,b:255-nt.b,a:nt.a});var nt},tt.prototype.saturate=function(nt){return nt===void 0&&(nt=.1),w$1(M$1(this.rgba,nt))},tt.prototype.desaturate=function(nt){return nt===void 0&&(nt=.1),w$1(M$1(this.rgba,-nt))},tt.prototype.grayscale=function(){return w$1(M$1(this.rgba,-1))},tt.prototype.lighten=function(nt){return nt===void 0&&(nt=.1),w$1($(this.rgba,nt))},tt.prototype.darken=function(nt){return nt===void 0&&(nt=.1),w$1($(this.rgba,-nt))},tt.prototype.rotate=function(nt){return nt===void 0&&(nt=15),this.hue(this.hue()+nt)},tt.prototype.alpha=function(nt){return typeof nt=="number"?w$1({r:(ot=this.rgba).r,g:ot.g,b:ot.b,a:nt}):n$1(this.rgba.a,3);var ot},tt.prototype.hue=function(nt){var ot=c(this.rgba);return typeof nt=="number"?w$1({h:nt,s:ot.s,l:ot.l,a:ot.a}):n$1(ot.h)},tt.prototype.isEqual=function(nt){return this.toHex()===w$1(nt).toHex()},tt})(),w$1=function(tt){return tt instanceof j?tt:new j(tt)},S=[],k=function(tt){tt.forEach(function(nt){S.indexOf(nt)<0&&(nt(j,y),S.push(nt))})},a=function(tt){return typeof tt=="string"?tt.length>0:typeof tt=="number"},t=function(tt,nt,ot){return nt===void 0&&(nt=0),ot===void 0&&(ot=Math.pow(10,nt)),Math.round(ot*tt)/ot+0},o=function(tt,nt,ot){return nt===void 0&&(nt=0),ot===void 0&&(ot=1),tt>ot?ot:tt>nt?tt:nt},r=function(tt){var nt=tt/255;return nt<.04045?nt/12.92:Math.pow((nt+.055)/1.055,2.4)},h=function(tt){return 255*(tt>.0031308?1.055*Math.pow(tt,1/2.4)-.055:12.92*tt)},n=96.422,p=100,M=82.521,u=function(tt){var nt,ot,ft={x:.9555766*(nt=tt).x+-.0230393*nt.y+.0631636*nt.z,y:-.0282895*nt.x+1.0099416*nt.y+.0210077*nt.z,z:.0122982*nt.x+-.020483*nt.y+1.3299098*nt.z};return ot={r:h(.032404542*ft.x-.015371385*ft.y-.004985314*ft.z),g:h(-.00969266*ft.x+.018760108*ft.y+41556e-8*ft.z),b:h(556434e-9*ft.x-.002040259*ft.y+.010572252*ft.z),a:tt.a},{r:o(ot.r,0,255),g:o(ot.g,0,255),b:o(ot.b,0,255),a:o(ot.a)}},e=function(tt){var nt=r(tt.r),ot=r(tt.g),ft=r(tt.b);return(function(gt){return{x:o(gt.x,0,n),y:o(gt.y,0,p),z:o(gt.z,0,M),a:o(gt.a)}})((function(gt){return{x:1.0478112*gt.x+.0228866*gt.y+-.050127*gt.z,y:.0295424*gt.x+.9904844*gt.y+-.0170491*gt.z,z:-.0092345*gt.x+.0150436*gt.y+.7521316*gt.z,a:gt.a}})({x:100*(.4124564*nt+.3575761*ot+.1804375*ft),y:100*(.2126729*nt+.7151522*ot+.072175*ft),z:100*(.0193339*nt+.119192*ot+.9503041*ft),a:tt.a}))},w=216/24389,b=24389/27,i=function(tt){var nt=tt.l,ot=tt.a,ft=tt.b,gt=tt.alpha,mt=gt===void 0?1:gt;if(!a(nt)||!a(ot)||!a(ft))return null;var yt=(function(_t){return{l:o(_t.l,0,400),a:_t.a,b:_t.b,alpha:o(_t.alpha)}})({l:Number(nt),a:Number(ot),b:Number(ft),alpha:Number(mt)});return l(yt)},l=function(tt){var nt=(tt.l+16)/116,ot=tt.a/500+nt,ft=nt-tt.b/200;return u({x:(Math.pow(ot,3)>w?Math.pow(ot,3):(116*ot-16)/b)*n,y:(tt.l>8?Math.pow((tt.l+16)/116,3):tt.l/b)*p,z:(Math.pow(ft,3)>w?Math.pow(ft,3):(116*ft-16)/b)*M,a:tt.alpha})};function labPlugin(tt,nt){tt.prototype.toLab=function(){return ft=e(this.rgba),mt=ft.y/p,yt=ft.z/M,gt=(gt=ft.x/n)>w?Math.cbrt(gt):(b*gt+16)/116,ot={l:116*(mt=mt>w?Math.cbrt(mt):(b*mt+16)/116)-16,a:500*(gt-mt),b:200*(mt-(yt=yt>w?Math.cbrt(yt):(b*yt+16)/116)),alpha:ft.a},{l:t(ot.l,2),a:t(ot.a,2),b:t(ot.b,2),alpha:t(ot.alpha,3)};var ot,ft,gt,mt,yt},tt.prototype.delta=function(ot){ot===void 0&&(ot="#FFF");var ft=ot instanceof tt?ot:new tt(ot),gt=(function(mt,yt){var _t=mt.l,Tt=mt.a,St=mt.b,At=yt.l,Ct=yt.a,Ot=yt.b,Dt=180/Math.PI,Ut=Math.PI/180,Xt=Math.pow(Math.pow(Tt,2)+Math.pow(St,2),.5),Pt=Math.pow(Math.pow(Ct,2)+Math.pow(Ot,2),.5),Jt=(_t+At)/2,Kt=Math.pow((Xt+Pt)/2,7),Nt=.5*(1-Math.pow(Kt/(Kt+Math.pow(25,7)),.5)),jt=Tt*(1+Nt),kt=Ct*(1+Nt),Zt=Math.pow(Math.pow(jt,2)+Math.pow(St,2),.5),Ft=Math.pow(Math.pow(kt,2)+Math.pow(Ot,2),.5),It=(Zt+Ft)/2,Wt=jt===0&&St===0?0:Math.atan2(St,jt)*Dt,Qt=kt===0&&Ot===0?0:Math.atan2(Ot,kt)*Dt;Wt<0&&(Wt+=360),Qt<0&&(Qt+=360);var me=Qt-Wt,rn=Math.abs(Qt-Wt);rn>180&&Qt<=Wt?me+=360:rn>180&&Qt>Wt&&(me-=360);var Dn=Wt+Qt;rn<=180?Dn/=2:Dn=(Wt+Qt<360?Dn+360:Dn-360)/2;var Mn=1-.17*Math.cos(Ut*(Dn-30))+.24*Math.cos(2*Ut*Dn)+.32*Math.cos(Ut*(3*Dn+6))-.2*Math.cos(Ut*(4*Dn-63)),$n=At-_t,on=Ft-Zt,yn=2*Math.sin(Ut*me/2)*Math.pow(Zt*Ft,.5),bn=1+.015*Math.pow(Jt-50,2)/Math.pow(20+Math.pow(Jt-50,2),.5),On=1+.045*It,Ht=1+.015*It*Mn,sn=30*Math.exp(-1*Math.pow((Dn-275)/25,2)),nn=-2*Math.pow(Kt/(Kt+Math.pow(25,7)),.5)*Math.sin(2*Ut*sn);return Math.pow(Math.pow($n/1/bn,2)+Math.pow(on/1/On,2)+Math.pow(yn/1/Ht,2)+nn*on*yn/(1*On*1*Ht),.5)})(this.toLab(),ft.toLab())/100;return o(t(gt,3))},nt.object.push([i,"lab"])}k([labPlugin]);function formatReferenceForMlr(tt,nt){const ot={r:[],g:[],b:[]};for(const ft of tt)ot.r.push([ft.r/nt]),ot.g.push([ft.g/nt]),ot.b.push([ft.b/nt]);return ot}function formatInputForMlr(tt,nt){const ot=[];for(const ft of tt)ot.push(getRegressionVariables(ft.r,ft.g,ft.b,nt));return ot}function correctColor(tt,nt,ot){if(checkProcessable(tt,{colorModel:["RGB","RGBA"]}),nt.length!==ot.length)throw new RangeError("number of measured colors and reference colors must be the same");const ft=formatInputForMlr(nt,tt.maxValue),gt=formatReferenceForMlr(ot,tt.maxValue),mt=new MultivariateLinearRegression(ft,gt.r),yt=new MultivariateLinearRegression(ft,gt.g),_t=new MultivariateLinearRegression(ft,gt.b),Tt=Image.createFrom(tt);for(let St=0;St<tt.height;St++)for(let At=0;At<tt.width;At++){const Ct=tt.getPixel(At,St),Ot=getRegressionVariables(Ct[0],Ct[1],Ct[2],tt.maxValue),Dt=getClamp(tt),Ut=[0,0,0],Xt=mt.predict(Ot)[0]*tt.maxValue,Pt=yt.predict(Ot)[0]*tt.maxValue,Jt=_t.predict(Ot)[0]*tt.maxValue;Ut[0]=Dt(Xt),Ut[1]=Dt(Pt),Ut[2]=Dt(Jt),tt.alpha&&(Ut[3]=tt.getValue(At,St,3)),Tt.setPixel(At,St,Ut)}return Tt}function getRegressionVariables(tt,nt,ot,ft){return tt/=ft,nt/=ft,ot/=ft,[tt,nt,ot,tt**2,nt**2,ot**2,tt**3,nt**3,ot**3,tt*nt,tt*ot,ot*nt]}function getMinMax(tt){const nt=new Array(tt.channels).fill(tt.maxValue),ot=new Array(tt.channels).fill(0);for(let ft=0;ft<tt.height;ft++)for(let gt=0;gt<tt.width;gt++)for(let mt=0;mt<tt.channels;mt++){const yt=tt.getValue(gt,ft,mt);yt<nt[mt]&&(nt[mt]=yt),yt>ot[mt]&&(ot[mt]=yt)}return{min:nt,max:ot}}class Image{width;height;size;bitDepth;colorModel;components;channels;alpha;maxValue;origin;meta;data;constructor(nt,ot,ft={}){const{bitDepth:gt=8,data:mt,colorModel:yt="RGB",origin:_t={row:0,column:0},meta:Tt}=ft;if(nt<1||!Number.isInteger(nt))throw new RangeError(`width must be an integer and at least 1. Received ${nt}`);if(ot<1||!Number.isInteger(ot))throw new RangeError(`height must be an integer and at least 1. Received ${ot}`);this.width=nt,this.height=ot,this.size=nt*ot,this.bitDepth=gt,this.colorModel=yt,this.origin=_t,this.meta=Tt;const St=colorModels[yt];if(this.components=St.components,this.alpha=St.alpha,this.channels=St.channels,this.maxValue=2**gt-1,mt===void 0)this.data=createPixelArray(this.size,this.channels,this.alpha,this.bitDepth,this.maxValue);else{if(gt===8&&mt instanceof Uint16Array)throw new RangeError(`bitDepth is ${gt} but data is Uint16Array`);if(gt===16&&mt instanceof Uint8Array)throw new RangeError(`bitDepth is ${gt} but data is Uint8Array`);const At=this.size*this.channels;if(mt.length!==At)throw new RangeError(`incorrect data size: ${mt.length}. Expected ${At}`);this.data=mt}}static createFrom(nt,ot={}){const{width:ft=nt.width,height:gt=nt.height}=ot;let mt;return nt instanceof Image?mt=nt.bitDepth:mt=8,new Image(ft,gt,{bitDepth:mt,colorModel:nt.colorModel,origin:nt.origin,...ot})}getPixel(nt,ot){const ft=[],gt=(ot*this.width+nt)*this.channels;for(let mt=0;mt<this.channels;mt++)ft.push(this.data[gt+mt]);return ft}getColumn(nt){const ot=[];for(let ft=0;ft<this.channels;ft++){const gt=[];for(let mt=0;mt<this.height;mt++)gt.push(this.getValue(nt,mt,ft));ot.push(gt)}return ot}getRow(nt){const ot=[];for(let ft=0;ft<this.channels;ft++){const gt=[];for(let mt=0;mt<this.width;mt++)gt.push(this.getValue(mt,nt,ft));ot.push(gt)}return ot}setPixel(nt,ot,ft){const gt=(ot*this.width+nt)*this.channels;for(let mt=0;mt<this.channels;mt++)this.data[gt+mt]=ft[mt]}setVisiblePixel(nt,ot,ft){nt>=0&&nt<this.width&&ot>=0&&ot<this.height&&this.setPixel(nt,ot,ft)}getPixelByIndex(nt){const ot=[],ft=nt*this.channels;for(let gt=0;gt<this.channels;gt++)ot.push(this.data[ft+gt]);return ot}setPixelByIndex(nt,ot){const ft=nt*this.channels;for(let gt=0;gt<this.channels;gt++)this.data[ft+gt]=ot[gt]}getValue(nt,ot,ft){return this.data[(ot*this.width+nt)*this.channels+ft]}setValue(nt,ot,ft,gt){this.data[(ot*this.width+nt)*this.channels+ft]=gt}setClampedValue(nt,ot,ft,gt){gt<0?gt=0:gt>this.maxValue&&(gt=this.maxValue),this.data[(ot*this.width+nt)*this.channels+ft]=gt}getValueByIndex(nt,ot){return this.data[nt*this.channels+ot]}setValueByIndex(nt,ot,ft){this.data[nt*this.channels+ot]=ft}setClampedValueByIndex(nt,ot,ft){ft<0?ft=0:ft>this.maxValue&&(ft=this.maxValue),this.data[nt*this.channels+ot]=ft}getValueByPoint(nt,ot){return this.getValue(nt.column,nt.row,ot)}setValueByPoint(nt,ot,ft){this.setValue(nt.column,nt.row,ot,ft)}minMax(){return getMinMax(this)}getRawImage(){return{width:this.width,height:this.height,data:this.data,channels:this.channels,bitDepth:this.bitDepth}}[Symbol.for("nodejs.util.inspect.custom")](){let nt;return this.height>20||this.width>20?nt="[...]":nt=printData(this),`Image {
  width: ${this.width}
  height: ${this.height}
  bitDepth: ${this.bitDepth}
  colorModel: ${this.colorModel}
  channels: ${this.channels}
  data: ${nt}
}`}fill(nt){if(typeof nt=="number")return validateValue(nt,this),this.data.fill(nt),this;if(nt.length!==this.channels)throw new RangeError(`the size of value must match the number of channels (${this.channels}). Received ${nt.length}`);for(const ot of nt)validateValue(ot,this);for(let ot=0;ot<this.data.length;ot+=this.channels)for(let ft=0;ft<=this.channels;ft++)this.data[ot+ft]=nt[ft];return this}fillChannel(nt,ot){validateChannel(nt,this),validateValue(ot,this);for(let ft=nt;ft<this.data.length;ft+=this.channels)this.data[ft]=ot;return this}getChannel(nt){validateChannel(nt,this);const ot=new Array(this.size);for(let ft=0;ft<this.size;ft++)ot[ft]=this.data[nt+ft*this.channels];return ot}fillAlpha(nt){if(validateValue(nt,this),!this.alpha)throw new TypeError("fillAlpha can only be called if the image has an alpha channel");const ot=this.channels-1;return this.fillChannel(ot,nt)}clone(){return Image.createFrom(this,{data:this.data.slice()})}changeEach(nt){for(let ot=0;ot<this.data.length;ot++)this.data[ot]=nt(this.data[ot])}getCoordinates(nt,ot=!1){return z(nt).with("center",()=>{const ft=(this.width-1)/2,gt=(this.height-1)/2;return ot?{column:Math.round(ft),row:Math.round(gt)}:{column:ft,row:gt}}).with("top-left",()=>({column:0,row:0})).with("top-right",()=>({column:this.width-1,row:0})).with("bottom-left",()=>({column:0,row:this.height-1})).with("bottom-right",()=>({column:this.width-1,row:this.height-1})).exhaustive()}subtract(nt,ot={}){return subtract(this,nt,ot)}add(nt){return add(this,nt)}multiply(nt,ot={}){return multiply(this,nt,ot)}divide(nt,ot={}){return divide(this,nt,ot)}histogram(nt){return histogram(this,nt)}mean(nt){return mean(this,nt)}median(nt){return median(this,nt)}variance(nt){return variance(this,nt)}drawPoints(nt,ot={}){return drawPoints(this,nt,ot)}drawLine(nt,ot,ft={}){return drawLineOnImage(this,nt,ot,ft)}drawRectangle(nt={}){return drawRectangle(this,nt)}drawPolyline(nt,ot={}){return drawPolylineOnImage(this,nt,ot)}drawPolygon(nt,ot={}){return drawPolygonOnImage(this,nt,ot)}drawCircle(nt,ot,ft={}){return drawCircleOnImage(this,nt,ot,ft)}drawMarker(nt,ot={}){return drawMarker(this,nt,ot)}drawMarkers(nt,ot={}){return drawMarkers(this,nt,ot)}split(){return split(this)}convertColor(nt,ot){return convertColor(this,nt,ot)}convertBitDepth(nt,ot){return convertBitDepth(this,nt,ot)}grey(nt){return grey(this,nt)}copyTo(nt,ot={}){return copyTo(this,nt,ot)}threshold(nt={}){return threshold(this,nt)}crop(nt){return crop(this,nt)}cropRectangle(nt,ot){return cropRectangle(this,nt,ot)}cropAlpha(nt={}){return cropAlpha(this,nt)}extract(nt,ot){return extract(this,nt,ot)}paintMask(nt,ot){return paintMaskOnImage(this,nt,ot)}blur(nt){return blur(this,nt)}pixelate(nt){return pixelate(this,nt)}directConvolution(nt,ot){return directConvolution(this,nt,ot)}rawDirectConvolution(nt,ot){return rawDirectConvolution(this,nt,ot)}separableConvolution(nt,ot,ft){return separableConvolution(this,nt,ot,ft)}gaussianBlur(nt){return gaussianBlur(this,nt)}flip(nt){return flip(this,nt)}invert(nt){return invert(this,nt)}hypotenuse(nt,ot){return hypotenuse(this,nt,ot)}gradientFilter(nt){return gradientFilter(this,nt)}derivativeFilter(nt){return derivativeFilter(this,nt)}level(nt){return level(this,nt)}increaseContrast(nt={}){return increaseContrast(this,nt)}correctColor(nt,ot){return correctColor(this,nt,ot)}medianFilter(nt){return medianFilter(this,nt)}resize(nt){return resize(this,nt)}rotate(nt){return rotate(this,nt)}transform(nt,ot){return transform(this,nt,ot)}transformRotate(nt,ot){return transformRotate(this,nt,ot)}erode(nt){return erode(this,nt)}dilate(nt){return dilate(this,nt)}open(nt){return open(this,nt)}close(nt){return close(this,nt)}topHat(nt){return topHat(this,nt)}bottomHat(nt){return bottomHat(this,nt)}morphologicalGradient(nt){return morphologicalGradient(this,nt)}cannyEdgeDetector(nt){return cannyEdgeDetector(this,nt)}}function createPixelArray(tt,nt,ot,ft,gt){const mt=nt*tt,yt=z(ft).with(8,()=>new Uint8Array(mt)).with(16,()=>new Uint16Array(mt)).otherwise(()=>{throw new RangeError(`invalid bitDepth: ${ft}`)});if(ot)for(let _t=nt-1;_t<mt;_t+=nt)yt[_t]=gt;return yt}function printData(tt){const nt=[],ot=tt.bitDepth===8?3:5;for(let ft=0;ft<tt.height;ft++){const gt=[];for(let mt=0;mt<tt.width;mt++)for(let yt=0;yt<tt.channels;yt++)gt.push(String(tt.getValue(mt,ft,yt)).padStart(ot," "));nt.push(`[${gt.join(" ")}]`)}return`{
    [
     ${nt.join(`
     `)}
    ]
  }`}function copyData(tt,nt){if(nt.width!==tt.width||nt.height!==tt.height||nt.colorModel!==tt.colorModel)throw new RangeError("images width, height or color model is different");nt.data=tt.data.slice()}function getOutputImage(tt,nt={},ot={}){const{out:ft}=nt,{newParameters:gt,clone:mt}=ot;if(ft===void 0)return mt?tt.clone():Image.createFrom(tt,gt);{if(!(ft instanceof Image))throw new TypeError("out must be an Image");const yt={width:tt.width,height:tt.height,bitDepth:tt.bitDepth,colorModel:tt.colorModel,...gt};return checkRequirements(yt,ft),mt&&tt!==ft&&copyData(tt,ft),ft}}function maskToOutputImage(tt,nt={}){const{out:ot}=nt;if(ot===void 0)return Image.createFrom(tt,{colorModel:"GREY"});{if(!(ot instanceof Image))throw new TypeError("out must be an Image");const ft={width:tt.width,height:tt.height,bitDepth:8,colorModel:"GREY"};return checkRequirements(ft,ot),ot}}function imageToOutputMask(tt,nt={}){const{out:ot}=nt;if(ot===void 0)return Mask.createFrom(tt);{if(!(ot instanceof Mask))throw new TypeError("out must be a Mask");const ft={width:tt.width,height:tt.height,bitDepth:1,colorModel:"BINARY"};return checkRequirements(ft,ot),ot}}function checkRequirements(tt,nt){for(const ot in tt){const ft=ot;if(nt[ft]!==tt[ft])throw new RangeError(`cannot use out image. Its ${ot} property must be ${tt[ft]}. Received ${nt[ft]}`)}}function maskToOutputMask(tt,nt={},ot={}){const{out:ft}=nt,{newParameters:gt,clone:mt}=ot;if(ft===void 0)return mt?tt.clone():Mask.createFrom(tt,gt);{if(!(ft instanceof Mask))throw new TypeError("out must be a Mask");const yt={width:tt.width,height:tt.height,bitDepth:1,colorModel:"BINARY"};return checkRequirements(yt,ft),mt&&tt!==ft&&copyData(tt,ft),ft}}function decode$2(tt,nt="utf8"){return new TextDecoder(nt).decode(tt)}const encoder$1=new TextEncoder;function encode(tt){return encoder$1.encode(tt)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const tt=new Uint8Array(4),nt=new Uint32Array(tt.buffer);return!((nt[0]=1)&tt[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(nt=defaultByteLength,ot={}){let ft=!1;typeof nt=="number"?nt=new ArrayBuffer(nt):(ft=!0,this.lastWrittenByte=nt.byteLength);const gt=ot.offset?ot.offset>>>0:0,mt=nt.byteLength-gt;let yt=gt;(ArrayBuffer.isView(nt)||nt instanceof IOBuffer)&&(nt.byteLength!==nt.buffer.byteLength&&(yt=nt.byteOffset+gt),nt=nt.buffer),ft?this.lastWrittenByte=mt:this.lastWrittenByte=0,this.buffer=nt,this.length=mt,this.byteLength=mt,this.byteOffset=yt,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,yt,mt),this._mark=0,this._marks=[]}available(nt=1){return this.offset+nt<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(nt=1){return this.offset+=nt,this}back(nt=1){return this.offset-=nt,this}seek(nt){return this.offset=nt,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const nt=this._marks.pop();if(nt===void 0)throw new Error("Mark stack empty");return this.seek(nt),this}rewind(){return this.offset=0,this}ensureAvailable(nt=1){if(!this.available(nt)){const ft=(this.offset+nt)*2,gt=new Uint8Array(ft);gt.set(new Uint8Array(this.buffer)),this.buffer=gt.buffer,this.length=ft,this.byteLength=ft,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(nt=1){return this.readArray(nt,"uint8")}readArray(nt,ot){const ft=typedArrays[ot].BYTES_PER_ELEMENT*nt,gt=this.byteOffset+this.offset,mt=this.buffer.slice(gt,gt+ft);if(this.littleEndian===hostBigEndian&&ot!=="uint8"&&ot!=="int8"){const _t=new Uint8Array(this.buffer.slice(gt,gt+ft));_t.reverse();const Tt=new typedArrays[ot](_t.buffer);return this.offset+=ft,Tt.reverse(),Tt}const yt=new typedArrays[ot](mt);return this.offset+=ft,yt}readInt16(){const nt=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,nt}readUint16(){const nt=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,nt}readInt32(){const nt=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,nt}readUint32(){const nt=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,nt}readFloat32(){const nt=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,nt}readFloat64(){const nt=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,nt}readBigInt64(){const nt=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,nt}readBigUint64(){const nt=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,nt}readChar(){return String.fromCharCode(this.readInt8())}readChars(nt=1){let ot="";for(let ft=0;ft<nt;ft++)ot+=this.readChar();return ot}readUtf8(nt=1){return decode$2(this.readBytes(nt))}decodeText(nt=1,ot="utf8"){return decode$2(this.readBytes(nt),ot)}writeBoolean(nt){return this.writeUint8(nt?255:0),this}writeInt8(nt){return this.ensureAvailable(1),this._data.setInt8(this.offset++,nt),this._updateLastWrittenByte(),this}writeUint8(nt){return this.ensureAvailable(1),this._data.setUint8(this.offset++,nt),this._updateLastWrittenByte(),this}writeByte(nt){return this.writeUint8(nt)}writeBytes(nt){this.ensureAvailable(nt.length);for(let ot=0;ot<nt.length;ot++)this._data.setUint8(this.offset++,nt[ot]);return this._updateLastWrittenByte(),this}writeInt16(nt){return this.ensureAvailable(2),this._data.setInt16(this.offset,nt,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(nt){return this.ensureAvailable(2),this._data.setUint16(this.offset,nt,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(nt){return this.ensureAvailable(4),this._data.setInt32(this.offset,nt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(nt){return this.ensureAvailable(4),this._data.setUint32(this.offset,nt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(nt){return this.ensureAvailable(4),this._data.setFloat32(this.offset,nt,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(nt){return this.ensureAvailable(8),this._data.setFloat64(this.offset,nt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(nt){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,nt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(nt){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,nt,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(nt){return this.writeUint8(nt.charCodeAt(0))}writeChars(nt){for(let ot=0;ot<nt.length;ot++)this.writeUint8(nt.charCodeAt(ot));return this}writeUtf8(nt){return this.writeBytes(encode(nt))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,(function(tt){function nt(ft){var gt=Math.floor,mt=new Array(64),yt=new Array(64),_t=new Array(64),Tt=new Array(64),St,At,Ct,Ot,Dt=new Array(65535),Ut=new Array(65535),Xt=new Array(64),Pt=new Array(64),Jt=[],Kt=0,Nt=7,jt=new Array(64),kt=new Array(64),Zt=new Array(64),Ft=new Array(256),It=new Array(2048),Wt,Qt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],rn=[0,1,2,3,4,5,6,7,8,9,10,11],Dn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Mn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$n=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],on=[0,1,2,3,4,5,6,7,8,9,10,11],yn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],bn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function On(cn){for(var Pn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Vn=0;Vn<64;Vn++){var Gn=gt((Pn[Vn]*cn+50)/100);Gn<1?Gn=1:Gn>255&&(Gn=255),mt[Qt[Vn]]=Gn}for(var ai=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oi=0;oi<64;oi++){var fi=gt((ai[oi]*cn+50)/100);fi<1?fi=1:fi>255&&(fi=255),yt[Qt[oi]]=fi}for(var zn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],kn=0,Hn=0;Hn<8;Hn++)for(var Nn=0;Nn<8;Nn++)_t[kn]=1/(mt[Qt[kn]]*zn[Hn]*zn[Nn]*8),Tt[kn]=1/(yt[Qt[kn]]*zn[Hn]*zn[Nn]*8),kn++}function Ht(cn,Pn){for(var Vn=0,Gn=0,ai=new Array,oi=1;oi<=16;oi++){for(var fi=1;fi<=cn[oi];fi++)ai[Pn[Gn]]=[],ai[Pn[Gn]][0]=Vn,ai[Pn[Gn]][1]=oi,Gn++,Vn++;Vn*=2}return ai}function sn(){St=Ht(me,rn),At=Ht($n,on),Ct=Ht(Dn,Mn),Ot=Ht(yn,bn)}function nn(){for(var cn=1,Pn=2,Vn=1;Vn<=15;Vn++){for(var Gn=cn;Gn<Pn;Gn++)Ut[32767+Gn]=Vn,Dt[32767+Gn]=[],Dt[32767+Gn][1]=Vn,Dt[32767+Gn][0]=Gn;for(var ai=-(Pn-1);ai<=-cn;ai++)Ut[32767+ai]=Vn,Dt[32767+ai]=[],Dt[32767+ai][1]=Vn,Dt[32767+ai][0]=Pn-1+ai;cn<<=1,Pn<<=1}}function pn(){for(var cn=0;cn<256;cn++)It[cn]=19595*cn,It[cn+256>>0]=38470*cn,It[cn+512>>0]=7471*cn+32768,It[cn+768>>0]=-11059*cn,It[cn+1024>>0]=-21709*cn,It[cn+1280>>0]=32768*cn+8421375,It[cn+1536>>0]=-27439*cn,It[cn+1792>>0]=-5329*cn}function gn(cn){for(var Pn=cn[0],Vn=cn[1]-1;Vn>=0;)Pn&1<<Vn&&(Kt|=1<<Nt),Vn--,Nt--,Nt<0&&(Kt==255?(Be(255),Be(0)):Be(Kt),Nt=7,Kt=0)}function Be(cn){Jt.push(cn)}function xn(cn){Be(cn>>8&255),Be(cn&255)}function qn(cn,Pn){var Vn,Gn,ai,oi,fi,zn,kn,Hn,Nn=0,hi,wi=8,si=64;for(hi=0;hi<wi;++hi){Vn=cn[Nn],Gn=cn[Nn+1],ai=cn[Nn+2],oi=cn[Nn+3],fi=cn[Nn+4],zn=cn[Nn+5],kn=cn[Nn+6],Hn=cn[Nn+7];var xi=Vn+Hn,mi=Vn-Hn,yi=Gn+kn,Yi=Gn-kn,zi=ai+zn,cr=ai-zn,Dr=oi+fi,Xr=oi-fi,dr=xi+Dr,zt=xi-Dr,bt=yi+zi,Et=yi-zi;cn[Nn]=dr+bt,cn[Nn+4]=dr-bt;var wt=(Et+zt)*.707106781;cn[Nn+2]=zt+wt,cn[Nn+6]=zt-wt,dr=Xr+cr,bt=cr+Yi,Et=Yi+mi;var Rt=(dr-Et)*.382683433,$t=.5411961*dr+Rt,Vt=1.306562965*Et+Rt,qt=bt*.707106781,Gt=mi+qt,Yt=mi-qt;cn[Nn+5]=Yt+$t,cn[Nn+3]=Yt-$t,cn[Nn+1]=Gt+Vt,cn[Nn+7]=Gt-Vt,Nn+=8}for(Nn=0,hi=0;hi<wi;++hi){Vn=cn[Nn],Gn=cn[Nn+8],ai=cn[Nn+16],oi=cn[Nn+24],fi=cn[Nn+32],zn=cn[Nn+40],kn=cn[Nn+48],Hn=cn[Nn+56];var en=Vn+Hn,de=Vn-Hn,mn=Gn+kn,Cn=Gn-kn,hn=ai+zn,wn=ai-zn,jn=oi+fi,Le=oi-fi,Tn=en+jn,Un=en-jn,Wn=mn+hn,ni=mn-hn;cn[Nn]=Tn+Wn,cn[Nn+32]=Tn-Wn;var pi=(ni+Un)*.707106781;cn[Nn+16]=Un+pi,cn[Nn+48]=Un-pi,Tn=Le+wn,Wn=wn+Cn,ni=Cn+de;var Zn=(Tn-ni)*.382683433,ti=.5411961*Tn+Zn,bi=1.306562965*ni+Zn,tn=Wn*.707106781,Rn=de+tn,In=de-tn;cn[Nn+40]=In+ti,cn[Nn+24]=In-ti,cn[Nn+8]=Rn+bi,cn[Nn+56]=Rn-bi,Nn++}var _n;for(hi=0;hi<si;++hi)_n=cn[hi]*Pn[hi],Xt[hi]=_n>0?_n+.5|0:_n-.5|0;return Xt}function Bn(){xn(65504),xn(16),Be(74),Be(70),Be(73),Be(70),Be(0),Be(1),Be(1),Be(0),xn(1),xn(1),Be(0),Be(0)}function Yn(cn){if(cn){xn(65505),cn[0]===69&&cn[1]===120&&cn[2]===105&&cn[3]===102?xn(cn.length+2):(xn(cn.length+5+2),Be(69),Be(120),Be(105),Be(102),Be(0));for(var Pn=0;Pn<cn.length;Pn++)Be(cn[Pn])}}function Kn(cn,Pn){xn(65472),xn(17),Be(8),xn(Pn),xn(cn),Be(3),Be(1),Be(17),Be(0),Be(2),Be(17),Be(1),Be(3),Be(17),Be(1)}function Qn(){xn(65499),xn(132),Be(0);for(var cn=0;cn<64;cn++)Be(mt[cn]);Be(1);for(var Pn=0;Pn<64;Pn++)Be(yt[Pn])}function Jn(){xn(65476),xn(418),Be(0);for(var cn=0;cn<16;cn++)Be(me[cn+1]);for(var Pn=0;Pn<=11;Pn++)Be(rn[Pn]);Be(16);for(var Vn=0;Vn<16;Vn++)Be(Dn[Vn+1]);for(var Gn=0;Gn<=161;Gn++)Be(Mn[Gn]);Be(1);for(var ai=0;ai<16;ai++)Be($n[ai+1]);for(var oi=0;oi<=11;oi++)Be(on[oi]);Be(17);for(var fi=0;fi<16;fi++)Be(yn[fi+1]);for(var zn=0;zn<=161;zn++)Be(bn[zn])}function ei(cn){typeof cn>"u"||cn.constructor!==Array||cn.forEach(Pn=>{if(typeof Pn=="string"){xn(65534);var Vn=Pn.length;xn(Vn+2);var Gn;for(Gn=0;Gn<Vn;Gn++)Be(Pn.charCodeAt(Gn))}})}function Ln(){xn(65498),xn(12),Be(3),Be(1),Be(0),Be(2),Be(17),Be(3),Be(17),Be(0),Be(63),Be(0)}function An(cn,Pn,Vn,Gn,ai){for(var oi=ai[0],fi=ai[240],zn,kn=16,Hn=63,Nn=64,hi=qn(cn,Pn),wi=0;wi<Nn;++wi)Pt[Qt[wi]]=hi[wi];var si=Pt[0]-Vn;Vn=Pt[0],si==0?gn(Gn[0]):(zn=32767+si,gn(Gn[Ut[zn]]),gn(Dt[zn]));for(var xi=63;xi>0&&Pt[xi]==0;xi--);if(xi==0)return gn(oi),Vn;for(var mi=1,yi;mi<=xi;){for(var Yi=mi;Pt[mi]==0&&mi<=xi;++mi);var zi=mi-Yi;if(zi>=kn){yi=zi>>4;for(var cr=1;cr<=yi;++cr)gn(fi);zi=zi&15}zn=32767+Pt[mi],gn(ai[(zi<<4)+Ut[zn]]),gn(Dt[zn]),mi++}return xi!=Hn&&gn(oi),Vn}function gi(){for(var cn=String.fromCharCode,Pn=0;Pn<256;Pn++)Ft[Pn]=cn(Pn)}this.encode=function(cn,Pn){new Date().getTime(),Pn&&Xn(Pn),Jt=new Array,Kt=0,Nt=7,xn(65496),Bn(),ei(cn.comments),Yn(cn.exifBuffer),Qn(),Kn(cn.width,cn.height),Jn(),Ln();var Vn=0,Gn=0,ai=0;Kt=0,Nt=7,this.encode.displayName="_encode_";for(var oi=cn.data,fi=cn.width,zn=cn.height,kn=fi*4,Hn,Nn=0,hi,wi,si,xi,mi,yi,Yi,zi;Nn<zn;){for(Hn=0;Hn<kn;){for(xi=kn*Nn+Hn,mi=xi,yi=-1,Yi=0,zi=0;zi<64;zi++)Yi=zi>>3,yi=(zi&7)*4,mi=xi+Yi*kn+yi,Nn+Yi>=zn&&(mi-=kn*(Nn+1+Yi-zn)),Hn+yi>=kn&&(mi-=Hn+yi-kn+4),hi=oi[mi++],wi=oi[mi++],si=oi[mi++],jt[zi]=(It[hi]+It[wi+256>>0]+It[si+512>>0]>>16)-128,kt[zi]=(It[hi+768>>0]+It[wi+1024>>0]+It[si+1280>>0]>>16)-128,Zt[zi]=(It[hi+1280>>0]+It[wi+1536>>0]+It[si+1792>>0]>>16)-128;Vn=An(jt,_t,Vn,St,Ct),Gn=An(kt,Tt,Gn,At,Ot),ai=An(Zt,Tt,ai,At,Ot),Hn+=32}Nn+=8}if(Nt>=0){var cr=[];cr[1]=Nt+1,cr[0]=(1<<Nt+1)-1,gn(cr)}return xn(65497),Buffer.from(Jt)};function Xn(cn){if(cn<=0&&(cn=1),cn>100&&(cn=100),Wt!=cn){var Pn=0;cn<50?Pn=Math.floor(5e3/cn):Pn=Math.floor(200-cn*2),On(Pn),Wt=cn}}function ri(){var cn=new Date().getTime();ft||(ft=50),gi(),sn(),nn(),pn(),Xn(ft),new Date().getTime()-cn}ri()}tt.exports=ot;function ot(ft,gt){typeof gt>"u"&&(gt=50);var mt=new nt(gt),yt=mt.encode(ft,gt);return{data:yt,width:ft.width,height:ft.height}}})(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,(function(tt){var nt=(function(){var gt=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),mt=4017,yt=799,_t=3406,Tt=2276,St=1567,At=3784,Ct=5793,Ot=2896;function Dt(){}function Ut(kt,Zt){for(var Ft=0,It=[],Wt,Qt,me=16;me>0&&!kt[me-1];)me--;It.push({children:[],index:0});var rn=It[0],Dn;for(Wt=0;Wt<me;Wt++){for(Qt=0;Qt<kt[Wt];Qt++){for(rn=It.pop(),rn.children[rn.index]=Zt[Ft];rn.index>0;){if(It.length===0)throw new Error("Could not recreate Huffman Table");rn=It.pop()}for(rn.index++,It.push(rn);It.length<=Wt;)It.push(Dn={children:[],index:0}),rn.children[rn.index]=Dn.children,rn=Dn;Ft++}Wt+1<me&&(It.push(Dn={children:[],index:0}),rn.children[rn.index]=Dn.children,rn=Dn)}return It[0].children}function Xt(kt,Zt,Ft,It,Wt,Qt,me,rn,Dn,Mn){Ft.precision,Ft.samplesPerLine,Ft.scanLines;var $n=Ft.mcusPerLine,on=Ft.progressive;Ft.maxH,Ft.maxV;var yn=Zt,bn=0,On=0;function Ht(){if(On>0)return On--,bn>>On&1;if(bn=kt[Zt++],bn==255){var zn=kt[Zt++];if(zn)throw new Error("unexpected marker: "+(bn<<8|zn).toString(16))}return On=7,bn>>>7}function sn(zn){for(var kn=zn,Hn;(Hn=Ht())!==null;){if(kn=kn[Hn],typeof kn=="number")return kn;if(typeof kn!="object")throw new Error("invalid huffman sequence")}return null}function nn(zn){for(var kn=0;zn>0;){var Hn=Ht();if(Hn===null)return;kn=kn<<1|Hn,zn--}return kn}function pn(zn){var kn=nn(zn);return kn>=1<<zn-1?kn:kn+(-1<<zn)+1}function gn(zn,kn){var Hn=sn(zn.huffmanTableDC),Nn=Hn===0?0:pn(Hn);kn[0]=zn.pred+=Nn;for(var hi=1;hi<64;){var wi=sn(zn.huffmanTableAC),si=wi&15,xi=wi>>4;if(si===0){if(xi<15)break;hi+=16;continue}hi+=xi;var mi=gt[hi];kn[mi]=pn(si),hi++}}function Be(zn,kn){var Hn=sn(zn.huffmanTableDC),Nn=Hn===0?0:pn(Hn)<<Dn;kn[0]=zn.pred+=Nn}function xn(zn,kn){kn[0]|=Ht()<<Dn}var qn=0;function Bn(zn,kn){if(qn>0){qn--;return}for(var Hn=Qt,Nn=me;Hn<=Nn;){var hi=sn(zn.huffmanTableAC),wi=hi&15,si=hi>>4;if(wi===0){if(si<15){qn=nn(si)+(1<<si)-1;break}Hn+=16;continue}Hn+=si;var xi=gt[Hn];kn[xi]=pn(wi)*(1<<Dn),Hn++}}var Yn=0,Kn;function Qn(zn,kn){for(var Hn=Qt,Nn=me,hi=0;Hn<=Nn;){var wi=gt[Hn],si=kn[wi]<0?-1:1;switch(Yn){case 0:var xi=sn(zn.huffmanTableAC),mi=xi&15,hi=xi>>4;if(mi===0)hi<15?(qn=nn(hi)+(1<<hi),Yn=4):(hi=16,Yn=1);else{if(mi!==1)throw new Error("invalid ACn encoding");Kn=pn(mi),Yn=hi?2:3}continue;case 1:case 2:kn[wi]?kn[wi]+=(Ht()<<Dn)*si:(hi--,hi===0&&(Yn=Yn==2?3:0));break;case 3:kn[wi]?kn[wi]+=(Ht()<<Dn)*si:(kn[wi]=Kn<<Dn,Yn=0);break;case 4:kn[wi]&&(kn[wi]+=(Ht()<<Dn)*si);break}Hn++}Yn===4&&(qn--,qn===0&&(Yn=0))}function Jn(zn,kn,Hn,Nn,hi){var wi=Hn/$n|0,si=Hn%$n,xi=wi*zn.v+Nn,mi=si*zn.h+hi;zn.blocks[xi]===void 0&&Mn.tolerantDecoding||kn(zn,zn.blocks[xi][mi])}function ei(zn,kn,Hn){var Nn=Hn/zn.blocksPerLine|0,hi=Hn%zn.blocksPerLine;zn.blocks[Nn]===void 0&&Mn.tolerantDecoding||kn(zn,zn.blocks[Nn][hi])}var Ln=It.length,An,gi,Xn,ri,cn,Pn;on?Qt===0?Pn=rn===0?Be:xn:Pn=rn===0?Bn:Qn:Pn=gn;var Vn=0,Gn,ai;Ln==1?ai=It[0].blocksPerLine*It[0].blocksPerColumn:ai=$n*Ft.mcusPerColumn,Wt||(Wt=ai);for(var oi,fi;Vn<ai;){for(gi=0;gi<Ln;gi++)It[gi].pred=0;if(qn=0,Ln==1)for(An=It[0],cn=0;cn<Wt;cn++)ei(An,Pn,Vn),Vn++;else for(cn=0;cn<Wt;cn++){for(gi=0;gi<Ln;gi++)for(An=It[gi],oi=An.h,fi=An.v,Xn=0;Xn<fi;Xn++)for(ri=0;ri<oi;ri++)Jn(An,Pn,Vn,Xn,ri);if(Vn++,Vn===ai)break}if(Vn===ai)do{if(kt[Zt]===255&&kt[Zt+1]!==0)break;Zt+=1}while(Zt<kt.length-2);if(On=0,Gn=kt[Zt]<<8|kt[Zt+1],Gn<65280)throw new Error("marker was not found");if(Gn>=65488&&Gn<=65495)Zt+=2;else break}return Zt-yn}function Pt(kt,Zt){var Ft=[],It=Zt.blocksPerLine,Wt=Zt.blocksPerColumn,Qt=It<<3,me=new Int32Array(64),rn=new Uint8Array(64);function Dn(nn,pn,gn){var Be=Zt.quantizationTable,xn,qn,Bn,Yn,Kn,Qn,Jn,ei,Ln,An=gn,gi;for(gi=0;gi<64;gi++)An[gi]=nn[gi]*Be[gi];for(gi=0;gi<8;++gi){var Xn=8*gi;if(An[1+Xn]==0&&An[2+Xn]==0&&An[3+Xn]==0&&An[4+Xn]==0&&An[5+Xn]==0&&An[6+Xn]==0&&An[7+Xn]==0){Ln=Ct*An[0+Xn]+512>>10,An[0+Xn]=Ln,An[1+Xn]=Ln,An[2+Xn]=Ln,An[3+Xn]=Ln,An[4+Xn]=Ln,An[5+Xn]=Ln,An[6+Xn]=Ln,An[7+Xn]=Ln;continue}xn=Ct*An[0+Xn]+128>>8,qn=Ct*An[4+Xn]+128>>8,Bn=An[2+Xn],Yn=An[6+Xn],Kn=Ot*(An[1+Xn]-An[7+Xn])+128>>8,ei=Ot*(An[1+Xn]+An[7+Xn])+128>>8,Qn=An[3+Xn]<<4,Jn=An[5+Xn]<<4,Ln=xn-qn+1>>1,xn=xn+qn+1>>1,qn=Ln,Ln=Bn*At+Yn*St+128>>8,Bn=Bn*St-Yn*At+128>>8,Yn=Ln,Ln=Kn-Jn+1>>1,Kn=Kn+Jn+1>>1,Jn=Ln,Ln=ei+Qn+1>>1,Qn=ei-Qn+1>>1,ei=Ln,Ln=xn-Yn+1>>1,xn=xn+Yn+1>>1,Yn=Ln,Ln=qn-Bn+1>>1,qn=qn+Bn+1>>1,Bn=Ln,Ln=Kn*Tt+ei*_t+2048>>12,Kn=Kn*_t-ei*Tt+2048>>12,ei=Ln,Ln=Qn*yt+Jn*mt+2048>>12,Qn=Qn*mt-Jn*yt+2048>>12,Jn=Ln,An[0+Xn]=xn+ei,An[7+Xn]=xn-ei,An[1+Xn]=qn+Jn,An[6+Xn]=qn-Jn,An[2+Xn]=Bn+Qn,An[5+Xn]=Bn-Qn,An[3+Xn]=Yn+Kn,An[4+Xn]=Yn-Kn}for(gi=0;gi<8;++gi){var ri=gi;if(An[8+ri]==0&&An[16+ri]==0&&An[24+ri]==0&&An[32+ri]==0&&An[40+ri]==0&&An[48+ri]==0&&An[56+ri]==0){Ln=Ct*gn[gi+0]+8192>>14,An[0+ri]=Ln,An[8+ri]=Ln,An[16+ri]=Ln,An[24+ri]=Ln,An[32+ri]=Ln,An[40+ri]=Ln,An[48+ri]=Ln,An[56+ri]=Ln;continue}xn=Ct*An[0+ri]+2048>>12,qn=Ct*An[32+ri]+2048>>12,Bn=An[16+ri],Yn=An[48+ri],Kn=Ot*(An[8+ri]-An[56+ri])+2048>>12,ei=Ot*(An[8+ri]+An[56+ri])+2048>>12,Qn=An[24+ri],Jn=An[40+ri],Ln=xn-qn+1>>1,xn=xn+qn+1>>1,qn=Ln,Ln=Bn*At+Yn*St+2048>>12,Bn=Bn*St-Yn*At+2048>>12,Yn=Ln,Ln=Kn-Jn+1>>1,Kn=Kn+Jn+1>>1,Jn=Ln,Ln=ei+Qn+1>>1,Qn=ei-Qn+1>>1,ei=Ln,Ln=xn-Yn+1>>1,xn=xn+Yn+1>>1,Yn=Ln,Ln=qn-Bn+1>>1,qn=qn+Bn+1>>1,Bn=Ln,Ln=Kn*Tt+ei*_t+2048>>12,Kn=Kn*_t-ei*Tt+2048>>12,ei=Ln,Ln=Qn*yt+Jn*mt+2048>>12,Qn=Qn*mt-Jn*yt+2048>>12,Jn=Ln,An[0+ri]=xn+ei,An[56+ri]=xn-ei,An[8+ri]=qn+Jn,An[48+ri]=qn-Jn,An[16+ri]=Bn+Qn,An[40+ri]=Bn-Qn,An[24+ri]=Yn+Kn,An[32+ri]=Yn-Kn}for(gi=0;gi<64;++gi){var cn=128+(An[gi]+8>>4);pn[gi]=cn<0?0:cn>255?255:cn}}jt(Qt*Wt*8);for(var Mn,$n,on=0;on<Wt;on++){var yn=on<<3;for(Mn=0;Mn<8;Mn++)Ft.push(new Uint8Array(Qt));for(var bn=0;bn<It;bn++){Dn(Zt.blocks[on][bn],rn,me);var On=0,Ht=bn<<3;for($n=0;$n<8;$n++){var sn=Ft[yn+$n];for(Mn=0;Mn<8;Mn++)sn[Ht+Mn]=rn[On++]}}}return Ft}function Jt(kt){return kt<0?0:kt>255?255:kt}Dt.prototype={load:function(Zt){var Ft=new XMLHttpRequest;Ft.open("GET",Zt,!0),Ft.responseType="arraybuffer",Ft.onload=(function(){var It=new Uint8Array(Ft.response||Ft.mozResponseArrayBuffer);this.parse(It),this.onload&&this.onload()}).bind(this),Ft.send(null)},parse:function(Zt){var Ft=this.opts.maxResolutionInMP*1e3*1e3,It=0;Zt.length;function Wt(){var si=Zt[It]<<8|Zt[It+1];return It+=2,si}function Qt(){var si=Wt(),xi=Zt.subarray(It,It+si-2);return It+=xi.length,xi}function me(si){var xi=1,mi=1,yi,Yi;for(Yi in si.components)si.components.hasOwnProperty(Yi)&&(yi=si.components[Yi],xi<yi.h&&(xi=yi.h),mi<yi.v&&(mi=yi.v));var zi=Math.ceil(si.samplesPerLine/8/xi),cr=Math.ceil(si.scanLines/8/mi);for(Yi in si.components)if(si.components.hasOwnProperty(Yi)){yi=si.components[Yi];var Dr=Math.ceil(Math.ceil(si.samplesPerLine/8)*yi.h/xi),Xr=Math.ceil(Math.ceil(si.scanLines/8)*yi.v/mi),dr=zi*yi.h,zt=cr*yi.v,bt=zt*dr,Et=[];jt(bt*256);for(var wt=0;wt<zt;wt++){for(var Rt=[],$t=0;$t<dr;$t++)Rt.push(new Int32Array(64));Et.push(Rt)}yi.blocksPerLine=Dr,yi.blocksPerColumn=Xr,yi.blocks=Et}si.maxH=xi,si.maxV=mi,si.mcusPerLine=zi,si.mcusPerColumn=cr}var rn=null,Dn=null,Mn,$n,on=[],yn=[],bn=[],On=[],Ht=Wt(),sn=-1;if(this.comments=[],Ht!=65496)throw new Error("SOI not found");for(Ht=Wt();Ht!=65497;){var nn,pn;switch(Ht){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var gn=Qt();if(Ht===65534){var Be=String.fromCharCode.apply(null,gn);this.comments.push(Be)}Ht===65504&&gn[0]===74&&gn[1]===70&&gn[2]===73&&gn[3]===70&&gn[4]===0&&(rn={version:{major:gn[5],minor:gn[6]},densityUnits:gn[7],xDensity:gn[8]<<8|gn[9],yDensity:gn[10]<<8|gn[11],thumbWidth:gn[12],thumbHeight:gn[13],thumbData:gn.subarray(14,14+3*gn[12]*gn[13])}),Ht===65505&&gn[0]===69&&gn[1]===120&&gn[2]===105&&gn[3]===102&&gn[4]===0&&(this.exifBuffer=gn.subarray(5,gn.length)),Ht===65518&&gn[0]===65&&gn[1]===100&&gn[2]===111&&gn[3]===98&&gn[4]===101&&gn[5]===0&&(Dn={version:gn[6],flags0:gn[7]<<8|gn[8],flags1:gn[9]<<8|gn[10],transformCode:gn[11]});break;case 65499:for(var xn=Wt(),qn=xn+It-2;It<qn;){var Bn=Zt[It++];jt(256);var Yn=new Int32Array(64);if(Bn>>4===0)for(pn=0;pn<64;pn++){var Kn=gt[pn];Yn[Kn]=Zt[It++]}else if(Bn>>4===1)for(pn=0;pn<64;pn++){var Kn=gt[pn];Yn[Kn]=Wt()}else throw new Error("DQT: invalid table spec");on[Bn&15]=Yn}break;case 65472:case 65473:case 65474:Wt(),Mn={},Mn.extended=Ht===65473,Mn.progressive=Ht===65474,Mn.precision=Zt[It++],Mn.scanLines=Wt(),Mn.samplesPerLine=Wt(),Mn.components={},Mn.componentsOrder=[];var Qn=Mn.scanLines*Mn.samplesPerLine;if(Qn>Ft){var Jn=Math.ceil((Qn-Ft)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Jn}MP`)}var ei=Zt[It++],Ln;for(nn=0;nn<ei;nn++){Ln=Zt[It];var An=Zt[It+1]>>4,gi=Zt[It+1]&15,Xn=Zt[It+2];if(An<=0||gi<=0)throw new Error("Invalid sampling factor, expected values above 0");Mn.componentsOrder.push(Ln),Mn.components[Ln]={h:An,v:gi,quantizationIdx:Xn},It+=3}me(Mn),yn.push(Mn);break;case 65476:var ri=Wt();for(nn=2;nn<ri;){var cn=Zt[It++],Pn=new Uint8Array(16),Vn=0;for(pn=0;pn<16;pn++,It++)Vn+=Pn[pn]=Zt[It];jt(16+Vn);var Gn=new Uint8Array(Vn);for(pn=0;pn<Vn;pn++,It++)Gn[pn]=Zt[It];nn+=17+Vn,(cn>>4===0?On:bn)[cn&15]=Ut(Pn,Gn)}break;case 65501:Wt(),$n=Wt();break;case 65500:Wt(),Wt();break;case 65498:Wt();var ai=Zt[It++],oi=[],fi;for(nn=0;nn<ai;nn++){fi=Mn.components[Zt[It++]];var zn=Zt[It++];fi.huffmanTableDC=On[zn>>4],fi.huffmanTableAC=bn[zn&15],oi.push(fi)}var kn=Zt[It++],Hn=Zt[It++],Nn=Zt[It++],hi=Xt(Zt,It,Mn,oi,$n,kn,Hn,Nn>>4,Nn&15,this.opts);It+=hi;break;case 65535:Zt[It]!==255&&It--;break;default:if(Zt[It-3]==255&&Zt[It-2]>=192&&Zt[It-2]<=254){It-=3;break}else if(Ht===224||Ht==225){if(sn!==-1)throw new Error(`first unknown JPEG marker at offset ${sn.toString(16)}, second unknown JPEG marker ${Ht.toString(16)} at offset ${(It-1).toString(16)}`);sn=It-1;const si=Wt();if(Zt[It+si-2]===255){It+=si-2;break}}throw new Error("unknown JPEG marker "+Ht.toString(16))}Ht=Wt()}if(yn.length!=1)throw new Error("only single frame JPEGs supported");for(var nn=0;nn<yn.length;nn++){var wi=yn[nn].components;for(var pn in wi)wi[pn].quantizationTable=on[wi[pn].quantizationIdx],delete wi[pn].quantizationIdx}this.width=Mn.samplesPerLine,this.height=Mn.scanLines,this.jfif=rn,this.adobe=Dn,this.components=[];for(var nn=0;nn<Mn.componentsOrder.length;nn++){var fi=Mn.components[Mn.componentsOrder[nn]];this.components.push({lines:Pt(Mn,fi),scaleX:fi.h/Mn.maxH,scaleY:fi.v/Mn.maxV})}},getData:function(Zt,Ft){var It=this.width/Zt,Wt=this.height/Ft,Qt,me,rn,Dn,Mn,$n,on,yn,bn,On,Ht=0,sn,nn,pn,gn,Be,xn,qn,Bn,Yn,Kn,Qn,Jn=Zt*Ft*this.components.length;jt(Jn);var ei=new Uint8Array(Jn);switch(this.components.length){case 1:for(Qt=this.components[0],On=0;On<Ft;On++)for(Mn=Qt.lines[0|On*Qt.scaleY*Wt],bn=0;bn<Zt;bn++)sn=Mn[0|bn*Qt.scaleX*It],ei[Ht++]=sn;break;case 2:for(Qt=this.components[0],me=this.components[1],On=0;On<Ft;On++)for(Mn=Qt.lines[0|On*Qt.scaleY*Wt],$n=me.lines[0|On*me.scaleY*Wt],bn=0;bn<Zt;bn++)sn=Mn[0|bn*Qt.scaleX*It],ei[Ht++]=sn,sn=$n[0|bn*me.scaleX*It],ei[Ht++]=sn;break;case 3:for(Qn=!0,this.adobe&&this.adobe.transformCode?Qn=!0:typeof this.opts.colorTransform<"u"&&(Qn=!!this.opts.colorTransform),Qt=this.components[0],me=this.components[1],rn=this.components[2],On=0;On<Ft;On++)for(Mn=Qt.lines[0|On*Qt.scaleY*Wt],$n=me.lines[0|On*me.scaleY*Wt],on=rn.lines[0|On*rn.scaleY*Wt],bn=0;bn<Zt;bn++)Qn?(sn=Mn[0|bn*Qt.scaleX*It],nn=$n[0|bn*me.scaleX*It],pn=on[0|bn*rn.scaleX*It],Bn=Jt(sn+1.402*(pn-128)),Yn=Jt(sn-.3441363*(nn-128)-.71413636*(pn-128)),Kn=Jt(sn+1.772*(nn-128))):(Bn=Mn[0|bn*Qt.scaleX*It],Yn=$n[0|bn*me.scaleX*It],Kn=on[0|bn*rn.scaleX*It]),ei[Ht++]=Bn,ei[Ht++]=Yn,ei[Ht++]=Kn;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(Qn=!1,this.adobe&&this.adobe.transformCode?Qn=!0:typeof this.opts.colorTransform<"u"&&(Qn=!!this.opts.colorTransform),Qt=this.components[0],me=this.components[1],rn=this.components[2],Dn=this.components[3],On=0;On<Ft;On++)for(Mn=Qt.lines[0|On*Qt.scaleY*Wt],$n=me.lines[0|On*me.scaleY*Wt],on=rn.lines[0|On*rn.scaleY*Wt],yn=Dn.lines[0|On*Dn.scaleY*Wt],bn=0;bn<Zt;bn++)Qn?(sn=Mn[0|bn*Qt.scaleX*It],nn=$n[0|bn*me.scaleX*It],pn=on[0|bn*rn.scaleX*It],gn=yn[0|bn*Dn.scaleX*It],Be=255-Jt(sn+1.402*(pn-128)),xn=255-Jt(sn-.3441363*(nn-128)-.71413636*(pn-128)),qn=255-Jt(sn+1.772*(nn-128))):(Be=Mn[0|bn*Qt.scaleX*It],xn=$n[0|bn*me.scaleX*It],qn=on[0|bn*rn.scaleX*It],gn=yn[0|bn*Dn.scaleX*It]),ei[Ht++]=255-Be,ei[Ht++]=255-xn,ei[Ht++]=255-qn,ei[Ht++]=255-gn;break;default:throw new Error("Unsupported color mode")}return ei},copyToImageData:function(Zt,Ft){var It=Zt.width,Wt=Zt.height,Qt=Zt.data,me=this.getData(It,Wt),rn=0,Dn=0,Mn,$n,on,yn,bn,On,Ht,sn,nn;switch(this.components.length){case 1:for($n=0;$n<Wt;$n++)for(Mn=0;Mn<It;Mn++)on=me[rn++],Qt[Dn++]=on,Qt[Dn++]=on,Qt[Dn++]=on,Ft&&(Qt[Dn++]=255);break;case 3:for($n=0;$n<Wt;$n++)for(Mn=0;Mn<It;Mn++)Ht=me[rn++],sn=me[rn++],nn=me[rn++],Qt[Dn++]=Ht,Qt[Dn++]=sn,Qt[Dn++]=nn,Ft&&(Qt[Dn++]=255);break;case 4:for($n=0;$n<Wt;$n++)for(Mn=0;Mn<It;Mn++)bn=me[rn++],On=me[rn++],on=me[rn++],yn=me[rn++],Ht=255-Jt(bn*(1-yn/255)+yn),sn=255-Jt(On*(1-yn/255)+yn),nn=255-Jt(on*(1-yn/255)+yn),Qt[Dn++]=Ht,Qt[Dn++]=sn,Qt[Dn++]=nn,Ft&&(Qt[Dn++]=255);break;default:throw new Error("Unsupported color mode")}}};var Kt=0,Nt=0;function jt(kt=0){var Zt=Kt+kt;if(Zt>Nt){var Ft=Math.ceil((Zt-Nt)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${Ft}MB`)}Kt=Zt}return Dt.resetMaxMemoryUsage=function(kt){Kt=0,Nt=kt},Dt.getBytesAllocated=function(){return Kt},Dt.requestMemoryAllocation=jt,Dt})();tt.exports=ot;function ot(ft,gt={}){var mt={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},yt={...mt,...gt},_t=new Uint8Array(ft),Tt=new nt;Tt.opts=yt,nt.resetMaxMemoryUsage(yt.maxMemoryUsageInMB*1024*1024),Tt.parse(_t);var St=yt.formatAsRGBA?4:3,At=Tt.width*Tt.height*St;try{nt.requestMemoryAllocation(At);var Ct={width:Tt.width,height:Tt.height,exifBuffer:Tt.exifBuffer,data:yt.useTArray?new Uint8Array(At):Buffer.alloc(At)};Tt.comments.length>0&&(Ct.comments=Tt.comments)}catch(Ot){throw Ot instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+At):Ot instanceof ReferenceError&&Ot.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):Ot}return Tt.copyToImageData(Ct,yt.formatAsRGBA),Ct}})(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var tt=requireEncoder(),nt=requireDecoder();return jpegJs={encode:tt,decode:nt},jpegJs}var jpegJsExports=requireJpegJs();function zero$1(tt){let nt=tt.length;for(;--nt>=0;)tt[nt]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(tt,nt,ot,ft)=>{let gt=tt&65535|0,mt=tt>>>16&65535|0,yt=0;for(;ot!==0;){yt=ot>2e3?2e3:ot,ot-=yt;do gt=gt+nt[ft++]|0,mt=mt+gt|0;while(--yt);gt%=65521,mt%=65521}return gt|mt<<16|0};var adler32_1=adler32;const makeTable=()=>{let tt,nt=[];for(var ot=0;ot<256;ot++){tt=ot;for(var ft=0;ft<8;ft++)tt=tt&1?3988292384^tt>>>1:tt>>>1;nt[ot]=tt}return nt},crcTable$1=new Uint32Array(makeTable()),crc32=(tt,nt,ot,ft)=>{const gt=crcTable$1,mt=ft+ot;tt^=-1;for(let yt=ft;yt<mt;yt++)tt=tt>>>8^gt[(tt^nt[yt])&255];return tt^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(tt,nt)=>Object.prototype.hasOwnProperty.call(tt,nt);var assign=function(tt){const nt=Array.prototype.slice.call(arguments,1);for(;nt.length;){const ot=nt.shift();if(ot){if(typeof ot!="object")throw new TypeError(ot+"must be non-object");for(const ft in ot)_has(ot,ft)&&(tt[ft]=ot[ft])}}return tt},flattenChunks=tt=>{let nt=0;for(let ft=0,gt=tt.length;ft<gt;ft++)nt+=tt[ft].length;const ot=new Uint8Array(nt);for(let ft=0,gt=0,mt=tt.length;ft<mt;ft++){let yt=tt[ft];ot.set(yt,gt),gt+=yt.length}return ot},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let tt=0;tt<256;tt++)_utf8len[tt]=tt>=252?6:tt>=248?5:tt>=240?4:tt>=224?3:tt>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=tt=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(tt);let nt,ot,ft,gt,mt,yt=tt.length,_t=0;for(gt=0;gt<yt;gt++)ot=tt.charCodeAt(gt),(ot&64512)===55296&&gt+1<yt&&(ft=tt.charCodeAt(gt+1),(ft&64512)===56320&&(ot=65536+(ot-55296<<10)+(ft-56320),gt++)),_t+=ot<128?1:ot<2048?2:ot<65536?3:4;for(nt=new Uint8Array(_t),mt=0,gt=0;mt<_t;gt++)ot=tt.charCodeAt(gt),(ot&64512)===55296&&gt+1<yt&&(ft=tt.charCodeAt(gt+1),(ft&64512)===56320&&(ot=65536+(ot-55296<<10)+(ft-56320),gt++)),ot<128?nt[mt++]=ot:ot<2048?(nt[mt++]=192|ot>>>6,nt[mt++]=128|ot&63):ot<65536?(nt[mt++]=224|ot>>>12,nt[mt++]=128|ot>>>6&63,nt[mt++]=128|ot&63):(nt[mt++]=240|ot>>>18,nt[mt++]=128|ot>>>12&63,nt[mt++]=128|ot>>>6&63,nt[mt++]=128|ot&63);return nt};const buf2binstring=(tt,nt)=>{if(nt<65534&&tt.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,tt.length===nt?tt:tt.subarray(0,nt));let ot="";for(let ft=0;ft<nt;ft++)ot+=String.fromCharCode(tt[ft]);return ot};var buf2string=(tt,nt)=>{const ot=nt||tt.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(tt.subarray(0,nt));let ft,gt;const mt=new Array(ot*2);for(gt=0,ft=0;ft<ot;){let yt=tt[ft++];if(yt<128){mt[gt++]=yt;continue}let _t=_utf8len[yt];if(_t>4){mt[gt++]=65533,ft+=_t-1;continue}for(yt&=_t===2?31:_t===3?15:7;_t>1&&ft<ot;)yt=yt<<6|tt[ft++]&63,_t--;if(_t>1){mt[gt++]=65533;continue}yt<65536?mt[gt++]=yt:(yt-=65536,mt[gt++]=55296|yt>>10&1023,mt[gt++]=56320|yt&1023)}return buf2binstring(mt,gt)},utf8border=(tt,nt)=>{nt=nt||tt.length,nt>tt.length&&(nt=tt.length);let ot=nt-1;for(;ot>=0&&(tt[ot]&192)===128;)ot--;return ot<0||ot===0?nt:ot+_utf8len[tt[ot]]>nt?ot:nt},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(nt,ot){let ft,gt,mt,yt,_t,Tt,St,At,Ct,Ot,Dt,Ut,Xt,Pt,Jt,Kt,Nt,jt,kt,Zt,Ft,It,Wt,Qt;const me=nt.state;ft=nt.next_in,Wt=nt.input,gt=ft+(nt.avail_in-5),mt=nt.next_out,Qt=nt.output,yt=mt-(ot-nt.avail_out),_t=mt+(nt.avail_out-257),Tt=me.dmax,St=me.wsize,At=me.whave,Ct=me.wnext,Ot=me.window,Dt=me.hold,Ut=me.bits,Xt=me.lencode,Pt=me.distcode,Jt=(1<<me.lenbits)-1,Kt=(1<<me.distbits)-1;t:do{Ut<15&&(Dt+=Wt[ft++]<<Ut,Ut+=8,Dt+=Wt[ft++]<<Ut,Ut+=8),Nt=Xt[Dt&Jt];e:for(;;){if(jt=Nt>>>24,Dt>>>=jt,Ut-=jt,jt=Nt>>>16&255,jt===0)Qt[mt++]=Nt&65535;else if(jt&16){kt=Nt&65535,jt&=15,jt&&(Ut<jt&&(Dt+=Wt[ft++]<<Ut,Ut+=8),kt+=Dt&(1<<jt)-1,Dt>>>=jt,Ut-=jt),Ut<15&&(Dt+=Wt[ft++]<<Ut,Ut+=8,Dt+=Wt[ft++]<<Ut,Ut+=8),Nt=Pt[Dt&Kt];n:for(;;){if(jt=Nt>>>24,Dt>>>=jt,Ut-=jt,jt=Nt>>>16&255,jt&16){if(Zt=Nt&65535,jt&=15,Ut<jt&&(Dt+=Wt[ft++]<<Ut,Ut+=8,Ut<jt&&(Dt+=Wt[ft++]<<Ut,Ut+=8)),Zt+=Dt&(1<<jt)-1,Zt>Tt){nt.msg="invalid distance too far back",me.mode=BAD$1;break t}if(Dt>>>=jt,Ut-=jt,jt=mt-yt,Zt>jt){if(jt=Zt-jt,jt>At&&me.sane){nt.msg="invalid distance too far back",me.mode=BAD$1;break t}if(Ft=0,It=Ot,Ct===0){if(Ft+=St-jt,jt<kt){kt-=jt;do Qt[mt++]=Ot[Ft++];while(--jt);Ft=mt-Zt,It=Qt}}else if(Ct<jt){if(Ft+=St+Ct-jt,jt-=Ct,jt<kt){kt-=jt;do Qt[mt++]=Ot[Ft++];while(--jt);if(Ft=0,Ct<kt){jt=Ct,kt-=jt;do Qt[mt++]=Ot[Ft++];while(--jt);Ft=mt-Zt,It=Qt}}}else if(Ft+=Ct-jt,jt<kt){kt-=jt;do Qt[mt++]=Ot[Ft++];while(--jt);Ft=mt-Zt,It=Qt}for(;kt>2;)Qt[mt++]=It[Ft++],Qt[mt++]=It[Ft++],Qt[mt++]=It[Ft++],kt-=3;kt&&(Qt[mt++]=It[Ft++],kt>1&&(Qt[mt++]=It[Ft++]))}else{Ft=mt-Zt;do Qt[mt++]=Qt[Ft++],Qt[mt++]=Qt[Ft++],Qt[mt++]=Qt[Ft++],kt-=3;while(kt>2);kt&&(Qt[mt++]=Qt[Ft++],kt>1&&(Qt[mt++]=Qt[Ft++]))}}else if((jt&64)===0){Nt=Pt[(Nt&65535)+(Dt&(1<<jt)-1)];continue n}else{nt.msg="invalid distance code",me.mode=BAD$1;break t}break}}else if((jt&64)===0){Nt=Xt[(Nt&65535)+(Dt&(1<<jt)-1)];continue e}else if(jt&32){me.mode=TYPE$1;break t}else{nt.msg="invalid literal/length code",me.mode=BAD$1;break t}break}}while(ft<gt&&mt<_t);kt=Ut>>3,ft-=kt,Ut-=kt<<3,Dt&=(1<<Ut)-1,nt.next_in=ft,nt.next_out=mt,nt.avail_in=ft<gt?5+(gt-ft):5-(ft-gt),nt.avail_out=mt<_t?257+(_t-mt):257-(mt-_t),me.hold=Dt,me.bits=Ut};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(tt,nt,ot,ft,gt,mt,yt,_t)=>{const Tt=_t.bits;let St=0,At=0,Ct=0,Ot=0,Dt=0,Ut=0,Xt=0,Pt=0,Jt=0,Kt=0,Nt,jt,kt,Zt,Ft,It=null,Wt;const Qt=new Uint16Array(MAXBITS+1),me=new Uint16Array(MAXBITS+1);let rn=null,Dn,Mn,$n;for(St=0;St<=MAXBITS;St++)Qt[St]=0;for(At=0;At<ft;At++)Qt[nt[ot+At]]++;for(Dt=Tt,Ot=MAXBITS;Ot>=1&&Qt[Ot]===0;Ot--);if(Dt>Ot&&(Dt=Ot),Ot===0)return gt[mt++]=1<<24|64<<16|0,gt[mt++]=1<<24|64<<16|0,_t.bits=1,0;for(Ct=1;Ct<Ot&&Qt[Ct]===0;Ct++);for(Dt<Ct&&(Dt=Ct),Pt=1,St=1;St<=MAXBITS;St++)if(Pt<<=1,Pt-=Qt[St],Pt<0)return-1;if(Pt>0&&(tt===CODES$1||Ot!==1))return-1;for(me[1]=0,St=1;St<MAXBITS;St++)me[St+1]=me[St]+Qt[St];for(At=0;At<ft;At++)nt[ot+At]!==0&&(yt[me[nt[ot+At]]++]=At);if(tt===CODES$1?(It=rn=yt,Wt=20):tt===LENS$1?(It=lbase,rn=lext,Wt=257):(It=dbase,rn=dext,Wt=0),Kt=0,At=0,St=Ct,Ft=mt,Ut=Dt,Xt=0,kt=-1,Jt=1<<Dt,Zt=Jt-1,tt===LENS$1&&Jt>ENOUGH_LENS$1||tt===DISTS$1&&Jt>ENOUGH_DISTS$1)return 1;for(;;){Dn=St-Xt,yt[At]+1<Wt?(Mn=0,$n=yt[At]):yt[At]>=Wt?(Mn=rn[yt[At]-Wt],$n=It[yt[At]-Wt]):(Mn=96,$n=0),Nt=1<<St-Xt,jt=1<<Ut,Ct=jt;do jt-=Nt,gt[Ft+(Kt>>Xt)+jt]=Dn<<24|Mn<<16|$n|0;while(jt!==0);for(Nt=1<<St-1;Kt&Nt;)Nt>>=1;if(Nt!==0?(Kt&=Nt-1,Kt+=Nt):Kt=0,At++,--Qt[St]===0){if(St===Ot)break;St=nt[ot+yt[At]]}if(St>Dt&&(Kt&Zt)!==kt){for(Xt===0&&(Xt=Dt),Ft+=Ct,Ut=St-Xt,Pt=1<<Ut;Ut+Xt<Ot&&(Pt-=Qt[Ut+Xt],!(Pt<=0));)Ut++,Pt<<=1;if(Jt+=1<<Ut,tt===LENS$1&&Jt>ENOUGH_LENS$1||tt===DISTS$1&&Jt>ENOUGH_DISTS$1)return 1;kt=Kt&Zt,gt[kt]=Dt<<24|Ut<<16|Ft-mt|0}}return Kt!==0&&(gt[Ft+Kt]=St-Xt<<24|64<<16|0),_t.bits=Dt,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=tt=>(tt>>>24&255)+(tt>>>8&65280)+((tt&65280)<<8)+((tt&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=tt=>{if(!tt)return 1;const nt=tt.state;return!nt||nt.strm!==tt||nt.mode<HEAD||nt.mode>SYNC?1:0},inflateResetKeep=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const nt=tt.state;return tt.total_in=tt.total_out=nt.total=0,tt.msg="",nt.wrap&&(tt.adler=nt.wrap&1),nt.mode=HEAD,nt.last=0,nt.havedict=0,nt.flags=-1,nt.dmax=32768,nt.head=null,nt.hold=0,nt.bits=0,nt.lencode=nt.lendyn=new Int32Array(ENOUGH_LENS),nt.distcode=nt.distdyn=new Int32Array(ENOUGH_DISTS),nt.sane=1,nt.back=-1,Z_OK$1},inflateReset=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const nt=tt.state;return nt.wsize=0,nt.whave=0,nt.wnext=0,inflateResetKeep(tt)},inflateReset2=(tt,nt)=>{let ot;if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const ft=tt.state;return nt<0?(ot=0,nt=-nt):(ot=(nt>>4)+5,nt<48&&(nt&=15)),nt&&(nt<8||nt>15)?Z_STREAM_ERROR$1:(ft.window!==null&&ft.wbits!==nt&&(ft.window=null),ft.wrap=ot,ft.wbits=nt,inflateReset(tt))},inflateInit2=(tt,nt)=>{if(!tt)return Z_STREAM_ERROR$1;const ot=new InflateState;tt.state=ot,ot.strm=tt,ot.window=null,ot.mode=HEAD;const ft=inflateReset2(tt,nt);return ft!==Z_OK$1&&(tt.state=null),ft},inflateInit=tt=>inflateInit2(tt,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=tt=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let nt=0;for(;nt<144;)tt.lens[nt++]=8;for(;nt<256;)tt.lens[nt++]=9;for(;nt<280;)tt.lens[nt++]=7;for(;nt<288;)tt.lens[nt++]=8;for(inftrees(LENS,tt.lens,0,288,lenfix,0,tt.work,{bits:9}),nt=0;nt<32;)tt.lens[nt++]=5;inftrees(DISTS,tt.lens,0,32,distfix,0,tt.work,{bits:5}),virgin=!1}tt.lencode=lenfix,tt.lenbits=9,tt.distcode=distfix,tt.distbits=5},updatewindow=(tt,nt,ot,ft)=>{let gt;const mt=tt.state;return mt.window===null&&(mt.wsize=1<<mt.wbits,mt.wnext=0,mt.whave=0,mt.window=new Uint8Array(mt.wsize)),ft>=mt.wsize?(mt.window.set(nt.subarray(ot-mt.wsize,ot),0),mt.wnext=0,mt.whave=mt.wsize):(gt=mt.wsize-mt.wnext,gt>ft&&(gt=ft),mt.window.set(nt.subarray(ot-ft,ot-ft+gt),mt.wnext),ft-=gt,ft?(mt.window.set(nt.subarray(ot-ft,ot),0),mt.wnext=ft,mt.whave=mt.wsize):(mt.wnext+=gt,mt.wnext===mt.wsize&&(mt.wnext=0),mt.whave<mt.wsize&&(mt.whave+=gt))),0},inflate$2=(tt,nt)=>{let ot,ft,gt,mt,yt,_t,Tt,St,At,Ct,Ot,Dt,Ut,Xt,Pt=0,Jt,Kt,Nt,jt,kt,Zt,Ft,It;const Wt=new Uint8Array(4);let Qt,me;const rn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(tt)||!tt.output||!tt.input&&tt.avail_in!==0)return Z_STREAM_ERROR$1;ot=tt.state,ot.mode===TYPE&&(ot.mode=TYPEDO),yt=tt.next_out,gt=tt.output,Tt=tt.avail_out,mt=tt.next_in,ft=tt.input,_t=tt.avail_in,St=ot.hold,At=ot.bits,Ct=_t,Ot=Tt,It=Z_OK$1;t:for(;;)switch(ot.mode){case HEAD:if(ot.wrap===0){ot.mode=TYPEDO;break}for(;At<16;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(ot.wrap&2&&St===35615){ot.wbits===0&&(ot.wbits=15),ot.check=0,Wt[0]=St&255,Wt[1]=St>>>8&255,ot.check=crc32_1(ot.check,Wt,2,0),St=0,At=0,ot.mode=FLAGS;break}if(ot.head&&(ot.head.done=!1),!(ot.wrap&1)||(((St&255)<<8)+(St>>8))%31){tt.msg="incorrect header check",ot.mode=BAD;break}if((St&15)!==Z_DEFLATED){tt.msg="unknown compression method",ot.mode=BAD;break}if(St>>>=4,At-=4,Ft=(St&15)+8,ot.wbits===0&&(ot.wbits=Ft),Ft>15||Ft>ot.wbits){tt.msg="invalid window size",ot.mode=BAD;break}ot.dmax=1<<ot.wbits,ot.flags=0,tt.adler=ot.check=1,ot.mode=St&512?DICTID:TYPE,St=0,At=0;break;case FLAGS:for(;At<16;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(ot.flags=St,(ot.flags&255)!==Z_DEFLATED){tt.msg="unknown compression method",ot.mode=BAD;break}if(ot.flags&57344){tt.msg="unknown header flags set",ot.mode=BAD;break}ot.head&&(ot.head.text=St>>8&1),ot.flags&512&&ot.wrap&4&&(Wt[0]=St&255,Wt[1]=St>>>8&255,ot.check=crc32_1(ot.check,Wt,2,0)),St=0,At=0,ot.mode=TIME;case TIME:for(;At<32;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.head&&(ot.head.time=St),ot.flags&512&&ot.wrap&4&&(Wt[0]=St&255,Wt[1]=St>>>8&255,Wt[2]=St>>>16&255,Wt[3]=St>>>24&255,ot.check=crc32_1(ot.check,Wt,4,0)),St=0,At=0,ot.mode=OS;case OS:for(;At<16;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.head&&(ot.head.xflags=St&255,ot.head.os=St>>8),ot.flags&512&&ot.wrap&4&&(Wt[0]=St&255,Wt[1]=St>>>8&255,ot.check=crc32_1(ot.check,Wt,2,0)),St=0,At=0,ot.mode=EXLEN;case EXLEN:if(ot.flags&1024){for(;At<16;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.length=St,ot.head&&(ot.head.extra_len=St),ot.flags&512&&ot.wrap&4&&(Wt[0]=St&255,Wt[1]=St>>>8&255,ot.check=crc32_1(ot.check,Wt,2,0)),St=0,At=0}else ot.head&&(ot.head.extra=null);ot.mode=EXTRA;case EXTRA:if(ot.flags&1024&&(Dt=ot.length,Dt>_t&&(Dt=_t),Dt&&(ot.head&&(Ft=ot.head.extra_len-ot.length,ot.head.extra||(ot.head.extra=new Uint8Array(ot.head.extra_len)),ot.head.extra.set(ft.subarray(mt,mt+Dt),Ft)),ot.flags&512&&ot.wrap&4&&(ot.check=crc32_1(ot.check,ft,Dt,mt)),_t-=Dt,mt+=Dt,ot.length-=Dt),ot.length))break t;ot.length=0,ot.mode=NAME;case NAME:if(ot.flags&2048){if(_t===0)break t;Dt=0;do Ft=ft[mt+Dt++],ot.head&&Ft&&ot.length<65536&&(ot.head.name+=String.fromCharCode(Ft));while(Ft&&Dt<_t);if(ot.flags&512&&ot.wrap&4&&(ot.check=crc32_1(ot.check,ft,Dt,mt)),_t-=Dt,mt+=Dt,Ft)break t}else ot.head&&(ot.head.name=null);ot.length=0,ot.mode=COMMENT;case COMMENT:if(ot.flags&4096){if(_t===0)break t;Dt=0;do Ft=ft[mt+Dt++],ot.head&&Ft&&ot.length<65536&&(ot.head.comment+=String.fromCharCode(Ft));while(Ft&&Dt<_t);if(ot.flags&512&&ot.wrap&4&&(ot.check=crc32_1(ot.check,ft,Dt,mt)),_t-=Dt,mt+=Dt,Ft)break t}else ot.head&&(ot.head.comment=null);ot.mode=HCRC;case HCRC:if(ot.flags&512){for(;At<16;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(ot.wrap&4&&St!==(ot.check&65535)){tt.msg="header crc mismatch",ot.mode=BAD;break}St=0,At=0}ot.head&&(ot.head.hcrc=ot.flags>>9&1,ot.head.done=!0),tt.adler=ot.check=0,ot.mode=TYPE;break;case DICTID:for(;At<32;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}tt.adler=ot.check=zswap32(St),St=0,At=0,ot.mode=DICT;case DICT:if(ot.havedict===0)return tt.next_out=yt,tt.avail_out=Tt,tt.next_in=mt,tt.avail_in=_t,ot.hold=St,ot.bits=At,Z_NEED_DICT$1;tt.adler=ot.check=1,ot.mode=TYPE;case TYPE:if(nt===Z_BLOCK||nt===Z_TREES)break t;case TYPEDO:if(ot.last){St>>>=At&7,At-=At&7,ot.mode=CHECK;break}for(;At<3;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}switch(ot.last=St&1,St>>>=1,At-=1,St&3){case 0:ot.mode=STORED;break;case 1:if(fixedtables(ot),ot.mode=LEN_,nt===Z_TREES){St>>>=2,At-=2;break t}break;case 2:ot.mode=TABLE;break;case 3:tt.msg="invalid block type",ot.mode=BAD}St>>>=2,At-=2;break;case STORED:for(St>>>=At&7,At-=At&7;At<32;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if((St&65535)!==(St>>>16^65535)){tt.msg="invalid stored block lengths",ot.mode=BAD;break}if(ot.length=St&65535,St=0,At=0,ot.mode=COPY_,nt===Z_TREES)break t;case COPY_:ot.mode=COPY;case COPY:if(Dt=ot.length,Dt){if(Dt>_t&&(Dt=_t),Dt>Tt&&(Dt=Tt),Dt===0)break t;gt.set(ft.subarray(mt,mt+Dt),yt),_t-=Dt,mt+=Dt,Tt-=Dt,yt+=Dt,ot.length-=Dt;break}ot.mode=TYPE;break;case TABLE:for(;At<14;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(ot.nlen=(St&31)+257,St>>>=5,At-=5,ot.ndist=(St&31)+1,St>>>=5,At-=5,ot.ncode=(St&15)+4,St>>>=4,At-=4,ot.nlen>286||ot.ndist>30){tt.msg="too many length or distance symbols",ot.mode=BAD;break}ot.have=0,ot.mode=LENLENS;case LENLENS:for(;ot.have<ot.ncode;){for(;At<3;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.lens[rn[ot.have++]]=St&7,St>>>=3,At-=3}for(;ot.have<19;)ot.lens[rn[ot.have++]]=0;if(ot.lencode=ot.lendyn,ot.lenbits=7,Qt={bits:ot.lenbits},It=inftrees(CODES,ot.lens,0,19,ot.lencode,0,ot.work,Qt),ot.lenbits=Qt.bits,It){tt.msg="invalid code lengths set",ot.mode=BAD;break}ot.have=0,ot.mode=CODELENS;case CODELENS:for(;ot.have<ot.nlen+ot.ndist;){for(;Pt=ot.lencode[St&(1<<ot.lenbits)-1],Jt=Pt>>>24,Kt=Pt>>>16&255,Nt=Pt&65535,!(Jt<=At);){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(Nt<16)St>>>=Jt,At-=Jt,ot.lens[ot.have++]=Nt;else{if(Nt===16){for(me=Jt+2;At<me;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(St>>>=Jt,At-=Jt,ot.have===0){tt.msg="invalid bit length repeat",ot.mode=BAD;break}Ft=ot.lens[ot.have-1],Dt=3+(St&3),St>>>=2,At-=2}else if(Nt===17){for(me=Jt+3;At<me;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}St>>>=Jt,At-=Jt,Ft=0,Dt=3+(St&7),St>>>=3,At-=3}else{for(me=Jt+7;At<me;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}St>>>=Jt,At-=Jt,Ft=0,Dt=11+(St&127),St>>>=7,At-=7}if(ot.have+Dt>ot.nlen+ot.ndist){tt.msg="invalid bit length repeat",ot.mode=BAD;break}for(;Dt--;)ot.lens[ot.have++]=Ft}}if(ot.mode===BAD)break;if(ot.lens[256]===0){tt.msg="invalid code -- missing end-of-block",ot.mode=BAD;break}if(ot.lenbits=9,Qt={bits:ot.lenbits},It=inftrees(LENS,ot.lens,0,ot.nlen,ot.lencode,0,ot.work,Qt),ot.lenbits=Qt.bits,It){tt.msg="invalid literal/lengths set",ot.mode=BAD;break}if(ot.distbits=6,ot.distcode=ot.distdyn,Qt={bits:ot.distbits},It=inftrees(DISTS,ot.lens,ot.nlen,ot.ndist,ot.distcode,0,ot.work,Qt),ot.distbits=Qt.bits,It){tt.msg="invalid distances set",ot.mode=BAD;break}if(ot.mode=LEN_,nt===Z_TREES)break t;case LEN_:ot.mode=LEN;case LEN:if(_t>=6&&Tt>=258){tt.next_out=yt,tt.avail_out=Tt,tt.next_in=mt,tt.avail_in=_t,ot.hold=St,ot.bits=At,inffast(tt,Ot),yt=tt.next_out,gt=tt.output,Tt=tt.avail_out,mt=tt.next_in,ft=tt.input,_t=tt.avail_in,St=ot.hold,At=ot.bits,ot.mode===TYPE&&(ot.back=-1);break}for(ot.back=0;Pt=ot.lencode[St&(1<<ot.lenbits)-1],Jt=Pt>>>24,Kt=Pt>>>16&255,Nt=Pt&65535,!(Jt<=At);){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(Kt&&(Kt&240)===0){for(jt=Jt,kt=Kt,Zt=Nt;Pt=ot.lencode[Zt+((St&(1<<jt+kt)-1)>>jt)],Jt=Pt>>>24,Kt=Pt>>>16&255,Nt=Pt&65535,!(jt+Jt<=At);){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}St>>>=jt,At-=jt,ot.back+=jt}if(St>>>=Jt,At-=Jt,ot.back+=Jt,ot.length=Nt,Kt===0){ot.mode=LIT;break}if(Kt&32){ot.back=-1,ot.mode=TYPE;break}if(Kt&64){tt.msg="invalid literal/length code",ot.mode=BAD;break}ot.extra=Kt&15,ot.mode=LENEXT;case LENEXT:if(ot.extra){for(me=ot.extra;At<me;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.length+=St&(1<<ot.extra)-1,St>>>=ot.extra,At-=ot.extra,ot.back+=ot.extra}ot.was=ot.length,ot.mode=DIST;case DIST:for(;Pt=ot.distcode[St&(1<<ot.distbits)-1],Jt=Pt>>>24,Kt=Pt>>>16&255,Nt=Pt&65535,!(Jt<=At);){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if((Kt&240)===0){for(jt=Jt,kt=Kt,Zt=Nt;Pt=ot.distcode[Zt+((St&(1<<jt+kt)-1)>>jt)],Jt=Pt>>>24,Kt=Pt>>>16&255,Nt=Pt&65535,!(jt+Jt<=At);){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}St>>>=jt,At-=jt,ot.back+=jt}if(St>>>=Jt,At-=Jt,ot.back+=Jt,Kt&64){tt.msg="invalid distance code",ot.mode=BAD;break}ot.offset=Nt,ot.extra=Kt&15,ot.mode=DISTEXT;case DISTEXT:if(ot.extra){for(me=ot.extra;At<me;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}ot.offset+=St&(1<<ot.extra)-1,St>>>=ot.extra,At-=ot.extra,ot.back+=ot.extra}if(ot.offset>ot.dmax){tt.msg="invalid distance too far back",ot.mode=BAD;break}ot.mode=MATCH;case MATCH:if(Tt===0)break t;if(Dt=Ot-Tt,ot.offset>Dt){if(Dt=ot.offset-Dt,Dt>ot.whave&&ot.sane){tt.msg="invalid distance too far back",ot.mode=BAD;break}Dt>ot.wnext?(Dt-=ot.wnext,Ut=ot.wsize-Dt):Ut=ot.wnext-Dt,Dt>ot.length&&(Dt=ot.length),Xt=ot.window}else Xt=gt,Ut=yt-ot.offset,Dt=ot.length;Dt>Tt&&(Dt=Tt),Tt-=Dt,ot.length-=Dt;do gt[yt++]=Xt[Ut++];while(--Dt);ot.length===0&&(ot.mode=LEN);break;case LIT:if(Tt===0)break t;gt[yt++]=ot.length,Tt--,ot.mode=LEN;break;case CHECK:if(ot.wrap){for(;At<32;){if(_t===0)break t;_t--,St|=ft[mt++]<<At,At+=8}if(Ot-=Tt,tt.total_out+=Ot,ot.total+=Ot,ot.wrap&4&&Ot&&(tt.adler=ot.check=ot.flags?crc32_1(ot.check,gt,Ot,yt-Ot):adler32_1(ot.check,gt,Ot,yt-Ot)),Ot=Tt,ot.wrap&4&&(ot.flags?St:zswap32(St))!==ot.check){tt.msg="incorrect data check",ot.mode=BAD;break}St=0,At=0}ot.mode=LENGTH;case LENGTH:if(ot.wrap&&ot.flags){for(;At<32;){if(_t===0)break t;_t--,St+=ft[mt++]<<At,At+=8}if(ot.wrap&4&&St!==(ot.total&4294967295)){tt.msg="incorrect length check",ot.mode=BAD;break}St=0,At=0}ot.mode=DONE;case DONE:It=Z_STREAM_END$1;break t;case BAD:It=Z_DATA_ERROR$1;break t;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return tt.next_out=yt,tt.avail_out=Tt,tt.next_in=mt,tt.avail_in=_t,ot.hold=St,ot.bits=At,(ot.wsize||Ot!==tt.avail_out&&ot.mode<BAD&&(ot.mode<CHECK||nt!==Z_FINISH$1))&&updatewindow(tt,tt.output,tt.next_out,Ot-tt.avail_out),Ct-=tt.avail_in,Ot-=tt.avail_out,tt.total_in+=Ct,tt.total_out+=Ot,ot.total+=Ot,ot.wrap&4&&Ot&&(tt.adler=ot.check=ot.flags?crc32_1(ot.check,gt,Ot,tt.next_out-Ot):adler32_1(ot.check,gt,Ot,tt.next_out-Ot)),tt.data_type=ot.bits+(ot.last?64:0)+(ot.mode===TYPE?128:0)+(ot.mode===LEN_||ot.mode===COPY_?256:0),(Ct===0&&Ot===0||nt===Z_FINISH$1)&&It===Z_OK$1&&(It=Z_BUF_ERROR),It},inflateEnd=tt=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;let nt=tt.state;return nt.window&&(nt.window=null),tt.state=null,Z_OK$1},inflateGetHeader=(tt,nt)=>{if(inflateStateCheck(tt))return Z_STREAM_ERROR$1;const ot=tt.state;return(ot.wrap&2)===0?Z_STREAM_ERROR$1:(ot.head=nt,nt.done=!1,Z_OK$1)},inflateSetDictionary=(tt,nt)=>{const ot=nt.length;let ft,gt,mt;return inflateStateCheck(tt)||(ft=tt.state,ft.wrap!==0&&ft.mode!==DICT)?Z_STREAM_ERROR$1:ft.mode===DICT&&(gt=1,gt=adler32_1(gt,nt,ot,0),gt!==ft.check)?Z_DATA_ERROR$1:(mt=updatewindow(tt,nt,ot,ot),mt?(ft.mode=MEM,Z_MEM_ERROR$1):(ft.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(tt){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},tt||{});const nt=this.options;nt.raw&&nt.windowBits>=0&&nt.windowBits<16&&(nt.windowBits=-nt.windowBits,nt.windowBits===0&&(nt.windowBits=-15)),nt.windowBits>=0&&nt.windowBits<16&&!(tt&&tt.windowBits)&&(nt.windowBits+=32),nt.windowBits>15&&nt.windowBits<48&&(nt.windowBits&15)===0&&(nt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let ot=inflate_1$2.inflateInit2(this.strm,nt.windowBits);if(ot!==Z_OK)throw new Error(messages[ot]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),nt.dictionary&&(typeof nt.dictionary=="string"?nt.dictionary=strings.string2buf(nt.dictionary):toString.call(nt.dictionary)==="[object ArrayBuffer]"&&(nt.dictionary=new Uint8Array(nt.dictionary)),nt.raw&&(ot=inflate_1$2.inflateSetDictionary(this.strm,nt.dictionary),ot!==Z_OK)))throw new Error(messages[ot])}Inflate$1.prototype.push=function(tt,nt){const ot=this.strm,ft=this.options.chunkSize,gt=this.options.dictionary;let mt,yt,_t;if(this.ended)return!1;for(nt===~~nt?yt=nt:yt=nt===!0?Z_FINISH:Z_NO_FLUSH,toString.call(tt)==="[object ArrayBuffer]"?ot.input=new Uint8Array(tt):ot.input=tt,ot.next_in=0,ot.avail_in=ot.input.length;;){for(ot.avail_out===0&&(ot.output=new Uint8Array(ft),ot.next_out=0,ot.avail_out=ft),mt=inflate_1$2.inflate(ot,yt),mt===Z_NEED_DICT&&gt&&(mt=inflate_1$2.inflateSetDictionary(ot,gt),mt===Z_OK?mt=inflate_1$2.inflate(ot,yt):mt===Z_DATA_ERROR&&(mt=Z_NEED_DICT));ot.avail_in>0&&mt===Z_STREAM_END&&ot.state.wrap>0&&tt[ot.next_in]!==0;)inflate_1$2.inflateReset(ot),mt=inflate_1$2.inflate(ot,yt);switch(mt){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(mt),this.ended=!0,!1}if(_t=ot.avail_out,ot.next_out&&(ot.avail_out===0||mt===Z_STREAM_END))if(this.options.to==="string"){let Tt=strings.utf8border(ot.output,ot.next_out),St=ot.next_out-Tt,At=strings.buf2string(ot.output,Tt);ot.next_out=St,ot.avail_out=ft-St,St&&ot.output.set(ot.output.subarray(Tt,Tt+St),0),this.onData(At)}else this.onData(ot.output.length===ot.next_out?ot.output:ot.output.subarray(0,ot.next_out));if(!(mt===Z_OK&&_t===0)){if(mt===Z_STREAM_END)return mt=inflate_1$2.inflateEnd(this.strm),this.onEnd(mt),this.ended=!0,!0;if(ot.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(tt){this.chunks.push(tt)};Inflate$1.prototype.onEnd=function(tt){tt===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=tt,this.msg=this.strm.msg};function inflate$1(tt,nt){const ot=new Inflate$1(nt);if(ot.push(tt),ot.err)throw ot.msg||messages[ot.err];return ot.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate,inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let tt=0;tt<256;tt++){let nt=tt;for(let ot=0;ot<8;ot++)nt&1?nt=3988292384^nt>>>1:nt=nt>>>1;crcTable[tt]=nt}const initialCrc=4294967295;function updateCrc(tt,nt,ot){let ft=tt;for(let gt=0;gt<ot;gt++)ft=crcTable[(ft^nt[gt])&255]^ft>>>8;return ft}function crc(tt,nt){return(updateCrc(initialCrc,tt,nt)^initialCrc)>>>0}function checkCrc(tt,nt,ot){const ft=tt.readUint32(),gt=crc(new Uint8Array(tt.buffer,tt.byteOffset+tt.offset-nt-4,nt),nt);if(gt!==ft)throw new Error(`CRC mismatch for chunk ${ot}. Expected ${ft}, found ${gt}`)}function unfilterNone(tt,nt,ot){for(let ft=0;ft<ot;ft++)nt[ft]=tt[ft]}function unfilterSub(tt,nt,ot,ft){let gt=0;for(;gt<ft;gt++)nt[gt]=tt[gt];for(;gt<ot;gt++)nt[gt]=tt[gt]+nt[gt-ft]&255}function unfilterUp(tt,nt,ot,ft){let gt=0;if(ot.length===0)for(;gt<ft;gt++)nt[gt]=tt[gt];else for(;gt<ft;gt++)nt[gt]=tt[gt]+ot[gt]&255}function unfilterAverage(tt,nt,ot,ft,gt){let mt=0;if(ot.length===0){for(;mt<gt;mt++)nt[mt]=tt[mt];for(;mt<ft;mt++)nt[mt]=tt[mt]+(nt[mt-gt]>>1)&255}else{for(;mt<gt;mt++)nt[mt]=tt[mt]+(ot[mt]>>1)&255;for(;mt<ft;mt++)nt[mt]=tt[mt]+(nt[mt-gt]+ot[mt]>>1)&255}}function unfilterPaeth(tt,nt,ot,ft,gt){let mt=0;if(ot.length===0){for(;mt<gt;mt++)nt[mt]=tt[mt];for(;mt<ft;mt++)nt[mt]=tt[mt]+nt[mt-gt]&255}else{for(;mt<gt;mt++)nt[mt]=tt[mt]+ot[mt]&255;for(;mt<ft;mt++)nt[mt]=tt[mt]+paethPredictor(nt[mt-gt],ot[mt],ot[mt-gt])&255}}function paethPredictor(tt,nt,ot){const ft=tt+nt-ot,gt=Math.abs(ft-tt),mt=Math.abs(ft-nt),yt=Math.abs(ft-ot);return gt<=mt&&gt<=yt?tt:mt<=yt?nt:ot}function applyUnfilter(tt,nt,ot,ft,gt,mt){switch(tt){case 0:unfilterNone(nt,ot,gt);break;case 1:unfilterSub(nt,ot,gt,mt);break;case 2:unfilterUp(nt,ot,ft,gt);break;case 3:unfilterAverage(nt,ot,ft,gt,mt);break;case 4:unfilterPaeth(nt,ot,ft,gt,mt);break;default:throw new Error(`Unsupported filter: ${tt}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(tt){const{data:nt,width:ot,height:ft,channels:gt,depth:mt}=tt,yt=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],_t=Math.ceil(mt/8)*gt,Tt=new Uint8Array(ft*ot*_t);let St=0;for(let At=0;At<7;At++){const Ct=yt[At],Ot=Math.ceil((ot-Ct.x)/Ct.xStep),Dt=Math.ceil((ft-Ct.y)/Ct.yStep);if(Ot<=0||Dt<=0)continue;const Ut=Ot*_t,Xt=new Uint8Array(Ut);for(let Pt=0;Pt<Dt;Pt++){const Jt=nt[St++],Kt=nt.subarray(St,St+Ut);St+=Ut;const Nt=new Uint8Array(Ut);applyUnfilter(Jt,Kt,Nt,Xt,Ut,_t),Xt.set(Nt);for(let jt=0;jt<Ot;jt++){const kt=Ct.x+jt*Ct.xStep,Zt=Ct.y+Pt*Ct.yStep;if(!(kt>=ot||Zt>=ft))for(let Ft=0;Ft<_t;Ft++)Tt[(Zt*ot+kt)*_t+Ft]=Nt[jt*_t+Ft]}}}if(mt===16){const At=new Uint16Array(Tt.buffer);if(osIsLittleEndian$1)for(let Ct=0;Ct<At.length;Ct++)At[Ct]=swap16$1(At[Ct]);return At}else return Tt}function swap16$1(tt){return(tt&255)<<8|tt>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty=new Uint8Array(0);function decodeInterlaceNull(tt){const{data:nt,width:ot,height:ft,channels:gt,depth:mt}=tt,yt=Math.ceil(mt/8)*gt,_t=Math.ceil(mt/8*gt*ot),Tt=new Uint8Array(ft*_t);let St=empty,At=0,Ct,Ot;for(let Dt=0;Dt<ft;Dt++){switch(Ct=nt.subarray(At+1,At+1+_t),Ot=Tt.subarray(Dt*_t,(Dt+1)*_t),nt[At]){case 0:unfilterNone(Ct,Ot,_t);break;case 1:unfilterSub(Ct,Ot,_t,yt);break;case 2:unfilterUp(Ct,Ot,St,_t);break;case 3:unfilterAverage(Ct,Ot,St,_t,yt);break;case 4:unfilterPaeth(Ct,Ot,St,_t,yt);break;default:throw new Error(`Unsupported filter: ${nt[At]}`)}St=Ot,At+=_t+1}if(mt===16){const Dt=new Uint16Array(Tt.buffer);if(osIsLittleEndian)for(let Ut=0;Ut<Dt.length;Ut++)Dt[Ut]=swap16(Dt[Ut]);return Dt}else return Tt}function swap16(tt){return(tt&255)<<8|tt>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(tt){if(!hasPngSignature(tt.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(tt){if(tt.length<pngSignature.length)return!1;for(let nt=0;nt<pngSignature.length;nt++)if(tt[nt]!==pngSignature[nt])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(tt){if(validateLatin1(tt),tt.length===0||tt.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(tt){if(!latin1Regex.test(tt))throw new Error("invalid latin1 text")}function decodetEXt(tt,nt,ot){const ft=readKeyword(nt);tt[ft]=readLatin1(nt,ot-ft.length-1)}function readKeyword(tt){for(tt.mark();tt.readByte()!==NULL;);const nt=tt.offset;tt.reset();const ot=latin1Decoder.decode(tt.readBytes(nt-tt.offset-1));return tt.skip(1),validateKeyword(ot),ot}function readLatin1(tt,nt){return latin1Decoder.decode(tt.readBytes(nt))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(nt,ot={}){super(nt);const{checkCrc:ft=!1}=ot;this._checkCrc=ft,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const nt=this.readUint32(),ot=this.readChars(4);this.decodeChunk(nt,ot)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const nt=this.readUint32(),ot=this.readChars(4);this.decodeApngChunk(nt,ot)}return this.decodeApngImage(),this._apng}decodeChunk(nt,ot){const ft=this.offset;switch(ot){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(nt);break;case"IDAT":this.decodeIDAT(nt);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(nt);break;case"iCCP":this.decodeiCCP(nt);break;case textChunkName:decodetEXt(this._png.text,this,nt);break;case"pHYs":this.decodepHYs();break;default:this.skip(nt);break}if(this.offset-ft!==nt)throw new Error(`Length mismatch while decoding chunk ${ot}`);this._checkCrc?checkCrc(this,nt+4,ot):this.skip(4)}decodeApngChunk(nt,ot){const ft=this.offset;switch(ot!=="fdAT"&&ot!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),ot){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(nt);break;default:this.decodeChunk(nt,ot),this.offset=ft+nt;break}if(this.offset-ft!==nt)throw new Error(`Length mismatch while decoding chunk ${ot}`);this._checkCrc?checkCrc(this,nt+4,ot):this.skip(4)}decodeIHDR(){const nt=this._png;nt.width=this.readUint32(),nt.height=this.readUint32(),nt.depth=checkBitDepth(this.readUint8());const ot=this.readUint8();this._colorType=ot;let ft;switch(ot){case ColorType.GREYSCALE:ft=1;break;case ColorType.TRUECOLOUR:ft=3;break;case ColorType.INDEXED_COLOUR:ft=1;break;case ColorType.GREYSCALE_ALPHA:ft=2;break;case ColorType.TRUECOLOUR_ALPHA:ft=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${ot}`)}if(this._png.channels=ft,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const nt={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(nt)}decodePLTE(nt){if(nt%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${nt}`);const ot=nt/3;this._hasPalette=!0;const ft=[];this._palette=ft;for(let gt=0;gt<ot;gt++)ft.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(nt){this._writingDataChunks=!0;const ot=nt,ft=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,ft,ot)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(nt)}decodeFDAT(nt){this._writingDataChunks=!0;let ot=nt,ft=this.offset+this.byteOffset;if(ft+=4,ot-=4,this._inflator.push(new Uint8Array(this.buffer,ft,ot)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(nt)}decodetRNS(nt){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(nt%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${nt}`);if(nt/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${nt/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(nt/2);for(let ot=0;ot<nt/2;ot++)this._transparency[ot]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(nt>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${nt} vs ${this._palette.length})`);let ot=0;for(;ot<nt;ot++){const ft=this.readByte();this._palette[ot].push(ft)}for(;ot<this._palette.length;ot++)this._palette[ot].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(nt){const ot=readKeyword(this),ft=this.readUint8();if(ft!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${ft}`);const gt=this.readBytes(nt-ot.length-2);this._png.iccEmbeddedProfile={name:ot,profile:inflate_1(gt)}}decodepHYs(){const nt=this.readUint32(),ot=this.readUint32(),ft=this.readByte();this._png.resolution={x:nt,y:ot,unit:ft}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let nt=0;nt<this._numberOfFrames;nt++){const ot={sequenceNumber:this._frames[nt].sequenceNumber,delayNumber:this._frames[nt].delayNumber,delayDenominator:this._frames[nt].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},ft=this._frames.at(nt);if(ft){if(ft.data=decodeInterlaceNull({data:ft.data,width:ft.width,height:ft.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),nt===0||ft.xOffset===0&&ft.yOffset===0&&ft.width===this._png.width&&ft.height===this._png.height)ot.data=ft.data;else{const gt=this._apng.frames.at(nt-1);this.disposeFrame(ft,gt,ot),this.addFrameDataToCanvas(ot,ft)}this._apng.frames.push(ot)}}return this._apng}disposeFrame(nt,ot,ft){switch(nt.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let gt=0;gt<this._png.height;gt++)for(let mt=0;mt<this._png.width;mt++){const yt=(gt*nt.width+mt)*this._png.channels;for(let _t=0;_t<this._png.channels;_t++)ft.data[yt+_t]=0}break;case DisposeOpType.PREVIOUS:ft.data.set(ot.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(nt,ot){const ft=1<<this._png.depth,gt=(mt,yt)=>{const _t=((mt+ot.yOffset)*this._png.width+ot.xOffset+yt)*this._png.channels,Tt=(mt*ot.width+yt)*this._png.channels;return{index:_t,frameIndex:Tt}};switch(ot.blendOp){case BlendOpType.SOURCE:for(let mt=0;mt<ot.height;mt++)for(let yt=0;yt<ot.width;yt++){const{index:_t,frameIndex:Tt}=gt(mt,yt);for(let St=0;St<this._png.channels;St++)nt.data[_t+St]=ot.data[Tt+St]}break;case BlendOpType.OVER:for(let mt=0;mt<ot.height;mt++)for(let yt=0;yt<ot.width;yt++){const{index:_t,frameIndex:Tt}=gt(mt,yt);for(let St=0;St<this._png.channels;St++){const At=ot.data[Tt+this._png.channels-1]/ft,Ct=St%(this._png.channels-1)===0?1:ot.data[Tt+St],Ot=Math.floor(At*Ct+(1-At)*nt.data[_t+St]);nt.data[_t+St]+=Ot}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const nt=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:nt,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:nt,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const nt=this._inflator.result,ot=this._frames.at(-1);ot?ot.data=nt:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:nt}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(tt){if(tt!==1&&tt!==2&&tt!==4&&tt!==8&&tt!==16)throw new Error(`invalid bit depth: ${tt}`);return tt}function decodePng$1(tt,nt){return new PngDecoder(tt,nt).decode()}Uint8Array.from([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]);const base64codes=Uint8Array.from([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),base64codes1=new Uint32Array(4096);for(let tt=0;tt<64;tt++)for(let nt=0;nt<64;nt++){const ot=tt<<2|(nt&48)>>4|(nt&15)<<8;base64codes1[ot]=base64codes[tt]|base64codes[nt]<<8}const base64codes2=new Uint32Array(4096);for(let tt=0;tt<64;tt++)for(let nt=0;nt<64;nt++){const ot=tt<<6|nt;base64codes2[ot]=base64codes[tt]<<16|base64codes[nt]<<24}var imageType$1={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,(function(module){const toBytes=tt=>[...tt].map(nt=>nt.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(tt,nt=0){let ot=tt[nt],ft=1,gt=0;for(;++gt<8;)ft*=256,ot+=tt[nt+gt]*ft;return ot}const fileType=tt=>{if(!(tt instanceof Uint8Array||tt instanceof ArrayBuffer||Buffer.isBuffer(tt)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof tt}\``);const nt=tt instanceof Uint8Array?tt:new Uint8Array(tt);if(!(nt&&nt.length>1))return null;const ot=(gt,mt)=>{mt=Object.assign({offset:0},mt);for(let yt=0;yt<gt.length;yt++)if(mt.mask){if(gt[yt]!==(mt.mask[yt]&nt[yt+mt.offset]))return!1}else if(gt[yt]!==nt[yt+mt.offset])return!1;return!0},ft=(gt,mt)=>ot(toBytes(gt),mt);if(ot([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(ot([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(ot([71,73,70]))return{ext:"gif",mime:"image/gif"};if(ot([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(ot([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((ot([73,73,42,0])||ot([77,77,0,42]))&&ot([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(ot([73,73,42,0])||ot([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(ot([66,77]))return{ext:"bmp",mime:"image/bmp"};if(ot([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(ot([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(ot([80,75,3,4])){if(ot([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(ot(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(ft("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(ft("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(ft("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const gt=(Tt,St=0)=>Tt.findIndex((At,Ct,Ot)=>Ct>=St&&Ot[Ct]===80&&Ot[Ct+1]===75&&Ot[Ct+2]===3&&Ot[Ct+3]===4);let mt=0,yt=!1,_t=null;do{const Tt=mt+30;if(yt||(yt=ot(oxmlContentTypes,{offset:Tt})||ot(oxmlRels,{offset:Tt})),_t||(ft("word/",{offset:Tt})?_t={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:ft("ppt/",{offset:Tt})?_t={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:ft("xl/",{offset:Tt})&&(_t={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),yt&&_t)return _t;mt=gt(nt,Tt)}while(mt>=0);if(_t)return _t}if(ot([80,75])&&(nt[2]===3||nt[2]===5||nt[2]===7)&&(nt[3]===4||nt[3]===6||nt[3]===8))return{ext:"zip",mime:"application/zip"};if(ot([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(ot([82,97,114,33,26,7])&&(nt[6]===0||nt[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(ot([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(ot([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(ot([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(ot([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(ot([51,103,112,53])||ot([0,0,0])&&ot([102,116,121,112],{offset:4})&&(ot([109,112,52,49],{offset:8})||ot([109,112,52,50],{offset:8})||ot([105,115,111,109],{offset:8})||ot([105,115,111,50],{offset:8})||ot([109,109,112,52],{offset:8})||ot([77,52,86],{offset:8})||ot([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(ot([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(ot([26,69,223,163])){const gt=nt.subarray(4,4100),mt=gt.findIndex((yt,_t,Tt)=>Tt[_t]===66&&Tt[_t+1]===130);if(mt!==-1){const yt=mt+3,_t=Tt=>[...Tt].every((St,At)=>gt[yt+At]===St.charCodeAt(0));if(_t("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(_t("webm"))return{ext:"webm",mime:"video/webm"}}}if(ot([0,0,0,20,102,116,121,112,113,116,32,32])||ot([102,114,101,101],{offset:4})||ot([102,116,121,112,113,116,32,32],{offset:4})||ot([109,100,97,116],{offset:4})||ot([109,111,111,118],{offset:4})||ot([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(ot([82,73,70,70])){if(ot([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(ot([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(ot([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(ot([48,38,178,117,142,102,207,17,166,217])){let gt=30;do{const mt=readUInt64LE(nt,gt+16);if(ot([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:gt})){if(ot([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:gt+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(ot([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:gt+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}gt+=mt}while(gt+24<=nt.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(ot([0,0,1,186])||ot([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(ot([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let gt=0;gt<2&&gt<nt.length-16;gt++){if(ot([73,68,51],{offset:gt})||ot([255,226],{offset:gt,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(ot([255,228],{offset:gt,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(ot([255,248],{offset:gt,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(ot([255,240],{offset:gt,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(ot([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(ot([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(ot([79,103,103,83]))return ot([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:ot([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:ot([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:ot([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:ot([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(ot([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(ot([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(ot([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(ot([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(ot([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(ot([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((nt[0]===67||nt[0]===70)&&ot([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(ot([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(ot([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(ot([119,79,70,70])&&(ot([0,1,0,0],{offset:4})||ot([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(ot([119,79,70,50])&&(ot([0,1,0,0],{offset:4})||ot([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(ot([76,80],{offset:34})&&(ot([0,0,1],{offset:8})||ot([1,0,2],{offset:8})||ot([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(ot([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(ot([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(ot([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(ot([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(ot([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(ot([37,33]))return{ext:"ps",mime:"application/postscript"};if(ot([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(ot([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(ot([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(ot([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(ot([77,83,67,70])||ot([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(ot([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(ot([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(ot([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(ot([31,160])||ot([31,157]))return{ext:"Z",mime:"application/x-compress"};if(ot([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(ot([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(ot([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(ot([71],{offset:4})&&(ot([71],{offset:192})||ot([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(ot([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(ot([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(ot([0,0,0,12,106,80,32,32,13,10,135,10])){if(ot([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(ot([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(ot([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(ot([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(ot([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(ft("<?xml "))return{ext:"xml",mime:"application/xml"};if(ot([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(ot([102,116,121,112],{offset:4})){if(ot([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(ot([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(ot([104,101,105,99],{offset:8})||ot([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(ot([104,101,118,99],{offset:8})||ot([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return ot([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:ot([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:ot([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:ot([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:ot([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:ot([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:ot([212,195,178,161])||ot([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const tt=new stream.PassThrough,nt=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{tt.fileType=fileType(nt)}catch(ot){reject(ot)}readableStream.unshift(nt),stream.pipeline?resolve(stream.pipeline(readableStream,tt,()=>{})):resolve(readableStream.pipe(tt))})})})(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType$1.exports;hasRequiredImageType=1;const tt=requireFileType(),nt=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),ot=ft=>{const gt=tt(ft);return nt.has(gt&&gt.ext)?gt:null};return imageType$1.exports=ot,imageType$1.exports.default=ot,Object.defineProperty(ot,"minimumBytes",{value:tt.minimumBytes}),imageType$1.exports}var imageTypeExports=requireImageType();const imageType=getDefaultExportFromCjs(imageTypeExports),tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(const tt in tagsById$2)tagsByName$2[tagsById$2[tt]]=Number(tt);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(const tt in tagsById$1)tagsByName$1[tagsById$1[tt]]=Number(tt);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(const tt in tagsById)tagsByName[tagsById[tt]]=Number(tt);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"}));function guessStripByteCounts(tt){if(tt.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const nt=tt.rowsPerStrip*tt.width*tt.samplesPerPixel*(tt.bitsPerSample/8);return new Array(tt.stripOffsets.length).fill(nt)}function applyHorizontalDifferencing8Bit(tt,nt,ot){let ft=0;for(;ft<tt.length;){for(let gt=ot;gt<nt*ot;gt+=ot)for(let mt=0;mt<ot;mt++)tt[ft+gt+mt]=tt[ft+gt+mt]+tt[ft+gt-(ot-mt)]&255;ft+=nt*ot}}function applyHorizontalDifferencing16Bit(tt,nt,ot){let ft=0;for(;ft<tt.length;){for(let gt=ot;gt<nt*ot;gt+=ot)for(let mt=0;mt<ot;mt++)tt[ft+gt+mt]=tt[ft+gt+mt]+tt[ft+gt-(ot-mt)]&65535;ft+=nt*ot}}const tags={standard,exif,gps};class IFD{kind;data;fields;exif;gps;_hasMap;_map;constructor(nt){if(!nt)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=nt,this._hasMap=!1,this._map={}}get(nt){if(typeof nt=="number")return this.fields.get(nt);if(typeof nt=="string")return this.fields.get(tags[this.kind].tagsByName[nt]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const nt=tags[this.kind].tagsById;for(const ot of this.fields.keys())nt[ot]&&(this._map[nt[ot]]=this.fields.get(ot));this._hasMap=!0}return this._map}}const types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(tt,nt){const ot=types.get(tt);if(!ot)throw new Error(`type not found: ${tt}`);return ot[0]*nt}function readData(tt,nt,ot){const ft=types.get(nt);if(!ft)throw new Error(`type not found: ${nt}`);return ft[1](tt,ot)}function readByte(tt,nt){if(nt===1)return tt.readUint8();const ot=new Uint8Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readUint8();return ot}function readASCII(tt,nt){const ot=[];let ft="";for(let gt=0;gt<nt;gt++){const mt=String.fromCharCode(tt.readUint8());mt==="\0"?(ot.push(ft),ft=""):ft+=mt}return ot.length===1?ot[0]:ot}function readShort(tt,nt){if(nt===1)return tt.readUint16();const ot=new Uint16Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readUint16();return ot}function readLong(tt,nt){if(nt===1)return tt.readUint32();const ot=new Uint32Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readUint32();return ot}function readRational(tt,nt){if(nt===1)return tt.readUint32()/tt.readUint32();const ot=new Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readUint32()/tt.readUint32();return ot}function readSByte(tt,nt){if(nt===1)return tt.readInt8();const ot=new Int8Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readInt8();return ot}function readSShort(tt,nt){if(nt===1)return tt.readInt16();const ot=new Int16Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readInt16();return ot}function readSLong(tt,nt){if(nt===1)return tt.readInt32();const ot=new Int32Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readInt32();return ot}function readSRational(tt,nt){if(nt===1)return tt.readInt32()/tt.readInt32();const ot=new Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readInt32()/tt.readInt32();return ot}function readFloat(tt,nt){if(nt===1)return tt.readFloat32();const ot=new Float32Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readFloat32();return ot}function readDouble(tt,nt){if(nt===1)return tt.readFloat64();const ot=new Float64Array(nt);for(let ft=0;ft<nt;ft++)ot[ft]=tt.readFloat64();return ot}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let nt=0;nt<256;nt++)stringTable.push([nt]);const tt=[];for(let nt=256;nt<4096;nt++)stringTable.push(tt)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{stripArray;nextData=0;nextBits=0;bytePointer=0;tableLength=TABLE_START;currentBitLength=MIN_BIT_LENGTH;outData;constructor(nt){this.stripArray=new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength),this.outData=new IOBuffer(nt.byteLength),this.initializeTable()}decode(){let nt=0,ot=0;for(;(nt=this.getNextCode())!==EOI_CODE;)if(nt===CLEAR_CODE){if(this.initializeTable(),nt=this.getNextCode(),nt===EOI_CODE)break;this.writeString(this.stringFromCode(nt)),ot=nt}else if(this.isInTable(nt))this.writeString(this.stringFromCode(nt)),this.addStringToTable(this.stringFromCode(ot).concat(this.stringFromCode(nt)[0])),ot=nt;else{const gt=this.stringFromCode(ot).concat(this.stringFromCode(ot)[0]);this.writeString(gt),this.addStringToTable(gt),ot=nt}const ft=this.outData.toArray();return new DataView(ft.buffer,ft.byteOffset,ft.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(nt){this.outData.writeBytes(nt)}stringFromCode(nt){return stringTable[nt]}isInTable(nt){return nt<this.tableLength}addStringToTable(nt){if(stringTable[this.tableLength++]=nt,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const nt=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:nt}}function decompressLzw(tt){return new LzwDecoder(tt).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){const nt=new Date,ot=dateTimeRegex.exec(this.dateTime);if(ot===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return nt.setFullYear(Number(ot[1]),Number(ot[2])-1,Number(ot[3])),nt.setHours(Number(ot[4]),Number(ot[5]),Number(ot[6])),nt}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const nt=this.get("BitsPerSample");return nt&&typeof nt!="number"?nt[0]:nt}get alpha(){const nt=this.extraSamples;return nt?nt[0]!==0:!1}get associatedAlpha(){const nt=this.extraSamples;return nt?nt[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||2**this.bitsPerSample-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return alwaysArray(this.get("SampleFormat")||1)[0]}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const nt=2**this.bitsPerSample,ot=this.get("ColorMap");if(!ot)return;if(ot.length!==3*nt)throw new Error(`ColorMap size must be ${nt}`);const ft=[];for(let gt=0;gt<nt;gt++)ft.push([ot[gt],ot[gt+nt],ot[gt+2*nt]]);return ft}get tileWidth(){return this.get("TileWidth")}get tileHeight(){return this.get("TileLength")}get tileOffsets(){return alwaysArray(this.get("TileOffsets"))}get tileByteCounts(){return alwaysArray(this.get("TileByteCounts"))}get tiled(){return this.tileWidth!==void 0&&this.tileHeight!==void 0&&this.tileOffsets!==void 0&&this.tileByteCounts!==void 0}}function alwaysArray(tt){return typeof tt=="number"?[tt]:tt}function decompressZlib(tt){const nt=new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength),ot=inflate_1(nt);return new DataView(ot.buffer,ot.byteOffset,ot.byteLength)}const defaultOptions={ignoreImageData:!1};class TIFFDecoder extends IOBuffer{_nextIFD;constructor(nt){super(nt),this._nextIFD=0}get isMultiPage(){let nt=0;for(this.decodeHeader();this._nextIFD;)if(nt++,this.decodeIFD({ignoreImageData:!0},!0),nt===2)return!0;if(nt===1)return!1;throw unsupported("ifdCount",nt)}get pageCount(){let nt=0;for(this.decodeHeader();this._nextIFD;)nt++,this.decodeIFD({ignoreImageData:!0},!0);if(nt>0)return nt;throw unsupported("ifdCount",nt)}decode(nt={}){const{pages:ot}=nt;checkPages(ot);const ft=ot?Math.max(...ot):1/0;nt={...defaultOptions,...nt};const gt=[];this.decodeHeader();let mt=0;for(;this._nextIFD;){if(ot){if(ot.includes(mt)?gt.push(this.decodeIFD(nt,!0)):this.decodeIFD({ignoreImageData:!0},!0),mt===ft)break}else gt.push(this.decodeIFD(nt,!0));mt++}if(mt<ft&&ft!==1/0)throw new RangeError(`Index ${ft} is out of bounds. The stack only contains ${mt} images.`);return gt}decodeHeader(){const nt=this.readUint16();if(nt===18761)this.setLittleEndian();else if(nt===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${nt.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(nt,ot){this.seek(this._nextIFD);let ft;if(ot)ft=new TiffIfd;else{if(!nt.kind)throw new Error("kind is missing");ft=new IFD(nt.kind)}const gt=this.readUint16();for(let mt=0;mt<gt;mt++)this.decodeIFDEntry(ft);if(!nt.ignoreImageData){if(!(ft instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(ft)}return this._nextIFD=this.readUint32(),ft}decodeIFDEntry(nt){const ot=this.offset,ft=this.readUint16(),gt=this.readUint16(),mt=this.readUint32();if(gt<1||gt>12){this.skip(4);return}getByteLength(gt,mt)>4&&this.seek(this.readUint32());const _t=readData(this,gt,mt);if(nt.fields.set(ft,_t),ft===34665||ft===34853){const Tt=this.offset;let St="exif";ft===34665?St="exif":ft===34853&&(St="gps"),this._nextIFD=_t,nt[St]=this.decodeIFD({kind:St,ignoreImageData:!0},!1),this.offset=Tt}this.seek(ot),this.skip(12)}decodeImageData(nt){const ot=nt.orientation;if(ot&&ot!==1)throw unsupported("orientation",ot);switch(nt.type){case 0:case 1:case 2:case 3:nt.tiled?this.readTileData(nt):this.readStripData(nt);break;default:throw unsupported("image type",nt.type)}if(this.applyPredictor(nt),this.convertAlpha(nt),nt.bitsPerSample===1&&this.split1BitData(nt),nt.type===0){const gt=2**nt.bitsPerSample-1;for(let mt=0;mt<nt.data.length;mt++)nt.data[mt]=gt-nt.data[mt]}}split1BitData(nt){const{imageWidth:ot,imageLength:ft,samplesPerPixel:gt}=nt,mt=new Uint8Array(ft*ot*gt),yt=Math.ceil(ot*gt/8);let _t=0;for(let Tt=0;Tt<ft;Tt++){const St=Tt*yt;for(let At=0;At<ot*gt;At++){const Ct=St+Math.floor(At/8),Ot=7-At%8,Dt=nt.data[Ct]>>Ot&1;mt[_t++]=Dt}}nt.data=mt}static uncompress(nt,ot=1){switch(ot){case 1:return nt;case 5:return decompressLzw(nt);case 8:case 32946:return decompressZlib(nt);case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",ot)}}createSampleReader(nt,ot,ft){if(ot===8||ot===1)return(gt,mt)=>gt.getUint8(mt);if(ot===16)return(gt,mt)=>gt.getUint16(2*mt,ft);if(ot===32&&nt===3)return(gt,mt)=>gt.getFloat32(4*mt,ft);if(ot===64&&nt===3)return(gt,mt)=>gt.getFloat64(8*mt,ft);throw unsupported("bitDepth",ot)}readStripData(nt){const ot=nt.width,ft=nt.height,gt=nt.bitsPerSample!==1?ot*nt.samplesPerPixel*ft:Math.ceil(ot*nt.samplesPerPixel/8)*ft,mt=nt.stripOffsets,yt=nt.stripByteCounts||guessStripByteCounts(nt),_t=this.isLittleEndian(),Tt=nt.bitsPerSample!==1?ot*nt.samplesPerPixel*nt.rowsPerStrip:Math.ceil(ot*nt.samplesPerPixel/8)*nt.rowsPerStrip,St=this.createSampleReader(nt.sampleFormat,nt.bitsPerSample,_t),At=getDataArray(gt,nt.bitsPerSample,nt.sampleFormat);let Ct=0;for(let Ot=0;Ot<mt.length;Ot++){const Dt=new DataView(this.buffer,this.byteOffset+mt[Ot],yt[Ot]),Ut=TIFFDecoder.uncompress(Dt,nt.compression),Xt=Math.min(Tt,gt-Ct);for(let Pt=0;Pt<Xt;++Pt){const Jt=St(Ut,Pt);At[Ct+Pt]=Jt}Ct+=Xt}nt.data=At}readTileData(nt){if(!nt.tileWidth||!nt.tileHeight)return;const ot=nt.width,ft=nt.height,gt=nt.bitsPerSample!==1?ot*ft*nt.samplesPerPixel:Math.ceil(ot*nt.samplesPerPixel/8)*ft,mt=nt.tileWidth,yt=nt.tileHeight,_t=Math.ceil(ot/mt),Tt=Math.ceil(ft/yt),St=nt.tileOffsets,At=nt.tileByteCounts,Ct=this.isLittleEndian(),Ot=this.createSampleReader(nt.sampleFormat,nt.bitsPerSample,Ct),Dt=getDataArray(gt,nt.bitsPerSample,nt.sampleFormat);for(let Ut=0;Ut<_t;++Ut)for(let Xt=0;Xt<Tt;++Xt){const Pt=Xt*_t+Ut,Jt=new DataView(this.buffer,this.byteOffset+St[Pt],At[Pt]),Kt=TIFFDecoder.uncompress(Jt,nt.compression);if(nt.bitsPerSample===1){const Nt=Math.ceil(ot/8),jt=Math.ceil(mt/8);for(let kt=0;kt<yt&&Xt*yt+kt<ft;kt++){const Zt=Xt*yt+kt,Ft=kt*jt,It=Zt*Nt+Math.floor(Ut*mt/8),Wt=Math.min(jt,Nt-Math.floor(Ut*mt/8));for(let Qt=0;Qt<Wt;Qt++)Dt[It+Qt]=Ot(Kt,Ft+Qt)}}else for(let Nt=0;Nt<yt;Nt++)for(let jt=0;jt<mt;jt++){const kt=Ut*mt+jt,Zt=Xt*yt+Nt;if(kt>=ot||Zt>=ft)continue;const Ft=Nt*mt+jt,It=Ot(Kt,Ft),Wt=(Zt*ot+kt)*nt.samplesPerPixel;Dt[Wt]=It}}nt.data=Dt}applyPredictor(nt){const ot=nt.bitsPerSample;switch(nt.predictor){case 1:break;case 2:{if(ot===8)applyHorizontalDifferencing8Bit(nt.data,nt.width,nt.components);else if(ot===16)applyHorizontalDifferencing16Bit(nt.data,nt.width,nt.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${ot}`);break}default:throw new Error(`invalid predictor: ${nt.predictor}`)}}convertAlpha(nt){if(nt.alpha&&nt.associatedAlpha){const{data:ot,components:ft,maxSampleValue:gt}=nt;for(let mt=0;mt<ot.length;mt+=ft){const yt=ot[mt+ft-1];for(let _t=0;_t<ft-1;_t++)ot[mt+_t]=Math.round(ot[mt+_t]*gt/yt)}}}}function getDataArray(tt,nt,ot){if(nt===8||nt===1)return new Uint8Array(tt);if(nt===16)return new Uint16Array(tt);if(nt===32&&ot===3)return new Float32Array(tt);if(nt===64&&ot===3)return new Float64Array(tt);throw unsupported("bit depth / sample format",`${nt} / ${ot}`)}function unsupported(tt,nt){return new Error(`Unsupported ${tt}: ${nt}`)}function checkPages(tt){if(tt){for(const nt of tt)if(nt<0||!Number.isInteger(nt))throw new RangeError(`Index ${nt} is invalid. Must be a positive integer.`)}}function decodeTIFF(tt,nt){return new TIFFDecoder(tt).decode(nt)}function decode$1(tt){const nt=new IOBuffer(tt),ot={};if(nt.setBigEndian(),nt.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(nt.readUint16()===65505){nt.skip(2);const mt=nt.readBytes(6);mt[0]===69&&mt[1]===120&&mt[2]===105&&mt[3]===102&&mt[4]===0&&mt[5]===0&&(ot.exif=decodeTIFF(new Uint8Array(nt.buffer,nt.byteOffset+12,nt.byteLength-12),{pages:[0],ignoreImageData:!0}))}return ot}function getMetadata(tt){return{tiff:{fields:tt.fields,tags:tt.map},exif:tt.exif}}function decodeJpeg(tt){const nt=jpegJsExports.decode(tt,{useTArray:!0,maxMemoryUsageInMB:Number.POSITIVE_INFINITY,maxResolutionInMP:Number.POSITIVE_INFINITY}),ot=decode$1(tt),ft=ot.exif?.[0]?getMetadata(ot.exif[0]):void 0;return new Image(nt.width,nt.height,{data:nt.data,colorModel:"RGBA",meta:ft})}function decodePng(tt){const nt=decodePng$1(tt);let ot;const ft=nt.depth===16?16:8;if(nt.palette)return loadPalettePng(nt);switch(nt.channels){case 1:ot="GREY";break;case 2:ot="GREYA";break;case 3:ot="RGB";break;case 4:ot="RGBA";break;default:throw new RangeError(`invalid number of channels: ${nt.channels}`)}return new Image(nt.width,nt.height,{colorModel:ot,bitDepth:ft,data:nt.data})}function loadPalettePng(tt){assert(tt.palette);const nt=tt.width*tt.height,ot=new Uint8Array(nt*3),ft=8/tt.depth,gt=tt.depth<8?ft:1,mt=Number.parseInt("1".repeat(tt.depth),2);let yt=0;for(let _t=0;_t<nt;_t++){const Tt=Math.floor(_t/gt);let St=tt.data[Tt];tt.depth<8&&(St=St>>>tt.depth*(ft-1-_t%ft)&mt);const At=tt.palette[St];ot[yt++]=At[0],ot[yt++]=At[1],ot[yt++]=At[2]}return new Image(tt.width,tt.height,{data:ot})}function decodeTiff(tt){const nt=decodeTIFF(tt);return getImageFromIFD(nt[0])}function getImageFromIFD(tt){if(tt.type===3){const nt=new Uint16Array(3*tt.width*tt.height),ot=tt.palette;let ft=0;for(const gt of tt.data){const mt=ot[gt];nt[ft++]=mt[0],nt[ft++]=mt[1],nt[ft++]=mt[2]}return new Image(tt.width,tt.height,{data:nt,colorModel:tt.alpha?"RGBA":"RGB",bitDepth:16,meta:getMetadata(tt)})}else return new Image(tt.width,tt.height,{data:tt.data,bitDepth:tt.bitsPerSample,colorModel:tt.type===2?tt.alpha?"RGBA":"RGB":tt.alpha?"GREYA":"GREY",meta:getMetadata(tt)})}function decode(tt){const nt=new Uint8Array(tt.buffer,tt.byteOffset,tt.byteLength),ot=imageType(nt);return z(ot).with({mime:"image/png"},()=>decodePng(nt)).with({mime:"image/jpeg"},()=>decodeJpeg(nt)).with({mime:"image/tiff"},()=>decodeTiff(nt)).otherwise(()=>{throw new RangeError(`invalid data format: ${ot?.mime}`)})}async function fetchURL(tt){const ot=await(await fetch(tt)).arrayBuffer();return decode(new DataView(ot))}function getBorderPoints(tt,nt={}){return tt.getMask().getBorderPoints(nt)}function getMask(tt,nt={}){const{solidFill:ot=!1}=nt,ft=new Mask(tt.width,tt.height,{origin:tt.origin});for(let gt=0;gt<tt.height;gt++)for(let mt=0;mt<tt.width;mt++)tt.getMapValue(tt.origin.column+mt,tt.origin.row+gt)===tt.id?ft.setBit(mt,gt,1):ft.setBit(mt,gt,0);return ot&&ft.solidFill({out:ft}),ft}function getEllipse(tt){const nt=tt.centroid.column,ot=tt.centroid.row,ft=tt.relativePoints.map(Ft=>Ft.column-nt),gt=tt.relativePoints.map(Ft=>Ft.row-ot),mt=xVariance(ft,{unbiased:!1}),yt=xVariance(gt,{unbiased:!1}),_t=xyCovariance({x:ft,y:gt},{unbiased:!1}),Tt=[[mt,_t],[_t,yt]],St=new EigenvalueDecomposition(Tt),At=St.realEigenvalues,Ct=St.eigenvectorMatrix;assert(At[0]<=At[1]);let Ot=Math.sqrt(At[1]),Dt=Math.sqrt(At[0]);const Ut=Ct.getColumn(1),Xt=Ct.getColumn(0);let Pt={column:nt+Ot*Ut[0],row:ot+Ot*Ut[1]},Jt={column:nt-Ot*Ut[0],row:ot-Ot*Ut[1]},Kt={column:nt+Dt*Xt[0],row:ot+Dt*Xt[1]},Nt={column:nt-Dt*Xt[0],row:ot-Dt*Xt[1]},jt=Math.hypot(Pt.column-Jt.column,Pt.row-Jt.row),kt=Math.hypot(Kt.column-Jt.column,Kt.row-Nt.row),Zt=kt/2*jt/2*Math.PI;if(Zt!==tt.surface){const Ft=Math.sqrt(tt.surface/Zt);Ot*=Ft,Dt*=Ft,Pt={column:nt+Ot*Ut[0],row:ot+Ot*Ut[1]},Jt={column:nt-Ot*Ut[0],row:ot-Ot*Ut[1]},Kt={column:nt+Dt*Xt[0],row:ot+Dt*Xt[1]},Nt={column:nt-Dt*Xt[0],row:ot-Dt*Xt[1]},jt*=Ft,kt*=Ft,Zt*=Ft**2}return{center:{column:nt,row:ot},majorAxis:{points:[Pt,Jt],length:jt,angle:toDegrees(getAngle(Pt,Jt))},minorAxis:{points:[Kt,Nt],length:kt,angle:toDegrees(getAngle(Kt,Nt))},surface:Zt}}class Roi{map;id;origin;width;height;surface;#t;constructor(nt,ot,ft,gt,mt,yt){this.map=nt,this.id=ot,this.origin=mt,this.width=ft,this.height=gt,this.surface=yt,this.#t={}}getMapValue(nt,ot){return this.map.data[this.map.width*ot+nt]}getRatio(){return this.width/this.height}getMask(nt){return getMask(this,nt)}get ped(){return this.perimeter/Math.PI}getBorderPoints(nt){return getBorderPoints(this,nt)}get internalIDs(){return this.#e("internalIDs",()=>{const nt=[this.id],ot=this.map,ft=ot.data;if(this.height>2)for(let mt=0;mt<this.width;mt++){const yt=this.#n(0,mt);if(nt.includes(ft[yt])){const _t=ft[yt+ot.width];!nt.includes(_t)&&!this.boxIDs.includes(_t)&&nt.push(_t)}}const gt=new Array(4);for(let mt=1;mt<this.width-1;mt++)for(let yt=1;yt<this.height-1;yt++){const _t=this.#n(yt,mt);if(nt.includes(ft[_t])){gt[0]=ft[_t-1],gt[1]=ft[_t+1],gt[2]=ft[_t-ot.width],gt[3]=ft[_t+ot.width];for(let Tt=0;Tt<4;Tt++){const St=gt[Tt];!nt.includes(St)&&!this.boxIDs.includes(St)&&nt.push(St)}}}return nt})}get externalBorders(){return this.#e("externalBorders",()=>{const nt=this.borders,ot=[],ft=[],gt=this.internalIDs;for(const mt of nt)if(!gt.includes(mt.connectedID)){const yt={connectedID:mt.connectedID,length:mt.length};ft.push(yt.connectedID),ot.push(yt)}return ot})}get perimeterInfo(){return this.#e("perimeterInfo",()=>{const nt=this.map,ot=nt.data;let ft=0,gt=0,mt=0,yt=0;const _t=new Set(this.externalBorders.map(Tt=>Tt.connectedID));for(let Tt=0;Tt<this.width;Tt++)for(let St=0;St<this.height;St++){const At=this.#n(St,Tt);if(ot[At]===this.id){let Ct=0;switch((Tt===0||_t.has(ot[At-1]))&&Ct++,(Tt===nt.width-1||_t.has(ot[At+1]))&&Ct++,(St===0||_t.has(ot[At-nt.width]))&&Ct++,(St===nt.height-1||_t.has(ot[At+nt.width]))&&Ct++,Ct){case 1:ft++;break;case 2:gt++;break;case 3:mt++;break;case 4:yt++;break}}}return{one:ft,two:gt,three:mt,four:yt}})}get perimeter(){const nt=this.perimeterInfo,ot=2-Math.sqrt(2);return nt.one+nt.two*2+nt.three*3+nt.four*4-ot*(nt.two+nt.three*2+nt.four)}get relativePoints(){return this.#e("relativePoints",()=>Array.from(this.points(!1)))}get absolutePoints(){return this.#e("absolutePoints",()=>Array.from(this.points(!0)))}get boxIDs(){return this.#e("boxIDs",()=>{const nt=new Set,ot=this.map,ft=ot.data;for(const gt of[0,this.height-1])for(let mt=0;mt<this.width;mt++){const yt=this.#n(gt,mt);if(mt-this.origin.column>0&&ft[yt]===this.id&&ft[yt-1]!==this.id){const _t=ft[yt-1];nt.add(_t)}if(ot.width-mt-this.origin.column>1&&ft[yt]===this.id&&ft[yt+1]!==this.id){const _t=ft[yt+1];nt.add(_t)}}for(const gt of[0,this.width-1])for(let mt=0;mt<this.height;mt++){const yt=this.#n(mt,gt);if(mt-this.origin.row>0&&ft[yt]===this.id&&ft[yt-ot.width]!==this.id){const _t=ft[yt-ot.width];nt.add(_t)}if(ot.height-mt-this.origin.row>1&&ft[yt]===this.id&&ft[yt+ot.width]!==this.id){const _t=ft[yt+ot.width];nt.add(_t)}}return Array.from(nt)})}get eqpc(){return 2*Math.sqrt(this.surface/Math.PI)}get ellipse(){return this.#e("ellipse",()=>getEllipse(this))}get holesInfo(){return this.#e("holesInfo",()=>{let nt=0;const ot=this.map.data;for(let ft=1;ft<this.width-1;ft++)for(let gt=1;gt<this.height-1;gt++){const mt=this.#n(gt,ft);this.internalIDs.includes(ot[mt])&&ot[mt]!==this.id&&nt++}return{number:this.internalIDs.length-1,surface:nt}})}get borders(){return this.#e("borders",()=>{const nt=this.map,ot=nt.data,ft=new Set,gt=new Map,mt=new Set,yt=[1,0,-1,0],_t=[0,1,0,-1];for(let St=this.origin.column;St<=this.origin.column+this.width;St++)for(let At=this.origin.row;At<=this.origin.row+this.height;At++){const Ct=St+At*nt.width;if(ot[Ct]===this.id)for(let Ot=0;Ot<4;Ot++){const Dt=St+yt[Ot],Ut=At+_t[Ot];if(Dt>=0&&Ut>=0&&Dt<nt.width&&Ut<nt.height){const Xt=Dt+Ut*nt.width;if(ot[Xt]!==this.id&&!mt.has(Xt)){mt.add(Xt),ft.add(ot[Xt]);let Pt=gt.get(ot[Xt]);Pt?gt.set(ot[Xt],++Pt):gt.set(ot[Xt],1)}}}}return Array.from(ft).map(St=>({connectedID:St,length:gt.get(St)}))})}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get filledSurface(){return this.surface+this.holesInfo.surface}get solidity(){return this.surface/this.convexHull.surface}get convexHull(){return this.#e("convexHull",()=>getConvexHull(this.getMask()))}get mbr(){return this.#e("mbr",()=>getMbr(this.getMask()))}get roundness(){return 4*this.surface/(Math.PI*this.feret.maxDiameter.length**2)}get feret(){return this.#e("feret",()=>getFeret(this.getMask()))}toJSON(){return{id:this.id,origin:this.origin,height:this.height,width:this.width,surface:this.surface,eqpc:this.eqpc,ped:this.ped,feret:this.feret,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter,convexHull:this.convexHull,mbr:this.mbr,filledSurface:this.filledSurface,centroid:this.centroid}}get centroid(){return this.#e("centroid",()=>{const ot=this.map.data;let ft=0,gt=0;for(let mt=0;mt<this.width;mt++)for(let yt=0;yt<this.height;yt++){const _t=this.#n(yt,mt);ot[_t]===this.id&&(ft+=mt,gt+=yt)}return{column:ft/this.surface+this.origin.column,row:gt/this.surface+this.origin.row}})}#e(nt,ot){if(this.#t[nt]===void 0){const ft=ot();return this.#t[nt]=ft,ft}return this.#t[nt]}#n(nt,ot){const ft=this.map;return(nt+this.origin.row)*ft.width+ot+this.origin.column}*points(nt){for(let ot=0;ot<this.height;ot++)for(let ft=0;ft<this.width;ft++){const gt=(ot+this.origin.row)*this.map.width+ft+this.origin.column;this.map.data[gt]===this.id&&(nt?yield{column:this.origin.column+ft,row:this.origin.row+ot}:yield{column:ft,row:ot})}}}function computeRois(tt){const nt=tt.getMap(),ot=new Array(nt.nbPositive),ft=new Array(nt.nbNegative);for(let gt=0;gt<nt.nbPositive;gt++)ot[gt]={minRow:nt.height,minColumn:nt.width,maxRow:-1,maxColumn:-1,surface:0,id:gt+1};for(let gt=0;gt<nt.nbNegative;gt++)ft[gt]={borderLengths:[],borderIDs:[],minRow:nt.height,minColumn:nt.width,maxRow:-1,maxColumn:-1,surface:0,id:-gt-1};for(let gt=0;gt<nt.height;gt++)for(let mt=0;mt<nt.width;mt++){const yt=tt.getMapValue(mt,gt);if(yt===0)continue;let _t;yt<0?_t=ft[-yt-1]:_t=ot[yt-1],_t.surface++,gt<_t.minRow&&(_t.minRow=gt),gt>_t.maxRow&&(_t.maxRow=gt),mt<_t.minColumn&&(_t.minColumn=mt),mt>_t.maxColumn&&(_t.maxColumn=mt)}tt.whiteRois=new Array(nt.nbPositive),tt.blackRois=new Array(nt.nbNegative);for(let gt=0;gt<nt.nbNegative;gt++){const mt=ft[gt].maxColumn-ft[gt].minColumn+1,yt=ft[gt].maxRow-ft[gt].minRow+1,_t={row:ft[gt].minRow,column:ft[gt].minColumn},Tt=ft[gt].id,St=ft[gt].surface,At=new Roi(nt,Tt,mt,yt,_t,St);tt.blackRois[gt]=At}for(let gt=0;gt<nt.nbPositive;gt++){const mt=ot[gt].maxColumn-ot[gt].minColumn+1,yt=ot[gt].maxRow-ot[gt].minRow+1,_t={row:ot[gt].minRow,column:ot[gt].minColumn},Tt=ot[gt].id,St=ot[gt].surface,At=new Roi(nt,Tt,mt,yt,_t,St);tt.whiteRois[gt]=At}}const RoiKind={WHITE:"white"};function getRois(tt,nt={}){const{minSurface:ot=0,maxSurface:ft=Number.MAX_SAFE_INTEGER,kind:gt="white"}=nt;return tt.blackRois.length===0&&tt.whiteRois.length===0&&computeRois(tt),z(gt).with("black",()=>tt.blackRois).with("white",()=>tt.whiteRois).with("bw",()=>[...tt.whiteRois,...tt.blackRois]).exhaustive().filter(yt=>yt.surface>=ot&&yt.surface<=ft)}class RoiMapManager{map;whiteRois;blackRois;constructor(nt){this.map=nt,this.whiteRois=[],this.blackRois=[]}getMap(){return this.map}getMapValue(nt,ot){return this.map.data[this.map.width*ot+nt]}getMapMatrix(){return Matrix.from1DArray(this.map.height,this.map.width,this.map.data).to2DArray()}getRois(nt={}){return getRois(this,nt)}getRoiById(nt){const ft=this.getRois({kind:"bw"}).find(gt=>gt.id===nt);if(!ft)throw new Error(`invalid ID: ${nt}`);return ft}static fromMask(nt,ot={}){return fromMask(nt,ot)}}function fromMask(tt,nt={}){const{allowCorners:ot=!1}=nt,ft=65535,gt=2**31-1,mt=-2147483647,yt=new Int32Array(tt.size);let _t=0,Tt=0;const St=new Uint16Array(ft+1),At=new Uint16Array(ft+1);for(let Ot=0;Ot<tt.width;Ot++)for(let Dt=0;Dt<tt.height;Dt++)yt[Dt*tt.width+Ot]===0&&Ct(Ot,Dt);function Ct(Ot,Dt){let Ut=0,Xt=0;const Pt=tt.getBit(Ot,Dt),Jt=Pt?++_t:--Tt;for(assert(_t<=gt&&Tt>=mt,"too many regions of interest"),St[0]=Ot,At[0]=Dt;Ut<=Xt;){const Kt=St[Ut&ft],Nt=At[Ut&ft];yt[Nt*tt.width+Kt]=Jt,Kt>0&&yt[Nt*tt.width+Kt-1]===0&&tt.getBit(Kt-1,Nt)===Pt&&(Xt++,St[Xt&ft]=Kt-1,At[Xt&ft]=Nt,yt[Nt*tt.width+Kt-1]=mt),Nt>0&&yt[(Nt-1)*tt.width+Kt]===0&&tt.getBit(Kt,Nt-1)===Pt&&(Xt++,St[Xt&ft]=Kt,At[Xt&ft]=Nt-1,yt[(Nt-1)*tt.width+Kt]=mt),Kt<tt.width-1&&yt[Nt*tt.width+Kt+1]===0&&tt.getBit(Kt+1,Nt)===Pt&&(Xt++,St[Xt&ft]=Kt+1,At[Xt&ft]=Nt,yt[Nt*tt.width+Kt+1]=mt),Nt<tt.height-1&&yt[(Nt+1)*tt.width+Kt]===0&&tt.getBit(Kt,Nt+1)===Pt&&(Xt++,St[Xt&ft]=Kt,At[Xt&ft]=Nt+1,yt[(Nt+1)*tt.width+Kt]=mt),ot&&(Kt>0&&Nt>0&&yt[(Nt-1)*tt.width+Kt-1]===0&&tt.getBit(Kt-1,Nt-1)===Pt&&(Xt++,St[Xt&ft]=Kt-1,At[Xt&ft]=Nt-1,yt[(Nt-1)*tt.width+Kt-1]=mt),Kt<tt.width-1&&Nt>0&&yt[(Nt-1)*tt.width+Kt+1]===0&&tt.getBit(Kt+1,Nt-1)===Pt&&(Xt++,St[Xt&ft]=Kt+1,At[Xt&ft]=Nt-1,yt[(Nt-1)*tt.width+Kt+1]=mt),Kt>0&&Nt<tt.height-1&&yt[(Nt+1)*tt.width+Kt-1]===0&&tt.getBit(Kt-1,Nt+1)===Pt&&(Xt++,St[Xt&ft]=Kt-1,At[Xt&ft]=Nt+1,yt[(Nt+1)*tt.width+Kt-1]=mt),Kt<tt.width-1&&Nt<tt.height-1&&yt[(Nt+1)*tt.width+Kt+1]===0&&tt.getBit(Kt+1,Nt+1)===Pt&&(Xt++,St[Xt&ft]=Kt+1,At[Xt&ft]=Nt+1,yt[(Nt+1)*tt.width+Kt+1]=mt)),Ut++,assert(Xt-Ut<=ft,"fromMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMapManager({width:tt.width,height:tt.height,data:yt,nbNegative:Math.abs(Tt),nbPositive:_t})}function commonjsRequire(tt){throw new Error('Could not dynamically require "'+tt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,(function(tt,nt){(function(ot){tt.exports=ot()})(function(){return(function ot(ft,gt,mt){function yt(St,At){if(!gt[St]){if(!ft[St]){var Ct=typeof commonjsRequire=="function"&&commonjsRequire;if(!At&&Ct)return Ct(St,!0);if(_t)return _t(St,!0);var Ot=new Error("Cannot find module '"+St+"'");throw Ot.code="MODULE_NOT_FOUND",Ot}var Dt=gt[St]={exports:{}};ft[St][0].call(Dt.exports,function(Ut){var Xt=ft[St][1][Ut];return yt(Xt||Ut)},Dt,Dt.exports,ot,ft,gt,mt)}return gt[St].exports}for(var _t=typeof commonjsRequire=="function"&&commonjsRequire,Tt=0;Tt<mt.length;Tt++)yt(mt[Tt]);return yt})({1:[function(ot,ft,gt){var mt,yt,_t,Tt,St,At=function(Ot,Dt){for(var Ut in Dt)Ct.call(Dt,Ut)&&(Ot[Ut]=Dt[Ut]);function Xt(){this.constructor=Ot}return Xt.prototype=Dt.prototype,Ot.prototype=new Xt,Ot.__super__=Dt.prototype,Ot},Ct={}.hasOwnProperty;mt=ot("./PriorityQueue/AbstractPriorityQueue"),yt=ot("./PriorityQueue/ArrayStrategy"),Tt=ot("./PriorityQueue/BinaryHeapStrategy"),_t=ot("./PriorityQueue/BHeapStrategy"),St=(function(Ot){At(Dt,Ot);function Dt(Ut){Ut||(Ut={}),Ut.strategy||(Ut.strategy=Tt),Ut.comparator||(Ut.comparator=function(Xt,Pt){return(Xt||0)-(Pt||0)}),Dt.__super__.constructor.call(this,Ut)}return Dt})(mt),St.ArrayStrategy=yt,St.BinaryHeapStrategy=Tt,St.BHeapStrategy=_t,ft.exports=St},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(ot,ft,gt){ft.exports=(function(){function mt(yt){var _t;if(yt?.strategy==null)throw"Must pass options.strategy, a strategy";if(yt?.comparator==null)throw"Must pass options.comparator, a comparator";this.priv=new yt.strategy(yt),this.length=(yt!=null&&(_t=yt.initialValues)!=null?_t.length:void 0)||0}return mt.prototype.queue=function(yt){this.length++,this.priv.queue(yt)},mt.prototype.dequeue=function(yt){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},mt.prototype.peek=function(yt){if(!this.length)throw"Empty queue";return this.priv.peek()},mt.prototype.clear=function(){return this.length=0,this.priv.clear()},mt})()},{}],3:[function(ot,ft,gt){var mt;mt=function(yt,_t,Tt){var St,At,Ct;for(At=0,St=yt.length;At<St;)Ct=At+St>>>1,Tt(yt[Ct],_t)>=0?At=Ct+1:St=Ct;return At},ft.exports=(function(){function yt(_t){var Tt;this.options=_t,this.comparator=this.options.comparator,this.data=((Tt=this.options.initialValues)!=null?Tt.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return yt.prototype.queue=function(_t){var Tt;Tt=mt(this.data,_t,this.comparator),this.data.splice(Tt,0,_t)},yt.prototype.dequeue=function(){return this.data.pop()},yt.prototype.peek=function(){return this.data[this.data.length-1]},yt.prototype.clear=function(){this.data.length=0},yt})()},{}],4:[function(ot,ft,gt){ft.exports=(function(){function mt(yt){var _t,Tt,St,At,Ct,Ot,Dt,Ut;for(this.comparator=yt?.comparator||function(Xt,Pt){return Xt-Pt},this.pageSize=yt?.pageSize||512,this.length=0,Dt=0;1<<Dt<this.pageSize;)Dt+=1;if(1<<Dt!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=Dt,this._emptyMemoryPageTemplate=_t=[],Tt=0,Ct=this.pageSize;0<=Ct?Tt<Ct:Tt>Ct;0<=Ct?++Tt:--Tt)_t.push(null);if(this._memory=[],this._mask=this.pageSize-1,yt.initialValues)for(Ot=yt.initialValues,St=0,At=Ot.length;St<At;St++)Ut=Ot[St],this.queue(Ut)}return mt.prototype.queue=function(yt){this.length+=1,this._write(this.length,yt),this._bubbleUp(this.length,yt)},mt.prototype.dequeue=function(){var yt,_t;return yt=this._read(1),_t=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,_t),this._bubbleDown(1,_t)),yt},mt.prototype.peek=function(){return this._read(1)},mt.prototype.clear=function(){this.length=0,this._memory.length=0},mt.prototype._write=function(yt,_t){var Tt;for(Tt=yt>>this._shift;Tt>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[Tt][yt&this._mask]=_t},mt.prototype._read=function(yt){return this._memory[yt>>this._shift][yt&this._mask]},mt.prototype._bubbleUp=function(yt,_t){var Tt,St,At,Ct;for(Tt=this.comparator;yt>1&&(St=yt&this._mask,yt<this.pageSize||St>3?At=yt&~this._mask|St>>1:St<2?(At=yt-this.pageSize>>this._shift,At+=At&~(this._mask>>1),At|=this.pageSize>>1):At=yt-2,Ct=this._read(At),!(Tt(Ct,_t)<0));)this._write(At,_t),this._write(yt,Ct),yt=At},mt.prototype._bubbleDown=function(yt,_t){var Tt,St,At,Ct,Ot;for(Ot=this.comparator;yt<this.length;)if(yt>this._mask&&!(yt&this._mask-1)?Tt=St=yt+2:yt&this.pageSize>>1?(Tt=(yt&~this._mask)>>1,Tt|=yt&this._mask>>1,Tt=Tt+1<<this._shift,St=Tt+1):(Tt=yt+(yt&this._mask),St=Tt+1),Tt!==St&&St<=this.length)if(At=this._read(Tt),Ct=this._read(St),Ot(At,_t)<0&&Ot(At,Ct)<=0)this._write(Tt,_t),this._write(yt,At),yt=Tt;else if(Ot(Ct,_t)<0)this._write(St,_t),this._write(yt,Ct),yt=St;else break;else if(Tt<=this.length)if(At=this._read(Tt),Ot(At,_t)<0)this._write(Tt,_t),this._write(yt,At),yt=Tt;else break;else break},mt})()},{}],5:[function(ot,ft,gt){ft.exports=(function(){function mt(yt){var _t;this.comparator=yt?.comparator||function(Tt,St){return Tt-St},this.length=0,this.data=((_t=yt.initialValues)!=null?_t.slice(0):void 0)||[],this._heapify()}return mt.prototype._heapify=function(){var yt,_t,Tt;if(this.data.length>0)for(yt=_t=1,Tt=this.data.length;1<=Tt?_t<Tt:_t>Tt;yt=1<=Tt?++_t:--_t)this._bubbleUp(yt)},mt.prototype.queue=function(yt){this.data.push(yt),this._bubbleUp(this.data.length-1)},mt.prototype.dequeue=function(){var yt,_t;return _t=this.data[0],yt=this.data.pop(),this.data.length>0&&(this.data[0]=yt,this._bubbleDown(0)),_t},mt.prototype.peek=function(){return this.data[0]},mt.prototype.clear=function(){this.length=0,this.data.length=0},mt.prototype._bubbleUp=function(yt){for(var _t,Tt;yt>0&&(_t=yt-1>>>1,this.comparator(this.data[yt],this.data[_t])<0);)Tt=this.data[_t],this.data[_t]=this.data[yt],this.data[yt]=Tt,yt=_t},mt.prototype._bubbleDown=function(yt){var _t,Tt,St,At,Ct;for(_t=this.data.length-1;Tt=(yt<<1)+1,At=Tt+1,St=yt,Tt<=_t&&this.comparator(this.data[Tt],this.data[St])<0&&(St=Tt),At<=_t&&this.comparator(this.data[At],this.data[St])<0&&(St=At),St!==yt;)Ct=this.data[St],this.data[St]=this.data[yt],this.data[yt]=Ct,yt=St},mt})()},{}]},{},[1])(1)})})(priorityQueue)),priorityQueue.exports}requirePriorityQueue();const targetRatio=.628,minAspectRatio=targetRatio*.98,maxAspectRatio=targetRatio*1.02;async function detectLeftPanelRect(tt){let nt;try{nt=await fetchURL(tt)}catch(jt){return console.error("❌ Failed to load image:",jt),null}const ot=nt.resize({width:1e3}),ft=Math.round(ot.width*.35),gt=ot.crop({origin:{column:0,row:0},width:ft,height:ot.height}),mt=gt.grey(),yt=cannyEdgeDetector(mt,{lowThreshold:.05,highThreshold:.07,gaussianBlurOptions:{sigma:.1}}),_t=yt.width,Tt=yt.height;let St=0;for(let jt=0;jt<_t;jt++)for(let kt=0;kt<Tt;kt++)yt.getBit(jt,kt)>0&&St++;if(St===0)return console.log("❌ No edges detected"),null;const At=9,Ct=Array(At).fill(Array(At).fill(1)),Ot=close(yt,{kernel:Ct,iterations:2}),Ut=RoiMapManager.fromMask(Ot).getRois({kind:RoiKind.WHITE});if(Ut.length===0)return console.log("No ROIs found after processing."),null;let Xt=null;const Pt=[];for(const jt of Ut){const{width:kt,height:Zt,origin:Ft}=jt,It=kt*Zt;if(Ft.column>gt.width*.5)continue;if(It>=gt.width*gt.height*.4)Pt.push(jt);else continue;const Wt=kt/Zt;Wt<minAspectRatio||Wt>maxAspectRatio||(!Xt||It>Xt.surface)&&(Xt=jt)}if(!Xt){if(console.log("❌ No ROI passed all the filters."),Pt.length>0){let jt=null,kt=0;for(const rn of Pt)(rn.width*rn.height>kt||jt===null)&&(jt=rn,kt=rn.width*rn.height);const Zt=jt.origin,Ft=jt.height,It=Ft*targetRatio,Wt=nt.width/ot.width,Qt=nt.height/ot.height,me={x:Math.round(Zt.column*Wt)*100/nt.width,y:Math.round(Zt.row*Qt)*100/nt.height,width:Math.round(It*Wt)*100/nt.width,height:Math.round(Ft*Qt)*100/nt.height};return console.log("✅ Successfully detected candidate panel:",me),me}return null}const Jt=nt.width/ot.width,Kt=nt.height/ot.height,Nt={x:Math.round(Xt.origin.column*Jt)*100/nt.width,y:Math.round(Xt.origin.row*Kt)*100/nt.height,width:Math.round(Xt.width*Jt)*100/nt.width,height:Math.round(Xt.height*Kt)*100/nt.height};return console.log("✅ Successfully detected panel:",Nt),Nt}const Wrapper$1=dt.div`
  width: 100vw;
  min-height: 100vh;
  padding: ${theme.spacing[4]};
  background-color: ${theme.colors.background};
  box-sizing: border-box;
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[8]};
  }
`,Container$1=dt.div`
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
`,Header$1=dt.div`
  text-align: center;
  margin-bottom: ${theme.spacing[6]};
  
  ${media.sm} {
    margin-bottom: ${theme.spacing[8]};
  }
  
  ${media.md} {
    margin-bottom: ${theme.spacing[12]};
  }
`,Title$1=dt.h1`
  font-size: ${theme.typography.fontSize["3xl"]};
  font-weight: ${theme.typography.fontWeight.bold};
  color: ${theme.colors.gray[800]};
  margin-bottom: ${theme.spacing[2]};
  line-height: ${theme.typography.lineHeight.tight};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["4xl"]};
  }
  
  ${media.md} {
    font-size: ${theme.typography.fontSize["5xl"]};
  }
`,Subtitle$1=dt.p`
  font-size: ${theme.typography.fontSize.base};
  color: ${theme.colors.gray[500]};
  margin: 0;
  line-height: ${theme.typography.lineHeight.relaxed};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.lg};
  }
`,CropContainer=dt.div`
  background: ${theme.colors.surface};
  border-radius: ${theme.borderRadius["2xl"]};
  padding: 0;
  box-shadow: ${theme.boxShadow.xl};
  margin-bottom: ${theme.spacing[8]};
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[8]};
  }
`,CropArea=dt.div`
  display: flex;
  justify-content: center;
  
  .ReactCrop {
    max-width: 100%;
    max-height: 400px;
    
    ${media.sm} {
      max-height: 500px;
    }
    
    ${media.md} {
      max-height: 600px;
    }
  }
  
  .ReactCrop__image {
    max-width: 100%;
    max-height: 400px;
    object-fit: contain;
    border-radius: ${theme.borderRadius.lg};
    
    ${media.sm} {
      max-height: 500px;
    }
    
    ${media.md} {
      max-height: 600px;
    }
  }
  
  /* Improve crop handle visibility on mobile */
  .ReactCrop__crop-selection {
    border: 2px solid ${theme.colors.primary[500]};
  }
  
  .ReactCrop__drag-handle {
    background-color: ${theme.colors.primary[500]};
    border: 2px solid white;
    width: 20px;
    height: 20px;
    
    ${media.sm} {
      width: 16px;
      height: 16px;
    }
  }
`,PreviewSection=dt.div`
  display: flex;
  justify-content: center;
  margin-bottom: 2rem;
`,PreviewBox=dt.div`
  background: ${theme.colors.surface};
  border: 1px solid ${theme.colors.gray[200]};
  border-radius: ${theme.borderRadius.xl};
  padding: ${theme.spacing[6]};
  text-align: center;
  max-width: 600px;
  width: 100%;
  
  ${media.sm} {
    max-width: 500px;
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    max-width: 600px;
    padding: ${theme.spacing[8]};
  }
`,PreviewTitle=dt.h3`
  color: ${theme.colors.gray[700]};
  margin: 0 0 ${theme.spacing[6]} 0;
  font-size: ${theme.typography.fontSize.xl};
  font-weight: ${theme.typography.fontWeight.semibold};
`,PreviewCanvas=dt.canvas`
  max-width: 100%;
  border: 1px solid ${theme.colors.gray[200]};
  border-radius: ${theme.borderRadius.lg};
  touch-action: none; /* Prevent scrolling when touching canvas */
`,Footer$1=dt.div`
  display: flex;
  justify-content: center;
  gap: ${theme.spacing[4]};
  margin-top: ${theme.spacing[8]};
  
  /* Mobile: stack buttons vertically */
  flex-direction: column;
  align-items: center;
  gap: ${theme.spacing[3]};
  
  ${media.sm} {
    margin-top: ${theme.spacing[10]};
    flex-direction: row;
    gap: ${theme.spacing[4]};
  }
  
  ${media.md} {
    margin-top: ${theme.spacing[12]};
  }
`;async function canvasPreview(tt,nt,ot){const ft=nt.getContext("2d");if(!ft)throw new Error("No 2d context");const gt=tt.naturalWidth/tt.width,mt=tt.naturalHeight/tt.height,yt=window.devicePixelRatio;nt.width=Math.floor(ot.width*gt*yt),nt.height=Math.floor(ot.height*mt*yt),ft.scale(yt,yt),ft.imageSmoothingQuality="high";const _t=ot.x*gt,Tt=ot.y*mt;ft.drawImage(tt,_t,Tt,ot.width*gt,ot.height*mt,0,0,ot.width*gt,ot.height*mt)}const ProfileCropping=({profileImageUrl:tt,setCroppedImage:nt,onNext:ot,onBack:ft})=>{const[gt,mt]=reactExports.useState(),[yt,_t]=reactExports.useState(),[Tt]=reactExports.useState(2.72/4.33),St=reactExports.useRef(null),At=reactExports.useRef(null);reactExports.useEffect(()=>{yt?.width&&yt?.height&&St.current&&At.current&&canvasPreview(St.current,At.current,yt)},[yt]);const Ct=()=>{Dt()},Ot=reactExports.useCallback(async()=>{yt?.width&&yt?.height&&St.current&&At.current&&At.current.toBlob(Xt=>{Xt&&nt(Xt)},"image/jpeg",.95),ot()},[yt,nt,ot]),Dt=async()=>{const Ut=await detectLeftPanelRect(tt?.dataUrl||"");console.log(Ut);const Xt={x:Ut?.x||8,y:Ut?.y||11.7,width:Ut?.width||22,height:Ut?.height||70,unit:"%"};if(mt(Xt),St.current){const Pt=St.current,Jt={x:Xt.x*Pt.width/100,y:Xt.y*Pt.height/100,width:Xt.width*Pt.width/100,height:Xt.height*Pt.height/100,unit:"px"};_t(Jt)}};return tt?jsxRuntimeExports.jsx(Wrapper$1,{children:jsxRuntimeExports.jsxs(Container$1,{children:[jsxRuntimeExports.jsxs(Header$1,{children:[jsxRuntimeExports.jsx(Title$1,{children:"Crop Your Profile Image"}),jsxRuntimeExports.jsx(Subtitle$1,{children:"Adjust the crop area to focus on the important parts of your image"})]}),jsxRuntimeExports.jsx(CropContainer,{children:jsxRuntimeExports.jsx(CropArea,{children:tt&&jsxRuntimeExports.jsx(S$1,{crop:gt,onChange:(Ut,Xt)=>mt(Xt),onComplete:_t,aspect:Tt,keepSelection:!0,children:jsxRuntimeExports.jsx("img",{ref:St,alt:"Crop me",src:tt.dataUrl,onLoad:Ct})})})}),jsxRuntimeExports.jsx(PreviewSection,{children:jsxRuntimeExports.jsxs(PreviewBox,{children:[jsxRuntimeExports.jsx(PreviewTitle,{children:"Cropped Preview"}),jsxRuntimeExports.jsx(PreviewCanvas,{ref:At,style:{border:"1px solid black",objectFit:"contain",width:"100%",maxHeight:"350px"}})]})}),jsxRuntimeExports.jsxs(Footer$1,{children:[jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",fullWidth:!0,onClick:Ot,children:"Continue to Final Mapping"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"lg",fullWidth:!0,onClick:ft,children:"← Back to Upload"})]})]})}):jsxRuntimeExports.jsx(Wrapper$1,{children:jsxRuntimeExports.jsx(Container$1,{children:jsxRuntimeExports.jsxs(Header$1,{children:[jsxRuntimeExports.jsx(Title$1,{children:"Profile Cropping"}),jsxRuntimeExports.jsx(Subtitle$1,{children:"No image available for cropping"})]})})})},Wrapper=dt.div`
  width: 100vw;
  min-height: 100vh;
  padding: ${theme.spacing[4]};
  background-color: ${theme.colors.background};
  box-sizing: border-box;
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[8]};
  }
`,Container=dt.div`
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
`,Header=dt.div`
  text-align: center;
  margin-bottom: ${theme.spacing[6]};
  
  ${media.sm} {
    margin-bottom: ${theme.spacing[8]};
  }
  
  ${media.md} {
    margin-bottom: ${theme.spacing[12]};
  }
`,Title=dt.h1`
  font-size: ${theme.typography.fontSize["3xl"]};
  font-weight: ${theme.typography.fontWeight.bold};
  color: ${theme.colors.gray[800]};
  margin-bottom: ${theme.spacing[2]};
  line-height: ${theme.typography.lineHeight.tight};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["4xl"]};
  }
  
  ${media.md} {
    font-size: ${theme.typography.fontSize["5xl"]};
  }
`,Subtitle=dt.p`
  font-size: ${theme.typography.fontSize.base};
  color: ${theme.colors.gray[500]};
  margin: 0;
  line-height: ${theme.typography.lineHeight.relaxed};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.lg};
  }
`,ContentArea=dt.div`
  background: ${theme.colors.surface};
  border-radius: ${theme.borderRadius["2xl"]};
  padding: ${theme.spacing[6]};
  box-shadow: ${theme.boxShadow.xl};
  
  ${media.sm} {
    padding: ${theme.spacing[8]};
  }
  
  ${media.md} {
    padding: ${theme.spacing[12]};
  }
`,MappingArea=dt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: ${theme.spacing[6]};
  
  ${media.sm} {
    gap: ${theme.spacing[8]};
  }
`,CanvasContainer=dt.div`
  position: relative;
  border: 2px solid ${theme.colors.gray[200]};
  border-radius: ${theme.borderRadius.xl};
  overflow: hidden;
  background: ${theme.colors.gray[50]};
  touch-action: none; /* Prevent scrolling when interacting with canvas */
`,ControlPanel=dt.div`
  width: 100%;
  max-width: 800px;
  background: ${theme.colors.gray[50]};
  border-radius: ${theme.borderRadius.xl};
  padding: ${theme.spacing[4]};
  
  ${media.sm} {
    padding: ${theme.spacing[6]};
  }
`,ControlGrid=dt.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: ${theme.spacing[6]};
  
  ${media.sm} {
    grid-template-columns: repeat(2, 1fr);
  }
`,ControlsHeader=dt.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: ${theme.spacing[4]};
  margin-bottom: ${theme.spacing[6]};
`,ControlTitle=dt.h3`
  margin: 0;
  color: ${theme.colors.gray[700]};
  font-size: ${theme.typography.fontSize.lg};
  font-weight: ${theme.typography.fontWeight.semibold};
  text-align: center;
`,ToggleButton=dt.button`
  display: flex;
  align-items: center;
  gap: ${theme.spacing[2]};
  padding: ${theme.spacing[2]} ${theme.spacing[4]};
  background-color: ${theme.colors.gray[100]};
  border: 1px solid ${theme.colors.gray[200]};
  border-radius: ${theme.borderRadius.lg};
  color: ${theme.colors.gray[700]};
  font-size: ${theme.typography.fontSize.sm};
  font-weight: ${theme.typography.fontWeight.medium};
  cursor: pointer;
  transition: all ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  min-height: ${theme.touchTarget.min};
  
  &:hover {
    background-color: ${theme.colors.gray[200]};
    border-color: ${theme.colors.gray[300]};
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.base};
  }
`,ToggleIcon=dt.span`
  transition: transform ${theme.animation.duration.normal} ${theme.animation.easing.ease};
  transform: ${({$isOpen:tt})=>tt?"rotate(180deg)":"rotate(0deg)"};
  font-size: ${theme.typography.fontSize.sm};
`,SliderLabel=dt.div`
  font-size: ${theme.typography.fontSize.xs};
  color: ${theme.colors.gray[500]};
  margin-bottom: ${theme.spacing[1]};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.sm};
  }
`,ControlGroup=dt.div`
  margin-bottom: ${theme.spacing[6]};
  
  &:last-child {
    margin-bottom: 0;
  }
`,ControlLabel=dt.label`
  display: block;
  font-weight: ${theme.typography.fontWeight.semibold};
  color: ${theme.colors.gray[700]};
  margin-bottom: ${theme.spacing[2]};
  font-size: ${theme.typography.fontSize.sm};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.base};
  }
`,ControlRow=dt.div`
  display: flex;
  gap: ${theme.spacing[4]};
  align-items: center;
`,SliderContainer=dt.div`
  flex: 1;
`,Slider=dt.input`
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: ${theme.colors.gray[200]};
  outline: none;
  -webkit-appearance: none;
  touch-action: none; /* Prevent page scrolling when dragging */
  
  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: ${theme.colors.primary[500]};
    cursor: pointer;
    border: 3px solid white;
    box-shadow: ${theme.boxShadow.md};
    transition: all ${theme.animation.duration.fast} ${theme.animation.easing.ease};
    
    &:hover {
      transform: scale(1.1);
      box-shadow: ${theme.boxShadow.lg};
    }
    
    &:active {
      transform: scale(1.2);
    }
  }
  
  &::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: ${theme.colors.primary[500]};
    cursor: pointer;
    border: 3px solid white;
    box-shadow: ${theme.boxShadow.md};
  }
  
  ${media.sm} {
    &::-webkit-slider-thumb {
      width: 20px;
      height: 20px;
    }
    
    &::-moz-range-thumb {
      width: 20px;
      height: 20px;
    }
  }
`,ValueDisplay=dt.span`
  font-size: ${theme.typography.fontSize.xs};
  color: ${theme.colors.gray[500]};
  min-width: 45px;
  text-align: right;
  font-weight: ${theme.typography.fontWeight.medium};
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.sm};
    min-width: 40px;
  }
`,PlaceholderIcon=dt.div`
  font-size: ${theme.typography.fontSize["5xl"]};
  margin-bottom: ${theme.spacing[6]};
  color: ${theme.colors.primary[500]};
  text-align: center;
  
  ${media.sm} {
    font-size: 5rem;
    margin-bottom: ${theme.spacing[8]};
  }
`,PlaceholderText=dt.h3`
  color: ${theme.colors.gray[800]};
  margin: 0 0 ${theme.spacing[4]} 0;
  font-size: ${theme.typography.fontSize.xl};
  font-weight: ${theme.typography.fontWeight.semibold};
  text-align: center;
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize["2xl"]};
  }
`,PlaceholderSubtext=dt.p`
  color: ${theme.colors.gray[500]};
  margin: 0;
  font-size: ${theme.typography.fontSize.base};
  line-height: ${theme.typography.lineHeight.relaxed};
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  
  ${media.sm} {
    font-size: ${theme.typography.fontSize.lg};
  }
`,Footer=dt.div`
  display: flex;
  justify-content: center;
  gap: ${theme.spacing[4]};
  margin-top: ${theme.spacing[8]};
  
  /* Mobile: stack buttons vertically */
  flex-direction: column;
  align-items: center;
  gap: ${theme.spacing[3]};
  
  ${media.sm} {
    margin-top: ${theme.spacing[10]};
    flex-direction: row;
    gap: ${theme.spacing[4]};
  }
  
  ${media.md} {
    margin-top: ${theme.spacing[12]};
  }
`,MappingFinalImage=({selectedTemplate:tt,croppedImage:nt,onBack:ot,onReset:ft})=>{const gt=reactExports.useRef(null),mt=reactExports.useRef(null),yt=reactExports.useRef(null),[_t,Tt]=reactExports.useState(!1),[St,At]=reactExports.useState(!1),[Ct,Ot]=reactExports.useState(""),[Dt,Ut]=reactExports.useState(!1),Xt=()=>tt?.mapping?{topLeft:tt.mapping.topLeft,topRight:tt.mapping.topRight,bottomLeft:tt.mapping.bottomLeft,bottomRight:tt.mapping.bottomRight}:{topLeft:{x:20,y:20},topRight:{x:80,y:20},bottomLeft:{x:20,y:80},bottomRight:{x:80,y:80}},[Pt,Jt]=reactExports.useState(Xt()),[Kt,Nt]=reactExports.useState({width:400,height:600});reactExports.useEffect(()=>{if(nt){const Ft=URL.createObjectURL(nt);return Ot(Ft),()=>URL.revokeObjectURL(Ft)}},[nt]),reactExports.useEffect(()=>{tt?.mapping&&Jt({topLeft:tt.mapping.topLeft,topRight:tt.mapping.topRight,bottomLeft:tt.mapping.bottomLeft,bottomRight:tt.mapping.bottomRight})},[tt]);const jt=reactExports.useCallback(()=>{const Ft=gt.current,It=Ft?.getContext("2d"),Wt=mt.current,Qt=yt.current;if(!Ft||!It||!Wt||!Qt||!_t||!St)return;It.clearRect(0,0,Ft.width,Ft.height);const me={topLeft:{x:Pt.topLeft.x/100*Ft.width,y:Pt.topLeft.y/100*Ft.height},topRight:{x:Pt.topRight.x/100*Ft.width,y:Pt.topRight.y/100*Ft.height},bottomLeft:{x:Pt.bottomLeft.x/100*Ft.width,y:Pt.bottomLeft.y/100*Ft.height},bottomRight:{x:Pt.bottomRight.x/100*Ft.width,y:Pt.bottomRight.y/100*Ft.height}};It.imageSmoothingEnabled=!0,It.imageSmoothingQuality="high",It.globalCompositeOperation="source-over";const rn=me.topLeft,Dn=me.topRight,Mn=me.bottomLeft,$n=me.bottomRight,on=(nn,pn)=>{const gn=(1-nn)*(1-pn)*rn.x+nn*(1-pn)*Dn.x+(1-nn)*pn*Mn.x+nn*pn*$n.x,Be=(1-nn)*(1-pn)*rn.y+nn*(1-pn)*Dn.y+(1-nn)*pn*Mn.y+nn*pn*$n.y;return{x:gn,y:Be}},yn=(nn,pn)=>{const[gn,Be,xn]=nn,[qn,Bn,Yn]=pn,Kn=gn.x*(Be.y-xn.y)+Be.x*(xn.y-gn.y)+xn.x*(gn.y-Be.y);if(Math.abs(Kn)<1e-10)return null;const Qn=(qn.x*(Be.y-xn.y)+Bn.x*(xn.y-gn.y)+Yn.x*(gn.y-Be.y))/Kn,Jn=(qn.y*(Be.y-xn.y)+Bn.y*(xn.y-gn.y)+Yn.y*(gn.y-Be.y))/Kn,ei=(qn.x*(xn.x-Be.x)+Bn.x*(gn.x-xn.x)+Yn.x*(Be.x-gn.x))/Kn,Ln=(qn.y*(xn.x-Be.x)+Bn.y*(gn.x-xn.x)+Yn.y*(Be.x-gn.x))/Kn,An=(qn.x*(Be.x*xn.y-xn.x*Be.y)+Bn.x*(xn.x*gn.y-gn.x*xn.y)+Yn.x*(gn.x*Be.y-Be.x*gn.y))/Kn,gi=(qn.y*(Be.x*xn.y-xn.x*Be.y)+Bn.y*(xn.x*gn.y-gn.x*xn.y)+Yn.y*(gn.x*Be.y-Be.x*gn.y))/Kn;return{a:Qn,b:Jn,c:ei,d:Ln,e:An,f:gi}},bn=Qt.naturalWidth||Qt.width,On=Qt.naturalHeight||Qt.height,Ht=24,sn=.02;for(let nn=0;nn<Ht;nn++)for(let pn=0;pn<Ht;pn++){const gn=pn/Ht,Be=(pn+1)/Ht,xn=nn/Ht,qn=(nn+1)/Ht,Bn=Math.max(0,gn-sn),Yn=Math.min(1,Be+sn),Kn=Math.max(0,xn-sn),Qn=Math.min(1,qn+sn),Jn=Bn*bn,ei=Kn*On,Ln=(Yn-Bn)*bn,An=(Qn-Kn)*On,gi=on(Bn,Kn),Xn=on(Yn,Kn),ri=on(Bn,Qn),cn=on(Yn,Qn),Pn=[{x:Jn,y:ei},{x:Jn+Ln,y:ei},{x:Jn+Ln,y:ei+An}],Vn=[gi,Xn,cn],Gn=yn(Pn,Vn);if(Gn){It.save();const zn=2;It.beginPath(),It.moveTo(Vn[0].x-zn,Vn[0].y-zn),It.lineTo(Vn[1].x+zn,Vn[1].y-zn),It.lineTo(Vn[2].x+zn,Vn[2].y+zn),It.closePath(),It.clip(),It.setTransform(Gn.a,Gn.b,Gn.c,Gn.d,Gn.e,Gn.f),It.drawImage(Qt,0,0),It.restore()}const ai=[{x:Jn,y:ei},{x:Jn+Ln,y:ei+An},{x:Jn,y:ei+An}],oi=[gi,cn,ri],fi=yn(ai,oi);if(fi){It.save();const zn=2;It.beginPath(),It.moveTo(oi[0].x-zn,oi[0].y-zn),It.lineTo(oi[1].x+zn,oi[1].y+zn),It.lineTo(oi[2].x-zn,oi[2].y+zn),It.closePath(),It.clip(),It.setTransform(fi.a,fi.b,fi.c,fi.d,fi.e,fi.f),It.drawImage(Qt,0,0),It.restore()}}It.drawImage(Wt,0,0,Ft.width,Ft.height),It.fillStyle="#3b82f6",It.strokeStyle="#ffffff",It.lineWidth=2,Object.values(me).forEach(nn=>{It.beginPath(),It.arc(nn.x,nn.y,6,0,2*Math.PI),It.fill(),It.stroke()})},[Pt,_t,St]);reactExports.useEffect(()=>{jt()},[Kt,jt]),reactExports.useEffect(()=>{jt()},[jt]);const kt=(Ft,It,Wt)=>{Jt(Qt=>({...Qt,[Ft]:{...Qt[Ft],[It]:Wt}}))},Zt=reactExports.useCallback(()=>{const Ft=gt.current;if(!Ft)return;const It=document.createElement("a");It.download=`profile-mapping-${tt?.name||"template"}-${Date.now()}.png`,Ft.toBlob(Wt=>{if(Wt){const Qt=URL.createObjectURL(Wt);It.href=Qt,It.click(),URL.revokeObjectURL(Qt)}},"image/png",1)},[tt?.name]);return!tt||!nt?jsxRuntimeExports.jsx(Wrapper,{children:jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsxs(Header,{children:[jsxRuntimeExports.jsx(Title,{children:"Final Image Mapping"}),jsxRuntimeExports.jsx(Subtitle,{children:"Map your cropped profile image onto the selected template"})]}),jsxRuntimeExports.jsxs(ContentArea,{children:[jsxRuntimeExports.jsx(PlaceholderIcon,{children:"🎨"}),jsxRuntimeExports.jsx(PlaceholderText,{children:"Missing Required Data"}),jsxRuntimeExports.jsx(PlaceholderSubtext,{children:"Please ensure you have both a selected template and a cropped image before proceeding to mapping."})]}),jsxRuntimeExports.jsxs(Footer,{children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"lg",fullWidth:!0,onClick:ot,children:"← Back to Cropping"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"lg",fullWidth:!0,onClick:ft,children:"🔄 Start Over"})]})]})}):jsxRuntimeExports.jsx(Wrapper,{children:jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsxs(Header,{children:[jsxRuntimeExports.jsx(Title,{children:"Final Image Mapping"}),jsxRuntimeExports.jsx(Subtitle,{children:"Adjust the perspective mapping of your cropped image onto the template"})]}),jsxRuntimeExports.jsx(ContentArea,{children:jsxRuntimeExports.jsxs(MappingArea,{children:[jsxRuntimeExports.jsxs(CanvasContainer,{children:[jsxRuntimeExports.jsx("canvas",{ref:gt,width:Kt.width,height:Kt.height,style:{display:"block",maxWidth:"100%",height:"auto"}}),jsxRuntimeExports.jsx("img",{ref:mt,src:tt.image,style:{display:"none"},onLoad:Ft=>{Tt(!0);const It=Ft.target;Nt({width:It.naturalWidth,height:It.naturalHeight})},alt:"Template"}),Ct&&jsxRuntimeExports.jsx("img",{ref:yt,src:Ct,style:{display:"none"},onLoad:()=>At(!0),alt:"Cropped"})]}),jsxRuntimeExports.jsxs(ControlPanel,{children:[jsxRuntimeExports.jsxs(ControlsHeader,{children:[jsxRuntimeExports.jsx(ControlTitle,{children:"Fine-tune Position"}),jsxRuntimeExports.jsxs(ToggleButton,{onClick:()=>Ut(!Dt),children:[jsxRuntimeExports.jsxs("span",{children:[Dt?"Hide":"Show"," Mapping Controls"]}),jsxRuntimeExports.jsx(ToggleIcon,{$isOpen:Dt,children:"▼"})]})]}),Dt&&jsxRuntimeExports.jsxs(ControlGrid,{children:[jsxRuntimeExports.jsxs(ControlGroup,{children:[jsxRuntimeExports.jsx(ControlLabel,{children:"Top Left Corner"}),jsxRuntimeExports.jsxs(ControlRow,{children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"X Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.topLeft.x,onChange:Ft=>kt("topLeft","x",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.topLeft.x,"%"]})]}),jsxRuntimeExports.jsxs(ControlRow,{style:{marginTop:"0.5rem"},children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"Y Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.topLeft.y,onChange:Ft=>kt("topLeft","y",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.topLeft.y,"%"]})]})]}),jsxRuntimeExports.jsxs(ControlGroup,{children:[jsxRuntimeExports.jsx(ControlLabel,{children:"Top Right Corner"}),jsxRuntimeExports.jsxs(ControlRow,{children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"X Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.topRight.x,onChange:Ft=>kt("topRight","x",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.topRight.x,"%"]})]}),jsxRuntimeExports.jsxs(ControlRow,{style:{marginTop:"0.5rem"},children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"Y Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.topRight.y,onChange:Ft=>kt("topRight","y",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.topRight.y,"%"]})]})]}),jsxRuntimeExports.jsxs(ControlGroup,{children:[jsxRuntimeExports.jsx(ControlLabel,{children:"Bottom Left Corner"}),jsxRuntimeExports.jsxs(ControlRow,{children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"X Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.bottomLeft.x,onChange:Ft=>kt("bottomLeft","x",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.bottomLeft.x,"%"]})]}),jsxRuntimeExports.jsxs(ControlRow,{style:{marginTop:"0.5rem"},children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"Y Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.bottomLeft.y,onChange:Ft=>kt("bottomLeft","y",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.bottomLeft.y,"%"]})]})]}),jsxRuntimeExports.jsxs(ControlGroup,{children:[jsxRuntimeExports.jsx(ControlLabel,{children:"Bottom Right Corner"}),jsxRuntimeExports.jsxs(ControlRow,{children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"X Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.bottomRight.x,onChange:Ft=>kt("bottomRight","x",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.bottomRight.x,"%"]})]}),jsxRuntimeExports.jsxs(ControlRow,{style:{marginTop:"0.5rem"},children:[jsxRuntimeExports.jsxs(SliderContainer,{children:[jsxRuntimeExports.jsx(SliderLabel,{children:"Y Position"}),jsxRuntimeExports.jsx(Slider,{type:"range",min:"0",max:"100",value:Pt.bottomRight.y,onChange:Ft=>kt("bottomRight","y",Number(Ft.target.value))})]}),jsxRuntimeExports.jsxs(ValueDisplay,{children:[Pt.bottomRight.y,"%"]})]})]})]})]})]})}),jsxRuntimeExports.jsxs(Footer,{children:[jsxRuntimeExports.jsx(Button,{variant:"primary",size:"lg",fullWidth:!0,onClick:Zt,children:"📥 Download Final Image"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",size:"lg",fullWidth:!0,onClick:ot,children:"← Back to Cropping"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"lg",fullWidth:!0,onClick:ft,children:"🔄 Start Over"})]})]})})},AppWrapper=dt.div`
  width: 100vw;
  min-height: 100vh;
  overflow-x: hidden;
`;function App(){const[tt,nt]=reactExports.useState(Step.SELECT_TEMPLATE),[ot,ft]=reactExports.useState(null),[gt,mt]=reactExports.useState(null),[yt,_t]=reactExports.useState(null),Tt=()=>{ft(null),mt(null),_t(null),nt(Step.SELECT_TEMPLATE)};return jsxRuntimeExports.jsxs(AppWrapper,{children:[tt===Step.SELECT_TEMPLATE&&jsxRuntimeExports.jsx(TemplateSelection,{selectedTemplate:ot,setSelectedTemplate:ft,onNext:()=>nt(Step.UPLOAD_PROFILE_IMAGE)}),tt===Step.UPLOAD_PROFILE_IMAGE&&jsxRuntimeExports.jsx(UploadProfileImage,{profileImageUrl:gt,setProfileImageUrl:mt,onNext:()=>nt(Step.PROFILE_CROPPING),onBack:()=>nt(Step.SELECT_TEMPLATE)}),tt===Step.PROFILE_CROPPING&&jsxRuntimeExports.jsx(ProfileCropping,{profileImageUrl:gt,setCroppedImage:_t,onNext:()=>nt(Step.MAPPING_FINAL_IMAGE),onBack:()=>nt(Step.UPLOAD_PROFILE_IMAGE)}),tt===Step.MAPPING_FINAL_IMAGE&&jsxRuntimeExports.jsx(MappingFinalImage,{selectedTemplate:ot,profileImageUrl:gt,croppedImage:yt,onBack:()=>nt(Step.PROFILE_CROPPING),onReset:Tt})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
